"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[17],{31017:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});var a=t(41604),o=t(78892),l=t(74132),i=t(52382),r=t(14041),s=t(99870),c=t.n(s),d=t(41747),u=t(7010),p=t(9642);const{Option:f}=i.A;function g(e){return(null==e?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}const v=(e,n)=>{var t,a;const{prefixCls:l,className:s,popupClassName:v,dropdownClassName:m,children:O,dataSource:h,dropdownStyle:C,dropdownRender:b,popupRender:w,onDropdownVisibleChange:y,onOpenChange:x,styles:A,classNames:S}=e,E=(0,d.A)(O),N=(null===(t=null==A?void 0:A.popup)||void 0===t?void 0:t.root)||C,j=(null===(a=null==S?void 0:S.popup)||void 0===a?void 0:a.root)||v||m,k=w||b,I=x||y;let V;1===E.length&&r.isValidElement(E[0])&&!g(E[0])&&([V]=E);const D=V?()=>V:void 0;let _;_=E.length&&g(E[0])?O:h?h.map((e=>{if(r.isValidElement(e))return e;switch(typeof e){case"string":return r.createElement(f,{key:e,value:e},e);case"object":{const{value:n}=e;return r.createElement(f,{key:n,value:n},e.text)}default:return}})):[];const{getPrefixCls:M}=r.useContext(p.QO),R=M("select",l),[F]=(0,u.YK)("SelectLike",null==N?void 0:N.zIndex);return r.createElement(i.A,Object.assign({ref:n,suffixIcon:null},(0,o.A)(e,["dataSource","dropdownClassName","popupClassName"]),{prefixCls:R,classNames:{popup:{root:j},root:null==S?void 0:S.root},styles:{popup:{root:Object.assign(Object.assign({},N),{zIndex:F})},root:null==A?void 0:A.root},className:c()(`${R}-auto-complete`,s),mode:i.A.SECRET_COMBOBOX_MODE_DO_NOT_USE,popupRender:k,onOpenChange:I,getInputElement:D}),_)};const m=r.forwardRef(v),{Option:O}=i.A,h=(0,l.A)(m,"dropdownAlign",(e=>(0,o.A)(e,["visible"]))),C=m;C.Option=O,C._InternalPanelDoNotUseOrYouWillBeFired=h;const b=C;var w=t(31085);function y(e){const[n,t]=(0,r.useState)([]);var o;if(e.container.config.readOnly)return(0,w.jsx)(a.A.Item,{label:e.container.config.label,children:(0,w.jsx)("div",{children:null!=(o=e.container.config.value)?o:"--"})});return(0,w.jsx)(a.A.Item,{label:e.container.config.label,required:e.container.config.required,help:e.container.config.helperText,validateStatus:e.container.config.validatemessage?"error":"",extra:e.container.config.validatemessage,children:(0,w.jsx)(b,{id:e.container.id,value:e.container.config.value||void 0,status:e.container.config.validatemessage?"error":"",onClick:()=>{!async function(){if(0===n.length){var a;const n=null==(a=e.container.config.fieldMetadata)||null==(a=a.datasource)?void 0:a.name;if(n){var o,l;console.log(e.container.config.fieldMetadata);const a=(null==(o=e.container.config.fieldMetadata)?void 0:o.datasource.parameters).reduce(((e,n)=>Object.assign({},e,{[n.name]:n.value})),{}),i=await window.PCore.getDataApiUtils().getData(n,{dataViewParameters:a});if(null!=(l=i.data)&&l.data){const e=i.data.data.map((e=>({label:e.pyLocalizedValue,value:e.pyFieldValue})));t(e)}}}}()},filterOption:(e,n)=>n.label.includes(e),onSelect:n=>{e.container.updateFieldValue(n),e.container.triggerFieldChange(n)},disabled:e.container.config.readOnly,placeholder:"Select...",style:{width:"100%"},options:n})})}}}]);