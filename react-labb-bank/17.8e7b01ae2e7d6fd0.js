"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[17],{31017:(e,n,t)=>{t.r(n),t.d(n,{default:()=>x});var a=t(41604),o=t(78892),l=t(74132),i=t(52382),r=t(14041),s=t(99870),c=t.n(s),d=t(41747),u=t(7010),p=t(9642);const{Option:f}=i.A;function v(e){return(null==e?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}const g=(e,n)=>{var t,a;const{prefixCls:l,className:s,popupClassName:g,dropdownClassName:m,children:O,dataSource:C,dropdownStyle:h,dropdownRender:b,popupRender:w,onDropdownVisibleChange:x,onOpenChange:y,styles:S,classNames:A}=e,E=(0,d.A)(O),N=(null===(t=null==S?void 0:S.popup)||void 0===t?void 0:t.root)||h,j=(null===(a=null==A?void 0:A.popup)||void 0===a?void 0:a.root)||g||m,k=w||b,I=y||x;let V;1===E.length&&r.isValidElement(E[0])&&!v(E[0])&&([V]=E);const D=V?()=>V:void 0;let _;_=E.length&&v(E[0])?O:C?C.map((e=>{if(r.isValidElement(e))return e;switch(typeof e){case"string":return r.createElement(f,{key:e,value:e},e);case"object":{const{value:n}=e;return r.createElement(f,{key:n,value:n},e.text)}default:return}})):[];const{getPrefixCls:M}=r.useContext(p.QO),R=M("select",l),[F]=(0,u.YK)("SelectLike",null==N?void 0:N.zIndex);return r.createElement(i.A,Object.assign({ref:n,suffixIcon:null},(0,o.A)(e,["dataSource","dropdownClassName","popupClassName"]),{prefixCls:R,classNames:{popup:{root:j},root:null==A?void 0:A.root},styles:{popup:{root:Object.assign(Object.assign({},N),{zIndex:F})},root:null==S?void 0:S.root},className:c()(`${R}-auto-complete`,s),mode:i.A.SECRET_COMBOBOX_MODE_DO_NOT_USE,popupRender:k,onOpenChange:I,getInputElement:D}),_)};const m=r.forwardRef(g),{Option:O}=i.A,C=(0,l.A)(m,"dropdownAlign",(e=>(0,o.A)(e,["visible"]))),h=m;h.Option=O,h._InternalPanelDoNotUseOrYouWillBeFired=C;const b=h;var w=t(31085);function x(e){const[n,t]=(0,r.useState)([]),[o,l]=(0,r.useState)("");var i;if(e.container.config.readOnly)return(0,w.jsx)(a.A.Item,{label:e.container.config.label,children:(0,w.jsx)("div",{children:null!=(i=e.container.config.value)?i:"--"})});return(0,w.jsx)(a.A.Item,{label:e.container.config.label,required:e.container.config.required,help:e.container.config.helperText,validateStatus:e.container.config.validatemessage?"error":"",extra:e.container.config.validatemessage,children:(0,w.jsx)(b,{id:e.container.id,value:o,status:e.container.config.validatemessage?"error":"",onClick:()=>{!async function(){if(0===n.length){var a;const n=null==(a=e.container.config.fieldMetadata)||null==(a=a.datasource)?void 0:a.name;if(n){var i,r;console.log(e.container.config.fieldMetadata);const a=(null==(i=e.container.config.fieldMetadata)?void 0:i.datasource.parameters).reduce(((e,n)=>Object.assign({},e,{[n.name]:n.value})),{}),c=await window.PCore.getDataApiUtils().getData(n,{dataViewParameters:a});if(null!=(r=c.data)&&r.data){var s;const e=c.data.data.map((e=>({label:e.pyLocalizedValue,value:e.pyFieldValue})));t(e);const n=null==(s=e.find((e=>e.value===o)))?void 0:s.label;n&&l(n)}}}}()},filterOption:(e,n)=>function(e,n){const t=e.trim().toLowerCase();return n.trim().toLowerCase().split("").reduce(((e,n)=>-1===e?e:t.split("").indexOf(n,-2==e?0:e+1)),-2)>=0}(n.label,e),onSelect:t=>{var a;e.container.updateFieldValue(t),e.container.triggerFieldChange(t);const o=null==(a=n.find((e=>e.value===t)))?void 0:a.label;o&&l(o)},onChange:e=>{l(e)},disabled:e.container.config.readOnly,placeholder:"Select...",style:{width:"100%"},options:n})})}}}]);