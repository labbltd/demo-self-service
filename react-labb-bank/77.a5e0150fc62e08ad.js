"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[77],{68077:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var o=n(25882),a=n(45298),r=n(76712),i=n(42327),c=n(14041),l=n(31085);function s(e){var t;const{name:n,deferLoadId:s}=e.container.config,[g,d]=(0,c.useState)(null),[C,w]=(0,c.useState)(!0),u=e.container.pconnect,f=(window.PCore.getLocaleUtils().getLocaleValue,window.PCore.getConstants()),{CASE:p,PAGE:m,DATA:v}=f.RESOURCE_TYPES,E=u.getValue(f.PZINSKEY)||u.getValue(f.CASE_INFO.CASE_INFO_ID);let N,P;const h=u.getTarget();h&&(N=window.PCore.getContainerUtils().getActiveContainerItemName(h),P=window.PCore.getContainerUtils().getContainerItemData(h,N));let A=p;null!=(t=P)&&t.resourceType?A=P.resourceType:E||(A=m);const x=/preview_[0-9]*/g.test(u.getContextName()),I=/modal_[0-9]+$/.test(u.getContextName()),R=async e=>{if(w(!1),s&&window.PCore.getDeferLoadManager().start(n,u.getCaseInfo().getKey(),u.getPageReference().replace("caseInfo.content",""),u.getContextName(),s),e&&(!e.type||"error"!==e.type)){const t={meta:e,options:{context:u.getContextName(),pageReference:u.getPageReference(),target:u.getTarget(),hasForm:!0,viewName:u.viewName}},n=window.PCore.createPConnect(t).getPConnect(),r=await o.kV.create(n.getComponentName(),n),i=(0,l.jsx)(a.bv,{container:r});d(i),s&&window.PCore.getDeferLoadManager().stop(s,u.getContextName())}},D=()=>{w(!1);const e=(0,l.jsx)(i.A,{});d(e)};let S;return(0,c.useEffect)((()=>{const e=window.PCore.getFieldUtils().formatPageReference(u.getPageReference().replace(f.CASE_INFO.CASE_INFO_CONTENT,""));if(A===v)if(N){const e=window.PCore.getStoreValue(".dataContext","dataInfo",N),t=window.PCore.getStoreValue(".dataContextParameters","dataInfo",N);u.getActionsApi().showData(n,e,t,{skipSemanticUrl:!0,isDeferLoaded:!0}).then((e=>{R(e)})).catch((e=>{"ERR_CANCELED"!==(null==e?void 0:e.code)&&D()}))}else console.error("Cannot load the defer loaded view without container information");else if(A===m||A===p&&"review"===u.getValue("context_data.caseViewMode")&&!e)u.getActionsApi().loadView(encodeURI(E),n,(()=>{var e;let t;return t=x?"preview":I?"modal":null,{viewContext:A,pageClass:E?"":null==(e=u.getDataObject())||null==(e=e.pyPortal)?void 0:e.classID,container:t,containerName:t,updateData:x||I,viewLoadingContainer:{context:u.getContextName()}}})()).then((e=>{R(e)})).catch((e=>{"ERR_CANCELED"!==(null==e?void 0:e.code)&&D()}));else{var t;const o={skipDataMerge:"HierarchicalForm"===(null==(t=u.options)||null==(t=t.inheritedConfig)?void 0:t.template)};u.getActionsApi().refreshCaseView(encodeURI(E),n,e,o).then((e=>{R(e.root)})).catch((e=>{"ERR_CANCELED"!==(null==e?void 0:e.code)&&D()}))}}),[n,u]),S=C?(0,l.jsx)("div",{style:{position:"relative",height:"100px"},children:(0,l.jsx)(r.A,{})}):(0,l.jsx)(l.Fragment,{children:g}),S}}}]);