var e,t,n={933:(c,l,u)=>{var d=u(515);Object.defineProperty(l,"reduxBatch",{enumerable:!0,get:function(){return d.reduxBatch}})},515:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.reduxBatch=function(c){var l=[],u=void 0;function d(){l===u&&(l=l.slice())}function p(c){if("function"!=typeof c)throw new Error("Invalid listener, expected a function");var u=!0;return d(),l.push(c),function(){u&&(d(),l.splice(l.indexOf(c),1),u=!1)}}function h(){for(var c=l,d=0;d<c.length;++d)u=c,c[d]()}return function(){var l=c.apply(void 0,arguments),u=!1,d=!1;function g(c){return Array.isArray(c)?c.map((function(c){return g(c)})):l.dispatch(c)}return l.subscribe((function(){d?u=!0:h()})),Object.assign({},l,{dispatch:function(c){var l=d;l||(u=!1,d=!0);var p=g(c),f=u&&!l;return l||(u=!1,d=!1),f&&h(),p},subscribe:p})}}},923:(c,l,u)=>{c.exports=u(933)},924:(c,l,u)=>{var d="__lodash_hash_undefined__",p=9007199254740991,h="[object Arguments]",g="[object Function]",f="[object GeneratorFunction]",m=/^\[object .+?Constructor\]$/,y="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,I="object"==typeof self&&self&&self.Object===Object&&self,E=y||I||Function("return this")();function A(c,l){return!(!c||!c.length)&&function(c,l){if(l!=l)return function(c,l){for(var u=c.length,d=-1;++d<u;)if(l(c[d],d,c))return d;return-1}(c,S);for(var u=-1,d=c.length;++u<d;)if(c[u]===l)return u;return-1}(c,l)>-1}function _(c,l,u){for(var d=-1,p=c?c.length:0;++d<p;)if(u(l,c[d]))return!0;return!1}function C(c,l){for(var u=-1,d=l.length,p=c.length;++u<d;)c[p+u]=l[u];return c}function S(c){return c!=c}function T(c,l){return c.has(l)}var N,P=Array.prototype,D=Function.prototype,b=Object.prototype,R=E["__core-js_shared__"],O=(N=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",v=D.toString,x=b.hasOwnProperty,w=b.toString,M=RegExp("^"+v.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=E.Symbol,U=b.propertyIsEnumerable,F=P.splice,j=L?L.isConcatSpreadable:void 0,V=Math.max,k=X(E,"Map"),B=X(Object,"create");function G(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function W(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function H(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function q(c){var l=-1,u=c?c.length:0;for(this.__data__=new H;++l<u;)this.add(c[l])}function z(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function Y(c,l,u,d,p){var h=-1,g=c.length;for(u||(u=J),p||(p=[]);++h<g;){var f=c[h];l>0&&u(f)?l>1?Y(f,l-1,u,d,p):C(p,f):d||(p[p.length]=f)}return p}function K(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function X(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!se(c)||O&&O in c)return!1;var l=re(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?M:m;return l.test(function(c){if(null!=c){try{return v.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function J(c){return te(c)||function(c){return ne(c)&&x.call(c,"callee")&&(!U.call(c,"callee")||w.call(c)==h)}(c)||!!(j&&c&&c[j])}G.prototype.clear=function(){this.__data__=B?B(null):{}},G.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},G.prototype.get=function(c){var l=this.__data__;if(B){var u=l[c];return u===d?void 0:u}return x.call(l,c)?l[c]:void 0},G.prototype.has=function(c){var l=this.__data__;return B?void 0!==l[c]:x.call(l,c)},G.prototype.set=function(c,l){return this.__data__[c]=B&&void 0===l?d:l,this},W.prototype.clear=function(){this.__data__=[]},W.prototype.delete=function(c){var l=this.__data__,u=z(l,c);return!(u<0||(u==l.length-1?l.pop():F.call(l,u,1),0))},W.prototype.get=function(c){var l=this.__data__,u=z(l,c);return u<0?void 0:l[u][1]},W.prototype.has=function(c){return z(this.__data__,c)>-1},W.prototype.set=function(c,l){var u=this.__data__,d=z(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},H.prototype.clear=function(){this.__data__={hash:new G,map:new(k||W),string:new G}},H.prototype.delete=function(c){return K(this,c).delete(c)},H.prototype.get=function(c){return K(this,c).get(c)},H.prototype.has=function(c){return K(this,c).has(c)},H.prototype.set=function(c,l){return K(this,c).set(c,l),this},q.prototype.add=q.prototype.push=function(c){return this.__data__.set(c,d),this},q.prototype.has=function(c){return this.__data__.has(c)};var Q,Z,ee=(Q=function(c,l){return ne(c)?function(c,l,u,d){var p,h=-1,g=A,f=!0,m=c.length,y=[],I=l.length;if(!m)return y;u&&(l=function(c,l){for(var u=-1,d=c?c.length:0,p=Array(d);++u<d;)p[u]=l(c[u],u,c);return p}(l,(p=u,function(c){return p(c)}))),d?(g=_,f=!1):l.length>=200&&(g=T,f=!1,l=new q(l));e:for(;++h<m;){var E=c[h],C=u?u(E):E;if(E=d||0!==E?E:0,f&&C==C){for(var S=I;S--;)if(l[S]===C)continue e;y.push(E)}else g(l,C,d)||y.push(E)}return y}(c,Y(l,1,ne,!0)):[]},Z=V(void 0===Z?Q.length-1:Z,0),function(){for(var c=arguments,l=-1,u=V(c.length-Z,0),d=Array(u);++l<u;)d[l]=c[Z+l];l=-1;for(var p=Array(Z+1);++l<Z;)p[l]=c[l];return p[Z]=d,function(c,l,u){switch(u.length){case 0:return c.call(l);case 1:return c.call(l,u[0]);case 2:return c.call(l,u[0],u[1]);case 3:return c.call(l,u[0],u[1],u[2])}return c.apply(l,u)}(Q,this,p)}),te=Array.isArray;function ne(c){return function(c){return!!c&&"object"==typeof c}(c)&&function(c){return null!=c&&function(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=p}(c.length)&&!re(c)}(c)}function re(c){var l=se(c)?w.call(c):"";return l==g||l==f}function se(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}c.exports=ee},174:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g="[object Function]",f="[object GeneratorFunction]",m="[object Symbol]",y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,I=/^\w*$/,E=/^\./,A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,C=/^\[object .+?Constructor\]$/,S="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,T="object"==typeof self&&self&&self.Object===Object&&self,N=S||T||Function("return this")(),P=Array.prototype,D=Function.prototype,b=Object.prototype,R=N["__core-js_shared__"],O=(d=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",v=D.toString,x=b.hasOwnProperty,w=b.toString,M=RegExp("^"+v.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=N.Symbol,U=P.splice,F=z(N,"Map"),j=z(Object,"create"),V=L?L.prototype:void 0,k=V?V.toString:void 0;function B(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function G(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function W(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function H(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function q(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function z(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!Q(c)||O&&O in c)return!1;var l=function(c){var l=Q(c)?w.call(c):"";return l==g||l==f}(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?M:C;return l.test(function(c){if(null!=c){try{return v.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}B.prototype.clear=function(){this.__data__=j?j(null):{}},B.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},B.prototype.get=function(c){var l=this.__data__;if(j){var u=l[c];return u===p?void 0:u}return x.call(l,c)?l[c]:void 0},B.prototype.has=function(c){var l=this.__data__;return j?void 0!==l[c]:x.call(l,c)},B.prototype.set=function(c,l){return this.__data__[c]=j&&void 0===l?p:l,this},G.prototype.clear=function(){this.__data__=[]},G.prototype.delete=function(c){var l=this.__data__,u=H(l,c);return!(u<0||(u==l.length-1?l.pop():U.call(l,u,1),0))},G.prototype.get=function(c){var l=this.__data__,u=H(l,c);return u<0?void 0:l[u][1]},G.prototype.has=function(c){return H(this.__data__,c)>-1},G.prototype.set=function(c,l){var u=this.__data__,d=H(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},W.prototype.clear=function(){this.__data__={hash:new B,map:new(F||G),string:new B}},W.prototype.delete=function(c){return q(this,c).delete(c)},W.prototype.get=function(c){return q(this,c).get(c)},W.prototype.has=function(c){return q(this,c).has(c)},W.prototype.set=function(c,l){return q(this,c).set(c,l),this};var Y=X((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(Z(c))return k?k.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return E.test(c)&&u.push(""),c.replace(A,(function(c,l,d,p){u.push(d?p.replace(_,"$1"):l||c)})),u}));function K(c){if("string"==typeof c||Z(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function X(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(X.Cache||W),u}X.Cache=W;var J=Array.isArray;function Q(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function Z(c){return"symbol"==typeof c||function(c){return!!c&&"object"==typeof c}(c)&&w.call(c)==m}c.exports=function(c,l,u){var d=null==c?void 0:function(c,l){var u;l=function(c,l){if(J(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!Z(c))||I.test(c)||!y.test(c)||null!=l&&c in Object(l)}(l,c)?[l]:J(u=l)?u:Y(u);for(var d=0,p=l.length;null!=c&&d<p;)c=c[K(l[d++])];return d&&d==p?c:void 0}(c,l);return void 0===d?u:d}},207:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g=9007199254740991,f="[object Function]",m="[object GeneratorFunction]",y="[object Symbol]",I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,A=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,S=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,N="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,P="object"==typeof self&&self&&self.Object===Object&&self,D=N||P||Function("return this")(),b=Array.prototype,R=Function.prototype,O=Object.prototype,v=D["__core-js_shared__"],x=(d=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=R.toString,M=O.hasOwnProperty,L=O.toString,U=RegExp("^"+w.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=D.Symbol,j=O.propertyIsEnumerable,V=b.splice,k=J(D,"Map"),B=J(Object,"create"),G=F?F.prototype:void 0,W=G?G.toString:void 0;function H(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function q(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function z(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function Y(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function K(c,l){return null!=c&&M.call(c,l)}function X(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function J(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!se(c)||x&&x in c)return!1;var l=ne(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?U:S;return l.test(function(c){if(null!=c){try{return w.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}H.prototype.clear=function(){this.__data__=B?B(null):{}},H.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},H.prototype.get=function(c){var l=this.__data__;if(B){var u=l[c];return u===p?void 0:u}return M.call(l,c)?l[c]:void 0},H.prototype.has=function(c){var l=this.__data__;return B?void 0!==l[c]:M.call(l,c)},H.prototype.set=function(c,l){return this.__data__[c]=B&&void 0===l?p:l,this},q.prototype.clear=function(){this.__data__=[]},q.prototype.delete=function(c){var l=this.__data__,u=Y(l,c);return!(u<0||(u==l.length-1?l.pop():V.call(l,u,1),0))},q.prototype.get=function(c){var l=this.__data__,u=Y(l,c);return u<0?void 0:l[u][1]},q.prototype.has=function(c){return Y(this.__data__,c)>-1},q.prototype.set=function(c,l){var u=this.__data__,d=Y(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},z.prototype.clear=function(){this.__data__={hash:new H,map:new(k||q),string:new H}},z.prototype.delete=function(c){return X(this,c).delete(c)},z.prototype.get=function(c){return X(this,c).get(c)},z.prototype.has=function(c){return X(this,c).has(c)},z.prototype.set=function(c,l){return X(this,c).set(c,l),this};var Q=ee((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(oe(c))return W?W.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return A.test(c)&&u.push(""),c.replace(_,(function(c,l,d,p){u.push(d?p.replace(C,"$1"):l||c)})),u}));function Z(c){if("string"==typeof c||oe(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function ee(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(ee.Cache||z),u}ee.Cache=z;var te=Array.isArray;function ne(c){var l=se(c)?L.call(c):"";return l==f||l==m}function re(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=g}function se(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function ae(c){return!!c&&"object"==typeof c}function oe(c){return"symbol"==typeof c||ae(c)&&L.call(c)==y}c.exports=function(c,l){return null!=c&&function(c,l,u){var d;l=function(c,l){if(te(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!oe(c))||E.test(c)||!I.test(c)||null!=l&&c in Object(l)}(l,c)?[l]:te(d=l)?d:Q(d);for(var p,h=-1,f=l.length;++h<f;){var m=Z(l[h]);if(!(p=null!=c&&u(c,m)))break;c=c[m]}return p||!!(f=c?c.length:0)&&re(f)&&function(c,l){return!!(l=l??g)&&("number"==typeof c||T.test(c))&&c>-1&&c%1==0&&c<l}(m,f)&&(te(c)||function(c){return function(c){return ae(c)&&function(c){return null!=c&&re(c.length)&&!ne(c)}(c)}(c)&&M.call(c,"callee")&&(!j.call(c,"callee")||"[object Arguments]"==L.call(c))}(c))}(c,l,K)}},828:(c,l,u)=>{c=u.nmd(c);var d,p,h,g=9007199254740991,f="[object Function]",m="[object GeneratorFunction]",y="[object Map]",I="[object Promise]",E="[object Set]",A="[object WeakMap]",_="[object DataView]",C=/^\[object .+?Constructor\]$/,S="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,T="object"==typeof self&&self&&self.Object===Object&&self,N=S||T||Function("return this")(),P=l&&!l.nodeType&&l,D=P&&c&&!c.nodeType&&c,b=D&&D.exports===P,R=Function.prototype,O=Object.prototype,v=N["__core-js_shared__"],x=(d=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=R.toString,M=O.hasOwnProperty,L=O.toString,U=RegExp("^"+w.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=b?N.Buffer:void 0,j=O.propertyIsEnumerable,V=F?F.isBuffer:void 0,k=(p=Object.keys,h=Object,function(c){return p(h(c))}),B=Z(N,"DataView"),G=Z(N,"Map"),W=Z(N,"Promise"),H=Z(N,"Set"),q=Z(N,"WeakMap"),z=!j.call({valueOf:1},"valueOf"),Y=te(B),K=te(G),X=te(W),J=te(H),Q=te(q);function Z(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!oe(c)||function(c){return!!x&&x in c}(c))return!1;var l=ae(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?U:C;return l.test(te(c))}(u)?u:void 0}var ee=function(c){return L.call(c)};function te(c){if(null!=c){try{return w.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(B&&ee(new B(new ArrayBuffer(1)))!=_||G&&ee(new G)!=y||W&&ee(W.resolve())!=I||H&&ee(new H)!=E||q&&ee(new q)!=A)&&(ee=function(c){var l=L.call(c),u="[object Object]"==l?c.constructor:void 0,d=u?te(u):void 0;if(d)switch(d){case Y:return _;case K:return y;case X:return I;case J:return E;case Q:return A}return l});var ne=Array.isArray;function re(c){return null!=c&&function(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=g}(c.length)&&!ae(c)}var se=V||function(){return!1};function ae(c){var l=oe(c)?L.call(c):"";return l==f||l==m}function oe(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}c.exports=function(c){if(re(c)&&(ne(c)||"string"==typeof c||"function"==typeof c.splice||se(c)||function(c){return function(c){return function(c){return!!c&&"object"==typeof c}(c)&&re(c)}(c)&&M.call(c,"callee")&&(!j.call(c,"callee")||"[object Arguments]"==L.call(c))}(c)))return!c.length;var l=ee(c);if(l==y||l==E)return!c.size;if(z||function(c){var l=c&&c.constructor;return c===("function"==typeof l&&l.prototype||O)}(c))return!k(c).length;for(var u in c)if(M.call(c,u))return!1;return!0}},722:(c,l,u)=>{c=u.nmd(c);var d="__lodash_hash_undefined__",p=1,h=2,g=9007199254740991,f="[object Arguments]",m="[object Array]",y="[object AsyncFunction]",I="[object Boolean]",E="[object Date]",A="[object Error]",_="[object Function]",C="[object GeneratorFunction]",S="[object Map]",T="[object Number]",N="[object Null]",P="[object Object]",D="[object Promise]",b="[object Proxy]",R="[object RegExp]",O="[object Set]",v="[object String]",x="[object Undefined]",w="[object WeakMap]",M="[object ArrayBuffer]",L="[object DataView]",U=/^\[object .+?Constructor\]$/,F=/^(?:0|[1-9]\d*)$/,j={};j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j[f]=j[m]=j[M]=j[I]=j[L]=j[E]=j[A]=j[_]=j[S]=j[T]=j[P]=j[R]=j[O]=j[v]=j[w]=!1;var V="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,k="object"==typeof self&&self&&self.Object===Object&&self,B=V||k||Function("return this")(),G=l&&!l.nodeType&&l,W=G&&c&&!c.nodeType&&c,H=W&&W.exports===G,q=H&&V.process,z=function(){try{return q&&q.binding&&q.binding("util")}catch(c){}}(),Y=z&&z.isTypedArray;function K(c,l){for(var u=-1,d=null==c?0:c.length;++u<d;)if(l(c[u],u,c))return!0;return!1}function X(c){var l=-1,u=Array(c.size);return c.forEach((function(c,d){u[++l]=[d,c]})),u}function J(c){var l=-1,u=Array(c.size);return c.forEach((function(c){u[++l]=c})),u}var Q,Z,ee,te=Array.prototype,ne=Function.prototype,re=Object.prototype,se=B["__core-js_shared__"],ae=ne.toString,oe=re.hasOwnProperty,ie=(Q=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"",ce=re.toString,le=RegExp("^"+ae.call(oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=H?B.Buffer:void 0,de=B.Symbol,pe=B.Uint8Array,he=re.propertyIsEnumerable,ge=te.splice,fe=de?de.toStringTag:void 0,me=Object.getOwnPropertySymbols,ye=ue?ue.isBuffer:void 0,Ie=(Z=Object.keys,ee=Object,function(c){return Z(ee(c))}),Ee=We(B,"DataView"),Ae=We(B,"Map"),_e=We(B,"Promise"),Ce=We(B,"Set"),Se=We(B,"WeakMap"),Te=We(Object,"create"),Ne=Ye(Ee),Pe=Ye(Ae),De=Ye(_e),be=Ye(Ce),Re=Ye(Se),Oe=de?de.prototype:void 0,ve=Oe?Oe.valueOf:void 0;function xe(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function we(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function Me(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function Le(c){var l=-1,u=null==c?0:c.length;for(this.__data__=new Me;++l<u;)this.add(c[l])}function Ue(c){var l=this.__data__=new we(c);this.size=l.size}function Fe(c,l){for(var u=c.length;u--;)if(Ke(c[u][0],l))return u;return-1}function je(c){return null==c?void 0===c?x:N:fe&&fe in Object(c)?function(c){var l=oe.call(c,fe),u=c[fe];try{c[fe]=void 0;var d=!0}catch(c){}var p=ce.call(c);return d&&(l?c[fe]=u:delete c[fe]),p}(c):function(c){return ce.call(c)}(c)}function Ve(c){return nt(c)&&je(c)==f}function ke(c,l,u,d,g){return c===l||(null==c||null==l||!nt(c)&&!nt(l)?c!=c&&l!=l:function(c,l,u,d,g,y){var _=Je(c),C=Je(l),N=_?m:qe(c),D=C?m:qe(l),b=(N=N==f?P:N)==P,x=(D=D==f?P:D)==P,w=N==D;if(w&&Qe(c)){if(!Qe(l))return!1;_=!0,b=!1}if(w&&!b)return y||(y=new Ue),_||rt(c)?$e(c,l,u,d,g,y):function(c,l,u,d,g,f,m){switch(u){case L:if(c.byteLength!=l.byteLength||c.byteOffset!=l.byteOffset)return!1;c=c.buffer,l=l.buffer;case M:return!(c.byteLength!=l.byteLength||!f(new pe(c),new pe(l)));case I:case E:case T:return Ke(+c,+l);case A:return c.name==l.name&&c.message==l.message;case R:case v:return c==l+"";case S:var y=X;case O:var _=d&p;if(y||(y=J),c.size!=l.size&&!_)return!1;var C=m.get(c);if(C)return C==l;d|=h,m.set(c,l);var N=$e(y(c),y(l),d,g,f,m);return m.delete(c),N;case"[object Symbol]":if(ve)return ve.call(c)==ve.call(l)}return!1}(c,l,N,u,d,g,y);if(!(u&p)){var U=b&&oe.call(c,"__wrapped__"),F=x&&oe.call(l,"__wrapped__");if(U||F){var j=U?c.value():c,V=F?l.value():l;return y||(y=new Ue),g(j,V,u,d,y)}}return!!w&&(y||(y=new Ue),function(c,l,u,d,h,g){var f=u&p,m=Be(c),y=m.length;if(y!=Be(l).length&&!f)return!1;for(var I=y;I--;){var E=m[I];if(!(f?E in l:oe.call(l,E)))return!1}var A=g.get(c);if(A&&g.get(l))return A==l;var _=!0;g.set(c,l),g.set(l,c);for(var C=f;++I<y;){var S=c[E=m[I]],T=l[E];if(d)var N=f?d(T,S,E,l,c,g):d(S,T,E,c,l,g);if(!(void 0===N?S===T||h(S,T,u,d,g):N)){_=!1;break}C||(C="constructor"==E)}if(_&&!C){var P=c.constructor,D=l.constructor;P==D||!("constructor"in c)||!("constructor"in l)||"function"==typeof P&&P instanceof P&&"function"==typeof D&&D instanceof D||(_=!1)}return g.delete(c),g.delete(l),_}(c,l,u,d,g,y))}(c,l,u,d,ke,g))}function $e(c,l,u,d,g,f){var m=u&p,y=c.length,I=l.length;if(y!=I&&!(m&&I>y))return!1;var E=f.get(c);if(E&&f.get(l))return E==l;var A=-1,_=!0,C=u&h?new Le:void 0;for(f.set(c,l),f.set(l,c);++A<y;){var S=c[A],T=l[A];if(d)var N=m?d(T,S,A,l,c,f):d(S,T,A,c,l,f);if(void 0!==N){if(N)continue;_=!1;break}if(C){if(!K(l,(function(c,l){if(p=l,!C.has(p)&&(S===c||g(S,c,u,d,f)))return C.push(l);var p}))){_=!1;break}}else if(S!==T&&!g(S,T,u,d,f)){_=!1;break}}return f.delete(c),f.delete(l),_}function Be(c){return function(c,l,u){var d=l(c);return Je(c)?d:function(c,l){for(var u=-1,d=l.length,p=c.length;++u<d;)c[p+u]=l[u];return c}(d,u(c))}(c,st,He)}function Ge(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function We(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){return!(!tt(c)||function(c){return!!ie&&ie in c}(c))&&(Ze(c)?le:U).test(Ye(c))}(u)?u:void 0}xe.prototype.clear=function(){this.__data__=Te?Te(null):{},this.size=0},xe.prototype.delete=function(c){var l=this.has(c)&&delete this.__data__[c];return this.size-=l?1:0,l},xe.prototype.get=function(c){var l=this.__data__;if(Te){var u=l[c];return u===d?void 0:u}return oe.call(l,c)?l[c]:void 0},xe.prototype.has=function(c){var l=this.__data__;return Te?void 0!==l[c]:oe.call(l,c)},xe.prototype.set=function(c,l){var u=this.__data__;return this.size+=this.has(c)?0:1,u[c]=Te&&void 0===l?d:l,this},we.prototype.clear=function(){this.__data__=[],this.size=0},we.prototype.delete=function(c){var l=this.__data__,u=Fe(l,c);return!(u<0||(u==l.length-1?l.pop():ge.call(l,u,1),--this.size,0))},we.prototype.get=function(c){var l=this.__data__,u=Fe(l,c);return u<0?void 0:l[u][1]},we.prototype.has=function(c){return Fe(this.__data__,c)>-1},we.prototype.set=function(c,l){var u=this.__data__,d=Fe(u,c);return d<0?(++this.size,u.push([c,l])):u[d][1]=l,this},Me.prototype.clear=function(){this.size=0,this.__data__={hash:new xe,map:new(Ae||we),string:new xe}},Me.prototype.delete=function(c){var l=Ge(this,c).delete(c);return this.size-=l?1:0,l},Me.prototype.get=function(c){return Ge(this,c).get(c)},Me.prototype.has=function(c){return Ge(this,c).has(c)},Me.prototype.set=function(c,l){var u=Ge(this,c),d=u.size;return u.set(c,l),this.size+=u.size==d?0:1,this},Le.prototype.add=Le.prototype.push=function(c){return this.__data__.set(c,d),this},Le.prototype.has=function(c){return this.__data__.has(c)},Ue.prototype.clear=function(){this.__data__=new we,this.size=0},Ue.prototype.delete=function(c){var l=this.__data__,u=l.delete(c);return this.size=l.size,u},Ue.prototype.get=function(c){return this.__data__.get(c)},Ue.prototype.has=function(c){return this.__data__.has(c)},Ue.prototype.set=function(c,l){var u=this.__data__;if(u instanceof we){var d=u.__data__;if(!Ae||d.length<199)return d.push([c,l]),this.size=++u.size,this;u=this.__data__=new Me(d)}return u.set(c,l),this.size=u.size,this};var He=me?function(c){return null==c?[]:(c=Object(c),function(c,l){for(var u=-1,d=null==c?0:c.length,p=0,h=[];++u<d;){var g=c[u];l(g)&&(h[p++]=g)}return h}(me(c),(function(l){return he.call(c,l)})))}:function(){return[]},qe=je;function ze(c,l){return!!(l=l??g)&&("number"==typeof c||F.test(c))&&c>-1&&c%1==0&&c<l}function Ye(c){if(null!=c){try{return ae.call(c)}catch(c){}try{return c+""}catch(c){}}return""}function Ke(c,l){return c===l||c!=c&&l!=l}(Ee&&qe(new Ee(new ArrayBuffer(1)))!=L||Ae&&qe(new Ae)!=S||_e&&qe(_e.resolve())!=D||Ce&&qe(new Ce)!=O||Se&&qe(new Se)!=w)&&(qe=function(c){var l=je(c),u=l==P?c.constructor:void 0,d=u?Ye(u):"";if(d)switch(d){case Ne:return L;case Pe:return S;case De:return D;case be:return O;case Re:return w}return l});var Xe=Ve(function(){return arguments}())?Ve:function(c){return nt(c)&&oe.call(c,"callee")&&!he.call(c,"callee")},Je=Array.isArray,Qe=ye||function(){return!1};function Ze(c){if(!tt(c))return!1;var l=je(c);return l==_||l==C||l==y||l==b}function et(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=g}function tt(c){var l=typeof c;return null!=c&&("object"==l||"function"==l)}function nt(c){return null!=c&&"object"==typeof c}var rt=Y?function(c){return function(l){return c(l)}}(Y):function(c){return nt(c)&&et(c.length)&&!!j[je(c)]};function st(c){return null!=(l=c)&&et(l.length)&&!Ze(l)?function(c,l){var u=Je(c),d=!u&&Xe(c),p=!u&&!d&&Qe(c),h=!u&&!d&&!p&&rt(c),g=u||d||p||h,f=g?function(c,l){for(var u=-1,d=Array(c);++u<c;)d[u]=l(u);return d}(c.length,String):[],m=f.length;for(var y in c)!l&&!oe.call(c,y)||g&&("length"==y||p&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||ze(y,m))||f.push(y);return f}(c):function(c){if(u=(l=c)&&l.constructor,l!==("function"==typeof u&&u.prototype||re))return Ie(c);var l,u,d=[];for(var p in Object(c))oe.call(c,p)&&"constructor"!=p&&d.push(p);return d}(c);var l}c.exports=function(c,l){return ke(c,l)}},431:(c,l,u)=>{c=u.nmd(c);var d="__lodash_hash_undefined__",p=9007199254740991,h="[object Arguments]",g="[object AsyncFunction]",f="[object Function]",m="[object GeneratorFunction]",y="[object Null]",I="[object Object]",E="[object Proxy]",A="[object Undefined]",_=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[h]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object Boolean]"]=S["[object DataView]"]=S["[object Date]"]=S["[object Error]"]=S[f]=S["[object Map]"]=S["[object Number]"]=S[I]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object WeakMap]"]=!1;var T,N,P,D="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,b="object"==typeof self&&self&&self.Object===Object&&self,R=D||b||Function("return this")(),O=l&&!l.nodeType&&l,v=O&&c&&!c.nodeType&&c,x=v&&v.exports===O,w=x&&D.process,M=function(){try{return v&&v.require&&v.require("util").types||w&&w.binding&&w.binding("util")}catch(c){}}(),L=M&&M.isTypedArray,U=Array.prototype,F=Function.prototype,j=Object.prototype,V=R["__core-js_shared__"],k=F.toString,B=j.hasOwnProperty,G=(T=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"",W=j.toString,H=k.call(Object),q=RegExp("^"+k.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=x?R.Buffer:void 0,Y=R.Symbol,K=R.Uint8Array,X=(z&&z.allocUnsafe,N=Object.getPrototypeOf,P=Object,function(c){return N(P(c))}),J=Object.create,Q=j.propertyIsEnumerable,Z=U.splice,ee=Y?Y.toStringTag:void 0,te=function(){try{var c=_e(Object,"defineProperty");return c({},"",{}),c}catch(c){}}(),ne=z?z.isBuffer:void 0,re=Math.max,se=Date.now,ae=_e(R,"Map"),oe=_e(Object,"create"),ie=function(){function c(){}return function(l){if(!we(l))return{};if(J)return J(l);c.prototype=l;var u=new c;return c.prototype=void 0,u}}();function ce(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function le(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function ue(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function de(c){var l=this.__data__=new le(c);this.size=l.size}function pe(c,l,u){(void 0!==u&&!Pe(c[l],u)||void 0===u&&!(l in c))&&fe(c,l,u)}function he(c,l,u){var d=c[l];B.call(c,l)&&Pe(d,u)&&(void 0!==u||l in c)||fe(c,l,u)}function ge(c,l){for(var u=c.length;u--;)if(Pe(c[u][0],l))return u;return-1}function fe(c,l,u){"__proto__"==l&&te?te(c,l,{configurable:!0,enumerable:!0,value:u,writable:!0}):c[l]=u}ce.prototype.clear=function(){this.__data__=oe?oe(null):{},this.size=0},ce.prototype.delete=function(c){var l=this.has(c)&&delete this.__data__[c];return this.size-=l?1:0,l},ce.prototype.get=function(c){var l=this.__data__;if(oe){var u=l[c];return u===d?void 0:u}return B.call(l,c)?l[c]:void 0},ce.prototype.has=function(c){var l=this.__data__;return oe?void 0!==l[c]:B.call(l,c)},ce.prototype.set=function(c,l){var u=this.__data__;return this.size+=this.has(c)?0:1,u[c]=oe&&void 0===l?d:l,this},le.prototype.clear=function(){this.__data__=[],this.size=0},le.prototype.delete=function(c){var l=this.__data__,u=ge(l,c);return!(u<0||(u==l.length-1?l.pop():Z.call(l,u,1),--this.size,0))},le.prototype.get=function(c){var l=this.__data__,u=ge(l,c);return u<0?void 0:l[u][1]},le.prototype.has=function(c){return ge(this.__data__,c)>-1},le.prototype.set=function(c,l){var u=this.__data__,d=ge(u,c);return d<0?(++this.size,u.push([c,l])):u[d][1]=l,this},ue.prototype.clear=function(){this.size=0,this.__data__={hash:new ce,map:new(ae||le),string:new ce}},ue.prototype.delete=function(c){var l=Ae(this,c).delete(c);return this.size-=l?1:0,l},ue.prototype.get=function(c){return Ae(this,c).get(c)},ue.prototype.has=function(c){return Ae(this,c).has(c)},ue.prototype.set=function(c,l){var u=Ae(this,c),d=u.size;return u.set(c,l),this.size+=u.size==d?0:1,this},de.prototype.clear=function(){this.__data__=new le,this.size=0},de.prototype.delete=function(c){var l=this.__data__,u=l.delete(c);return this.size=l.size,u},de.prototype.get=function(c){return this.__data__.get(c)},de.prototype.has=function(c){return this.__data__.has(c)},de.prototype.set=function(c,l){var u=this.__data__;if(u instanceof le){var d=u.__data__;if(!ae||d.length<199)return d.push([c,l]),this.size=++u.size,this;u=this.__data__=new ue(d)}return u.set(c,l),this.size=u.size,this};function me(c){return null==c?void 0===c?A:y:ee&&ee in Object(c)?function(c){var l=B.call(c,ee),u=c[ee];try{c[ee]=void 0;var d=!0}catch(c){}var p=W.call(c);return d&&(l?c[ee]=u:delete c[ee]),p}(c):function(c){return W.call(c)}(c)}function ye(c){return Me(c)&&me(c)==h}function Ie(c,l,u,d,p){c!==l&&function(c,l,u){for(var d=-1,p=Object(c),h=u(c),g=h.length;g--;){var f=h[++d];if(!1===l(p[f],f,p))break}}(l,(function(h,g){if(p||(p=new de),we(h))!function(c,l,u,d,p,h,g){var f=Te(c,u),m=Te(l,u),y=g.get(m);if(y)pe(c,u,y);else{var E,A,_,C,S,T=h?h(f,m,u+"",c,l,g):void 0,N=void 0===T;if(N){var P=be(m),D=!P&&Oe(m),b=!P&&!D&&Le(m);T=m,P||D||b?be(f)?T=f:Me(S=f)&&Re(S)?T=function(c,l){var u=-1,d=c.length;for(l||(l=Array(d));++u<d;)l[u]=c[u];return l}(f):D?(N=!1,T=function(c){return c.slice()}(m)):b?(N=!1,C=new(_=(E=m).buffer).constructor(_.byteLength),new K(C).set(new K(_)),A=C,T=new E.constructor(A,E.byteOffset,E.length)):T=[]:function(c){if(!Me(c)||me(c)!=I)return!1;var l=X(c);if(null===l)return!0;var u=B.call(l,"constructor")&&l.constructor;return"function"==typeof u&&u instanceof u&&k.call(u)==H}(m)||De(m)?(T=f,De(f)?T=function(c){return function(c,l,u){var d=!u;u||(u={});for(var p=-1,h=l.length;++p<h;){var g=l[p],f=void 0;void 0===f&&(f=c[g]),d?fe(u,g,f):he(u,g,f)}return u}(c,Ue(c))}(f):we(f)&&!ve(f)||(T=function(c){return"function"!=typeof c.constructor||Se(c)?{}:ie(X(c))}(m))):N=!1}N&&(g.set(m,T),p(T,m,d,h,g),g.delete(m)),pe(c,u,T)}}(c,l,g,u,Ie,d,p);else{var f=d?d(Te(c,g),h,g+"",c,l,p):void 0;void 0===f&&(f=h),pe(c,g,f)}}),Ue)}var Ee=te?function(c,l){return te(c,"toString",{configurable:!0,enumerable:!1,value:(u=l,function(){return u}),writable:!0});var u}:Ve;function Ae(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function _e(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){return!(!we(c)||function(c){return!!G&&G in c}(c))&&(ve(c)?q:_).test(function(c){if(null!=c){try{return k.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function Ce(c,l){var u=typeof c;return!!(l=l??p)&&("number"==u||"symbol"!=u&&C.test(c))&&c>-1&&c%1==0&&c<l}function Se(c){var l=c&&c.constructor;return c===("function"==typeof l&&l.prototype||j)}function Te(c,l){if(("constructor"!==l||"function"!=typeof c[l])&&"__proto__"!=l)return c[l]}var Ne=function(c){var l=0,u=0;return function(){var d=se(),p=16-(d-u);if(u=d,p>0){if(++l>=800)return arguments[0]}else l=0;return c.apply(void 0,arguments)}}(Ee);function Pe(c,l){return c===l||c!=c&&l!=l}var De=ye(function(){return arguments}())?ye:function(c){return Me(c)&&B.call(c,"callee")&&!Q.call(c,"callee")},be=Array.isArray;function Re(c){return null!=c&&xe(c.length)&&!ve(c)}var Oe=ne||function(){return!1};function ve(c){if(!we(c))return!1;var l=me(c);return l==f||l==m||l==g||l==E}function xe(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=p}function we(c){var l=typeof c;return null!=c&&("object"==l||"function"==l)}function Me(c){return null!=c&&"object"==typeof c}var Le=L?function(c){return function(l){return c(l)}}(L):function(c){return Me(c)&&xe(c.length)&&!!S[me(c)]};function Ue(c){return Re(c)?function(c,l){var u=be(c),d=!u&&De(c),p=!u&&!d&&Oe(c),h=!u&&!d&&!p&&Le(c),g=u||d||p||h,f=g?function(c,l){for(var u=-1,d=Array(c);++u<c;)d[u]=l(u);return d}(c.length,String):[],m=f.length;for(var y in c)!l&&!B.call(c,y)||g&&("length"==y||p&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||Ce(y,m))||f.push(y);return f}(c,!0):function(c){if(!we(c))return function(c){var l=[];if(null!=c)for(var u in Object(c))l.push(u);return l}(c);var l=Se(c),u=[];for(var d in c)("constructor"!=d||!l&&B.call(c,d))&&u.push(d);return u}(c)}var Fe,je=(Fe=function(c,l,u,d){Ie(c,l,u,d)},function(c,l){return Ne(function(c,l,u){return l=re(void 0===l?c.length-1:l,0),function(){for(var d=arguments,p=-1,h=re(d.length-l,0),g=Array(h);++p<h;)g[p]=d[l+p];p=-1;for(var f=Array(l+1);++p<l;)f[p]=d[p];return f[l]=u(g),function(c,l,u){switch(u.length){case 0:return c.call(l);case 1:return c.call(l,u[0]);case 2:return c.call(l,u[0],u[1]);case 3:return c.call(l,u[0],u[1],u[2])}return c.apply(l,u)}(c,this,f)}}(c,l,Ve),c+"")}((function(c,l){var u=-1,d=l.length,p=d>1?l[d-1]:void 0,h=d>2?l[2]:void 0;for(p=Fe.length>3&&"function"==typeof p?(d--,p):void 0,h&&function(c,l,u){if(!we(u))return!1;var d=typeof l;return!!("number"==d?Re(u)&&Ce(l,u.length):"string"==d&&l in u)&&Pe(u[l],c)}(l[0],l[1],h)&&(p=d<3?void 0:p,d=1),c=Object(c);++u<d;){var g=l[u];g&&Fe(c,g,u,p)}return c})));function Ve(c){return c}c.exports=je},8:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g=9007199254740991,f="[object Function]",m="[object GeneratorFunction]",y="[object Symbol]",I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,A=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,S=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,N="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,P="object"==typeof self&&self&&self.Object===Object&&self,D=N||P||Function("return this")(),b=Array.prototype,R=Function.prototype,O=Object.prototype,v=D["__core-js_shared__"],x=(d=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=R.toString,M=O.hasOwnProperty,L=O.toString,U=RegExp("^"+w.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=D.Symbol,j=b.splice,V=X(D,"Map"),k=X(Object,"create"),B=F?F.prototype:void 0,G=B?B.toString:void 0;function W(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function H(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function q(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function z(c,l,u){var d=c[l];M.call(c,l)&&te(d,u)&&(void 0!==u||l in c)||(c[l]=u)}function Y(c,l){for(var u=c.length;u--;)if(te(c[u][0],l))return u;return-1}function K(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function X(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!re(c)||x&&x in c)return!1;var l=function(c){var l=re(c)?L.call(c):"";return l==f||l==m}(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?U:S;return l.test(function(c){if(null!=c){try{return w.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function J(c,l){return!!(l=l??g)&&("number"==typeof c||T.test(c))&&c>-1&&c%1==0&&c<l}W.prototype.clear=function(){this.__data__=k?k(null):{}},W.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},W.prototype.get=function(c){var l=this.__data__;if(k){var u=l[c];return u===p?void 0:u}return M.call(l,c)?l[c]:void 0},W.prototype.has=function(c){var l=this.__data__;return k?void 0!==l[c]:M.call(l,c)},W.prototype.set=function(c,l){return this.__data__[c]=k&&void 0===l?p:l,this},H.prototype.clear=function(){this.__data__=[]},H.prototype.delete=function(c){var l=this.__data__,u=Y(l,c);return!(u<0||(u==l.length-1?l.pop():j.call(l,u,1),0))},H.prototype.get=function(c){var l=this.__data__,u=Y(l,c);return u<0?void 0:l[u][1]},H.prototype.has=function(c){return Y(this.__data__,c)>-1},H.prototype.set=function(c,l){var u=this.__data__,d=Y(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},q.prototype.clear=function(){this.__data__={hash:new W,map:new(V||H),string:new W}},q.prototype.delete=function(c){return K(this,c).delete(c)},q.prototype.get=function(c){return K(this,c).get(c)},q.prototype.has=function(c){return K(this,c).has(c)},q.prototype.set=function(c,l){return K(this,c).set(c,l),this};var Q=ee((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(se(c))return G?G.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return A.test(c)&&u.push(""),c.replace(_,(function(c,l,d,p){u.push(d?p.replace(C,"$1"):l||c)})),u}));function Z(c){if("string"==typeof c||se(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function ee(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(ee.Cache||q),u}function te(c,l){return c===l||c!=c&&l!=l}ee.Cache=q;var ne=Array.isArray;function re(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function se(c){return"symbol"==typeof c||function(c){return!!c&&"object"==typeof c}(c)&&L.call(c)==y}c.exports=function(c,l,u){return null==c?c:function(c,l,u,d){if(!re(c))return c;l=function(c,l){if(ne(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!se(c))||E.test(c)||!I.test(c)||null!=l&&c in Object(l)}(l,c)?[l]:function(c){return ne(c)?c:Q(c)}(l);for(var p=-1,h=l.length,g=h-1,f=c;null!=f&&++p<h;){var m=Z(l[p]),y=u;if(p!=g){var A=f[m];void 0===(y=d?d(A,m,f):void 0)&&(y=re(A)?A:J(l[p+1])?[]:{})}z(f,m,y),f=f[m]}return c}(c,l,u)}},795:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g="[object Function]",f="[object GeneratorFunction]",m="[object Symbol]",y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,I=/^\w*$/,E=/^\./,A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,C=/^\[object .+?Constructor\]$/,S="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,T="object"==typeof self&&self&&self.Object===Object&&self,N=S||T||Function("return this")(),P=Array.prototype,D=Function.prototype,b=Object.prototype,R=N["__core-js_shared__"],O=(d=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",v=D.toString,x=b.hasOwnProperty,w=b.toString,M=RegExp("^"+v.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=N.Symbol,U=P.splice,F=Y(N,"Map"),j=Y(Object,"create"),V=L?L.prototype:void 0,k=V?V.toString:void 0;function B(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function G(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function W(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function H(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function q(c){return Z(c)?c:X(c)}function z(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function Y(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!ee(c)||O&&O in c)return!1;var l=function(c){var l=ee(c)?w.call(c):"";return l==g||l==f}(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?M:C;return l.test(function(c){if(null!=c){try{return v.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function K(c,l){if(Z(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!te(c))||I.test(c)||!y.test(c)||null!=l&&c in Object(l)}B.prototype.clear=function(){this.__data__=j?j(null):{}},B.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},B.prototype.get=function(c){var l=this.__data__;if(j){var u=l[c];return u===p?void 0:u}return x.call(l,c)?l[c]:void 0},B.prototype.has=function(c){var l=this.__data__;return j?void 0!==l[c]:x.call(l,c)},B.prototype.set=function(c,l){return this.__data__[c]=j&&void 0===l?p:l,this},G.prototype.clear=function(){this.__data__=[]},G.prototype.delete=function(c){var l=this.__data__,u=H(l,c);return!(u<0||(u==l.length-1?l.pop():U.call(l,u,1),0))},G.prototype.get=function(c){var l=this.__data__,u=H(l,c);return u<0?void 0:l[u][1]},G.prototype.has=function(c){return H(this.__data__,c)>-1},G.prototype.set=function(c,l){var u=this.__data__,d=H(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},W.prototype.clear=function(){this.__data__={hash:new B,map:new(F||G),string:new B}},W.prototype.delete=function(c){return z(this,c).delete(c)},W.prototype.get=function(c){return z(this,c).get(c)},W.prototype.has=function(c){return z(this,c).has(c)},W.prototype.set=function(c,l){return z(this,c).set(c,l),this};var X=Q((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(te(c))return k?k.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return E.test(c)&&u.push(""),c.replace(A,(function(c,l,d,p){u.push(d?p.replace(_,"$1"):l||c)})),u}));function J(c){if("string"==typeof c||te(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function Q(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(Q.Cache||W),u}Q.Cache=W;var Z=Array.isArray;function ee(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function te(c){return"symbol"==typeof c||function(c){return!!c&&"object"==typeof c}(c)&&w.call(c)==m}c.exports=function(c,l){return null==c||function(c,l){c=function(c,l){return 1==l.length?c:function(c,l){for(var u=0,d=(l=K(l,c)?[l]:q(l)).length;null!=c&&u<d;)c=c[J(l[u++])];return u&&u==d?c:void 0}(c,function(c,l,u){var d=-1,p=c.length;l<0&&(l=-l>p?0:p+l),(u=u>p?p:u)<0&&(u+=p),p=l>u?0:u-l>>>0,l>>>=0;for(var h=Array(p);++d<p;)h[d]=c[d+l];return h}(l,0,-1))}(c,l=K(l,c)?[l]:q(l));var u,d,p=J((d=(u=l)?u.length:0)?u[d-1]:void 0);return!(null!=c&&x.call(c,p))||delete c[p]}(c,l)}},386:c=>{class t{constructor(c,l,u,d,g){this.converter=p(),this.width=c,this.poly=l,this.xor_in=u,this.reflected_xor_in=h(u,c),this.xor_out=d,this.reflect=g,this.msb_mask=1<<this.width-1,this.mask=this.msb_mask-1<<1|1,this.crc_shift=this.width<8?8-this.width:0,this.shifted_xor_in=this.xor_in<<this.crc_shift;let f=this.gen_table();this.table=f,8!==this.width||this.xor_in||this.xor_out||this.reflect||(this.calculate=function(c){c=this.converter.validate_buffer(c);let l=0;for(let u=0;u<c.length;u++)l=f[l^c[u]];return l})}calculate(c){let l;c=this.converter.validate_buffer(c);let{table:u,width:d,crc_shift:p,mask:h}=this;if(this.reflect){l=this.reflected_xor_in;for(let d=0;d<c.length;d++)l=(u[255&(l^c[d])]^l>>>8)&h}else{l=this.shifted_xor_in;for(let g=0;g<c.length;g++)l=u[255&(l>>d-8+p^c[g])]<<p^l<<8-p&h<<p;l>>=p}return l^=this.xor_out,l>>>0}calculate_no_table(c){c=this.converter.validate_buffer(c);let l=this.xor_in;for(let u=0;u<c.length;u++){let d=c[u];this.reflect&&(d=h(d,8));for(let c=0;c<8;c++){let u=l&this.msb_mask;d&128>>c&&(u^=this.msb_mask),l<<=1,u&&(l^=this.poly)}l&=this.mask}return this.reflect&&(l=h(l,this.width)),l^=this.xor_out,l>>>0}gen_table(){let c=[];for(let l=0;l<256;l++){let u=l;this.reflect&&(u=h(u,8)),u<<=this.width-8+this.crc_shift;for(let c=0;c<8;c++)u&this.msb_mask<<this.crc_shift?(u<<=1,u^=this.poly<<this.crc_shift):u<<=1;this.reflect&&(u=h(u>>this.crc_shift,this.width)<<this.crc_shift),u=u>>this.crc_shift&this.mask,c[l]=u>>>0}return new Int32Array(c)}print_table(){let c=this.table,l=Math.ceil(this.width/4),u=l<4?4:3,d=c.length>>u,p=1<<u,h="";for(let g=0;g<d;g++){let d="";for(let h=0;h<p;h++){let p=c[g<<u|h];p="000000000"+p.toString(16),p=p.substr(p.length-l),d+="0x"+p+", "}h+="  "+d+"\n"}return h="[\n"+h.slice(0,-3)+"\n]",h}}const l="undefined"!=typeof Buffer,u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,d=void 0!==typeof BigInt&&BigInt(256);class a{validate_buffer(c){switch(typeof c){case"number":{if(!Number.isSafeInteger(c)||c<0)throw Error(`number data must be a nonnegative safe integer, not ${c}`);if(this.fromUInt32&&c<=4294967295)return this.fromUInt32(c);const l=[];for(;c>0||l.length<4;)l.unshift(c%256),c=Math.floor(c/256);return this.fromByteArray(l)}case"string":return this.fromString(c);case"bigint":{if(c<0)throw Error(`bigint data must be nonnegative, not ${c}`);const l=[];for(;c>0||l.length<4;)l.unshift(Number(c%d)),c/=d;return this.fromByteArray(l)}default:if(l&&Buffer.isBuffer(c))return c;if(u){if(ArrayBuffer.isView(c))return new Uint8Array(c.buffer,c.byteOffset,c.byteLength);if(c instanceof ArrayBuffer)return new Uint8Array(c)}throw new Error(`Unrecognized data type ${typeof c}: ${c}`)}}}class o extends a{fromUInt32(c){const l=Buffer.alloc(4);return l.writeUInt32BE(c),l}fromByteArray=Buffer.from.bind(Buffer);fromString=Buffer.from.bind(Buffer)}class i extends a{fromByteArray=Uint8Array.from.bind(Uint8Array);fromString(c){return new TextEncoder("utf-8").encode(c)}}function p(c=!1){if(u&&(c||!l))return new i;if(l)return new o;throw Error("either need TypedArrays or Buffer")}function h(c,l){let u=0;for(let d=0;d<l;d++)u=u<<1|1&c,c>>=1;return u}const g={crc1:new t(1,1,0,0,!1),crc6:new t(6,47,0,0,!1),crc8:new t(8,7,0,0,!1),crc10:new t(10,563,0,0,!1),crc16:new t(16,32773,0,0,!0),crc24:new t(24,8801531,11994318,0,!1),crc32:new t(32,79764919,4294967295,4294967295,!0),crc32c:new t(32,517762881,4294967295,4294967295,!0)};function f(c){}c.exports={CRC:t,crc:function(c,l,u,d,p){let h=new t(c,l,u,d,p);return h.calculate.bind(h)},makeBufferConverter:p,models:g,crc1:f,crc6:f,crc8:f,crc10:f,crc16:f,crc24:f,crc32:f,crc32c:f};for(let m in g){let l=g[m];c.exports[m]=l.calculate.bind(l)}},849:c=>{function l(c){return Promise.resolve().then((()=>{var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}))}l.keys=()=>[],l.resolve=l,l.id=849,c.exports=l}},r={};function s(c){var l=r[c];if(void 0!==l)return l.exports;var u=r[c]={id:c,loaded:!1,exports:{}};return n[c](u,u.exports,s),u.loaded=!0,u.exports}s.m=n,s.n=c=>{var l=c&&c.__esModule?()=>c.default:()=>c;return s.d(l,{a:l}),l},s.d=(c,l)=>{for(var u in l)s.o(l,u)&&!s.o(c,u)&&Object.defineProperty(c,u,{enumerable:!0,get:l[u]})},s.f={},s.e=c=>Promise.all(Object.keys(s.f).reduce(((l,u)=>(s.f[u](c,l),l)),[])),s.u=c=>"js/"+c+".177c98ad.js",s.miniCssF=c=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(c,l)=>Object.prototype.hasOwnProperty.call(c,l),e={},t="constellation-corejs-library:",s.l=(c,l,u,d)=>{if(e[c])e[c].push(l);else{var p,h;if(void 0!==u)for(var g=document.getElementsByTagName("script"),f=0;f<g.length;f++){var m=g[f];if(m.getAttribute("src")==c||m.getAttribute("data-webpack")==t+u){p=m;break}}p||(h=!0,(p=document.createElement("script")).type="module",p.charset="utf-8",p.timeout=120,s.nc&&p.setAttribute("nonce",s.nc),p.setAttribute("data-webpack",t+u),p.src=c),e[c]=[l];var y=(l,u)=>{p.onerror=p.onload=null,clearTimeout(I);var d=e[c];if(delete e[c],p.parentNode&&p.parentNode.removeChild(p),d&&d.forEach((c=>c(u))),l)return l(u)},I=setTimeout(y.bind(null,void 0,{type:"timeout",target:p}),12e4);p.onerror=y.bind(null,p.onerror),p.onload=y.bind(null,p.onload),h&&document.head.appendChild(p)}},s.r=c=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},s.nmd=c=>(c.paths=[],c.children||(c.children=[]),c),(()=>{var c;if("string"==typeof import.meta.url&&(c=import.meta.url),!c)throw new Error("Automatic publicPath is not supported in this browser");c=c.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=c})(),(()=>{var c={290:0};s.f.j=(l,u)=>{var d=s.o(c,l)?c[l]:void 0;if(0!==d)if(d)u.push(d[2]);else{var p=new Promise(((u,p)=>d=c[l]=[u,p]));u.push(d[2]=p);var h=s.p+s.u(l),g=new Error;s.l(h,(u=>{if(s.o(c,l)&&(0!==(d=c[l])&&(c[l]=void 0),d)){var p=u&&("load"===u.type?"missing":u.type),h=u&&u.target&&u.target.src;g.message="Loading chunk "+l+" failed.\n("+p+": "+h+")",g.name="ChunkLoadError",g.type=p,g.request=h,d[1](g)}}),"chunk-"+l,l)}};var l=(l,u)=>{var d,p,[h,g,f]=u,m=0;if(h.some((l=>0!==c[l]))){for(d in g)s.o(g,d)&&(s.m[d]=g[d]);f&&f(s)}for(l&&l(u);m<h.length;m++)p=h[m],s.o(c,p)&&c[p]&&c[p][0](),c[p]=0},u=self.webpackChunkconstellation_corejs_library=self.webpackChunkconstellation_corejs_library||[];u.forEach(l.bind(null,0)),u.push=l.bind(null,u.push.bind(u))})();var a={};(()=>{s.d(a,{Z:()=>TI});var c={};s.r(c),s.d(c,{buildContextName:()=>X,buildModalContext:()=>ee,buildTransientContextName:()=>J,getContainerIdFromContext:()=>ne,getParentContext:()=>te,getParentContextName:()=>K,getTargetFromContext:()=>Z,getTransientContext:()=>Q});var l={};s.r(l),s.d(l,{getResolvedTargetName:()=>Ct,getRoutingInfo:()=>St,getSemanticURLFromRoutingInfo:()=>Tt});var u={};s.r(u),s.d(u,{evaluate:()=>Zt,handleChange:()=>Jt,hasDeclareExpression:()=>Xt,updateDeclareExpressions:()=>Qt});var d={};s.r(d),s.d(d,{publishExpressions:()=>Ur,publishResponse:()=>Fr});var p={};s.r(p),s.d(p,{hasBrowserEnv:()=>Pa,hasStandardBrowserEnv:()=>ba,hasStandardBrowserWebWorkerEnv:()=>Ra,navigator:()=>Da,origin:()=>Oa});var h={};s.r(h),s.d(h,{CONTAINER_NAMES:()=>Ou,CONTAINER_TYPES:()=>Ru,addRootContainerItem:()=>dd,areContainerItemsPresent:()=>Uu,clearTransientData:()=>yd,closeContainerItem:()=>ud,getActiveContainerItemContext:()=>zu,getActiveContainerItemIDFromRoutingInfo:()=>bd,getActiveContainerItemName:()=>$u,getActiveContext:()=>Td,getChildContainerItems:()=>Ku,getChildContainers:()=>Xu,getChildContainersContexts:()=>Ju,getContainerAPI:()=>Ed,getContainerAccessOrder:()=>Lu,getContainerData:()=>xu,getContainerItemData:()=>wu,getContainerItemName:()=>ju,getContainerItems:()=>Mu,getContainerLimit:()=>rd,getContainerParentContext:()=>Dd,getContainerType:()=>ku,getContextByTargetAndKey:()=>Pd,getDataContextName:()=>Hu,getFlowContainer:()=>Od,getLeastRecentlyUsedNonDirtyContainerItemID:()=>cd,getParentContainerItem:()=>Rd,getRootContainerName:()=>Sd,getSuggestionContexts:()=>Qu,getTargetFromContainerItemID:()=>ld,getTransientItems:()=>gd,hasContainerItems:()=>nd,isContainerDirty:()=>id,isContainerInitialized:()=>Vu,isContainerItemActive:()=>Gu,isContainerItemContextBeingUsedInOtherContainers:()=>hd,isContainerItemExists:()=>Fu,isContainerLimitReached:()=>ad,isContainerMultipleMode:()=>td,isContainerSingleMode:()=>ed,purgeTransientData:()=>Id,removeContainer:()=>Ad,replaceTransientData:()=>md,resetContainersPayload:()=>od,setContainerLimit:()=>sd,updateCaseContextEtag:()=>Cd,updateParentLastUpdateTime:()=>Nd,updateRelatedContextEtag:()=>_d,updateTransientData:()=>fd});var g={};s.r(g),s.d(g,{getAdditionalInfo:()=>Rp,getDataPageKeys:()=>Pp,getDataPageMetadata:()=>Ip,getEmbeddedPropertyMetadata:()=>dp,getFieldParameters:()=>Cp,getFieldsByClassName:()=>_p,getGenAICoach:()=>Tp,getInsight:()=>Ap,getLookUpDataPage:()=>Dp,getLookUpDataPageInfo:()=>bp,getParagraph:()=>Sp,getPersonalizationMetadata:()=>Ep,getPropertyMetadata:()=>up,getResolvedFieldMetadata:()=>Op,getSavableDataPage:()=>Np,isViewExists:()=>mp,mergeStore:()=>lp,resolveNavigation:()=>yp,resolveView:()=>fp,updateNavigationStore:()=>hp,updateStores:()=>gp,updateViewStore:()=>pp});var f={};s.r(f),s.d(f,{dispatch:()=>Up,getActionType:()=>Gp,getContextValue:()=>$p,getDataObject:()=>Fp,getReferenceTokens:()=>wp,getSharedDataObject:()=>jp,getStore:()=>Lp,getValue:()=>kp,isMergeable:()=>Hp,lookupContextValue:()=>Bp,mergeDeep:()=>qp,removeItem:()=>Wp,replaceValue:()=>Yp,resetStore:()=>Kp,setStore:()=>Mp,updateValue:()=>zp});var m={};s.r(m),s.d(m,{activateContainerItem:()=>Nh,addContainerItem:()=>gh,addMessages:()=>Dh,addSharedData:()=>Fh,addTransientItem:()=>fh,addWork:()=>uh,clearTransientData:()=>yh,createWork:()=>sh,error:()=>Uh,finishAssignment:()=>xh,initContainers:()=>ph,listAction:()=>Vh,loadView:()=>ch,mergeData:()=>oh,openAssignment:()=>wh,openWorkByHandle:()=>dh,postProcess:()=>Lh,purgeTransientData:()=>Eh,removeAllTransientItems:()=>Rh,removeContainerItem:()=>bh,removeSharedData:()=>jh,removeTransientItem:()=>Oh,replaceContainerItem:()=>vh,replaceTransientData:()=>Ih,resetContainers:()=>hh,resetLoading:()=>Sh,setLoading:()=>_h,setSharedProperty:()=>$h,setStateProperty:()=>Bh,showCasePreview:()=>kh,showHarness:()=>ih,showHistory:()=>Mh,showPage:()=>lh,upMergeAndRemoveContainerItem:()=>Th,updateContainerItem:()=>Ah,updateTransientData:()=>mh});var y={};s.r(y),s.d(y,{doesRestApiExist:()=>lm,getCancelTokenSource:()=>um,getCaseApi:()=>hm,getHeaderProcessor:()=>om,invokeCustomRestApi:()=>cm,invokeRestApi:()=>im,isRequestCanceled:()=>dm,registerInterceptor:()=>pm});var I={};s.r(I),s.d(I,{fetchViewResources:()=>By,updateViewResources:()=>$y});var E=s(722),A=s.n(E);let _,C,S;const T=c=>{c&&(_=c=c||{"base-server":"http://localhost:1080/prweb/","data-end-point":"api/v1/stream/data","action-end-point":"api/v1/stream/action"},_.BASEURL=c.server,_.ACTIONURL=c["action-end-point"],_.DATAURL=c["data-end-point"],S=c.reAuthUrl)},N=()=>S,P=()=>_.BASEURL,D=c=>{C=c};var b=s(386),R=s(795),O=s.n(R),v=s(207),x=s.n(v),w=s(174),M=s.n(w),L=s(8),U=s.n(L),F=s(431),j=s.n(F),V=s(828),k=s.n(V);const B=new class{constructor(){this.needsMapping=!1}getNeedsMapping(){return this.needsMapping}setNeedsMapping(c){this.needsMapping=c}map(c){return this.needsMapping?this.replacer(c):c}analyseResponse(c){c?.data?.objectInfo&&window?.PCore?.getEnvironmentInfo()?.isUnifiedObject()?this.setNeedsMapping(!0):this.setNeedsMapping(!1)}replacer(c){return this.needsMapping&&(c=c.replace("caseInfo","objectInfo").replace("caseTypeName","objectTypeName").replace("caseTypeID","objectTypeID")),c}},G={APP:{APP:"app",ROOT:"root",PXREQUESTOR:"pxRequestor",PXUSERNAME:".pxUserName",OPERATORID:"OperatorID",USERNAME:"pxRequestor.pxUserName",PXUSERIDENTIFIER:".pxUserIdentifier",USERIDENTIFIER:"pxRequestor.pxUserIdentifier",PYIMAGEINSKEY:".pyImageInsKey",OPERATORID_IMG_INSKEY:"OperatorID.pyImageInsKey",OPERATORID_LOCALE:"OperatorID.pyUseLocale",APPLICATION_LABEL:"Application.pyLabel",APPLICATION_RULE_NAME:"Application.pyRuleName"},RESOURCE_TYPES:{ASSIGNMENT:"ASSIGNMENT",CASE:"CASE",DATA:"DATA",PAGE:"PAGE"},RESOURCE_STATUS:{CREATE:"CREATE",UPDATE:"UPDATE",OPEN_FLOW_ACTION:"OPEN_FLOW_ACTION"},VIEW_NAMES:{PY_CASE_TAB:"pyCaseTab",DATA_OBJECT_CREATE_VIEW:"Create",DATA_OBJECT_EDIT_VIEW:"pyEdit",PY_DATA_PREVIEW:"pyDataPreview",PY_DETAILS:"pyDetails"},CONTAINERS:{ROOT_CONTAINER:"RootContainer",VIEW_CONTAINER:"ViewContainer",FLOW_CONTAINER:"FlowContainer",MODAL_VIEW_CONTAINER:"ModalViewContainer",PREVIEW_VIEW_CONTAINER:"PreviewViewContainer",HYBRID_VIEW_CONTAINER:"HybridViewContainer"},WORK_BASKET:{MY_WORK_LIST:"myWorkList",REPORTEE:"reportee",WORK_QUEUE:"workQueue",DATA_PAGES:{D__PY_GET_USER_WORK_LIST_BY_USER_ID:"D_pyGetUserWorkListByUserId",D__WORK_BASKET:"D_WorkBasket",D__PY_MY_WORK_LIST:"D_pyMyWorkList"}},CONTEXT_TREE_NODE_TYPES:{VIEW:"VIEW",FIELD:"FIELD",DECLARATIVE_TARGET:"DECLARATIVE_TARGET",WHEN:"WHEN",CONTEXT:"CONTEXT",PAGELIST:"PAGELIST"},WORKLIST:"worklist",WAIT:"wait",TODO:"todo",STANDARD_FLOW:"Standard",CASE:"CASE",ASSIGNMENT:"ASSIGNMENT",FIX_BROKEN_ASSIGNMENTS:"FixBrokenAssignments",PAGE:"PAGE",PZINSKEY:".pzInsKey",CREATE_DETAILS_VIEW_NAME:"pzCreateDetails",PREVIEW_VIEW_NAME:"pyCasePreview",CASESUMMARY_VIEW_NAME:"pyCaseSummary",APPSHELL_ACTIVE_CASES:"appshell-activecases",TRACE_ID:"x-b3-traceid",LOAD_VIEW_STRING:"View",PRIMARY:"primary",DEFER_UPDATE_CASESUMMARY_VIEW:"deferUpdateCaseSummaryView",NEXT_ASSIGNMENT_INFO_ID:"nextAssignmentInfo.ID",WORKCLASS:"Work-",DATA_INFO:{DATA_INFO_CONTENT:"dataInfo.content"},CASE_INFO:{CASE_INFO:"caseInfo",CASE_INFO_CONTENT:"caseInfo.content",CASE_INFO_NAME:"caseInfo.name",CASE_INFO_ID:"caseInfo.ID",CASE_INFO_CLASSID:"caseInfo.content.classID",CASE_TYPE_ID:"caseInfo.caseTypeID",CASE_TYPE_NAME:"caseInfo.caseTypeName",CASE_INFO_PZINSKEY:"caseInfo.content.pzInsKey",CASE_INFO_ACTIONS:"caseInfo.availableActions",VIEW_NAME:"caseInfo.content.pyViewName",ACTION_BUTTONS:"caseInfo.actionButtons",ACTIVE_ACTION_ID:"caseInfo.activeActionID",ASSIGNMENT_LABEL:"caseInfo.assignments[0].name",ASSIGNMENT_ID:"caseInfo.assignments[0].ID",ASSIGNMENTS:"caseInfo.assignments",INSTRUCTIONS:"caseInfo.assignments[0].instructions",NAVIGATION:"caseInfo.navigation",STAGES:"caseInfo.stages",STAGEID:"caseInfo.stageID",CASECLASS:"caseInfo.caseClass",AVAILABLEACTIONS:"caseInfo.availableActions",AVAILABLEPROCESSES:"caseInfo.availableProcesses",D_CASE_ASSIGNMENTS_RESULTS:"caseInfo.assignments",CHILD_ASSIGNMENTS:"caseInfo.childCases",ASSIGNMENTACTION_ID:"caseInfo.assignments[0].actions[0].ID",ISINCREATESTAGE:"caseInfo.isInCreateStage",APPROVALFLAG:"caseInfo.content.pyApprovalResult",DUPLICATECASEFLAG:"caseInfo.content.pyDuplicateCaseActions",DUPLICATECASEID:"caseInfo.content.pyDuplicateID",DUPLICATECASEINSKEY:"caseInfo.content.pyDuplicateCaseReference.pzInsKey",HEADERS:"caseInfo.headers",PARENTCASEINFO:"caseInfo.parentCaseInfo",REMOTESYSTEMID:"caseInfo.headers.RemoteSystemID",CASE_RELATED_CASE_TYPES:"caseInfo.relatedCaseTypes",CASES:"caseInfo.cases",GETNEXTWORK:"caseInfo.confirmationLinks.getNextWork",ACTION_REFRESH_CONDITIONS:"caseInfo.assignments[0].actions[0].refreshConditions",IS_LOCAL_ACTION:"caseInfo.isLocalAction",BUSINESS_ID:"caseInfo.businessID",IS_FIRST_ASSIGNMENT:"caseInfo.isFirstAssignment"},ACTIONS:{ACTION_ID:"actionID",ACTIONS:"availableActions",DELETEAVIALACTIONS:"deleteAvailActions",FLOWACTION:"FlowAction",DATA_PAGES:{D_PY_ADDITIONAL_CASE_ACTIONS:"D_pyAdditionalCaseActions"}},PROCESS:{FLOWPROBLEMS:"FlowProblems"},PAGE_TYPES:{PAGE:"page",LANDINGPAGE:"landingpage",LISTPAGE:"listpage"},LOCAL_ACTION_TYPE:{CASE_WIDE:"case",EXPRESS:"express",ASSIGNMENT:"Assignment",LOCAL_ACTION:"LocalAction"},LOCAL_ACTIONS:{TRANSFER_ASSIGNMENT:"pyTransferAssignment"},CONTENT:"content",MODAL:"modal",STOPMERGEACTIONS:"stopMergeActions",IS_CREATE_DATA_OBJECT:"isCreateDataObject",SUMMARY_OF_ASSIGNMENT_LAST_SUBMIT_TIME:"context_data.caseInfo.content.summary_of_assignment__.lastSubmitTime",SUMMARY_OF_ATTACHMENTS_LAST_REFRESH_TIME:"context_data.caseInfo.content.summary_of_attachments__.lastRefreshTime",CONTEXT_DATA_ASSIGNMENTID:"context_data.assignmentID",BANNER_VARIANT_SUCCESS:"success",BANNER_VARIANT_WARNING:"warning",BANNER_VARIANT_URGENT:"urgent",BANNER_VARIANT_INFO:"info",MESSAGES:{MESSAGES_TYPE_SUCCESS:"success",MESSAGES_TYPE_INFO:"info",MESSAGES_TYPE_ERROR:"error"},PUB_SUB_EVENTS:{EVENT_RENDER_APP:"renderApp",EVENT_UNMOUNT_APP:"unmountApp",EVENT_REAUTH:"reAuth",EVENT_FULL_REAUTH:"fullReAuth",EVENT_CUSTOM_REAUTH:"customReAuth",EVENT_CANCEL:"cancel",EVENT_MINIMIZE:"minimize",EVENT_EXPRESS_LOCALACTION:"expressLocalActionSubmit",EVENT_BULKACTION:"bulkActionSubmit",EVENT_SHOW_CANCEL_ALERT:"showCancelAlert",EVENT_SHOW_DELETE_ALERT:"showDeleteAlert",EVENT_DASHBOARD_FILTER_CHANGE:"dashboardFilterChange",EVENT_DASHBOARD_FILTER_CLEAR_ALL:"dashboardFilterClearAll",EVENT_PROMOTED_FILTERS_CHANGE:"promotedFiltersChange",EVENT_LOGOFF:"Logoff",EVENT_TRANSIENT_ITEMS:{UPDATE_PROMOTED_FILTERS:"updatePromotedFilters"},UI_EVENTS:{SHOW_PAGE_INIT:"showPageInit",SHOW_PAGE_DONE:"showPageDone",SHOW_PAGE_STARTED:"showPageStarted"},CASE_EVENTS:{CASE_ATTACHMENTS_UPDATED_FROM_CASEVIEW:"caseAttachmentsUpdateFromCaseview",CASE_FOLLOWER_UPDATED_BY_OPERATOR_FROM_CASEVIEW:"caseFollowerUpdateByOperatorFromCaseview",CASE_FOLLOWER_UPDATE_BY_OPERATOR_FROM_WIDGET:"caseFollowerUpdateByOperatorFromWidget",CASE_CREATED:"caseCreated",CREATE_STAGE_DONE:"caseCreatedDone",CREATE_STAGE_CANCELLED:"caseCancelled",CREATE_STAGE_SAVED:"caseSaved",CREATE_STAGE_DELETED:"caseDeleted",ASSIGNMENT_SUBMISSION:"assignmentSubmission",END_OF_ASSIGNMENT_PROCESSING:"endOfAssignmentProcessing",CLOSE_CONFIRM_VIEW:"closeConfirmView",CASE_OPENED:"caseOpened",CASE_CLOSED:"caseClosed",ASSIGNMENT_OPENED:"assignmentOpened",CASE_PREVIEW:"casePreview",CURRENT_ASSIGNMENT_UPDATED:"currentAssignmentUpdated",CASE_LOCK_EVENT:"caseLockEvent"},BOOTSTRAP_SHELL_EVENTS:{CONSTELLATION_LOADED:"CONSTELLATION_LOADED"},CONTAINER_EVENTS:{CLOSE_CONTAINER_ITEM:"CLOSE_CONTAINER_ITEM",CLOSE_MULTI_TYPE_PRIMARY_CONTAINER_ITEM:"CLOSE_MULTI_TYPE_PRIMARY_CONTAINER_ITEM"},DISPLAY_CASE_CREATED_TOASTER:"displayCaseCreatedToaster",DATA_EVENTS:{DATA_OBJECT_CREATED:"dataObjectCreated",DATA_OBJECT_DELETED:"dataObjectDeleted",DATA_OBJECT_UPDATED:"dataObjectUpdated"},FETCH_SUCCESS:"fetchSuccess",REVERSE_COEXISTENCE_EVENTS:{HANDLE_DISCARD:"handleDiscard",CHECK_IS_FORM_DIRTY:"checkIsFormDirty"},TIMEOUT_REMINDER:"sessionAboutToTimeout",RESET_TIMER:"resetInactivityTimer"},CONTAINER_TYPE:{MULTIPLE:"multiple",SINGLE:"single",HYBRID:"HybridViewContainer"},REMOTE_SYSTEM_ID:"RemoteSystemID",LIST_SELECTION_MODE:{MULTI:"multi",SINGLE:"single",MULTI_ON_HOVER:"multi_on_hover"},SUBMISSION_FAILURE_TYPE:{FORM_VALIDATION_ERROR:"formValidationError"},USER_SETTINGS:{UTILITY_PANEL_USER_STATE_PATH:"presentation.templates.CaseView.utilityPanelExpanded",SUMMARY_PANEL_USER_STATE_PATH:"presentation.templates.CaseView.summaryPanelExpanded",ASSIGNMENT_COLLAPSED_STATE_PATH:"presentation.templates.CaseView.assignmentWidgetCollapsed",CASE_VIEW_PATH:"presentation.templates.CaseView"},PROMISE_VALUE:{RESOLVE:"resolve",REJECT:"reject"},APP_TYPE:{UIKIT:"uikit",THEME_COSMOS:"themecosmos"},VIEW_TYPE:{PY_EMBEDASSIGNMENT:"pyEmbedAssignment",PY_DETAILS:"pyDetails"},START_PERFORMANCE_LOG:"start-performance-log",STOP_PERFORMANCE_LOG:"stop-performance-log",TOP_ACTION_LABEL:{CREATEWORK:"Create-Work",OPENASSIGNMENT:"Open-Assignment",OPENWORKBYHANDLE:"Open-Work-By-Handle",SAVEANDCLOSE:"Save-And-Close",SHOWDATA:"Show-Data",FINISHASSIGNMENT:"Finish-Assignment",GETDESCENDANTS:"Get-Descendants"}},W={CONTEXT:"context",AJAXCONTAINER:"primary",VIEW_CONTAINER:"ViewContainer",APP_SHELL:"AppShell",ROOT_CONTAINER:"RootContainer",HYBRID_VIEW_CONTAINER:"HybridViewContainer",MODAL_VIEW_CONTAINER:"ModalViewContainer",FLOW_CONTAINER:"FlowContainer",PREVIEW_VIEW_CONTAINER:"PreviewViewContainer",OBJECT_PAGE:"ObjectPage",CASE_CREATE_STAGE:"CaseCreateStage",CASE_VIEW:"CaseView",VIEW:"view",CASE_PREVIEW:"CasePreview",CASE_STAGES:"Stages",CASEMESSAGES:"caseMessages",SUGGESTION:"suggestion",PREVIEW:"preview",TERTIARY:"tertiary",DEFAULT:"default",ACPRIMARY:"primary",ACTERTIARY:"tertiary",PERFORM_MODE:"perform",CASE_VIEW_MODE_PROP:".caseViewMode",REVIEW_MODE:"review",WORKAREA:"workarea",ACPRIMARY_NAME:"ACPRIMARY",ACTERTIARY_NAME:"ACTERTIARY",THREADNAMESEPARATOR:"/",JOINCHARACTER:"_",FORWARD_SLASH_STRING:"/",UNDERSCORE_STRING:"_",WORK_ID:"WORK_ID",EMPTY_STRING:"",PROPERTY_MESSAGES:"propertyMessages__",CONTEXT_MESSAGES:"contextMessages__",HTTP_MESSAGES:"httpMessages__",PAGE_MESSAGES:"pageMessages__",SUMMARY_OF_LISTS:"summary_of_lists__",SUMMARY_OF_GROUPS:"summary_of_groups__",SUMMARY_OF_MESSAGES:"summary_of_messages__",SUMMARY_OF_FIELD_VALUES:"summary_of_field_values__",SUMMARY_OF_WHEN_CONDITIONS:"summary_of_when_conditions__",SUMMARY_OF_EXPRESSIONS:"summary_of_expressions__",SUMMARY_OF_ASSOCIATED_LISTS:"summary_of_associated_lists__",CONTEXT_DATA:"context_data",TABLE:c=>`Table[${c}]`,HTTP:"HTTP",PROPERTY:"PROPERTY",PAGE_ERRORS:"page_level_errors",NO_MESSAGES:"No messages existing",PULSE_REFERENCE:"pulse.messages",IS_LOADING:"isLoading",APPROVED:"Approved",REJECTED:"Rejected",DUPLICATE:"Duplicate",IGNORE:"Ignore",PARAGRAPH:"PARAGRAPH",X_ORIGIN_CHANNEL:"x-origin-channel",AUTHORING_PREVIEW_CONTAINER:"root/authoring-preview",ERROR_FIELD_IN_PAGE:"erroneousInputOutputFieldInPage",ERROR_IN_PAGE_IDENTIFIER:"erroneousInputOutputIdentifier",UI_RESOURCES:"uiResources",UI_RESOURCES_CONTEXT_DATA:"uiResources.context_data",ACTION_BUTTONS:"uiResources.actionButtons",RESOURCES:"uiResources.resources",ROOT:"uiResources.root",CASE_INFO_IS_LOCAL_ACTION:"caseInfo.isLocalAction",DATA:"data",OPTIONS:"options",VIEWS:"uiResources.resources.views",NAVIGATIONS:"uiResources.resources.navigations",COMPONENTS:"uiResources.components",LOCALE_REFERENCES:"uiResources.localeReferences",STATIC_SERVER_URL:"staticServer",APPLICATION_DATA:"data.Application",REFERENCED_USERS:"referencedUsers",CASE_INFO_REFRESH_CONDITIONS:"caseInfo.refreshConditions",FIELD_LEVEL_SUCCESS:"success",FIELD_LEVEL_WARNING:"warning",FIELD_LEVEL_ERROR:"error",HASH_DELIMITER:"~^|^~",NULL_STRING:"null",DATA_PAGE:"DataPage",DECISION:"Decision",RULE_REFERENCE:"RuleReference",GET_PAGE_DATA:"getPageData",PROPERTY_ANNOTATION:"@P",FIELD_LABEL_ANNOTATION:"@FL",ATTACHMENT_ANNOTATION:"@ATTACHMENT",ASSOCIATED_PROPERTY_ANNOTATION:"@ASSOCIATED",CLASS_ANNOTATION:"@CLASS",ASSOCIATED:"associated",CLASS_ID:".classID",CLASSID:"classID",READONLY:"readonly",SHARED:"shared",RELOAD_IF_OLDER_THAN:"reloadIfOlderThan",RELOAD_ONCE_PER_INTERACTION:"reloadOncePerInteraction",PY_DETAILS:"pyDetails",LIST_ACTIONS:{INSERT:"INSERT",UPDATE:"UPDATE",DELETE:"DELETE",DELETE_ALL:"DELETE ALL",MOVE:"MOVE",SELECT:"SELECT",DESELECT:"DESELECT"},LIST_ACTIONS_TYPE:{SELECT_DESELECT:"SELECT_DESELECT",DESELECT_ALL:"DESELECT_ALL"},ENV_INFO_KEYS:{APPLICATION_NAME:"APPLICATION_NAME",APPLICATION_DESC:"APPLICATION_DESC",ACCESS_GROUP:"ACCESS_GROUP",USER_NAME:"USER_NAME",USER_ID:"USER_ID",USER_IMAGE:"USER_IMAGE",LOCALE:"LOCALE",TIMEZONE:"TIMEZONE",WORK_GROUP:"WORK_GROUP"},ID:"ID",SCALARLIST:"ScalarList",COREHEADERS:"coreHeaders",SKIPCOREHEADERS:"skipCoreHeaders",COREHEADER_APP_DEBUG_ID:"X-Pega-App-Debug-ID",COREHEADER_APP_DEBUG_LEVELS:"X-Pega-App-Debug-Levels",CONTEXT_DATA_MODAL_VIEW:{IS_MULTI_RECORD_DATA:"context_data.modalView.isMultiRecordData",VIEW_NAME:"context_data.modalView.viewName",PARENT_CONTEXT:"context_data.modalView.parentContext",INTERESTPAGE:"context_data.modalView.interestPage"},DATA_CLASS_NOT_FOUND:"Data object class not found",PRIORITY:{CRITICAL:100,HIGH:500,MEDIUM:1e3,LOW:2e3,TRIVIAL:3e3},...G,getProperty:c=>B.map(c)},H="pyRemoteCaseDetails";class ${static remoteCaseMapping={};static setRemoteCaseMapping=c=>{this.remoteCaseMapping=c,this.setAdditionalParameters()};static getRemoteCaseMapping=()=>this.remoteCaseMapping;static getRemoteCase=c=>this.remoteCaseMapping?.[c];static isRemoteCase=c=>!!(c&&this.remoteCaseMapping&&this.remoteCaseMapping[c]);static getRemoteHeaderByContext=c=>Zp.getProperty(".RemoteSystemID",W.CASE_INFO.HEADERS,c);static getRemoteHeader=c=>this.remoteCaseMapping[c]?.RemoteSystemID;static injectRemoteCaseHeader=(c,l,u)=>{if(c&&c.RemoteSystemID)return;const d=this.getRemoteHeaderByContext(u);d?c.RemoteSystemID=d:l&&this.isRemoteCase(l.caseTypeID)&&(c.RemoteSystemID=this.getRemoteHeader(l.caseTypeID))};static isTraditionalRemoteCase=(c="")=>"Traditional"===$.getRemoteCase(c)?.RemoteApplicationType;static setAdditionalParameters=()=>{const c=kd.environmentInfoObject?.pyRemoteCaseTypeList;c?.forEach((c=>{const l=this.getRemoteCase(c.pyWorkTypeImplementationClassName);l&&(l.name=c.pyWorkTypeName)}))}}const q=$,z={},Y=new Map,K=c=>{let l=W.EMPTY_STRING;return l=c&&c.includes(W.FORWARD_SLASH_STRING)?c.substring(0,c.lastIndexOf("/")):c,l},X=(c,l,u=!1)=>{let d=W.EMPTY_STRING;if(l&&c){let p=`${l}${W.FORWARD_SLASH_STRING}${c}`;const h=xu(p);if(h||l!==W.APP.APP&&l!==W.APP.ROOT)if(h){if(u&&z[p])return d=`${p}${W.UNDERSCORE_STRING}${z[p]}`,d;z[p]?z[p]+=1:z[p]=1,d=`${p}${W.UNDERSCORE_STRING}${z[p]}`}else d=X(c,K(l));else p=`${l}${W.FORWARD_SLASH_STRING}${W.PRIMARY}`,z[p]?z[p]+=1:z[p]=1,d=`${p}${W.UNDERSCORE_STRING}${z[p]}`}return d},J=(c,l)=>{if(c&&l){const u=(Y[l]?.[c]??0)+1;return Y[l]||(Y[l]={}),Y[l][c]=u,`${l}${W.FORWARD_SLASH_STRING}${c}_${u}`}return""},Q=(c,l)=>{if(c&&l){const u=Y[l]?.[c];return u?`${l}${W.FORWARD_SLASH_STRING}${c}_${u}`:J(c,l)}return""},Z=c=>{let l=W.EMPTY_STRING;return c&&(l=c.substring(c.lastIndexOf("/")+1,c.lastIndexOf("_")).toLowerCase()),l},ee=(c,l)=>{if(null===c)return l;const[,u]=l.split(W.FORWARD_SLASH_STRING);return c+W.FORWARD_SLASH_STRING+u},te=c=>{const l=c.indexOf(W.FORWARD_SLASH_STRING),u=c.lastIndexOf(W.FORWARD_SLASH_STRING);return l===u?c:c.substring(0,u)},ne=c=>{const l=c.split(W.FORWARD_SLASH_STRING);return 2===l.length?c:l[0]+W.FORWARD_SLASH_STRING+l[2]},re="SET_PROPERTY",se="REPLACE_PROPERTY",ae="FIELD_CHANGE",oe="LOAD_VIEW",ie="SHOW_PAGE",ce="SHOW_DATA",le="SHOW_INSIGHT",ue="SHOW_DASHBOARD",de="SET_LOADING",pe="RESET_LOADING",he="SET_SHARED_PROPERTY",ge="CREATE_WORK",fe="OPEN_WORK_BY_HANDLE",me="UPDATE_DOCUMENT",ye="FINISH_ASSIGNMENT",Ie="CANCEL_ASSIGNMENT",Ee="OPEN_ASSIGNMENT",Ae="MERGE_DATA",_e="REMOVE_ITEM",Ce="GET_DATAOBJECT_ACTIONS",Se="SHOW_HISTORY",Te="ERROR",Ne="INIT_CONTAINERS",Pe="RESET_CONTAINERS",De="ADD_CONTAINER_ITEM",be="REMOVE_CONTAINER_ITEM",Re="ADD_TRANSIENT_ITEM",Oe="UPDATE_TRANSIENT_DATA",ve="REMOVE_TRANSIENT_ITEM",xe="REMOVE_ALL_TRANSIENT_ITEMS",we="CLEAR_TRANSIENT_DATA",Me="PURGE_TRANSIENT_DATA",Le="REPLACE_TRANSIENT_DATA",Ue="ACTIVATE_CONTAINER_ITEM",Fe="UPDATE_CONTAINER_ITEM",je="UPMERGE_AND_REMOVE_CONTAINER_ITEM",Ve="REPLACE_CONTAINER_ITEM",ke="ACTIVATE_MODAL_CONTAINER_ITEM",$e="REMOVE_CONTAINER",Be="ADD_SUGGESTION_CONTEXT",Ge="showView",We="showData",He="showInsight",qe="showDashboard",ze="openWorkByHandle",Ye="openAssignment",Ke="createNewWork",Xe="SHOW_CANCEL_ALERT",Je="openLocalAction",Qe="openProcessAction",Ze="caseWideActions",et="openBulkAction",tt="performBulkAction",nt="ADD_MESSAGES",rt="CLEAR_MESSAGES",st="RESET_STORE",at="FETCH_DATAPAGE",ot="ADD_SHARED_DATA",it="REMOVE_SHARED_DATA",ct="LIST_ACTION",lt="DELETE_CASE_SUMMARY",ut="ALTER_BLOCKING_ACTION_COUNT",dt="CREATE_DATA_OBJECT",pt="DELETE_DATA_OBJECT",ht="VIEW_DATA_OBJECT",gt="UPDATE_DATA_OBJECT",ft="OPEN_DATA_OBJECT_ACTION",mt="SUBMIT_DATA_OBJECT_ACTION",yt="OPEN_EMBEDDED_DATA_MODAL",It="SUBMIT_EMBEDDED_DATA_MODAL",Et="FILL_FORM_WITH_AI",At="openCase",Ct=(c,l)=>{if(!c||!l)return null;let u,d=W.EMPTY_STRING;return l&&(d=`${l}${W.FORWARD_SLASH_STRING}${c}`,u=xu(d),u||l.includes("/")?u||(d=Ct(c,K(l))):d=`${l}${W.FORWARD_SLASH_STRING}${c}`),d},St=(c,l)=>{const u=Ct(c,l);return u&&xu(u)?xu(u):{}},Tt=(c,l)=>Vd.getSemanticURL(Ge,{page:c},l),Nt=new class{error=c=>{console.error(c)}};class _t{constructor(c,l,u){this._grammar=c,this._state="expectOperand",this._tree=null,this._exprStr=l||"",this._endState=u||{}}static _setParent(c,l){Object.defineProperty(c,"_parent",{value:l,writable:!0})}_addToken(c){const l=wt[this._state],u=this._exprStr;if(this._exprStr+=c.element,l.subHandler){this._subParser||this._startSubExpression(u);const l=this._subParser._addToken(c);l&&(this._endSubExpression(),this._state=l)}else{if(!l.operatorTypes[c.tokenType]){if(this._endState[c.tokenType])return this._endState[c.tokenType];throw new Error(`Token ${c.element} (${c.tokenType}) unexpected in expression: ${this._exprStr}`)}{const u=l.operatorTypes[c.tokenType],d=xt[c.tokenType];d&&d.call(this,c),u.toState&&(this._state=u.toState)}}return!1}addTokens(c){c.forEach(this._addToken,this)}buildAst(){return this._subParser&&this._endSubExpression(),this._state="complete",this._position?this._tree:null}_startSubExpression(c){const{endStates:l}=wt[this._state];this._subParser=new _t(this._grammar,c,l)}_endSubExpression(){wt[this._state].subHandler.call(this,this._subParser.buildAst()),this._subParser=null}setPositionInAST(c){this._position?(this._position.right=c,_t._setParent(c,this._position)):this._tree=c,this._position=c}}const Pt=_t,Dt="identifier",bt={operatorType:"binaryOperator",precedence:1,evaluate:(c,l)=>c&&l},Rt={operatorType:"binaryOperator",precedence:1,evaluate:(c,l)=>c||l},Ot={">":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c>l},">=":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c>=l},"<":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c<l},"<=":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c<=l},"==":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c===l},"!=":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c!==l},"!":{operatorType:"unaryOperator",precedence:999,evaluate:c=>{let{value:l}=c;return"true"!==l&&"false"!==l||(l="true"===l),!l}},"(":{operatorType:"openParenthesis"},")":{operatorType:"closeParenthesis"},"&&":bt,AND:bt,and:bt,"||":Rt,OR:Rt,or:Rt,CONTAINS:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c.includes(l)},NOT_CONTAINS:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!c.includes(l)},STARTS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c.startsWith(l)},NOT_STARTS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!c.startsWith(l)},ENDS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c.endsWith(l)},NOT_ENDS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!c.endsWith(l)},IS_NULL:{operatorType:"binaryOperator",precedence:2,evaluate:c=>!c},IS_NOT_NULL:{operatorType:"binaryOperator",precedence:2,evaluate:c=>!!c},IS_IN_LIST:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>l.split(",").includes(c)},IS_NOT_IN_LIST:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!l.split(",").includes(c)}},vt={BinaryExpression:function(c){const l=[];let u="";return l[0]=this.evaluateAST(c.left),c.left.operationType===Dt&&this._context&&(u=this._context.getFieldMetadata(c.left.value.substring(1))?.type??""),l[1]=c.right?this.evaluateAST(c.right,u):"",this._grammar[c.operator].evaluate(l[0],l[1])},identifier:function(c){return this._localDataObject?this._localDataObject[c.value.substring(1)]??"":this._contextTreeNodeContext?Zp.getLitePropertyValue(this._contextTreeNodeContext,c.value):this._context.getValue(c.value)??""},literal:function(c,l){return void 0!==l&&""!==l&&"True-False"!==l||"true"!==c.value&&"false"!==c.value?c.value:"true"===c.value},UnaryExpression:function(c){return this._grammar[c.operator].evaluate(c.right)}},xt={unaryOperator:function(c){this.setPositionInAST({operationType:"UnaryExpression",operator:c.value})},binaryOperator:function(c){const{precedence:l}=this._grammar[c.value];let u=this._position._parent;for(;u&&u.operator&&this._grammar[u.operator].precedence>=l;)this._position=u,u=u._parent;const d={operationType:"BinaryExpression",operator:c.value,left:this._position};Pt._setParent(this._position,d),this._position=u,this.setPositionInAST(d)},identifier:function(c){const l={operationType:Dt,value:c.value};this.setPositionInAST(l)},literal:function(c){this.setPositionInAST({operationType:"literal",value:c.value})},subExpression:function(c){this.setPositionInAST(c)}},wt={expectOperand:{operatorTypes:{literal:{toState:"expectBinOp"},identifier:{toState:Dt},unaryOperator:{},openParenthesis:{toState:"subExpression"}}},expectBinOp:{operatorTypes:{binaryOperator:{toState:"expectOperand"}}},identifier:{operatorTypes:{binaryOperator:{toState:"expectOperand"}}},subExpression:{subHandler:xt.subExpression,endStates:{closeParenthesis:"expectBinOp"}}},Mt=["binaryOperator","unaryOperator","openParenthesis"],Lt=/^\s*$/,Ut=/^[a-zA-Z_.$][(0-9)a-zA-Z0-9_.$]*$/,jt=/\\\\/,Vt=["'(?:(?:\\\\')|[^'])*'",'"(?:(?:\\\\")|[^"])*"',"\\s+","\\btrue\\b","\\bfalse\\b"],kt=["[a-zA-Z_.\\$][(0-9)a-zA-Z0-9_.\\$]*","[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}|[0-9]{4}-[0-9]{2}-[0-9]{2}","(?:(?:[0-9]*\\.[0-9]+)|[0-9]+)"],$t=/^-?(?:(?:[0-9]*\.[0-9]+)|[0-9]+)$/;class Ft{constructor(c){this._grammar=c}static _isNegative(c){return Mt.some((l=>l===c[c.length-1].tokenType))}static _isWhitespace(c){return!!c.match(Lt)}static _createWordboundary(c){return(c=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).match(Ut)&&(c=`\\b${c}\\b`),c}static _unquote(c){const[l]=c,u=new RegExp(`\\\\${l}`,"g");return c.substr(1,c.length-2).replace(u,l).replace(jt,"\\")}_getSplitRegex(){if(!this._splitRegex){const c=Object.keys(this._grammar).sort(((c,l)=>l.length-c.length)).map((c=>Ft._createWordboundary(c)),this);this._splitRegex=new RegExp(`(${[Vt.join("|"),c.join("|"),kt.join("|")].join("|")})`)}return this._splitRegex}_splitExpression(c){const l=this._getSplitRegex();return c.split(l).filter((c=>c))}_createToken(c){const l={tokenType:"literal",value:c,element:c};return'"'===c[0]||"'"===c[0]?l.value=Ft._unquote(c):c.match($t)?l.value=parseFloat(c):"true"===c||"false"===c?l.value="true"===c:this._grammar[c]?l.tokenType=this._grammar[c].operatorType:c.match(Ut)&&(l.tokenType="identifier"),l}_getTokens(c){const l=[];let u=!1;for(let d=0;d<c.length;d+=1)Ft._isWhitespace(c[d])?l.length&&(l[l.length-1].element+=c[d]):"-"===c[d]&&Ft._isNegative(l)?u=!0:(u&&(c[d]=`-${c[d]}`,u=!1),l.push(this._createToken(c[d])));return l}tokenize(c){const l=this._splitExpression(c);return this._getTokens(l)}}const Bt=Ft,Gt=class{constructor(c,l){this._grammar={...Ot},this._expression=c,this._ast=null,this._context={},this._contextTreeNodeContext=null,this._localDataObject=l}buildAST(){const c=new Bt(this._grammar).tokenize(this._expression),l=new Pt(this._grammar);return l.addTokens(c),this._ast=l.buildAst(),this}evaluate(c,l){return this._context=c,this._contextTreeNodeContext=l,this.evaluateAST(this._ast)}evaluateAST(c,l){return vt[c.operationType].call(this,c,l)}},Wt=(c,l)=>{const u=c.replace(/[a-zA-Z0-9_)"'\s]=[a-zA-Z0-9_("'\s]/,(c=>c.replace("=","==")));return new Gt(u,l)},Ht=c=>!c||c.buildAST(),qt=(c,l,u)=>!c||c.evaluate(l,u),zt=(c,l,u)=>{const d=Wt(c,l),p=Ht(d);return qt(p,u)},Yt=class{static handleExpression(c,l,u,d){(c=>fetch(`${_.BASEURL}${_.ACTIONURL}`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}))({actionObject:{action:"decexp",params:{source:c,value:l,targets:u},context:this.getContext(c,d)}}).then((c=>c.json())).then((c=>{this.updateState(c,d)})).catch((c=>window.console.log(c)))}static getContext(c,l){const u=c.substring(0,c.indexOf("."));return{name:u,class:Zp.getPropertyValue(`${u}.pxObjClass`,null,l)||Zp.getPropertyValue(`${u}.pyClassName`,null,l)}}static updateState(c,l){Object.keys(c).forEach((u=>Up({type:re,payload:{context:l,reference:u,value:c[u]}})))}},Kt={},Xt=(c,l)=>Kt[l]&&Object.prototype.hasOwnProperty.call(Kt[l],c),Jt=c=>{const{context:l}=c;Xt(c.reference,l)&&Yt.handleExpression(c.reference,c.value,Kt[l][c.reference],l)},Qt=(c={})=>{Xp.copy(c,Kt)},Zt=(c,l,u)=>zt(c,l,u?.pConnect.getPConnect()),en=new class{constructor(){this._dataSourceMap={}}hasContextName(c){return c in this._dataSourceMap}addContextName(c,l){l&&Object.keys(l).length>0?this._dataSourceMap[c]=l:this._dataSourceMap[c]={}}getContextObjectByName(c){return c in this._dataSourceMap?this._dataSourceMap[c]:null}deleteContextName(c){this.hasContextName(c)&&delete this._dataSourceMap[c]}addOrUpdatePropertyInContext(c,l,u){if(this.hasContextName(c)){const d=this.getContextObjectByName(c);if(d)if(Array.isArray(u))d[l]=u;else{const c=d[l];d[l]=[...new Set([...c,u])]}}else{const d={};Array.isArray(u)?d[l]=u:d[l]=[u],this.addContextName(c,d)}}deletePropertyInContext(c,l){if(this.hasContextName(c)){const u=this.getContextObjectByName(c);u&&l in u&&delete u[l]}}getPropertyFromContext(c,l){if(this.hasContextName(c)){const u=this.getContextObjectByName(c);if(u&&l in u)return u[l]}return[]}getDependencies(c,l){const u=this.getPropertyFromContext(c,l),d=new Set(u);return u.forEach((c=>{d.add(c)})),[...d]}},tn=new class{constructor(){this.componentMap={},this.overrideMap={},this.lazyMap={},this.customComponentLazyMap={}}register(c,l){this.componentMap[c]=l}registerLazyMap(c,l){this.lazyMap[c]=l}registerCustomComponentLazyMap(c,l){this.customComponentLazyMap[c]=l}getComponent(c){return this.componentMap[c]}getLazyComponent(c){return this.lazyMap[c]}getCustomComponent(c){return this.customComponentLazyMap[c]}mergeComponentsMap(c={}){Xp.copy(c,this.componentMap)}mergeOverrideMap(c={}){Xp.copy(c,this.overrideMap)}getOverrideMap(){return this.overrideMap}getLazyMap(){return this.lazyMap}},nn=new class{constructor(){this.handlers={}}registerHandler(c,l){this.handlers[c]=l}getHandler(c){return this.handlers[c]}},rn=class{static handleAnnotation(c,l,u){const d=c.indexOf(" "),p=-1===d?c:c.substring(0,d),h=nn.getHandler(p);return h?h(c.substring(d+1),l,u):c}static trimAnnotation(c){if("string"!=typeof c)return c;const l=c.indexOf(" "),u=c.substring(0,l),d=c.substring(l+1);return nn.getHandler(u)?d:c}static handleComponentMapping(c,l,u){const d=tn.getComponent(l.type);if(!d||!d.mapping)return;const p=d.mapping(l.config);if(p&&p["@map"]){const l=p["@map"],{source:d}=l;if(!d)return;const h=u.getValue(d);if("function"==typeof l.advanced)l.advanced(c,h);else{const u=l.inputs_map;c[l.output_property]=[];const d=c[l.output_property];h.forEach((c=>{const l={};Object.keys(u).forEach((d=>{let p=u[d];p&&0===p.indexOf(".")?(p=p.substring(1),l[d]=c[p]):l[d]=p})),d.push(l)}))}}}static getPropertyName(c=""){if(c&&Xp.isString(c)){const l=c.startsWith(W.PROPERTY_ANNOTATION)||c.startsWith(W.ATTACHMENT_ANNOTATION)||c.startsWith(W.ASSOCIATED_PROPERTY_ANNOTATION),u=l?c.indexOf(" "):-1;return l?c.substring(u+2):c}return c}static getLeafPropertyName(c){if(Xp.isString(c)&&c?.startsWith(W.PROPERTY_ANNOTATION)){const l=this.getPropertyName(c),u=l.split(".");return u.length<2?l:u.pop()}return c}static isProperty(c){return Xp.isString(c)&&!!c?.startsWith(W.PROPERTY_ANNOTATION)}},sn=c=>{if(c){const{stageID:l,stages:u=[]}=c,d=u.length;for(let c=0;c<d;c+=1)if(u[c].ID===l)return"create"===u[c].transitionType&&"active"===u[c].visited_status}return!1},an=(c,l)=>{if(c&&l){const u=Xp.getIn(l,["assignments","0","assigneeInfo"],{}),{ID:d,type:p}=u;return"worklist"===p?.toLowerCase()&&d===c}return!1},on=c=>{const{activeActionID:l,availableActions:u}=c||{};if(l&&u){const c=u.find((c=>c.ID===l));return Boolean(c)}return!1},cn=(c,l)=>{const u=Zp.getPropertyValue(G.CASE_INFO.ACTIVE_ACTION_ID,l,c),d=Zp.getPropertyValue(G.CASE_INFO.AVAILABLEACTIONS,l,c);let p=!1;if(d&&u){const c=d.find((c=>c.ID===u));c&&(p=c.type.toLowerCase()===G.LOCAL_ACTION_TYPE.CASE_WIDE.toLowerCase())}if(c&&!d){const l=Fp(c);p=l?.context_data?.actionType===W.CASE}return p},ln=c=>$p(null,W.CASE_VIEW_MODE_PROP,c)===W.PERFORM_MODE&&(c.includes(W.WORKAREA)||c.includes(W.MODAL)),un=c=>{const l=c?.parentCaseInfo?.ID;return Boolean(c&&l)},pn=(c,l,u)=>{let d,p,h,g,f,m,y,I,E;const A=Fp(c);return u?.isTriggeredFromDifferentContext?(d=A.caseInfo.assignments[0].ID,p=A.caseInfo.ID,h=A.caseInfo.assignments,g=A.caseInfo.activeActionID,f=A.caseInfo.availableActions,m=A.caseInfo,y=A.caseInfo.businessID,I=A.caseInfo.caseTypeID,E=A.caseInfo.caseTypeName):(d=l.getValue(G.CASE_INFO.ASSIGNMENT_ID),p=l.getValue(G.CASE_INFO.CASE_INFO_ID),h=l.getValue(G.CASE_INFO.ASSIGNMENTS),g=l.getValue(G.CASE_INFO.ACTIVE_ACTION_ID),f=l.getValue(G.CASE_INFO.AVAILABLEACTIONS),m=l.getValue(G.CASE_INFO.CASE_INFO),y=l.getValue(G.CASE_INFO.BUSINESS_ID),I=l.getValue(G.CASE_INFO.CASE_TYPE_ID),E=l.getValue(G.CASE_INFO.CASE_TYPE_NAME)),{assignmentID:d,caseID:p,assignments:h,localActionID:g,caseActions:f,caseInfo:m,businessID:y,caseTypeID:I,caseTypeName:E}},hn=new class{constructor(){this.contextArray={},this.pauseDuration=2e3,this.waitingToPutUpIndicator=!1}getLoadingContext(c){let l=null;return c&&(({context:l}=c),l||(l=c.containerItemID),l||(l=c.contextName)),l}enableLoadingIndicator(c,l=!0){const u=this.getLoadingContext(c);u&&(this.addToContextArray(u),this.waitingToPutUpIndicator||(this.waitingToPutUpIndicator=!0,this.pauseBeforeShowing(u).then((c=>{l&&void 0!==this.contextArray[c]&&this.contextArray[c]>0&&Up({type:de,payload:{context:c}})}))))}pauseBeforeShowing=c=>new Promise((l=>setTimeout((()=>l(c)),this.pauseDuration)));disableLoadingIndicator(c,l=!0){const u=this.getLoadingContext(c);u&&(this.waitingToPutUpIndicator=!1,this.removeFromContextArray(u),l&&void 0!==this.contextArray[u]&&0===this.contextArray[u]&&Up({type:pe,payload:{context:u}}))}addToContextArray=c=>{void 0===this.contextArray[c]&&(this.contextArray[c]=0),this.contextArray[c]+=1};removeFromContextArray=c=>{void 0!==this.contextArray[c]&&this.contextArray[c]>0&&(this.contextArray[c]-=1)}},gn=new class{constructor(){this.counterActionMgrId=0,this.actionMgrActions={}}getNextActionMgrId(){return this.counterActionMgrId+=1,this.counterActionMgrId.toString()}register(c,l,u,d,p="unknown",h,g=!0){if(void 0!==this.actionMgrActions[c])return null;const f={actionType:p,promise:l,resolve:u,reject:d,actionPayload:h};return this.actionMgrActions[c]=f,g&&hn.enableLoadingIndicator(f.actionPayload),c}actionManagerPromise=(c,l="")=>{let u,d;""===l&&(l=this.getNextActionMgrId());const p=new Promise(((c,l)=>{u=c,d=l}));if(!u||!d)throw new Error("resolveFn or rejectFn is not defined.");return this.register(l,p,u,d,c),{actionMgrID:l,promise:p}};resolveActionByID(c,l,u=!0){const d=this.actionMgrActions[c];let p=c;return d?(setTimeout((()=>{d.resolve(l)}),0),hn.disableLoadingIndicator(d.actionPayload,u)):p=null,p}rejectActionByID(c,l=!0,u){const d=this.actionMgrActions[c];let p=c;return d?(d.reject(u),hn.disableLoadingIndicator(d.actionPayload,l)):p=null,p}};class dn{constructor(c,l,u={}){this.type=c,this.name=l,this.parent=null,this.children=[],this.eventSubscribers=[],this.value="",this.previousValue="|~#-old-#~|",this.props=u,this.references=new Map}addReference(c,l){this.references.set(c,l)}getReference(c){return c?this.references.get(c):void 0}getNode(c,l,u){return this.children.find((d=>d.type===c&&d.name===l&&d.props.index===u))}addNode(c,l,u={}){let d=this.getNode(c,l,u.index);return d?d.props=u:(d=new dn(c,l,u),d.parent=this,this.children.push(d)),d}addEventListener(c){this.eventSubscribers.push(c)}triggerEvent(c,l=!1){this.eventSubscribers.forEach((l=>{l(c)})),!l&&this.parent&&this.parent.triggerEvent(c)}setPreviousDefaultValue(){"|~#-old-#~|"===this.previousValue&&(this.previousValue=this.value)}removeReference(c,l){const u=this.references.get(c);u?.props?.index===l&&this.references.delete(c)}removeChildNode(c){const l=this.children.findIndex((l=>l.name.startsWith(c)));-1!==l&&this.children.splice(l,1)}removeChildren(){this.children.splice(0,this.children.length)}removeNode(c,l){for(let u=this.children.length-1;u>=0;u-=1){const d=this.children[u];if(d.props.index===l&&d.name===c){this.children.splice(u,1);break}}}}const fn=dn,mn=class{constructor(c,l,u,d={}){this.type=G.CONTEXT_TREE_NODE_TYPES.WHEN,this.subType=c,this.referenceName=l,this.name=u,this.props=d}},yn=/(([^.]+)\[\d+\])/g,In=c=>{if((c?.split(".")??[]).length<3)return[c];const l=c?.match(yn);if(!l)return[c];let u,d=l[l.length-1];return c=c?.split(d)[0],c=c?.substring(0,c.length-1),[d,u]=d.split("["),u=u?.split("]")[0],[c,d,u]},{FIELD:En,WHEN:An,DECLARATIVE_TARGET:_n,PAGELIST:Cn}=W.CONTEXT_TREE_NODE_TYPES,Sn=class{constructor(c,l,u={}){this.type=c,this.name=l,this.children=[],this.eventSubscribers=[],this.props=u,this.references=new Map([[En,new Map],[An,new Map],[_n,new Map]])}addReference(c,l){if(this.references.has(l.type)){const u=this.references.get(l.type);u.set(c,l),this.references.set(l.type,u)}else if(l.type===Cn){const u=this.references.get(En);u.set(c,l),this.references.set(En,u)}}removePageListNodes(c,l){const u=this.children.filter((l=>l.name.startsWith(c))).filter((u=>{const d=((c,l)=>{if(!c.startsWith(l))return-1;const u=c.slice(l.length).match(/\[([0-9]+)\]/);return u?parseInt(u[1],10):-1})(u.name,c);return-1!==d&&+d>=l}));u.length>0&&u.forEach((c=>{this.removeChildNode(c.name,l)}))}removeChildNode(c,l){const u=this.children.findIndex((l=>l.name.startsWith(c)));if(-1!==u){const[l]=this.children.splice(u,1),d=l?.parent;d?.removeChildNode(c)}const d=this.references.get(En),p=this.references.get(_n);[...d.keys(),...p.keys()].filter((l=>l.startsWith(c))).filter((c=>{const[,,u]=In(c);return+u>=l})).forEach((c=>{const l=d.get(c).parent;l?.removeChildren(),d.delete(c)}))}getReference(c,l){if(this.references.has(l))return this.references.get(l)?.get(c)}getNode(c,l,u){return this.children.find((d=>d.type===c&&d.name===l&&d.props.index===u))}addNode(c,l,u={}){let d=this.getNode(c,l,u.index);return d?d.props=u:(d=new fn(c,l,u),d.parent=this,this.children.push(d)),d}addEventListener(c){this.eventSubscribers.push(c)}triggerEvent(c){this.eventSubscribers.forEach((l=>{l(c)}))}removeReference(c,l,u){const d=this.references.get(l),p=d?.get(c);p?.props?.index===u&&d.delete(c)}removeNode(c,l){for(let u=this.children.length-1;u>=0;u-=1){const d=this.children[u];if(d.props.index===l&&d.name===c){this.children.splice(u,1);break}}}addWhen(c,l,u,d,p){if(!(u&&d&&c&&l))return;u.startsWith(".")&&(u=u.substring(1));const h=`${c}.${u}.${d}`,g=new mn(l,u,d,p),f=this.references.get("WHEN");f?.set(h,g)}},{VIEW:Tn,FIELD:Nn,CONTEXT:Pn,DECLARATIVE_TARGET:Dn,WHEN:bn}=G.CONTEXT_TREE_NODE_TYPES,Rn=new class{constructor(){this.rootNodes={}}_isContextNodeExist(c){return Object.keys(this.rootNodes).includes(c)}addContextNode(c){if(!this._isContextNodeExist(c)){const l=new Sn(Pn,c);this.rootNodes[c]=l}return this.rootNodes[c]}getContextNode(c){return c?this.rootNodes[c]:void 0}addPageNode(c,l){return this.addContextNode(c).addNode("PAGE",l)}_addParentViewNode(c,l,u){const d=this.addContextNode(c).addNode("PAGE",l);let p=d.getReference(u);return p||(p=d.addNode("VIEW",u),d.addReference(u,p)),p}pushChildPageNodeToParentView(c,l,u){const d=c.children;let p=!1;if(d)for(let h=0;h<d.length;h+=1)if(d[h].name===u){p=!0;break}p||d.push(l),l.parent=c}addViewNode(c,l,u,d){const p=this.addContextNode(c).addNode("PAGE",l);let h=null;h=d&&u!==d?this._addParentViewNode(c,l,d).addNode("VIEW",u):p.addNode("VIEW",u),p.addReference(u,h);const g=l.split(".");for(;g.length>0;){g.pop();const u=g.join("."),h=this.getContextNode(c)?.getNode("PAGE",u),f=h?.getReference(d);if(f){this.pushChildPageNodeToParentView(f,p,l);break}}return h}getViewNode(c,l,u){return this.getContextNode(c)?.getNode("PAGE",l)?.getReference(u)}addPageListNode(c,l,u,d,p){if(!d)return;d.startsWith(".")&&(d=d.substring(1));const h=this.addContextNode(c),g=h.addNode("PAGE",l)?.getReference(u)?.addNode("PAGELIST",`${l}.${d}`,p);return g&&h.addReference(`${l}.${d}`,g),g}updatePageListNode(c,l,u,d){u&&(u.startsWith(".")&&(u=u.substring(1)),this.addContextNode(c).removePageListNodes(`${l}.${u}`,d))}removeFieldNode(c,l,u,d,p){const h=this.getContextNode(c);h?.getNode("PAGE",l)?.getReference(u)?.removeNode(`${l}${d}`,p),h?.removeReference(`${l}${d}`,Nn,p),h?.removeReference(`${l}${d}`,Dn,p)}removeViewNode(c,l,u,d){const p=this.getContextNode(c),h=p?.getNode("PAGE",l),g=h?.getReference(u);this.removeChildViewNodes(c,l,u,d);const f=g?.parent?.children?.findIndex((c=>c.name===u))??-1;f>-1&&g?.parent?.children.splice(f,1)}removeChildViewNodes(c,l,u,d){const p=this.getContextNode(c),h=p?.getNode("PAGE",l),g=h?.getReference(u);g?.children.forEach((h=>{"PAGE"===h.type?this.removeViewNode(c,h.name,u,d):h.type===Tn?this.removeChildViewNodes(c,l,h.name,d):(p.removeReference(h.name,Nn,h.props.index),p.removeReference(h.name,Dn,h.props.index),"PAGELIST"!==h.type&&"Address"!==h.props?.componentName||this.deleteAllListNodes(c,h.name))})),h?.references.delete(u)}deleteAllListNodes(c,l){const u=u=>{const d=this.getContextNode(c),p=d?.references?.get(u);if(p)for(const[c]of p)c.includes(l)&&d?.references?.get(u)?.delete(c)};u(Nn),u(Dn)}deleteListNode(c,l,u){const d=d=>{const p=this.getContextNode(c),h=p?.references?.get(d);if(h)for(const[c]of h)c.includes(`${l.join(".")}[${u}]`)&&p?.references?.get(d)?.delete(c)};d(Nn),d(Dn)}getPageListNode(c,l,u,d){const p=this.getContextNode(c)?.getNode("PAGE",l)?.getReference(u);return p?.children.find((c=>"PAGELIST"===c.type&&c.name===`${l}.${d}`))}getFieldNode(c,l,u,d){return this.getViewNode(c,l,u)?.getNode(Nn,d)}_findViewNode(c,l,u,d){let p=d.addNode("PAGE",l)?.getReference(u);if(p)return p;const h=l.split(".");for(;h.length>0;){h.pop();const c=h.join(".");if(p=d.addNode("PAGE",c)?.getReference(u),p)return p}return this.addViewNode(c,l,u)}addFieldNode(c,l,u,d,p,h={}){const g=this.addContextNode(c),f=this._findViewNode(c,l,u,g),{isDeclarativeTarget:m}=h;let y;if(y=m?f.addNode(Dn,`${l}${d}`,h):f.addNode(Nn,`${l}${d}`,h),y){const u=`${l}${d}`;if("Address"===y.props?.componentName&&this.deleteAllListNodes(c,y.name),g.addReference(u,y),y.value=p,y.setPreviousDefaultValue(),y.props.isInsideList){const c=l.substring(0,l.lastIndexOf("["));let u=g.getReference(c,Nn);u||(u=f.addNode(Nn,c,{}),g.addReference(c,u))}}return y}removeContextTreeNode(c){delete this.rootNodes[c]}onViewMutate(c,l,u,d){this.getViewNode(c,l,u)?.addEventListener(d)}mutateField(c,l,u,d){const p=this.getContextNode(c),[h,g,f]=In(l);u.startsWith(".")&&(u=u.substring(1)),g&&this.mutatePageList(c,h,g,{...d,rowIndex:f},!0);const m=p?.getReference(`${l}.${u}`,Nn);m&&m instanceof fn&&m.triggerEvent(d)}onPageListMutate(c,l,u,d,p){this.getPageListNode(c,l,u,d)?.addEventListener(p)}mutatePageList(c,l,u,d,p=!1){const h=this.getContextNode(c),g=h?.getReference(`${l}.${u}`,Nn);g&&g instanceof fn&&g.triggerEvent(d,p)}getFieldsList(c){const l=this.getContextNode(c);return l?.references.get(Nn)}getFieldReferenceForProperty(c,l){return this.getContextNode(c)?.references?.get(Nn)?.get(l)}getFieldReferencePreviousValue(c,l){let u=this.getContextNode(c)?.references?.get(Nn)?.get(l);return u||(u=this.getContextNode(c)?.references?.get(Dn)?.get(l)),u?.value}updateFieldNodeValue(c,l,u){const d=this.getContextNode(c)?.references?.get(Nn)?.get(l);d instanceof fn&&d&&(d.previousValue=d.value,void 0===d.value&&(d.previousValue=u),d.value=u)}getContextReferences(c){if(!this.getContextNode(c))return;const l=this.getContextReferencesByType(c,Nn),u=this.getContextReferencesByType(c,Dn);return new Map([...l.entries(),...u.entries()])}getContextReferencesByType(c,l){return this.getContextNode(c)?.references.get(l)||new Map}isFieldExists(c,l){return!!this.getContextReferencesByType(c,Nn)?.get(l)||!!this.getContextReferencesByType(c,Dn)?.get(l)}addWhenNode(c,l,u,d,p,h){const g=this.getContextNode(c);g?.addWhen(l,u,d,p,h)}getDeclarativeTargets(c){const l=this.getContextNode(c),u=l?.references?.get(Dn)||new Map,d=[];return u.forEach((c=>{const l=c?.props||{},{propertyName:u=""}=l,p=l.pageReference??G.CASE_INFO.CASE_INFO_CONTENT;d.push({pageReference:p,name:u})})),d}getWhens(c){const l=this.getContextNode(c),u=l?.references?.get(bn)||new Map,d=[];return u.forEach((c=>{const l=c.subType,u=c.referenceName,p=c.name,h=c?.props?.pageReference??G.CASE_INFO.CASE_INFO_CONTENT;d.push({name:p,pageReference:h,referenceName:u,type:l})})),d}},On="REFRESH_DATA",vn="refresh",xn="refreshCaseData",wn="refreshAssignmentData",Mn="refreshCaseView",Ln="recalculate",Un="recalculateCaseData",Fn="recalculateAssignmentData",jn=c=>({type:On,payload:c}),Vn={},kn=(c,l,u,d,p)=>{c&&u&&l&&(d&&(d=Xp.convertPageRefToClipboardPageNotation(d)),Up(jn({ID:c,viewID:l,context:u,options:p,caseViewAction:!0,interestPage:d})))},$n=(c,l,u)=>{Vn[l]||(Vn[l]={}),c&&!Vn[l][c]&&(Vn[l][c]={pageReference:u})},Bn=(c,l)=>{const u={pageName:(d=l.substring(l.lastIndexOf(" ")+1)).substring(0,d.lastIndexOf(".")),propertyName:d.substring(d.lastIndexOf(".")+1)};var d;const p=up(u.propertyName,c.getValue(W.CLASS_ID,u.pageName));return!!p?.isDeclarativeTarget},Gn=(c,l,u)=>{const d=cn(c,l),p=Zp.getPropertyValue(G.CASE_INFO.ACTIVE_ACTION_ID,l,c)?Zp.getPropertyValue(G.CASE_INFO.ACTIVE_ACTION_ID,l,c):Zp.getPropertyValue(G.CASE_INFO.ASSIGNMENTACTION_ID,l,c);let h;h=d?Zp.getPropertyValue(G.CASE_INFO.CASE_INFO_ID,l,c):Zp.getPropertyValue(G.CASE_INFO.ASSIGNMENT_ID,l,c)?Zp.getPropertyValue(G.CASE_INFO.ASSIGNMENT_ID,l,c):Zp.getPropertyValue(G.CONTEXT_DATA_ASSIGNMENTID,l,c),((c,l,u,d,p)=>{if(!(c&&u&&l))return;const h=p.actionMgrID||gn.getNextActionMgrId(),g={ID:c,actionID:l,context:u,caseWideAction:d,options:{...p,actionMgrID:h}};p.isFillFormWithAI?Up((c=>({type:Et,payload:c}))(g)):Up(jn(g))})(h,p,c,d,u)},Wn=c=>{const{context:l,pageReference:u}=c,d=(c=>Vn[c]&&Object.keys(Vn[c]).length>0&&ln(c))(l);if(d)if(Zp.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.IS_MULTI_RECORD_DATA,u,l)){const c=Zp.getPropertyValue(G.CASE_INFO.CASE_INFO_ID,u,l),d=Zp.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.VIEW_NAME,u,l),p=Zp.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.INTERESTPAGE,u,l);kn(c,d,l,p,{})}else Gn(l,u,{})},Hn=(c,l)=>{const{requestType:u}=c;return c?.options?.refreshFor&&"refresh"===u&&(l+=`?refreshFor=${c?.options?.refreshFor}`),c?.options?.isFillFormWithAI&&"refresh"===u&&(l+="?fillFormWithAI=true"),l},qn=(c,l)=>{const u=c.url?.includes("/refresh?refreshFor="),d=l.url?.includes("/refresh?refreshFor="),p=c.url?.endsWith("/refresh")&&!u,h=l.url?.endsWith("/refresh")&&!d;if(p&&h)return c.url===l.url;if(p&&d)return!0;if(u){if(h)return"CANCEL_REFRESH";if(d)return!1}return!1},zn=class{static formatPageReference(c){const l=c?.split(".").map((c=>{if(c.includes("[")){const l=c.indexOf("["),u=c.indexOf("]"),d=c.substring(l+1,u),p=Number(d)+1;return`${c.substring(0,l)}(${p})${c.substring(u+1)}`}return c}));return l.join(".")}static getFieldLabel(c){let l=c?.label;if(!l&&c?.inheritedProps){const u=c?.inheritedProps;(u.showLabel??1)&&(l=u.label)}return l}},Yn={CONTENT_FIELDS_PATH:[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO,W.CONTENT],FIELD_MESSAGES_PATH:[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO,W.CONTENT,W.SUMMARY_OF_MESSAGES,W.PROPERTY_MESSAGES],PAGE_MESSAGES_PATH:[W.CONTEXT_DATA,W.SUMMARY_OF_MESSAGES,W.PAGE_MESSAGES],HTTP_MESSAGES_PATH:[W.CONTEXT_DATA,W.SUMMARY_OF_MESSAGES,W.HTTP_MESSAGES],CASE_MESSAGE_PATH:[W.CASEMESSAGES]},Kn=(c="",l="",u,d)=>{let p,h=[];null!==c&&(p=(c=>c?.startsWith(".")?c.substring(1).split("."):c.split("."))(c));const g=l&&l.startsWith(".")?l.substr(1):l;if(u===W.PROPERTY&&c||c){h=[W.CONTEXT_DATA,...g.split(".")];for(let c=0;c<p.length-1;c+=1)h.push(p[c]);h.push(W.SUMMARY_OF_MESSAGES,W.PROPERTY_MESSAGES,p[p.length-1])}else u===G.PAGE?h=[...Yn.PAGE_MESSAGES_PATH]:u===W.HTTP?h=[...Yn.HTTP_MESSAGES_PATH]:u===W.CASEMESSAGES?h=[...Yn.CASE_MESSAGE_PATH]:d&&(h=[W.CONTEXT_DATA,...g.split(".")]);return h.filter(Boolean)},Xn=(c,l,u)=>{const d={content:{}},p=`${l}[${u}]`,h=Xp.getIn(c?.content,p.split("."));return h&&Xp.setIn(d.content,p.split("."),{...h}),d},Jn=(c,l,u,d,p,h,g={})=>{const f=((c,l,u)=>l<u?c.filter((c=>parseInt(c.match(/\d+/)?.[0],10)>l&&parseInt(c.match(/\d+/)?.[0],10)<=u)):c.filter((c=>parseInt(c.match(/\d+/)?.[0],10)<l&&parseInt(c.match(/\d+/)?.[0],10)>=u)))(u,d,p),m=d>p?"up":"down";f&&f?.length>0&&f?.forEach((u=>{const d=parseInt(u.match(/\d+/)?.[0],10),p=`${h}[${d}]`;g[`${h}[${d+("up"===m?1:-1)}]`]=Xp.getIn(c[l],[W.CONTEXT_DATA,...p.split(".")]),Xp.deleteIn(c[l],[W.CONTEXT_DATA,...p.split(".")])}));const y=Object.keys(g);y.length>0&&y.forEach((u=>{Xp.setIn(c[l],[W.CONTEXT_DATA,...u.split(".")],g[u])}))},Qn=c=>{const{type:l,property:u,category:d,context:p,pageReference:h}=c;let g;u&&(g=u.slice(1));const f=Fp(p);let m=[];const y=Xp.getIn(f,Kn(g,h,d));return l&&"all"!==l?(y&&Array.isArray(y)&&y.length>0&&(m=y.filter((c=>c.type===l))),l===G.MESSAGES.MESSAGES_TYPE_ERROR&&m.length>0&&u&&Rn.mutateField(p,h,u,{messages:[...m],type:G.MESSAGES.MESSAGES_TYPE_ERROR,fieldName:u}),m):y},Zn=c=>{const{property:l,pageReference:u,category:d,context:p,type:h,isListEntry:g,clearContextMessages:f,deletingIndex:m}=c,y={context:p,type:h};l&&!g?(Rn.mutateField(p,u,l,{type:rt,fieldName:l}),y.property=l,y.pageReference=u):g?(y.pageReference=u,y.isListEntry=g,y.deletingIndex=m):y.category=d,Up(f?{type:rt,payload:{stateObj:c.stateObj,context:p}}:{type:rt,payload:y})},er=c=>{const{messages:l,property:u,pageReference:d,category:p,context:h}=c,g={messages:l,context:h};u?(g.property=u,g.pageReference=d):g.category=p,Up({type:nt,payload:g})},tr=(c,l,u)=>{for(const d of Object.keys(c))l.push(d),d===W.SUMMARY_OF_MESSAGES?u.push([...l]):"object"==typeof c[d]&&tr(c[d],l,u),l.pop();return u},nr=(c,l)=>{let u=Qn({context:W.APP.ROOT,category:"HTTP"});if(c){const c=Qn({context:l,category:"HTTP"});u?c&&(u=u.concat(Qn({context:l,category:"HTTP"}))):u=Qn({context:l,category:"HTTP"})}return u},rr=c=>{let l=null;l=Xu(c)[0]?$u(Xu(c)[0]):c,l&&Zn({context:l,stateObj:Fp(l),clearContextMessages:!0})},sr={addMessages:er,getValidationErrorMessages:c=>{const l=Fp(c),u=[],d=Xp.getIn(l,[...Yn.CONTENT_FIELDS_PATH])||{};return tr(d,[],[]).forEach((c=>{const l=Xp.getIn(d,[...c,W.PROPERTY_MESSAGES]);l&&Object.keys(l).forEach((c=>{l[c].forEach((c=>{c.type===W.MESSAGES.MESSAGES_TYPE_ERROR&&(c.fieldLabel?u.push({label:`${c.fieldLabel}:`,description:c.message}):u.push(Bd.getLocaleValue(c.message,"Messages")))}))}))})),u},getMessages:Qn,clearMessages:Zn,getRootContainerHttpMessages:nr,clearContextMessagesInActiveWorkArea:rr},ar=sr,or=class{static execute(c,l,u,d){const p={};Object.prototype.hasOwnProperty.call(u,"nonFormProperties")&&(u.nonFormProperties.forEach((c=>{p[c]=u[c],delete u[c]})),delete u.nonFormProperties);const h={instruction:"INSERT",content:{...Xp.unflatten(u)}},g=JSON.parse(JSON.stringify(h));return delete g.content.classID,{instruction:{target:Xp.buildInstructionPageReference(d,c),content:{...g.content},listIndex:l,instruction:"INSERT"},actionPayload:h,displayPropertPayload:p}}},ir=class{static execute(c,l,u,d,p,h){const g={instruction:"UPDATE",content:{...Xp.unflatten(d)}},f={content:{...g.content},target:Xp.buildInstructionPageReference(p,l),listIndex:u,instruction:"UPDATE"};return h||Up(Vh({...g,listIndex:u-1,context:c,referenceList:`${p}${l}`})),f}},cr=class{static execute(c,l,u){return{target:Xp.buildInstructionPageReference(u,c),listIndex:l,instruction:"DELETE"}}},lr=class{static getDeleteAllInstruction(c,l){return{instruction:"DELETE ALL",target:Xp.buildInstructionPageReference(c,l)}}static execute(c,l,u,d){d||Up(Vh({instruction:"DESELECT_ALL",context:c,referenceList:`${u}${l}`}))}},ur=class{static execute(c,l,u,d){return{target:Xp.buildInstructionPageReference(d,c),listMoveToIndex:u,listIndex:l,instruction:"MOVE"}}},dr=class{static execute(c,l,u,d){return{content:{...{...Xp.unflatten(u)}},target:Xp.buildInstructionPageReference(d,l),instruction:"REPLACE"}}},pr=class{static execute(c,l){return{target:Xp.buildInstructionPageReference(l,c),instruction:"DELETE"}}},hr=class{constructor(c){this.next=null,this.automatic=!1,this.instruction=c,this.previous=null,this.childrenStateMachines=[]}},gr=class{constructor(c,l,u){this.target=c,this.pageReference=l,this.contextName=u,this.root=null,this.current=null,this.changeList={},this.targetPageReference=l+c,this.children=[],this.visibility=!0}addChild(c){null===this.current&&this.insertNode({}),this.current.childrenStateMachines.push(c)}insertNode(c){const l=new hr(c);null===this.root&&(this.root=l),null!==this.current&&(l.previous=this.current,this.current.next=l),this.current=l}buildChildSumbitPageInstructions(c,l){let u=[];return c.childrenStateMachines.forEach((c=>{c.visibility&&(u=u.concat(c.buildSubmitPageInstructions(l)))})),u}buildSubmitPageInstructions(c=!1){let l=this.root,u=[];for(;l;)!l.instruction.instruction||c&&l.automatic||u.push(l.instruction),u=[...u,...this.buildChildSumbitPageInstructions(l,c)],l=l.next;return u}initPageInstructions(c,l,u){const d=c.getValue(this.target)||[];l?d.forEach(((c,d)=>{l.forEach((l=>{const p=kc(l),h={};let g=!0;u&&(h[kc(u)]=crypto.randomUUID(),g=!1);const f={[p]:Xp.getIn(c,p),...h};this.update(f,d+1,g,{isDefault:!0})}))})):d.forEach(((c,l)=>{if(u&&!c[kc(u)]){const c={};c[kc(u)]=crypto.randomUUID(),this.update(c,l+1,!1,{isDefault:!0})}}))}getChangeList(){return this.changeList}initChangeList(c){this.changeList[this.targetPageReference]=this.changeList[this.targetPageReference]||[],this.changeList[this.targetPageReference][c]=this.changeList[this.targetPageReference][c]||{}}update(c,l,u,d){const p=ir.execute(this.contextName,this.target,l,c,this.pageReference,u),{isDefault:h=!1,skipPageinstruction:g}=d;if(!g){if(this.initChangeList(l-1),!h){const u=this.changeList?.[this.targetPageReference]?.[l-1].content;this.changeList[this.targetPageReference][l-1]=qp(Xp.deepClone(u),c,d)}if(this.current?.automatic!==h||this.current?.instruction?.listIndex!==l||"UPDATE"!==this.current?.instruction.instruction)this.insertNode(p),h&&(this.current.automatic=!0);else{const l=this.current.instruction.content;this.current.instruction.content=qp(Xp.deepClone(l),Xp.unflatten(c),d)}}}delete(c,l){const u=cr.execute(this.target,c,this.pageReference);this.changeList[this.targetPageReference]?.splice(c-1,1),this.insertNode(u),l||Up(Vh({instruction:"DELETE",listIndex:c-1,context:this.contextName,referenceList:`${this.pageReference}${this.target}`}))}insert(c,l,u,d){const{instruction:p,actionPayload:h={content:{}},displayPropertPayload:g={}}=or.execute(this.target,l,c,this.pageReference),{isDefault:f=!1}=d;if(this.initChangeList(l-1),!f){const u=this.changeList?.[this.targetPageReference]?.[l-1].content;this.changeList[this.targetPageReference][l-1]=qp(Xp.deepClone(u),c,d)}this.root&&!this.root.instruction?.instruction&&this.current&&!this.current.instruction?.instruction?this.root.instruction=p:this.insertNode(p),u||(h.content={...h.content,...g},Up(Vh({...h,listIndex:l-1,context:this.contextName,referenceList:`${this.pageReference}${this.target}`}))),f&&(this.current.automatic=!0)}replacePage(c){const l=dr.execute(this.contextName,this.target,c,this.pageReference);this.insertNode(l)}deletePage(){const c=pr.execute(this.target,this.pageReference);this.insertNode(c)}move(c,l){const u=this.changeList[this.targetPageReference]?.splice(c-1,1);this.changeList[this.targetPageReference]?.splice(l-1,0,u[0]);const d=ur.execute(this.target,c,l,this.pageReference);this.insertNode(d),Up(Vh({listIndex:c-1,listMoveToIndex:l-1,context:this.contextName,referenceList:`${this.pageReference}${this.target}`,instruction:"MOVE"}))}deleteAll(c){const l=lr.getDeleteAllInstruction(this.pageReference,this.target);this.changeList[this.targetPageReference]=[],this.insertNode(l),lr.execute(this.contextName,this.target,this.pageReference,c)}updatePage(c){const l=this.current.instruction.content;this.current.instruction.content=qp(Xp.deepClone(l),c)}},fr={},mr={},yr={},Ir=(c,l,u)=>{const d=c.getContextName();fr[d]||(fr[d]={}),fr[d][l]||(fr[d][l]={content:[]}),mr[d]||(mr[d]=[],yr[d]=[]),jc.isStateMachineExist(d,u,l)||jc.setStateMachine(d,l,u,new gr(l,u,d))},Er=c=>zn.formatPageReference(c),Ar=(c,l)=>{const u=mr[c],d=yr[c],p=kc(l),h=p?.substring(0,p.indexOf("["));d?.indexOf(h)<0&&yr[c].push(h),u?.indexOf(p)<0&&mr[c].push(p)},_r=c=>{delete mr[c]},Cr=c=>jc.buildPageInstructionsByContext(c),Sr=c=>jc.buildPageInstructionsByContext(c,!0),Tr=c=>{jc.clearStateMachines(c),delete fr[c]},Nr=(c,l,u,d)=>{let[,p]=l.split(`${c}[${d}]`);""!==p&&void 0!==p&&(p=p.startsWith(".")?p.substring(1):p,Object.keys(u).forEach((c=>{u[`${p}.${c}`]=u[c],delete u[c]})))},Pr=(c,l,u,d,p)=>{const{skipStateUpdate:h=!1}=p||{},g=u.getContextName(),f=u.getReferenceList(),m=d||u.getPageReference(),y=Er(f);Ir(u,y,m),Ar(g,`${f}[${l}]`),Nr(f,m,c,l);const I={instruction:W.LIST_ACTIONS.INSERT,content:{...Xp.unflatten(c)}};delete JSON.parse(JSON.stringify(I)).content.classID,jc.getStateMachine(g,m,y).insert(c,l+1,h,{})},Dr=(c,l)=>{const[,u]=c.split("."),d=l?.split(".").pop();return u===d},br=(c,l,u)=>{const d={};return Object.values(c).forEach((c=>{if(Dr(c,u)){const u=Xp.getPropertyName(c),p=u.substr(u.indexOf(".")+1).split(".");if(p.length>1){let c=Xp.getIn(l,p)??"";if(!c){const u=`!P!${p.join(":")}`;c=Xp.getIn(l,u)??""}Xp.setIn(d,p,c)}else{const c=Xp.getIn(l,p)??"";d[p[p.length-1]]=c}}})),d},Rr=(c,l,u,d,p)=>{const h=c.getValue(l)||{};u&&Object.keys(h).length>0&&c.clearErrorMessages({property:d?p:c.getStateProps().value})},Or=c=>{if(!c)return!1;const l=Sr(c);return Array.isArray(l)&&l.length>0},xr=(c,l,u={})=>{const{skipStateUpdate:d=!1}=u,p=c.getPageReference(),h=Er(l);Ir(c,l,p),jc.getStateMachine(c.getContextName(),p,h).deleteAll(d)},wr=c=>({insert:(l,u,d,p)=>Pr(l,u,c,d,p),update:(l,u,d)=>((c,l,u=0,d={})=>{const{skipStateUpdate:p=!0,pageRef:h}=d,g=l.getContextName();let f=l.getReferenceList();const m=h||l.getPageReference();f||(f=((c,l)=>{const u=c.indexOf(G.CONTENT)+G.CONTENT.length,d=c.lastIndexOf(`[${l}]`);return c.substring(u,d)})(m,u));const y=Er(f);Ir(l,y,m),Ar(g,`${f}[${u}]`),Nr(f,m,c,u),jc.getStateMachine(g,m,y).update(c,u+1,p,d)})(l,c,u,d),updateProperty:(l,u,d)=>((c,l,u,d={})=>{const p=u.getPageReference(),{stateMachineTarget:h}=jc.getStateMachineObjByPath(`${p}${c}`,u.getContextName(),`${p}${c}`.endsWith("]"));if(!h){let c=p.substring(0,p.lastIndexOf("["));const l=c.substring(c.lastIndexOf("."));c=c.substring(0,c.lastIndexOf(".")),c&&l&&Ir(u,l,c)}jc.executeStateMachine(u.getContextName(),`${p}${c}`,l,!0,d)})(l,u,c,d),deleteEntry:(l,u)=>((c,l,u)=>{const d=l.getContextName(),p=l.getReferenceList(),h=u||l.getPageReference(),g=`${h+p}[${c}]`,f=Er(p);Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,pageReference:g,context:d,isListEntry:!0,deletingIndex:c}),Ir(l,f,h),Ar(d,`${p}[${c}]`),jc.getStateMachine(d,h,f).delete(c+1);const m=jc.getUnConnectedStateMachines(d)||{};Object.keys(m).forEach((c=>{c.includes(`${h}${f}`)&&c!==`${h}${f}`&&(m[c]=null)}))})(l,c,u),reorder:(l,u)=>((c,l,u)=>{const d=u.getContextName(),p=u.getReferenceList(),h=u.getPageReference(),g=Er(p);Ir(u,g,h),Ar(d,`${p}[${l}]`),jc.getStateMachine(d,h,g).move(c+1,l+1)})(l,u,c),setSelectedRows:(l,u={skipPageInstructions:!1})=>((c,l,u)=>new Promise((d=>{const{skipPageInstructions:p=!1}=u,{selectionMode:h,selectionList:g,required:f}=l.getConfigProps(),m=h===W.LIST_SELECTION_MODE.MULTI,y=l.getContextName();let I=l.getPageReference(),E=((c,l,u)=>c?u.substring(1):l.substring(l.lastIndexOf(".")+1))(m,I,g);const A=l.getRawMetadata();let _=null;const C=(c=>c?.config?.dataRelationshipContext&&"SimpleTableSelect"===c.type&&"single"===c.config?.selectionMode)(A);C&&(E=A?.config?.dataRelationshipContext,_=I.concat(".").concat(E),I=_);const S=((c,l,u)=>c?`${l}${u}`:l)(m,I,g),T=((c,l,u,d)=>l?c.getFieldMetadata(`${u}`):c.getCurrentPageFieldMetadata(d))(l,m,E,_),{datasource:{parameters:N={}}}=T,P={...N};if(((c,l,u)=>{l?.descriptors?.length&&!u&&l.descriptors.forEach((l=>{const u=Xp.getPropertyName(l),d=u.substr(u.indexOf(".")+1).split(".");c[d.join(".")]=l}))})(P,T,m),m){let u=g;u=Er(u);const d=l.getValue(S)||[];Ir(l,u,I);const h=[];let f=d.length;c.forEach((c=>{const l=br(N,c,E),g={};if(Object.prototype.hasOwnProperty.call(c,"displayProperty")){const l=c.displayProperty;g[l]=c[l]}const m=Object.entries(l);let A=d.findIndex((c=>m.every((([l,u])=>c[l]===u))));if(-1===A?(A=f,c.$selected&&(f+=1)):f=f?f-1:0,!p){const d=jc.getStateMachine(y,I,u);c.$selected?d.insert(l,A+1,!0,{}):d.delete(A+1,!0)}h.push({instruction:c.$selected?W.LIST_ACTIONS.SELECT:W.LIST_ACTIONS.DESELECT,listIndex:A,content:{...l,...g}})})),Up(Vh({instruction:W.LIST_ACTIONS_TYPE.SELECT_DESELECT,context:y,referenceList:`${I}.${E}`,actions:h}))}else{const u=br(P,c[0],E);Object.keys(u).forEach((c=>{l.getActionsApi().updateFieldValue(`.${c}`,u[c],C?{contextPageReference:I}:{}),l.getActionsApi().triggerFieldChange(`.${E}.${c}`,u[c])}))}Rr(l,S,f,m,E),d()})))(l,c,u),getSelectedRows:(l=!1)=>((c,l)=>{const{selectionMode:u,selectionList:d}=l.getConfigProps(),p=[];let h=l.getPageReference();const g=u===W.LIST_SELECTION_MODE.MULTI;let f=g?d.substring(1):h.substring(h.lastIndexOf(".")+1);const m=l.getRawMetadata();let y=null;m?.config?.dataRelationshipContext&&"SimpleTableSelect"===m.type&&"single"===m.config?.selectionMode&&(f=m.config.dataRelationshipContext,y=h.concat(".").concat(f),h=y);const I=g?`${h}${d}`:h;let E=l.getValue(I)||[];if(Array.isArray(E)||(E=[E]),c)return Promise.resolve(E);const{datasource:{parameters:A={}}={}}=g?l.getFieldMetadata(`${f}`):l.getCurrentPageFieldMetadata(y);return E.forEach((c=>{const l=Object.values(A).reduce(((l,u)=>{const d=u.substring(u.lastIndexOf(".")+1);return Dr(u,f)&&c[d]?`${l}${c[d]}`:l}),"");l.trim()&&p.push(l.trim())})),Promise.resolve(p)})(l,c),clearSelectedRows:()=>function(c){const{selectionList:l,required:u}=c.getConfigProps(),d=c.getContextName(),p=c.getPageReference(),h=l,g=`${p}${l}`;return new Promise((l=>{let f=h;f=Er(f),Ir(c,f,p),jc.getStateMachine(d,p,f).deleteAll(),Rr(c,g,u,!0,h),l()}))}(c),setVisibility:l=>((c,l=!0)=>{const u=c.getContextName(),{selectionMode:d,selectionList:p,renderMode:h,referenceList:g}=c.getComponentConfig();let f;if(d===W.LIST_SELECTION_MODE.MULTI&&p?f=p:"Editable"===h&&g&&(f=c.getStateProps().referenceList),f){f=Er(f);const d=jc.getStateMachine(u,"",`${c.getPageReference()}${f}`);d&&(d.visibility=l)}})(c,l),initDefaultPageInstructions:(l,u,d)=>((c,l,u,d)=>{const p=c.getContextName(),h=c.getPageReference(),g=Er(l);Ir(c,g,h),jc.getStateMachine(p,h,g).initPageInstructions(c,u,d)})(c,l,u,d),deleteAll:(l,u)=>xr(c,l,u),replacePage:(l,u)=>((c,l,u)=>{const d=c.getPageReference(),p=c.getContextName();Ir(c,l,d),Ar(p,Xp.buildInstructionPageReference(d,l)),jc.getStateMachine(p,d,l).replacePage(u)})(c,l,u),deletePage:l=>((c,l)=>{const u=c.getPageReference(),d=c.getContextName();Ir(c,l,u),Ar(d,Xp.buildInstructionPageReference(u,l)),jc.getStateMachine(d,u,l).deletePage()})(c,l)}),Mr=new class{constructor(){this.fieldDefaults={}}updateFieldDefaults(c){c&&(Object.keys(this.fieldDefaults).length?Xp.mergeDeep(c,this.fieldDefaults):Xp.copy(c,this.fieldDefaults))}setFieldDefault(c,l,u){c&&l&&(this.fieldDefaults[c]=this.fieldDefaults[c]||{},this.fieldDefaults[c][l]=u)}getDefaultsforType(c){return this.fieldDefaults[c]}};class vr{constructor(){this.validators={}}register(c,l){this.validators[c]=l}getValidator(c){return this.validators[c]}validateRequired(c,l,u,d,p,h){const{required:g,value:f}=h;let m=null;if("true"===g||!0===g){let g=d;switch(c){case"radiobuttons":g=f;break;case"attachment":{const c=u?.replace(G.CASE_INFO.CASE_INFO_CONTENT,"").replace(G.DATA_INFO.DATA_INFO_CONTENT,"");g=(kp(`.attachmentsList${c}.${l?.replace(".","")}`,"context_data",p)||[]).filter((c=>!c.delete)),0===g?.length&&(g="");break}case"checkbox":g&&"false"!==g||(g="");break;default:"string"==typeof g&&(g=g.trim())}m=this.getValidator("required")(g),vr.messageDispatcher(l,u,p,m,zn.getFieldLabel(h))}return m}validateType(c,l,u,d,p,h){let g=null;const f={pageReference:u,context:p,property:l,target:h?.target,required:h?.required};let m=Mr.getDefaultsforType(h?.componentName||"")?.["client-validations"];!1!==m&&c&&this.getValidator(c)&&(g=this.getValidator(c)(d,f),""!==d&&vr.messageDispatcher(l,u,p,g,h?.label));const y=h?.validationType;return m=y&&Mr.getDefaultsforType(y)?.["client-validations"],!1!==m&&y&&this.getValidator(y)&&(g=this.getValidator(y)(d,f),vr.messageDispatcher(l,u,p,g,h?.label)),g}validate(c,l,u,d={}){const{context:p,disabled:h,readOnly:g,pageReference:f,skipRequiredValidation:m}=d;let y=null;return h||g||(m||(y=this.validateRequired(c,l,f,u,p,d)),y||(y=this.validateType(c,l,f,u,p,d))),{message:y}}static messageDispatcher(c,l,u,d,p){if(d){const h=[];h.push({type:G.MESSAGES.MESSAGES_TYPE_ERROR,fieldLabel:p,message:d}),er({messages:h,property:c,pageReference:l,context:u})}}isValidatorExist(c){return!!c.validatetype}}const Lr=new vr,Ur=(c,l)=>{c.DeclareExpressions&&Qt({[l.context]:c.DeclareExpressions})},Fr=(c,l,u=!1)=>{const d=Xp.getIn(c,W.RESOURCES);d&&((c=>{c&&gp(c)})(d),Ur(d,l)),u||ig({...c,options:l})},jr="text/javascript",Vr=new class{constructor(){this.loaderObj={},this.staticServerURL="",this.appStaticUrl=null,this.pegaOnlyUrl=!1,this.loadedAssets={},this.componentsConfig=null,this.appAlias="",this.b2sJWT=null,this.ccV2LibId="",this.imageBlobUrlCache={}}getTypes={SCRIPT:"script",STYLE:"link"};getStaticServerUrl(){return this.staticServerURL}setCCV2LibId(c){this.ccV2LibId=c}getCCV2LibId(){return this.ccV2LibId}async getThemeSchemaJSON(){const c=`${this.staticServerURL}themeOverrides.schema.json`;return fetch(c).then((c=>c.json()))}getConstellationServiceUrl(){return this.staticServerURL?.endsWith("/")?this.staticServerURL.substring(0,this.staticServerURL.length-1):this.staticServerURL}setAppAlias(c){this.appAlias=c}getAppAlias(){return this.appAlias}async getSvcComponentsConfig(c,l={}){let u="",d=0;return c.forEach((c=>{u+=`${0===d?"?":"&"}field${d}=${c.field}&value${d}=${c.value}`,d+=1})),this.pegaOnlyUrl?this.getSvcComponentsConfigSeparatedUrls(c,u,l):this.getSvcComponentsConfigCombinedUrl(c,u,l)}async getSvcComponentsConfigSeparatedUrls(c,l,u){const d=kd.getBuiltOnAppNames(),p=this.loadAndFilterPegaComponentsConfig(c,d);let h=Promise.resolve([]);!0!==u.skipLoadCustomerComponents&&(h=this.loadAndCustomerComponentsConfig(l));const g=this.fetchSDKComponent(l),f=[];if(await Promise.all([p,h,g]).then((c=>{const l=this.mergeComponentList(c);f.push(...l)})),u.alternateDesignSystemURL&&1===f.length){const d=await this.getSvcComponentsConfigADS(c,l,u);f[0].alternateDesignSystemConfig=d}return{data:{components:f}}}mergeComponentList=c=>{const[l=[],u=[],d=[]]=c,p=[...l,...u];return this.appStaticUrl?p.map((c=>{const{name:l,type:u,subtype:p}=c,h=d.reduce(((c,d)=>(l===d.name&&u===d.type&&p===d.subtype&&(c=d),c)),{});return Object.keys(h).length>0?{...c,alternateDesignSystemConfig:{...h}}:c})):p};async fetchSDKComponent(c){if(this.appStaticUrl&&this.appStaticUrl.length>8&&this.appStaticUrl!==this.staticServerURL){const l=`${this.appStaticUrl}v102/${this.appAlias}/componentslist-ext${c}`;return fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).then((c=>c.components)).catch((()=>[]))}return Promise.resolve([])}async loadAndFilterPegaComponentsConfig(c,l){return this.loadPegaComponentsConfig().then((()=>{const u=[];return this.componentsConfig&&this.componentsConfig.forEach((d=>{let p=!0;c.forEach((c=>{Array.isArray(d[c.field])?d[c.field].includes(c.value)||(p=!1):d[c.field]!==c.value&&(p=!1)})),p&&this.checkForBuiltOnSupport(l,d.allowedApplications)&&u.push(d)})),u}))}async loadPegaComponentsConfig(){let c=null;if(null===this.componentsConfig){const l=`${this.staticServerURL}components/componentsconfig.json?v=${(new Date).getTime()}`;c=fetch(l,{method:"GET"}).then((c=>c.json())).then((async c=>{this.componentsConfig=c,this.ccV2LibId&&await this.loadLibraryComponentsConfig(this.ccV2LibId).then((c=>{c&&c.length>0&&(this.componentsConfig=(this.componentsConfig||[]).concat(c))})).catch((c=>{console.error(`Exception while appending custom component config from library ${this.ccV2LibId} : ${c}`)}))})).catch()}else c=Promise.resolve();return c}async loadLibraryComponentsConfig(c){let l=null;return l=fetch(`${this.appStaticUrl}v100/componentlib/componentsconfig/${c}?v=${Date.now()}`,{headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>{if(!c.ok)throw console.error("Error while fetching custom component config/library component config"),new Error(c.statusText);return c})).then((c=>c.json())).then((c=>Promise.resolve(c))).catch((l=>(console.error(`Exception while fetching custom component config from library ${c} : ${l}`),{error:l.message}))),l}async loadAndCustomerComponentsConfig(c){let l=null;if(this.appStaticUrl&&this.appStaticUrl.length>8&&this.appStaticUrl!==this.staticServerURL){const u=`${this.appStaticUrl}v103/${this.appAlias}/componentslist${c}`;l=fetch(u,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).then((c=>c.components)).catch((()=>[]))}else l=Promise.resolve([]);return l}checkForBuiltOnSupport(c,l){if(!c||!l||0===c.length||0===l.length)return!0;const u=c.split(",");return 0===u.length||u.some((function(c){return-1!==l.indexOf(c)}))}async getSvcComponentsConfigCombinedUrl(c,l,u){const d=`${this.staticServerURL}v102/${this.appAlias}/componentslist${l}`,p=await fetch(d,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).then((c=>({data:c})));if(!0===u.skipLoadCustomerComponents&&p?.data?.components?.length>0&&(p.data.components=p.data.components.filter((c=>void 0===c.componentKey))),u.alternateDesignSystemURL&&1===p?.data?.components?.length){const d=await this.getSvcComponentsConfigADS(c,l,u);p.data.components[0].alternateDesignSystemConfig=d}return p}getSvcComponentsConfigADS(c,l,u){const d=`${u.alternateDesignSystemURL}${u.alternateDesignSystemURL?.endsWith("/")?"":"/"}components/${c[0].value}/config-ext.json`;return fetch(d,{method:"GET"}).then((c=>{if(c.ok)return c.json();throw new Error(c.statusText)})).catch((c=>({error:c.message})))}getSvcImage(c){const l=`${this.appStaticUrl}v102/${this.appAlias}/image/${c}`;return fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.blob())).catch()}getSvcImageUrl(c){const l=`${this.appStaticUrl}v102/${this.appAlias}/image/${c}`;return void 0===this.imageBlobUrlCache[l]&&(this.imageBlobUrlCache[l]=fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.blob())).then((c=>window.URL.createObjectURL(c))).catch()),this.imageBlobUrlCache[l]}getSvcLocale(c,l){const u=`${this.appStaticUrl}v102/${this.appAlias}/locales/${c}/${l}`;return fetch(u,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}})}getSvcAvailableLocales(){const c=`${this.appStaticUrl}v102/app/${this.appAlias}/locales/getLocaleCodes`;return fetch(c,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).catch((()=>[]))}getSvcComponent(c){const l=`${this.appStaticUrl}v102/${this.appAlias}/component/${c}`;return fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>{if(!c.ok)throw Error(c.statusText);return c})).then((c=>c.text())).then((c=>c)).catch()}async importCustomComponentMap(c){fetch(`${this.appStaticUrl}v100/componentlib/componentsmap/${c}`,{headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>(c.ok||console.error("Error while fetching custom component map"),c))).then((c=>c.text())).then((l=>{this.setCCV2LibId(c);const u=document.createElement("script");u.src=window.URL.createObjectURL(new Blob([l],{type:jr})),u.onload=()=>console.log("Custom component lib map loaded"),u.onerror=()=>console.error("Error while appending custom component map"),document.head.appendChild(u)})).catch((c=>{console.error("Exception while appending custom component map : "),console.error(c)}))}loadSvcComponent(c){return new Promise(((l,u)=>{this.getSvcComponent(c).then((d=>{const p=document.createElement("script");p.src=window.URL.createObjectURL(new Blob([d],{type:jr})),p.onload=()=>l(c),p.onerror=()=>u(c),document.head.appendChild(p)})).catch((()=>{u(c)}))}))}initServer(c,l,u){console.log(`asset-loader.initServer(${c}, ${l})`),this.appStaticUrl=null,this.staticServerURL=null,this.pegaOnlyUrl=!1,this.componentsConfig=null,c&&l&&"no-appstatic"!==l&&"no-cdn"!==l?(this.appStaticUrl=l.endsWith("/")?l:`${l}/`,this.staticServerURL=c.endsWith("/")?c:`${c}/`,this.pegaOnlyUrl=!0):c&&l&&"no-appstatic"===l?(this.staticServerURL=c.endsWith("/")?c:`${c}/`,this.appStaticUrl=this.staticServerURL,this.pegaOnlyUrl=!0):c&&l&&"no-cdn"===l&&(this.staticServerURL=c.endsWith("/")?c:`${c}/`,this.appStaticUrl=this.staticServerURL),console.log(`asset-loader.initServer() staticServerURL=${this.staticServerURL}, appStaticUrl=${this.appStaticUrl}, pegaOnlyUrl=${this.pegaOnlyUrl})`),this.b2sJWT=u}register(c,l){this.loaderObj[c]=l}getLoader(c){let l;return l=c?this.loaderObj[c]:(c,l)=>new Promise(((u,d)=>{const p=document.createElement(l);"script"===l?(p.onload=()=>{u(c)},p.onerror=()=>{d(c)},p.type=jr,p.charset="UTF-8",p.async=!1,p.src=c):(p.type="text/css",p.rel="stylesheet",p.href=c),document.head.appendChild(p)})).catch((c=>{console.log(c)})),l}loadAssets(c,l){const{isDevServerMode:u}=l;if(!c)return Promise.resolve();const d=[];return c.forEach((c=>{const l=Object.keys(c)[0];let p=u?Object.values(c)[0]:this.getStaticServerUrl();p=p.endsWith("/")?p:`${p}/`,this.loadedAssets[l]||(l.includes(".js")?d.push(this.getLoader()(p+l,this.getTypes.SCRIPT)):l.includes(".css")&&this.getLoader()(p+l,this.getTypes.STYLE),this.loadedAssets[l]=!0)})),Promise.all(d)}getAssetsFromIsolations(c){const l=this.b2sJWT?.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")||"",u=decodeURIComponent(s.g.atob(l).split("").map((c=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")),d=JSON.parse(u),p=d?.tenant_id,{restApi:h,reqType:g}=Zh("getAssetsFromIsolations",{isolationID:p,assetPath:c})||{},f=`${this.appStaticUrl}${h}`;return fetch(f,{method:g,credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.blob()))}},$r="component-loader",Br={},Gr=async(c,l)=>{const u=Vr.getLoader(),d=l||Vr.staticServerURL;if(!c||window.PCore&&!1===window.PCore.getBehaviorOverride("dynamicLoadComponents"))return Promise.resolve();if(Vr.getLoader($r))return Vr.getLoader($r)(c,d);const p=[];return c.forEach((c=>{if(Br[c])return;const l=tn.getComponent(c);if(l)(l.scripts||[]).forEach((c=>{const l=c.startsWith("http")?c:d+c;p.push(u(l,Vr.getTypes.SCRIPT))})),(l.styles||[]).forEach((c=>{p.push(u(d+c,Vr.getTypes.STYLE))})),Br[c]=!0;else{const l=`${Vr.getConstellationServiceUrl()}/v860/${Vr.getAppAlias()}/component/${c}.js`;p.push(u(l,Vr.getTypes.SCRIPT))}})),Promise.all(p)};class kr{static actionsTargetMap=new Map;static getTargetViewContainerName=c=>{if(c){const l=c.toLowerCase();let u="primary";return this.actionsTargetMap.has(l)&&(u=this.actionsTargetMap.get(l)),u}return""};static buildActionTargetMap=c=>{c&&Object.keys(c).forEach((l=>{const u=c[l];u&&u.actions&&u.actions.forEach((c=>{this.actionsTargetMap.set(c.toLowerCase(),l)}))}))}}const Wr=kr,Hr=class{constructor(c,l,u,d){this.eventType=c,this.callback=u,this.contextName=d,this.id=l}},qr=new class{constructor(){this.subscribers={}}publish(c,l){this.subscribers[c]?.forEach((c=>{c.callback(l)}))}unsubscribe(c,l,u){const d=this.subscribers[c]||[];let p=0,h=-1;d.forEach((c=>{c.id===l&&c.contextName===u&&(h=p),p+=1})),-1!==h&&d.splice(h,1)}unsubscribeAllWithEventType(c){this.subscribers[c]=[]}subscribe(c,l,u,d,p){this.subscribers[c]=this.subscribers[c]||[];let h=!1;if(p&&this.subscribers[c].forEach((c=>{h=c.id===l&&c.contextName===d})),!h){const p=new Hr(c,l,u,d);this.subscribers[c].push(p)}}clearContext(c){const l=this.subscribers;Object.keys(l).forEach((l=>{const u=this.subscribers[l],d=[];u.forEach((l=>{l.contextName!==c&&d.push(l)})),this.subscribers[l]=d}))}},zr=class{static subscribe(c,l,u,d=!1,p="app"){qr.subscribe(c,u,l,p,d)}static subscribeOnce(c,l,u){this.subscribe(c,l,u,!0)}static publish(c,l){qr.publish(c,l)}static unsubscribe(c,l,u="app"){qr.unsubscribe(c,l,u)}static unsubscribeAllWithEventType(c){qr.unsubscribeAllWithEventType(c)}static cleanContextSubscribers(c){qr.clearContext(c)}},Yr=c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.ASSIGNMENT_SUBMISSION,c)},Kr={CASE_INFO:`${W.DATA}.${W.CASE_INFO.CASE_INFO}`,CASE_CLASS_NAME:`${W.DATA}.${W.CASE_INFO.CASE_TYPE_ID}`,NEXT_ASSIGNMENT_INFO_ID:`${W.DATA}.${W.NEXT_ASSIGNMENT_INFO_ID}`,ASSIGNMENTS:`${W.DATA}.${W.CASE_INFO.ASSIGNMENTS}`,CASE_INFO_ID:`${W.DATA}.${W.CASE_INFO.CASE_INFO_ID}`,CASE_FIRST_FLOW_ACTION_NAME:`${W.DATA}.${W.CASE_INFO.ASSIGNMENTACTION_ID}`,CASE_FIRST_ASSIGNMENT_ID:`${W.DATA}.${W.CASE_INFO.ASSIGNMENT_ID}`},Xr=(c,l)=>{const{vcName:u,containerName:d}=l;return d||u||Wr.getTargetViewContainerName(c)},Jr=c=>{const l=c.lastIndexOf(W.FORWARD_SLASH_STRING)+1,u=c.lastIndexOf(W.UNDERSCORE_STRING);return c.substring(l,u)},Qr=c=>c===Ou.WORKAREA,Zr=c=>c===Ou.MODAL,es=c=>c===Te,ts=c=>c&&c.find((c=>c.type===Te)),ns=c=>Xp.getIn(c,Kr.CASE_INFO,{}),rs=c=>c?c.split(" ").pop():void 0,ss=c=>Xp.getIn(c,Kr.CASE_CLASS_NAME,W.EMPTY_STRING),as=c=>{const l=ns(c);return sn(l)&&an(kd.getOperatorIdentifier(),l)},os=c=>Xp.getIn(c,Kr.CASE_INFO_ID,W.EMPTY_STRING),is=c=>Xp.getIn(c,Kr.CASE_FIRST_ASSIGNMENT_ID,W.EMPTY_STRING),cs=(c,l)=>{const{removeActionPayload:u,target:d}=l;if(u&&u.containerItemID){const{containerItemID:l,context:p}=u;c.push(Lh(bh,{containerItemID:l,context:p||Hu(l),target:d}))}},ls=c=>{const l=Lp();if(!c)return!1;const u=K(c),d=ld(u),p=ld(c);if(!d||!p)return!1;const h=wu(d,u),g=wu(p,c);if(!h||!g)return!1;const{key:f}=h||{};let{key:m}=g||{};return m||(m=l?.getState().data?.[c]?.caseInfo?.ID),f&&m&&f===m},us=(c,l,u={})=>{const{skipFlowNameUpdate:d}=u,p=os(l);Xp.setIn(c,"key",p);const h=sn(ns(l));if(!d&&(c=>{const l=Xp.getIn(c,Kr.ASSIGNMENTS,[]);return l&&l.length>0})(l)){const u=is(l),[,d]=u.split("!");(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CURRENT_ASSIGNMENT_UPDATED,c)})({assignmentID:u,isInCreateStage:h}),Xp.setIn(c,"flowName",d)}},ds=(c,l)=>{const{attachmentsExist:u}=l;u&&Xp.setIn(c,G.SUMMARY_OF_ATTACHMENTS_LAST_REFRESH_TIME,(new Date).toLocaleString()),Xp.setIn(c,G.SUMMARY_OF_ASSIGNMENT_LAST_SUBMIT_TIME,(new Date).toLocaleString())},ps=(c,l,u)=>{let d=W.PROMISE_VALUE.RESOLVE;return ts(c)?(d=W.PROMISE_VALUE.REJECT,u?gn.rejectActionByID(l,!0,u):gn.rejectActionByID(l)):gn.resolveActionByID(l),d},hs=c=>{const l=kd.getCaseTypeList();return"true"===l.filter((l=>l.pyWorkTypeImplementationClassName===c))?.[0]?.pyIsTraditionalUICase},gs=()=>"true"===kd?.environmentInfoObject?.pxMashupDetails?.pyLaunchCaseInModal,fs=(c,l)=>{const u=ss(c?.response),d=ns(c?.response),{caseTypeID:p}=d,h=kd.getFeatureMap();(h?.deferUpdateCaseSummaryView??!Object.hasOwn(h,W.DEFER_UPDATE_CASESUMMARY_VIEW))&&p&&mp(W.CASESUMMARY_VIEW_NAME,p)&&((c,l,u)=>{const{containerItemID:d,caseID:p}=l;if(d){const{caseClassName:h,skipAssignmentsUpdate:g}=u,f=K(d),m=ld(f),y=m&&xu(m),I=m&&$u(m),E=Z(f);I&&y?.items?.[I]?.key===l?.caseID&&c.push(Lh(ch,{containerItemID:f,context:f,container:E,containerName:E,caseId:p,viewName:G.CASESUMMARY_VIEW_NAME,updateData:!0,viewLoadingContainer:{context:f},caseClassName:h,...void 0!==g&&{skipAssignmentsUpdate:g}}))}})(l,c?.actionInPayload,{caseClassName:u,skipAssignmentsUpdate:!0})},ms=c=>Fp(c)?.context_data?.caseViewMode;function ys(c,l){return function(){return c.apply(l,arguments)}}const{toString:Is}=Object.prototype,{getPrototypeOf:Es}=Object,As=(_s=Object.create(null),c=>{const l=Is.call(c);return _s[l]||(_s[l]=l.slice(8,-1).toLowerCase())});var _s;const Cs=c=>(c=c.toLowerCase(),l=>As(l)===c),Ss=c=>l=>typeof l===c,{isArray:Ts}=Array,Ns=Ss("undefined"),Ps=Cs("ArrayBuffer"),Ds=Ss("string"),bs=Ss("function"),Rs=Ss("number"),Os=c=>null!==c&&"object"==typeof c,vs=c=>{if("object"!==As(c))return!1;const l=Es(c);return!(null!==l&&l!==Object.prototype&&null!==Object.getPrototypeOf(l)||Symbol.toStringTag in c||Symbol.iterator in c)},xs=Cs("Date"),ws=Cs("File"),Ms=Cs("Blob"),Ls=Cs("FileList"),Us=Cs("URLSearchParams"),[Fs,js,Vs,ks]=["ReadableStream","Request","Response","Headers"].map(Cs);function $s(c,l,{allOwnKeys:u=!1}={}){if(null==c)return;let d,p;if("object"!=typeof c&&(c=[c]),Ts(c))for(d=0,p=c.length;d<p;d++)l.call(null,c[d],d,c);else{const p=u?Object.getOwnPropertyNames(c):Object.keys(c),h=p.length;let g;for(d=0;d<h;d++)g=p[d],l.call(null,c[g],g,c)}}function Bs(c,l){l=l.toLowerCase();const u=Object.keys(c);let d,p=u.length;for(;p-- >0;)if(d=u[p],l===d.toLowerCase())return d;return null}const Gs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ws=c=>!Ns(c)&&c!==Gs,Hs=(qs="undefined"!=typeof Uint8Array&&Es(Uint8Array),c=>qs&&c instanceof qs);var qs;const zs=Cs("HTMLFormElement"),Ys=(({hasOwnProperty:c})=>(l,u)=>c.call(l,u))(Object.prototype),Ks=Cs("RegExp"),Xs=(c,l)=>{const u=Object.getOwnPropertyDescriptors(c),d={};$s(u,((u,p)=>{let h;!1!==(h=l(u,p,c))&&(d[p]=h||u)})),Object.defineProperties(c,d)},Js="abcdefghijklmnopqrstuvwxyz",Qs="0123456789",Zs={DIGIT:Qs,ALPHA:Js,ALPHA_DIGIT:Js+Js.toUpperCase()+Qs},ea=Cs("AsyncFunction"),ta=(na="function"==typeof setImmediate,ra=bs(Gs.postMessage),na?setImmediate:ra?(sa=`axios@${Math.random()}`,aa=[],Gs.addEventListener("message",(({source:c,data:l})=>{c===Gs&&l===sa&&aa.length&&aa.shift()()}),!1),c=>{aa.push(c),Gs.postMessage(sa,"*")}):c=>setTimeout(c));var na,ra,sa,aa;const oa="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Gs):"undefined"!=typeof process&&process.nextTick||ta,ia={isArray:Ts,isArrayBuffer:Ps,isBuffer:function(c){return null!==c&&!Ns(c)&&null!==c.constructor&&!Ns(c.constructor)&&bs(c.constructor.isBuffer)&&c.constructor.isBuffer(c)},isFormData:c=>{let l;return c&&("function"==typeof FormData&&c instanceof FormData||bs(c.append)&&("formdata"===(l=As(c))||"object"===l&&bs(c.toString)&&"[object FormData]"===c.toString()))},isArrayBufferView:function(c){let l;return l="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer&&Ps(c.buffer),l},isString:Ds,isNumber:Rs,isBoolean:c=>!0===c||!1===c,isObject:Os,isPlainObject:vs,isReadableStream:Fs,isRequest:js,isResponse:Vs,isHeaders:ks,isUndefined:Ns,isDate:xs,isFile:ws,isBlob:Ms,isRegExp:Ks,isFunction:bs,isStream:c=>Os(c)&&bs(c.pipe),isURLSearchParams:Us,isTypedArray:Hs,isFileList:Ls,forEach:$s,merge:function c(){const{caseless:l}=Ws(this)&&this||{},u={},d=(d,p)=>{const h=l&&Bs(u,p)||p;vs(u[h])&&vs(d)?u[h]=c(u[h],d):vs(d)?u[h]=c({},d):Ts(d)?u[h]=d.slice():u[h]=d};for(let p=0,h=arguments.length;p<h;p++)arguments[p]&&$s(arguments[p],d);return u},extend:(c,l,u,{allOwnKeys:d}={})=>($s(l,((l,d)=>{u&&bs(l)?c[d]=ys(l,u):c[d]=l}),{allOwnKeys:d}),c),trim:c=>c.trim?c.trim():c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:c=>(65279===c.charCodeAt(0)&&(c=c.slice(1)),c),inherits:(c,l,u,d)=>{c.prototype=Object.create(l.prototype,d),c.prototype.constructor=c,Object.defineProperty(c,"super",{value:l.prototype}),u&&Object.assign(c.prototype,u)},toFlatObject:(c,l,u,d)=>{let p,h,g;const f={};if(l=l||{},null==c)return l;do{for(p=Object.getOwnPropertyNames(c),h=p.length;h-- >0;)g=p[h],d&&!d(g,c,l)||f[g]||(l[g]=c[g],f[g]=!0);c=!1!==u&&Es(c)}while(c&&(!u||u(c,l))&&c!==Object.prototype);return l},kindOf:As,kindOfTest:Cs,endsWith:(c,l,u)=>{c=String(c),(void 0===u||u>c.length)&&(u=c.length),u-=l.length;const d=c.indexOf(l,u);return-1!==d&&d===u},toArray:c=>{if(!c)return null;if(Ts(c))return c;let l=c.length;if(!Rs(l))return null;const u=new Array(l);for(;l-- >0;)u[l]=c[l];return u},forEachEntry:(c,l)=>{const u=(c&&c[Symbol.iterator]).call(c);let d;for(;(d=u.next())&&!d.done;){const u=d.value;l.call(c,u[0],u[1])}},matchAll:(c,l)=>{let u;const d=[];for(;null!==(u=c.exec(l));)d.push(u);return d},isHTMLForm:zs,hasOwnProperty:Ys,hasOwnProp:Ys,reduceDescriptors:Xs,freezeMethods:c=>{Xs(c,((l,u)=>{if(bs(c)&&-1!==["arguments","caller","callee"].indexOf(u))return!1;const d=c[u];bs(d)&&(l.enumerable=!1,"writable"in l?l.writable=!1:l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+u+"'")}))}))},toObjectSet:(c,l)=>{const u={},d=c=>{c.forEach((c=>{u[c]=!0}))};return Ts(c)?d(c):d(String(c).split(l)),u},toCamelCase:c=>c.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(c,l,u){return l.toUpperCase()+u})),noop:()=>{},toFiniteNumber:(c,l)=>null!=c&&Number.isFinite(c=+c)?c:l,findKey:Bs,global:Gs,isContextDefined:Ws,ALPHABET:Zs,generateString:(c=16,l=Zs.ALPHA_DIGIT)=>{let u="";const{length:d}=l;for(;c--;)u+=l[Math.random()*d|0];return u},isSpecCompliantForm:function(c){return!!(c&&bs(c.append)&&"FormData"===c[Symbol.toStringTag]&&c[Symbol.iterator])},toJSONObject:c=>{const l=new Array(10),u=(c,d)=>{if(Os(c)){if(l.indexOf(c)>=0)return;if(!("toJSON"in c)){l[d]=c;const p=Ts(c)?[]:{};return $s(c,((c,l)=>{const h=u(c,d+1);!Ns(h)&&(p[l]=h)})),l[d]=void 0,p}}return c};return u(c,0)},isAsyncFn:ea,isThenable:c=>c&&(Os(c)||bs(c))&&bs(c.then)&&bs(c.catch),setImmediate:ta,asap:oa};function ca(c,l,u,d,p){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=c,this.name="AxiosError",l&&(this.code=l),u&&(this.config=u),d&&(this.request=d),p&&(this.response=p,this.status=p.status?p.status:null)}ia.inherits(ca,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ia.toJSONObject(this.config),code:this.code,status:this.status}}});const la=ca.prototype,ua={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((c=>{ua[c]={value:c}})),Object.defineProperties(ca,ua),Object.defineProperty(la,"isAxiosError",{value:!0}),ca.from=(c,l,u,d,p,h)=>{const g=Object.create(la);return ia.toFlatObject(c,g,(function(c){return c!==Error.prototype}),(c=>"isAxiosError"!==c)),ca.call(g,c.message,l,u,d,p),g.cause=c,g.name=c.name,h&&Object.assign(g,h),g};const da=ca;function pa(c){return ia.isPlainObject(c)||ia.isArray(c)}function ha(c){return ia.endsWith(c,"[]")?c.slice(0,-2):c}function ga(c,l,u){return c?c.concat(l).map((function(c,l){return c=ha(c),!u&&l?"["+c+"]":c})).join(u?".":""):l}const fa=ia.toFlatObject(ia,{},null,(function(c){return/^is[A-Z]/.test(c)})),ma=function(c,l,u){if(!ia.isObject(c))throw new TypeError("target must be an object");l=l||new FormData;const d=(u=ia.toFlatObject(u,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(c,l){return!ia.isUndefined(l[c])}))).metaTokens,p=u.visitor||y,h=u.dots,g=u.indexes,f=(u.Blob||"undefined"!=typeof Blob&&Blob)&&ia.isSpecCompliantForm(l);if(!ia.isFunction(p))throw new TypeError("visitor must be a function");function m(c){if(null===c)return"";if(ia.isDate(c))return c.toISOString();if(!f&&ia.isBlob(c))throw new da("Blob is not supported. Use a Buffer instead.");return ia.isArrayBuffer(c)||ia.isTypedArray(c)?f&&"function"==typeof Blob?new Blob([c]):Buffer.from(c):c}function y(c,u,p){let f=c;if(c&&!p&&"object"==typeof c)if(ia.endsWith(u,"{}"))u=d?u:u.slice(0,-2),c=JSON.stringify(c);else if(ia.isArray(c)&&function(c){return ia.isArray(c)&&!c.some(pa)}(c)||(ia.isFileList(c)||ia.endsWith(u,"[]"))&&(f=ia.toArray(c)))return u=ha(u),f.forEach((function(c,d){!ia.isUndefined(c)&&null!==c&&l.append(!0===g?ga([u],d,h):null===g?u:u+"[]",m(c))})),!1;return!!pa(c)||(l.append(ga(p,u,h),m(c)),!1)}const I=[],E=Object.assign(fa,{defaultVisitor:y,convertValue:m,isVisitable:pa});if(!ia.isObject(c))throw new TypeError("data must be an object");return function c(u,d){if(!ia.isUndefined(u)){if(-1!==I.indexOf(u))throw Error("Circular reference detected in "+d.join("."));I.push(u),ia.forEach(u,(function(u,h){!0===(!(ia.isUndefined(u)||null===u)&&p.call(l,u,ia.isString(h)?h.trim():h,d,E))&&c(u,d?d.concat(h):[h])})),I.pop()}}(c),l};function ya(c){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(c).replace(/[!'()~]|%20|%00/g,(function(c){return l[c]}))}function Ia(c,l){this._pairs=[],c&&ma(c,this,l)}const Ea=Ia.prototype;Ea.append=function(c,l){this._pairs.push([c,l])},Ea.toString=function(c){const l=c?function(l){return c.call(this,l,ya)}:ya;return this._pairs.map((function(c){return l(c[0])+"="+l(c[1])}),"").join("&")};const Aa=Ia;function _a(c){return encodeURIComponent(c).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ca(c,l,u){if(!l)return c;const d=u&&u.encode||_a,p=u&&u.serialize;let h;if(h=p?p(l,u):ia.isURLSearchParams(l)?l.toString():new Aa(l,u).toString(d),h){const l=c.indexOf("#");-1!==l&&(c=c.slice(0,l)),c+=(-1===c.indexOf("?")?"?":"&")+h}return c}const Sa=class{constructor(){this.handlers=[]}use(c,l,u){return this.handlers.push({fulfilled:c,rejected:l,synchronous:!!u&&u.synchronous,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(c){this.handlers[c]&&(this.handlers[c]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(c){ia.forEach(this.handlers,(function(l){null!==l&&c(l)}))}},Ta={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Na={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Aa,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Pa="undefined"!=typeof window&&"undefined"!=typeof document,Da="object"==typeof navigator&&navigator||void 0,ba=Pa&&(!Da||["ReactNative","NativeScript","NS"].indexOf(Da.product)<0),Ra="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Oa=Pa&&window.location.href||"http://localhost",va={...p,...Na},xa=function(c){function l(c,u,d,p){let h=c[p++];if("__proto__"===h)return!0;const g=Number.isFinite(+h),f=p>=c.length;return h=!h&&ia.isArray(d)?d.length:h,f?(ia.hasOwnProp(d,h)?d[h]=[d[h],u]:d[h]=u,!g):(d[h]&&ia.isObject(d[h])||(d[h]=[]),l(c,u,d[h],p)&&ia.isArray(d[h])&&(d[h]=function(c){const l={},u=Object.keys(c);let d;const p=u.length;let h;for(d=0;d<p;d++)h=u[d],l[h]=c[h];return l}(d[h])),!g)}if(ia.isFormData(c)&&ia.isFunction(c.entries)){const u={};return ia.forEachEntry(c,((c,d)=>{l(function(c){return ia.matchAll(/\w+|\[(\w*)]/g,c).map((c=>"[]"===c[0]?"":c[1]||c[0]))}(c),d,u,0)})),u}return null},wa={transitional:Ta,adapter:["xhr","http","fetch"],transformRequest:[function(c,l){const u=l.getContentType()||"",d=u.indexOf("application/json")>-1,p=ia.isObject(c);if(p&&ia.isHTMLForm(c)&&(c=new FormData(c)),ia.isFormData(c))return d?JSON.stringify(xa(c)):c;if(ia.isArrayBuffer(c)||ia.isBuffer(c)||ia.isStream(c)||ia.isFile(c)||ia.isBlob(c)||ia.isReadableStream(c))return c;if(ia.isArrayBufferView(c))return c.buffer;if(ia.isURLSearchParams(c))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),c.toString();let h;if(p){if(u.indexOf("application/x-www-form-urlencoded")>-1)return function(c,l){return ma(c,new va.classes.URLSearchParams,Object.assign({visitor:function(c,l,u,d){return va.isNode&&ia.isBuffer(c)?(this.append(l,c.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},l))}(c,this.formSerializer).toString();if((h=ia.isFileList(c))||u.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ma(h?{"files[]":c}:c,l&&new l,this.formSerializer)}}return p||d?(l.setContentType("application/json",!1),function(c){if(ia.isString(c))try{return(0,JSON.parse)(c),ia.trim(c)}catch(c){if("SyntaxError"!==c.name)throw c}return(0,JSON.stringify)(c)}(c)):c}],transformResponse:[function(c){const l=this.transitional||wa.transitional,u=l&&l.forcedJSONParsing,d="json"===this.responseType;if(ia.isResponse(c)||ia.isReadableStream(c))return c;if(c&&ia.isString(c)&&(u&&!this.responseType||d)){const u=!(l&&l.silentJSONParsing)&&d;try{return JSON.parse(c)}catch(c){if(u){if("SyntaxError"===c.name)throw da.from(c,da.ERR_BAD_RESPONSE,this,null,this.response);throw c}}}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:va.classes.FormData,Blob:va.classes.Blob},validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ia.forEach(["delete","get","head","post","put","patch"],(c=>{wa.headers[c]={}}));const Ma=wa,La=ia.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ua=Symbol("internals");function ja(c){return c&&String(c).trim().toLowerCase()}function Va(c){return!1===c||null==c?c:ia.isArray(c)?c.map(Va):String(c)}function ka(c,l,u,d,p){return ia.isFunction(d)?d.call(this,l,u):(p&&(l=u),ia.isString(l)?ia.isString(d)?-1!==l.indexOf(d):ia.isRegExp(d)?d.test(l):void 0:void 0)}class Fa{constructor(c){c&&this.set(c)}set(c,l,u){const d=this;function p(c,l,u){const p=ja(l);if(!p)throw new Error("header name must be a non-empty string");const h=ia.findKey(d,p);(!h||void 0===d[h]||!0===u||void 0===u&&!1!==d[h])&&(d[h||l]=Va(c))}const h=(c,l)=>ia.forEach(c,((c,u)=>p(c,u,l)));if(ia.isPlainObject(c)||c instanceof this.constructor)h(c,l);else if(ia.isString(c)&&(c=c.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(c.trim()))h((c=>{const l={};let u,d,p;return c&&c.split("\n").forEach((function(c){p=c.indexOf(":"),u=c.substring(0,p).trim().toLowerCase(),d=c.substring(p+1).trim(),!u||l[u]&&La[u]||("set-cookie"===u?l[u]?l[u].push(d):l[u]=[d]:l[u]=l[u]?l[u]+", "+d:d)})),l})(c),l);else if(ia.isHeaders(c))for(const[g,f]of c.entries())p(f,g,u);else null!=c&&p(l,c,u);return this}get(c,l){if(c=ja(c)){const u=ia.findKey(this,c);if(u){const c=this[u];if(!l)return c;if(!0===l)return function(c){const l=Object.create(null),u=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=u.exec(c);)l[d[1]]=d[2];return l}(c);if(ia.isFunction(l))return l.call(this,c,u);if(ia.isRegExp(l))return l.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(c,l){if(c=ja(c)){const u=ia.findKey(this,c);return!(!u||void 0===this[u]||l&&!ka(0,this[u],u,l))}return!1}delete(c,l){const u=this;let d=!1;function p(c){if(c=ja(c)){const p=ia.findKey(u,c);!p||l&&!ka(0,u[p],p,l)||(delete u[p],d=!0)}}return ia.isArray(c)?c.forEach(p):p(c),d}clear(c){const l=Object.keys(this);let u=l.length,d=!1;for(;u--;){const p=l[u];c&&!ka(0,this[p],p,c,!0)||(delete this[p],d=!0)}return d}normalize(c){const l=this,u={};return ia.forEach(this,((d,p)=>{const h=ia.findKey(u,p);if(h)return l[h]=Va(d),void delete l[p];const g=c?function(c){return c.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((c,l,u)=>l.toUpperCase()+u))}(p):String(p).trim();g!==p&&delete l[p],l[g]=Va(d),u[g]=!0})),this}concat(...c){return this.constructor.concat(this,...c)}toJSON(c){const l=Object.create(null);return ia.forEach(this,((u,d)=>{null!=u&&!1!==u&&(l[d]=c&&ia.isArray(u)?u.join(", "):u)})),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([c,l])=>c+": "+l)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(c){return c instanceof this?c:new this(c)}static concat(c,...l){const u=new this(c);return l.forEach((c=>u.set(c))),u}static accessor(c){const l=(this[Ua]=this[Ua]={accessors:{}}).accessors,u=this.prototype;function d(c){const d=ja(c);l[d]||(function(c,l){const u=ia.toCamelCase(" "+l);["get","set","has"].forEach((d=>{Object.defineProperty(c,d+u,{value:function(c,u,p){return this[d].call(this,l,c,u,p)},configurable:!0})}))}(u,c),l[d]=!0)}return ia.isArray(c)?c.forEach(d):d(c),this}}Fa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ia.reduceDescriptors(Fa.prototype,(({value:c},l)=>{let u=l[0].toUpperCase()+l.slice(1);return{get:()=>c,set(c){this[u]=c}}})),ia.freezeMethods(Fa);const $a=Fa;function Ba(c,l){const u=this||Ma,d=l||u,p=$a.from(d.headers);let h=d.data;return ia.forEach(c,(function(c){h=c.call(u,h,p.normalize(),l?l.status:void 0)})),p.normalize(),h}function Ga(c){return!(!c||!c.__CANCEL__)}function Wa(c,l,u){da.call(this,c??"canceled",da.ERR_CANCELED,l,u),this.name="CanceledError"}ia.inherits(Wa,da,{__CANCEL__:!0});const Ha=Wa;function qa(c,l,u){const d=u.config.validateStatus;u.status&&d&&!d(u.status)?l(new da("Request failed with status code "+u.status,[da.ERR_BAD_REQUEST,da.ERR_BAD_RESPONSE][Math.floor(u.status/100)-4],u.config,u.request,u)):c(u)}const za=(c,l,u=3)=>{let d=0;const p=function(c,l){c=c||10;const u=new Array(c),d=new Array(c);let p,h=0,g=0;return l=void 0!==l?l:1e3,function(f){const m=Date.now(),y=d[g];p||(p=m),u[h]=f,d[h]=m;let I=g,E=0;for(;I!==h;)E+=u[I++],I%=c;if(h=(h+1)%c,h===g&&(g=(g+1)%c),m-p<l)return;const A=y&&m-y;return A?Math.round(1e3*E/A):void 0}}(50,250);return function(c,l){let u,d,p=0,h=1e3/l;const g=(l,h=Date.now())=>{p=h,u=null,d&&(clearTimeout(d),d=null),c.apply(null,l)};return[(...c)=>{const l=Date.now(),f=l-p;f>=h?g(c,l):(u=c,d||(d=setTimeout((()=>{d=null,g(u)}),h-f)))},()=>u&&g(u)]}((u=>{const h=u.loaded,g=u.lengthComputable?u.total:void 0,f=h-d,m=p(f);d=h,c({loaded:h,total:g,progress:g?h/g:void 0,bytes:f,rate:m||void 0,estimated:m&&g&&h<=g?(g-h)/m:void 0,event:u,lengthComputable:null!=g,[l?"download":"upload"]:!0})}),u)},Ya=(c,l)=>{const u=null!=c;return[d=>l[0]({lengthComputable:u,total:c,loaded:d}),l[1]]},Ka=c=>(...l)=>ia.asap((()=>c(...l))),Xa=va.hasStandardBrowserEnv?function(){const c=va.navigator&&/(msie|trident)/i.test(va.navigator.userAgent),l=document.createElement("a");let u;function d(u){let d=u;return c&&(l.setAttribute("href",d),d=l.href),l.setAttribute("href",d),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:"/"===l.pathname.charAt(0)?l.pathname:"/"+l.pathname}}return u=d(window.location.href),function(c){const l=ia.isString(c)?d(c):c;return l.protocol===u.protocol&&l.host===u.host}}():function(){return!0},Ja=va.hasStandardBrowserEnv?{write(c,l,u,d,p,h){const g=[c+"="+encodeURIComponent(l)];ia.isNumber(u)&&g.push("expires="+new Date(u).toGMTString()),ia.isString(d)&&g.push("path="+d),ia.isString(p)&&g.push("domain="+p),!0===h&&g.push("secure"),document.cookie=g.join("; ")},read(c){const l=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove(c){this.write(c,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Qa(c,l){return c&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)?function(c,l){return l?c.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):c}(c,l):l}const Za=c=>c instanceof $a?{...c}:c;function eo(c,l){l=l||{};const u={};function d(c,l,u){return ia.isPlainObject(c)&&ia.isPlainObject(l)?ia.merge.call({caseless:u},c,l):ia.isPlainObject(l)?ia.merge({},l):ia.isArray(l)?l.slice():l}function p(c,l,u){return ia.isUndefined(l)?ia.isUndefined(c)?void 0:d(void 0,c,u):d(c,l,u)}function h(c,l){if(!ia.isUndefined(l))return d(void 0,l)}function g(c,l){return ia.isUndefined(l)?ia.isUndefined(c)?void 0:d(void 0,c):d(void 0,l)}function f(u,p,h){return h in l?d(u,p):h in c?d(void 0,u):void 0}const m={url:h,method:h,data:h,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,withXSRFToken:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:f,headers:(c,l)=>p(Za(c),Za(l),!0)};return ia.forEach(Object.keys(Object.assign({},c,l)),(function(d){const h=m[d]||p,g=h(c[d],l[d],d);ia.isUndefined(g)&&h!==f||(u[d]=g)})),u}const to=c=>{const l=eo({},c);let u,{data:d,withXSRFToken:p,xsrfHeaderName:h,xsrfCookieName:g,headers:f,auth:m}=l;if(l.headers=f=$a.from(f),l.url=Ca(Qa(l.baseURL,l.url),c.params,c.paramsSerializer),m&&f.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),ia.isFormData(d))if(va.hasStandardBrowserEnv||va.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(!1!==(u=f.getContentType())){const[c,...l]=u?u.split(";").map((c=>c.trim())).filter(Boolean):[];f.setContentType([c||"multipart/form-data",...l].join("; "))}if(va.hasStandardBrowserEnv&&(p&&ia.isFunction(p)&&(p=p(l)),p||!1!==p&&Xa(l.url))){const c=h&&g&&Ja.read(g);c&&f.set(h,c)}return l},no="undefined"!=typeof XMLHttpRequest&&function(c){return new Promise((function(l,u){const d=to(c);let p=d.data;const h=$a.from(d.headers).normalize();let g,f,m,y,I,{responseType:E,onUploadProgress:A,onDownloadProgress:_}=d;function C(){y&&y(),I&&I(),d.cancelToken&&d.cancelToken.unsubscribe(g),d.signal&&d.signal.removeEventListener("abort",g)}let S=new XMLHttpRequest;function T(){if(!S)return;const d=$a.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders());qa((function(c){l(c),C()}),(function(c){u(c),C()}),{data:E&&"text"!==E&&"json"!==E?S.response:S.responseText,status:S.status,statusText:S.statusText,headers:d,config:c,request:S}),S=null}S.open(d.method.toUpperCase(),d.url,!0),S.timeout=d.timeout,"onloadend"in S?S.onloadend=T:S.onreadystatechange=function(){S&&4===S.readyState&&(0!==S.status||S.responseURL&&0===S.responseURL.indexOf("file:"))&&setTimeout(T)},S.onabort=function(){S&&(u(new da("Request aborted",da.ECONNABORTED,c,S)),S=null)},S.onerror=function(){u(new da("Network Error",da.ERR_NETWORK,c,S)),S=null},S.ontimeout=function(){let l=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const p=d.transitional||Ta;d.timeoutErrorMessage&&(l=d.timeoutErrorMessage),u(new da(l,p.clarifyTimeoutError?da.ETIMEDOUT:da.ECONNABORTED,c,S)),S=null},void 0===p&&h.setContentType(null),"setRequestHeader"in S&&ia.forEach(h.toJSON(),(function(c,l){S.setRequestHeader(l,c)})),ia.isUndefined(d.withCredentials)||(S.withCredentials=!!d.withCredentials),E&&"json"!==E&&(S.responseType=d.responseType),_&&([m,I]=za(_,!0),S.addEventListener("progress",m)),A&&S.upload&&([f,y]=za(A),S.upload.addEventListener("progress",f),S.upload.addEventListener("loadend",y)),(d.cancelToken||d.signal)&&(g=l=>{S&&(u(!l||l.type?new Ha(null,c,S):l),S.abort(),S=null)},d.cancelToken&&d.cancelToken.subscribe(g),d.signal&&(d.signal.aborted?g():d.signal.addEventListener("abort",g)));const N=function(c){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(c);return l&&l[1]||""}(d.url);N&&-1===va.protocols.indexOf(N)?u(new da("Unsupported protocol "+N+":",da.ERR_BAD_REQUEST,c)):S.send(p||null)}))},ro=(c,l)=>{const{length:u}=c=c?c.filter(Boolean):[];if(l||u){let u,d=new AbortController;const p=function(c){if(!u){u=!0,g();const l=c instanceof Error?c:this.reason;d.abort(l instanceof da?l:new Ha(l instanceof Error?l.message:l))}};let h=l&&setTimeout((()=>{h=null,p(new da(`timeout ${l} of ms exceeded`,da.ETIMEDOUT))}),l);const g=()=>{c&&(h&&clearTimeout(h),h=null,c.forEach((c=>{c.unsubscribe?c.unsubscribe(p):c.removeEventListener("abort",p)})),c=null)};c.forEach((c=>c.addEventListener("abort",p)));const{signal:f}=d;return f.unsubscribe=()=>ia.asap(g),f}},so=function*(c,l){let u=c.byteLength;if(!l||u<l)return void(yield c);let d,p=0;for(;p<u;)d=p+l,yield c.slice(p,d),p=d},ao=(c,l,u,d)=>{const p=async function*(c,l){for await(const u of async function*(c){if(c[Symbol.asyncIterator])return void(yield*c);const l=c.getReader();try{for(;;){const{done:c,value:u}=await l.read();if(c)break;yield u}}finally{await l.cancel()}}(c))yield*so(u,l)}(c,l);let h,g=0,f=c=>{h||(h=!0,d&&d(c))};return new ReadableStream({async pull(c){try{const{done:l,value:d}=await p.next();if(l)return f(),void c.close();let h=d.byteLength;if(u){let c=g+=h;u(c)}c.enqueue(new Uint8Array(d))}catch(c){throw f(c),c}},cancel:c=>(f(c),p.return())},{highWaterMark:2})},oo="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,io=oo&&"function"==typeof ReadableStream,co=oo&&("function"==typeof TextEncoder?(lo=new TextEncoder,c=>lo.encode(c)):async c=>new Uint8Array(await new Response(c).arrayBuffer()));var lo;const uo=(c,...l)=>{try{return!!c(...l)}catch(c){return!1}},po=io&&uo((()=>{let c=!1;const l=new Request(va.origin,{body:new ReadableStream,method:"POST",get duplex(){return c=!0,"half"}}).headers.has("Content-Type");return c&&!l})),ho=io&&uo((()=>ia.isReadableStream(new Response("").body))),go={stream:ho&&(c=>c.body)};var fo;oo&&(fo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((c=>{!go[c]&&(go[c]=ia.isFunction(fo[c])?l=>l[c]():(l,u)=>{throw new da(`Response type '${c}' is not supported`,da.ERR_NOT_SUPPORT,u)})})));const mo=oo&&(async c=>{let{url:l,method:u,data:d,signal:p,cancelToken:h,timeout:g,onDownloadProgress:f,onUploadProgress:m,responseType:y,headers:I,withCredentials:E="same-origin",fetchOptions:A}=to(c);y=y?(y+"").toLowerCase():"text";let _,C=ro([p,h&&h.toAbortSignal()],g);const S=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let T;try{if(m&&po&&"get"!==u&&"head"!==u&&0!==(T=await(async(c,l)=>{const u=ia.toFiniteNumber(c.getContentLength());return u??(async c=>{if(null==c)return 0;if(ia.isBlob(c))return c.size;if(ia.isSpecCompliantForm(c)){const l=new Request(va.origin,{method:"POST",body:c});return(await l.arrayBuffer()).byteLength}return ia.isArrayBufferView(c)||ia.isArrayBuffer(c)?c.byteLength:(ia.isURLSearchParams(c)&&(c+=""),ia.isString(c)?(await co(c)).byteLength:void 0)})(l)})(I,d))){let c,u=new Request(l,{method:"POST",body:d,duplex:"half"});if(ia.isFormData(d)&&(c=u.headers.get("content-type"))&&I.setContentType(c),u.body){const[c,l]=Ya(T,za(Ka(m)));d=ao(u.body,65536,c,l)}}ia.isString(E)||(E=E?"include":"omit");const p="credentials"in Request.prototype;_=new Request(l,{...A,signal:C,method:u.toUpperCase(),headers:I.normalize().toJSON(),body:d,duplex:"half",credentials:p?E:void 0});let h=await fetch(_);const g=ho&&("stream"===y||"response"===y);if(ho&&(f||g&&S)){const c={};["status","statusText","headers"].forEach((l=>{c[l]=h[l]}));const l=ia.toFiniteNumber(h.headers.get("content-length")),[u,d]=f&&Ya(l,za(Ka(f),!0))||[];h=new Response(ao(h.body,65536,u,(()=>{d&&d(),S&&S()})),c)}y=y||"text";let N=await go[ia.findKey(go,y)||"text"](h,c);return!g&&S&&S(),await new Promise(((l,u)=>{qa(l,u,{data:N,headers:$a.from(h.headers),status:h.status,statusText:h.statusText,config:c,request:_})}))}catch(l){if(S&&S(),l&&"TypeError"===l.name&&/fetch/i.test(l.message))throw Object.assign(new da("Network Error",da.ERR_NETWORK,c,_),{cause:l.cause||l});throw da.from(l,l&&l.code,c,_)}}),yo={http:null,xhr:no,fetch:mo};ia.forEach(yo,((c,l)=>{if(c){try{Object.defineProperty(c,"name",{value:l})}catch(c){}Object.defineProperty(c,"adapterName",{value:l})}}));const Io=c=>`- ${c}`,Eo=c=>ia.isFunction(c)||null===c||!1===c,Ao=c=>{c=ia.isArray(c)?c:[c];const{length:l}=c;let u,d;const p={};for(let h=0;h<l;h++){let l;if(u=c[h],d=u,!Eo(u)&&(d=yo[(l=String(u)).toLowerCase()],void 0===d))throw new da(`Unknown adapter '${l}'`);if(d)break;p[l||"#"+h]=d}if(!d){const c=Object.entries(p).map((([c,l])=>`adapter ${c} `+(!1===l?"is not supported by the environment":"is not available in the build")));let u=l?c.length>1?"since :\n"+c.map(Io).join("\n"):" "+Io(c[0]):"as no adapter specified";throw new da("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return d};function _o(c){if(c.cancelToken&&c.cancelToken.throwIfRequested(),c.signal&&c.signal.aborted)throw new Ha(null,c)}function Co(c){return _o(c),c.headers=$a.from(c.headers),c.data=Ba.call(c,c.transformRequest),-1!==["post","put","patch"].indexOf(c.method)&&c.headers.setContentType("application/x-www-form-urlencoded",!1),Ao(c.adapter||Ma.adapter)(c).then((function(l){return _o(c),l.data=Ba.call(c,c.transformResponse,l),l.headers=$a.from(l.headers),l}),(function(l){return Ga(l)||(_o(c),l&&l.response&&(l.response.data=Ba.call(c,c.transformResponse,l.response),l.response.headers=$a.from(l.response.headers))),Promise.reject(l)}))}const So={};["object","boolean","number","function","string","symbol"].forEach(((c,l)=>{So[c]=function(u){return typeof u===c||"a"+(l<1?"n ":" ")+c}}));const To={};So.transitional=function(c,l,u){function d(c,l){return"[Axios v1.7.7] Transitional option '"+c+"'"+l+(u?". "+u:"")}return(u,p,h)=>{if(!1===c)throw new da(d(p," has been removed"+(l?" in "+l:"")),da.ERR_DEPRECATED);return l&&!To[p]&&(To[p]=!0,console.warn(d(p," has been deprecated since v"+l+" and will be removed in the near future"))),!c||c(u,p,h)}};const No={assertOptions:function(c,l,u){if("object"!=typeof c)throw new da("options must be an object",da.ERR_BAD_OPTION_VALUE);const d=Object.keys(c);let p=d.length;for(;p-- >0;){const h=d[p],g=l[h];if(g){const l=c[h],u=void 0===l||g(l,h,c);if(!0!==u)throw new da("option "+h+" must be "+u,da.ERR_BAD_OPTION_VALUE)}else if(!0!==u)throw new da("Unknown option "+h,da.ERR_BAD_OPTION)}},validators:So},Po=No.validators;class bo{constructor(c){this.defaults=c,this.interceptors={request:new Sa,response:new Sa}}async request(c,l){try{return await this._request(c,l)}catch(c){if(c instanceof Error){let l;Error.captureStackTrace?Error.captureStackTrace(l={}):l=new Error;const u=l.stack?l.stack.replace(/^.+\n/,""):"";try{c.stack?u&&!String(c.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(c.stack+="\n"+u):c.stack=u}catch(c){}}throw c}}_request(c,l){"string"==typeof c?(l=l||{}).url=c:l=c||{},l=eo(this.defaults,l);const{transitional:u,paramsSerializer:d,headers:p}=l;void 0!==u&&No.assertOptions(u,{silentJSONParsing:Po.transitional(Po.boolean),forcedJSONParsing:Po.transitional(Po.boolean),clarifyTimeoutError:Po.transitional(Po.boolean)},!1),null!=d&&(ia.isFunction(d)?l.paramsSerializer={serialize:d}:No.assertOptions(d,{encode:Po.function,serialize:Po.function},!0)),l.method=(l.method||this.defaults.method||"get").toLowerCase();let h=p&&ia.merge(p.common,p[l.method]);p&&ia.forEach(["delete","get","head","post","put","patch","common"],(c=>{delete p[c]})),l.headers=$a.concat(h,p);const g=[];let f=!0;this.interceptors.request.forEach((function(c){"function"==typeof c.runWhen&&!1===c.runWhen(l)||(f=f&&c.synchronous,g.unshift(c.fulfilled,c.rejected))}));const m=[];let y;this.interceptors.response.forEach((function(c){m.push(c.fulfilled,c.rejected)}));let I,E=0;if(!f){const c=[Co.bind(this),void 0];for(c.unshift.apply(c,g),c.push.apply(c,m),I=c.length,y=Promise.resolve(l);E<I;)y=y.then(c[E++],c[E++]);return y}I=g.length;let A=l;for(E=0;E<I;){const l=g[E++],u=g[E++];try{A=l(A)}catch(c){u.call(this,c);break}}try{y=Co.call(this,A)}catch(c){return Promise.reject(c)}for(E=0,I=m.length;E<I;)y=y.then(m[E++],m[E++]);return y}getUri(c){return Ca(Qa((c=eo(this.defaults,c)).baseURL,c.url),c.params,c.paramsSerializer)}}ia.forEach(["delete","get","head","options"],(function(c){bo.prototype[c]=function(l,u){return this.request(eo(u||{},{method:c,url:l,data:(u||{}).data}))}})),ia.forEach(["post","put","patch"],(function(c){function l(l){return function(u,d,p){return this.request(eo(p||{},{method:c,headers:l?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}bo.prototype[c]=l(),bo.prototype[c+"Form"]=l(!0)}));const Do=bo;class vo{constructor(c){if("function"!=typeof c)throw new TypeError("executor must be a function.");let l;this.promise=new Promise((function(c){l=c}));const u=this;this.promise.then((c=>{if(!u._listeners)return;let l=u._listeners.length;for(;l-- >0;)u._listeners[l](c);u._listeners=null})),this.promise.then=c=>{let l;const d=new Promise((c=>{u.subscribe(c),l=c})).then(c);return d.cancel=function(){u.unsubscribe(l)},d},c((function(c,d,p){u.reason||(u.reason=new Ha(c,d,p),l(u.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(c){this.reason?c(this.reason):this._listeners?this._listeners.push(c):this._listeners=[c]}unsubscribe(c){if(!this._listeners)return;const l=this._listeners.indexOf(c);-1!==l&&this._listeners.splice(l,1)}toAbortSignal(){const c=new AbortController,l=l=>{c.abort(l)};return this.subscribe(l),c.signal.unsubscribe=()=>this.unsubscribe(l),c.signal}static source(){let c;return{token:new vo((function(l){c=l})),cancel:c}}}const Ro=vo,Oo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Oo).forEach((([c,l])=>{Oo[l]=c}));const xo=Oo,wo=function c(l){const u=new Do(l),d=ys(Do.prototype.request,u);return ia.extend(d,Do.prototype,u,{allOwnKeys:!0}),ia.extend(d,u,null,{allOwnKeys:!0}),d.create=function(u){return c(eo(l,u))},d}(Ma);wo.Axios=Do,wo.CanceledError=Ha,wo.CancelToken=Ro,wo.isCancel=Ga,wo.VERSION="1.7.7",wo.toFormData=ma,wo.AxiosError=da,wo.Cancel=wo.CanceledError,wo.all=function(c){return Promise.all(c)},wo.spread=function(c){return function(l){return c.apply(null,l)}},wo.isAxiosError=function(c){return ia.isObject(c)&&!0===c.isAxiosError},wo.mergeConfig=eo,wo.AxiosHeaders=$a,wo.formToJSON=c=>xa(ia.isHTMLForm(c)?new FormData(c):c),wo.getAdapter=Ao,wo.HttpStatusCode=xo,wo.default=wo;const Mo=wo;function Lo(c){var l=c((function(c){Error.call(c),c.stack=(new Error).stack}));return l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l}var Uo=Lo((function(c){return function(){c(this),this.name="EmptyError",this.message="no elements in sequence"}})),Fo=function(c,l){return Fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},Fo(c,l)};function jo(c,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function u(){this.constructor=c}Fo(c,l),c.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)}function Vo(c,l){var u,d,p,h={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=f(0),g.throw=f(1),g.return=f(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function f(f){return function(m){return function(f){if(u)throw new TypeError("Generator is already executing.");for(;g&&(g=0,f[0]&&(h=0)),h;)try{if(u=1,d&&(p=2&f[0]?d.return:f[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,f[1])).done)return p;switch(d=0,p&&(f=[2&f[0],p.value]),f[0]){case 0:case 1:p=f;break;case 4:return h.label++,{value:f[1],done:!1};case 5:h.label++,d=f[1],f=[0];continue;case 7:f=h.ops.pop(),h.trys.pop();continue;default:if(!((p=(p=h.trys).length>0&&p[p.length-1])||6!==f[0]&&2!==f[0])){h=0;continue}if(3===f[0]&&(!p||f[1]>p[0]&&f[1]<p[3])){h.label=f[1];break}if(6===f[0]&&h.label<p[1]){h.label=p[1],p=f;break}if(p&&h.label<p[2]){h.label=p[2],h.ops.push(f);break}p[2]&&h.ops.pop(),h.trys.pop();continue}f=l.call(c,h)}catch(c){f=[6,c],d=0}finally{u=p=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,m])}}}function ko(c){var l="function"==typeof Symbol&&Symbol.iterator,u=l&&c[l],d=0;if(u)return u.call(c);if(c&&"number"==typeof c.length)return{next:function(){return c&&d>=c.length&&(c=void 0),{value:c&&c[d++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")}function $o(c,l){var u="function"==typeof Symbol&&c[Symbol.iterator];if(!u)return c;var d,p,h=u.call(c),g=[];try{for(;(void 0===l||l-- >0)&&!(d=h.next()).done;)g.push(d.value)}catch(c){p={error:c}}finally{try{d&&!d.done&&(u=h.return)&&u.call(h)}finally{if(p)throw p.error}}return g}function Bo(c,l,u){if(u||2===arguments.length)for(var d,p=0,h=l.length;p<h;p++)!d&&p in l||(d||(d=Array.prototype.slice.call(l,0,p)),d[p]=l[p]);return c.concat(d||Array.prototype.slice.call(l))}function Go(c){return this instanceof Go?(this.v=c,this):new Go(c)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Wo=function(c){return c&&"number"==typeof c.length&&"function"!=typeof c};function Ho(c){return"function"==typeof c}function qo(c){return Ho(null==c?void 0:c.then)}var zo=Lo((function(c){return function(l){c(this),this.message=l?l.length+" errors occurred during unsubscription:\n"+l.map((function(c,l){return l+1+") "+c.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=l}}));function Yo(c,l){if(c){var u=c.indexOf(l);0<=u&&c.splice(u,1)}}var Ko=function(){function c(c){this.initialTeardown=c,this.closed=!1,this._parentage=null,this._finalizers=null}return c.prototype.unsubscribe=function(){var c,l,u,d,p;if(!this.closed){this.closed=!0;var h=this._parentage;if(h)if(this._parentage=null,Array.isArray(h))try{for(var g=ko(h),f=g.next();!f.done;f=g.next())f.value.remove(this)}catch(l){c={error:l}}finally{try{f&&!f.done&&(l=g.return)&&l.call(g)}finally{if(c)throw c.error}}else h.remove(this);var m=this.initialTeardown;if(Ho(m))try{m()}catch(c){p=c instanceof zo?c.errors:[c]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var I=ko(y),E=I.next();!E.done;E=I.next()){var A=E.value;try{Qo(A)}catch(c){p=null!=p?p:[],c instanceof zo?p=Bo(Bo([],$o(p)),$o(c.errors)):p.push(c)}}}catch(c){u={error:c}}finally{try{E&&!E.done&&(d=I.return)&&d.call(I)}finally{if(u)throw u.error}}}if(p)throw new zo(p)}},c.prototype.add=function(l){var u;if(l&&l!==this)if(this.closed)Qo(l);else{if(l instanceof c){if(l.closed||l._hasParent(this))return;l._addParent(this)}(this._finalizers=null!==(u=this._finalizers)&&void 0!==u?u:[]).push(l)}},c.prototype._hasParent=function(c){var l=this._parentage;return l===c||Array.isArray(l)&&l.includes(c)},c.prototype._addParent=function(c){var l=this._parentage;this._parentage=Array.isArray(l)?(l.push(c),l):l?[l,c]:c},c.prototype._removeParent=function(c){var l=this._parentage;l===c?this._parentage=null:Array.isArray(l)&&Yo(l,c)},c.prototype.remove=function(l){var u=this._finalizers;u&&Yo(u,l),l instanceof c&&l._removeParent(this)},c.EMPTY=function(){var l=new c;return l.closed=!0,l}(),c}(),Xo=Ko.EMPTY;function Jo(c){return c instanceof Ko||c&&"closed"in c&&Ho(c.remove)&&Ho(c.add)&&Ho(c.unsubscribe)}function Qo(c){Ho(c)?c():c.unsubscribe()}var Zo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ei={setTimeout:function(c,l){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];var p=ei.delegate;return(null==p?void 0:p.setTimeout)?p.setTimeout.apply(p,Bo([c,l],$o(u))):setTimeout.apply(void 0,Bo([c,l],$o(u)))},clearTimeout:function(c){var l=ei.delegate;return((null==l?void 0:l.clearTimeout)||clearTimeout)(c)},delegate:void 0};function ti(c){ei.setTimeout((function(){var l=Zo.onUnhandledError;if(!l)throw c;l(c)}))}function ni(){}var ri=si("C",void 0,void 0);function si(c,l,u){return{kind:c,value:l,error:u}}var ai=null;function oi(c){if(Zo.useDeprecatedSynchronousErrorHandling){var l=!ai;if(l&&(ai={errorThrown:!1,error:null}),c(),l){var u=ai,d=u.errorThrown,p=u.error;if(ai=null,d)throw p}}else c()}var ii=function(c){function l(l){var u=c.call(this)||this;return u.isStopped=!1,l?(u.destination=l,Jo(l)&&l.add(u)):u.destination=gi,u}return jo(l,c),l.create=function(c,l,u){return new di(c,l,u)},l.prototype.next=function(c){this.isStopped?hi(function(c){return si("N",c,void 0)}(c),this):this._next(c)},l.prototype.error=function(c){this.isStopped?hi(si("E",void 0,c),this):(this.isStopped=!0,this._error(c))},l.prototype.complete=function(){this.isStopped?hi(ri,this):(this.isStopped=!0,this._complete())},l.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,c.prototype.unsubscribe.call(this),this.destination=null)},l.prototype._next=function(c){this.destination.next(c)},l.prototype._error=function(c){try{this.destination.error(c)}finally{this.unsubscribe()}},l.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},l}(Ko),ci=Function.prototype.bind;function li(c,l){return ci.call(c,l)}var ui=function(){function c(c){this.partialObserver=c}return c.prototype.next=function(c){var l=this.partialObserver;if(l.next)try{l.next(c)}catch(c){pi(c)}},c.prototype.error=function(c){var l=this.partialObserver;if(l.error)try{l.error(c)}catch(c){pi(c)}else pi(c)},c.prototype.complete=function(){var c=this.partialObserver;if(c.complete)try{c.complete()}catch(c){pi(c)}},c}(),di=function(c){function l(l,u,d){var p,h,g=c.call(this)||this;return Ho(l)||!l?p={next:null!=l?l:void 0,error:null!=u?u:void 0,complete:null!=d?d:void 0}:g&&Zo.useDeprecatedNextContext?((h=Object.create(l)).unsubscribe=function(){return g.unsubscribe()},p={next:l.next&&li(l.next,h),error:l.error&&li(l.error,h),complete:l.complete&&li(l.complete,h)}):p=l,g.destination=new ui(p),g}return jo(l,c),l}(ii);function pi(c){var l;Zo.useDeprecatedSynchronousErrorHandling?(l=c,Zo.useDeprecatedSynchronousErrorHandling&&ai&&(ai.errorThrown=!0,ai.error=l)):ti(c)}function hi(c,l){var u=Zo.onStoppedNotification;u&&ei.setTimeout((function(){return u(c,l)}))}var gi={closed:!0,next:ni,error:function(c){throw c},complete:ni},fi="function"==typeof Symbol&&Symbol.observable||"@@observable";function mi(c){return c}var yi=function(){function c(c){c&&(this._subscribe=c)}return c.prototype.lift=function(l){var u=new c;return u.source=this,u.operator=l,u},c.prototype.subscribe=function(c,l,u){var d,p=this,h=(d=c)&&d instanceof ii||function(c){return c&&Ho(c.next)&&Ho(c.error)&&Ho(c.complete)}(d)&&Jo(d)?c:new di(c,l,u);return oi((function(){var c=p,l=c.operator,u=c.source;h.add(l?l.call(h,u):u?p._subscribe(h):p._trySubscribe(h))})),h},c.prototype._trySubscribe=function(c){try{return this._subscribe(c)}catch(l){c.error(l)}},c.prototype.forEach=function(c,l){var u=this;return new(l=Ii(l))((function(l,d){var p=new di({next:function(l){try{c(l)}catch(c){d(c),p.unsubscribe()}},error:d,complete:l});u.subscribe(p)}))},c.prototype._subscribe=function(c){var l;return null===(l=this.source)||void 0===l?void 0:l.subscribe(c)},c.prototype[fi]=function(){return this},c.prototype.pipe=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return function(c){return 0===c.length?mi:1===c.length?c[0]:function(l){return c.reduce((function(c,l){return l(c)}),l)}}(c)(this)},c.prototype.toPromise=function(c){var l=this;return new(c=Ii(c))((function(c,u){var d;l.subscribe((function(c){return d=c}),(function(c){return u(c)}),(function(){return c(d)}))}))},c.create=function(l){return new c(l)},c}();function Ii(c){var l;return null!==(l=null!=c?c:Zo.Promise)&&void 0!==l?l:Promise}function Ei(c){return Ho(c[fi])}function Ai(c){return Symbol.asyncIterator&&Ho(null==c?void 0:c[Symbol.asyncIterator])}function _i(c){return new TypeError("You provided "+(null!==c&&"object"==typeof c?"an invalid object":"'"+c+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Ci="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Si(c){return Ho(null==c?void 0:c[Ci])}function Ti(c){return function(c,l,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,p=u.apply(c,l||[]),h=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",(function(c){return function(l){return Promise.resolve(l).then(c,y)}})),d[Symbol.asyncIterator]=function(){return this},d;function g(c,l){p[c]&&(d[c]=function(l){return new Promise((function(u,d){h.push([c,l,u,d])>1||f(c,l)}))},l&&(d[c]=l(d[c])))}function f(c,l){try{(u=p[c](l)).value instanceof Go?Promise.resolve(u.value.v).then(m,y):I(h[0][2],u)}catch(c){I(h[0][3],c)}var u}function m(c){f("next",c)}function y(c){f("throw",c)}function I(c,l){c(l),h.shift(),h.length&&f(h[0][0],h[0][1])}}(this,arguments,(function(){var l,u,d;return Vo(this,(function(p){switch(p.label){case 0:l=c.getReader(),p.label=1;case 1:p.trys.push([1,,9,10]),p.label=2;case 2:return[4,Go(l.read())];case 3:return u=p.sent(),d=u.value,u.done?[4,Go(void 0)]:[3,5];case 4:return[2,p.sent()];case 5:return[4,Go(d)];case 6:return[4,p.sent()];case 7:return p.sent(),[3,2];case 8:return[3,10];case 9:return l.releaseLock(),[7];case 10:return[2]}}))}))}function Ni(c){return Ho(null==c?void 0:c.getReader)}function Pi(c){if(c instanceof yi)return c;if(null!=c){if(Ei(c))return p=c,new yi((function(c){var l=p[fi]();if(Ho(l.subscribe))return l.subscribe(c);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Wo(c))return d=c,new yi((function(c){for(var l=0;l<d.length&&!c.closed;l++)c.next(d[l]);c.complete()}));if(qo(c))return u=c,new yi((function(c){u.then((function(l){c.closed||(c.next(l),c.complete())}),(function(l){return c.error(l)})).then(null,ti)}));if(Ai(c))return Di(c);if(Si(c))return l=c,new yi((function(c){var u,d;try{for(var p=ko(l),h=p.next();!h.done;h=p.next()){var g=h.value;if(c.next(g),c.closed)return}}catch(c){u={error:c}}finally{try{h&&!h.done&&(d=p.return)&&d.call(p)}finally{if(u)throw u.error}}c.complete()}));if(Ni(c))return Di(Ti(c))}var l,u,d,p;throw _i(c)}function Di(c){return new yi((function(l){(function(c,l){var u,d,p,h;return function(c,l,u,d){return new(u||(u=Promise))((function(p,h){function g(c){try{m(d.next(c))}catch(c){h(c)}}function f(c){try{m(d.throw(c))}catch(c){h(c)}}function m(c){var l;c.done?p(c.value):(l=c.value,l instanceof u?l:new u((function(c){c(l)}))).then(g,f)}m((d=d.apply(c,l||[])).next())}))}(this,void 0,void 0,(function(){var g,f;return Vo(this,(function(m){switch(m.label){case 0:m.trys.push([0,5,6,11]),u=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=c[Symbol.asyncIterator];return u?u.call(c):(c=ko(c),l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l);function d(u){l[u]=c[u]&&function(l){return new Promise((function(d,p){!function(c,l,u,d){Promise.resolve(d).then((function(l){c({value:l,done:u})}),l)}(d,p,(l=c[u](l)).done,l.value)}))}}}(c),m.label=1;case 1:return[4,u.next()];case 2:if((d=m.sent()).done)return[3,4];if(g=d.value,l.next(g),l.closed)return[2];m.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=m.sent(),p={error:f},[3,11];case 6:return m.trys.push([6,,9,10]),d&&!d.done&&(h=u.return)?[4,h.call(u)]:[3,8];case 7:m.sent(),m.label=8;case 8:return[3,10];case 9:if(p)throw p.error;return[7];case 10:return[7];case 11:return l.complete(),[2]}}))}))})(c,l).catch((function(c){return l.error(c)}))}))}function bi(c,l,u,d,p){void 0===d&&(d=0),void 0===p&&(p=!1);var h=l.schedule((function(){u(),p?c.add(this.schedule(null,d)):this.unsubscribe()}),d);if(c.add(h),!p)return h}function Ri(c){return function(l){if(function(c){return Ho(null==c?void 0:c.lift)}(l))return l.lift((function(l){try{return c(l,this)}catch(c){this.error(c)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Oi(c,l,u,d,p){return new vi(c,l,u,d,p)}var vi=function(c){function l(l,u,d,p,h,g){var f=c.call(this,l)||this;return f.onFinalize=h,f.shouldUnsubscribe=g,f._next=u?function(c){try{u(c)}catch(c){l.error(c)}}:c.prototype._next,f._error=p?function(c){try{p(c)}catch(c){l.error(c)}finally{this.unsubscribe()}}:c.prototype._error,f._complete=d?function(){try{d()}catch(c){l.error(c)}finally{this.unsubscribe()}}:c.prototype._complete,f}return jo(l,c),l.prototype.unsubscribe=function(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var u=this.closed;c.prototype.unsubscribe.call(this),!u&&(null===(l=this.onFinalize)||void 0===l||l.call(this))}},l}(ii);function xi(c,l){return void 0===l&&(l=0),Ri((function(u,d){u.subscribe(Oi(d,(function(u){return bi(d,c,(function(){return d.next(u)}),l)}),(function(){return bi(d,c,(function(){return d.complete()}),l)}),(function(u){return bi(d,c,(function(){return d.error(u)}),l)})))}))}function wi(c,l){return void 0===l&&(l=0),Ri((function(u,d){d.add(c.schedule((function(){return u.subscribe(d)}),l))}))}function Mi(c,l){if(!c)throw new Error("Iterable cannot be null");return new yi((function(u){bi(u,l,(function(){var d=c[Symbol.asyncIterator]();bi(u,l,(function(){d.next().then((function(c){c.done?u.complete():u.next(c.value)}))}),0,!0)}))}))}function Li(c,l){return l?function(c,l){if(null!=c){if(Ei(c))return function(c,l){return Pi(c).pipe(wi(l),xi(l))}(c,l);if(Wo(c))return function(c,l){return new yi((function(u){var d=0;return l.schedule((function(){d===c.length?u.complete():(u.next(c[d++]),u.closed||this.schedule())}))}))}(c,l);if(qo(c))return function(c,l){return Pi(c).pipe(wi(l),xi(l))}(c,l);if(Ai(c))return Mi(c,l);if(Si(c))return function(c,l){return new yi((function(u){var d;return bi(u,l,(function(){d=c[Ci](),bi(u,l,(function(){var c,l,p;try{l=(c=d.next()).value,p=c.done}catch(c){return void u.error(c)}p?u.complete():u.next(l)}),0,!0)})),function(){return Ho(null==d?void 0:d.return)&&d.return()}}))}(c,l);if(Ni(c))return function(c,l){return Mi(Ti(c),l)}(c,l)}throw _i(c)}(c,l):Pi(c)}function Ui(c,l,u){var d=Ho(c)||l||u?{next:c,error:l,complete:u}:c;return d?Ri((function(c,l){var u;null===(u=d.subscribe)||void 0===u||u.call(d);var p=!0;c.subscribe(Oi(l,(function(c){var u;null===(u=d.next)||void 0===u||u.call(d,c),l.next(c)}),(function(){var c;p=!1,null===(c=d.complete)||void 0===c||c.call(d),l.complete()}),(function(c){var u;p=!1,null===(u=d.error)||void 0===u||u.call(d,c),l.error(c)}),(function(){var c,l;p&&(null===(c=d.unsubscribe)||void 0===c||c.call(d)),null===(l=d.finalize)||void 0===l||l.call(d)})))})):mi}class Wi{static portalRegex=/(?<=v2\/pages\/)(.*?)(?=\?pageClass=)/;#e=0;#t=0;#n;#r=[];constructor(){this.#n=!1,zr.subscribe(W.START_PERFORMANCE_LOG,(()=>{this.#n=!0,this.clearStorage(),this.#e=Date.now()}),W.START_PERFORMANCE_LOG),zr.subscribe(W.STOP_PERFORMANCE_LOG,(()=>{this.#n=!1,this.#t=Date.now(),this.#s()}),W.STOP_PERFORMANCE_LOG)}static getCategory(c){return c.includes("v2/cases")||c.includes("v2/assignments")?"Case":c.includes("v2/data_views")?"DataPage":c.includes("v2/pages")?"Page":""}static getPortalLabel(c,l){const u=kp(".pyPrimaryNavPages","pyPortal",l)||[];return u.find((l=>l.pyRuleName===c))?.pyLabel??c}static extractAssignmentLabel(c,l,u){c.label===W.TOP_ACTION_LABEL.OPENASSIGNMENT&&void 0===c.assignmentLabel&&(c.assignmentLabel=u?.data?.data?.caseInfo?.assignments.find((c=>c.ID===l))?.name??"")}#a(c,l,u,d){if(c<0)return;const p=this.#r[l].serviceCalls[c],h=Date.now();p.endTime=h,p.totalTimeTaken=h-p.startTime,p.httpMethod=d.config?.method,u?p.status="CANCELLED":"headers"in d&&(p.status=d.status,p.responseBytes=d.headers["content-length"])}#o(c,l,u,d,p){let h="";if(!u){const l=c.match(Wi.portalRegex)[0];h=l?.split(" ")[0]}const g=`${l||h}${W.HASH_DELIMITER}${p.startTime}`,f=Xp.getHashedString(g);p.urlUniqueID=f;const m={label:l||`${Wi.getPortalLabel(h,d)} Portal`,actionUniqueID:f,serviceCalls:[p]};return this.#r.push(m),{actionUniqueID:f,urlUniqueID:f,topLevelAction:u}}#i(c,l,u){const d=this.#r[c];Wi.extractAssignmentLabel(d,l,u);const p=u.data?.data?.caseInfo?.content;p&&(d.caseLabel=p.pyLabel,d.caseID=p.pyID)}buildActionsList(c){const{url:l,topLevelAction:u,userAction:d,actionLabel:p,context:h}=c;let g={};if(this.#n){const c={url:l.split(P()??"")[1],startTime:Date.now(),context:h,category:Wi.getCategory(l)};if(u&&d)g=this.#o(l,p,!0,h,c);else if(Wi.portalRegex.test(l))g=this.#o(l,p,!1,h,c);else if(this.#r.length>0){const d=this.#r[this.#r.length-1].serviceCalls,p=`${l}${W.HASH_DELIMITER}${c.startTime}${W.HASH_DELIMITER}${d.length}`,h=Xp.getHashedString(p);c.urlUniqueID=h,d.push(c),g.actionUniqueID=this.#r[this.#r.length-1].actionUniqueID,g.urlUniqueID=h,g.topLevelAction=u}}return g}reformActionList(c,l,u,d){const p=l.config,{actionUniqueID:h,urlUniqueID:g,topLevelAction:f,assignmentID:m}=p;if(this.#n){const p=this.#r.findIndex((c=>c.actionUniqueID===h));if(p>=0){f&&u&&"data"in l&&this.#i(p,m,l),c=c.split(P()??"")[1];const h=this.#r[p].serviceCalls.findIndex((l=>l.url===c&&l.urlUniqueID===g));this.#a(h,p,d,l)}}}#s(){if(0===this.#r.length)return;const c={version:"1.0.0",recordedTime:this.#t-this.#e,totalActions:this.#r.length,startTime:this.#e,userActions:this.#r};localStorage.setItem("performanceData",JSON.stringify(c))}clearStorage(){localStorage.removeItem("performanceData"),this.#r=[]}}const Fi=new Wi;class qi{constructor(c,l=!0){this.config=c,l?(this.ssKeyConfig=c,this.reloadConfig()):this.updateConfig(c,!1)}static init(c,l=!0){return new qi(c,l)}updateConfig(c,l=!0){l?window.sessionStorage.setItem(this.ssKeyConfig,JSON.stringify(this.config)):uc(c)}reloadConfig(c=!0){if(c){const c=window.sessionStorage.getItem(this.ssKeyConfig);this.config=c?JSON.parse(c):null}else this.config=dc()}async buildAuthorizeUrl(c){c=c||window.btoa(location.origin);let{sessionIndex:l}=this.config;const{password:u}=this.config,d=this.config.clientId?this.config.clientId:this.config.client_id,p=this.config.redirectUri?this.config.redirectUri:this.config.redirect_uri,h=this.config.authorizeUri?this.config.authorizeUri:this.config.endPoints.authorize,g=this.config.authService?this.config.authService:this.config.authentication_service||"pega",f=this.config.appAlias?this.config.appAlias:Vd.getApplicationAlias(),m=this.config.userIdentifier?this.config.userIdentifier:this.config.user_identifier;l=l||this.config.tokenInfo.session_index;const y=l?`&session_index=${l}`:`${m}`?`&UserIdentifier=${m}`:`${u}`?`&Password=${window.atob(u)}`:"",I=new Uint8Array(64);window.crypto?.getRandomValues(I),this.config.codeVerifier=this.base64UrlSafeEncode(I),this.updateConfig(this.config,!1);const E=f?`+app.alias.${f.replace(/^app\//,"")}`:"";return this.getCodeChallenge(this.config.codeVerifier)?.then((l=>`${h}?client_id=${d}&response_type=code&redirect_uri=${p}&scope=openid${E}&state=${c}&code_challenge=${l}&code_challenge_method=S256&authentication_service=${g}&enable_psyncId=true${y}`))?.catch((()=>null))}getTokenAndFinish=c=>{window.removeEventListener("message",this.authMessageHandler,!1),this.getToken(c,!1).then((()=>{})).catch((c=>{console.log(c)}))};authMessageHandler=c=>{if(c.origin!==this.getRedirectUriOrigin())return;if(!c.data||!c.data.type||"PegaAuth"!==c.data.type)return;const l=c.data.code.toString();this.getTokenAndFinish(l)};getRedirectUriOrigin=()=>{let{redirectUri:c}=this.config;c=c||this.config.redirect_uri;const l=c.indexOf("//"),u=-1!==l?c.indexOf("/",l+2):-1;return-1!==u?c.substring(0,u):c};getToken(c,l){this.reloadConfig(l);const u=this.config.clientId?this.config.clientId:this.config.client_id,d=this.config.clientSecret?this.config.clientSecret:this.config.client_secret,p=this.config.redirectUri?this.config.redirectUri:this.config.redirect_uri,h=this.config.tokenUri?this.config.tokenUri:this.config.endPoints.token,{codeVerifier:g}=this.config,f=window.location.search,m=new URLSearchParams(f),y=c||m.get("code"),I=new URLSearchParams;return I.append("client_id",u),d&&I.append("client_secret",d),I.append("grant_type","authorization_code"),I.append("code",y),I.append("redirect_uri",p),I.append("code_verifier",g),this.config?.secureCookie&&I.append("send_token_as_cookie","true"),rc(h,{method:"POST",headers:new Headers({"content-type":"application/x-www-form-urlencoded"}),body:I.toString()}).then((c=>c.data)).then((c=>{c.eA=Date.now()+1e3*c.expires_in;let u=!1;if(this.config.codeVerifier&&(delete this.config.codeVerifier,u=!0),c.session_index&&(this.config.session_index=c.session_index,u=!0),u){this.updateConfig(this.config,l),this.config?.secureCookie?cc({pzCTkn:c?.csrf}):(lc({tokenInfo:c}),cc({Authorization:`${c?.token_type} ${c?.access_token}`}));const{onTokenRetrieval:u}=this.config;u&&"function"==typeof u&&u(c),window.postMessage("oAuthSuccess")}return c})).catch((()=>null))}sha256Hash(c){return window.crypto?.subtle?.digest("SHA-256",(new TextEncoder).encode(c))}encode64(c){return window.btoa(new Uint8Array(c).reduce(((c,l)=>c+String.fromCharCode(l)),""))}base64UrlSafeEncode(c){return this.encode64(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}getCodeChallenge(c){return this.sha256Hash(c)?.then((c=>this.base64UrlSafeEncode(c))).catch((c=>{console.log(c)})).finally((()=>null))}}const ji=qi,Vi=(c,l)=>{(async c=>{const l={};if("OAuth2.0"===c?.authType){const u=new ji(c,!1);l.reauthUrl=await u.buildAuthorizeUrl(),l.redirectOrigin=u.getRedirectUriOrigin(),window.addEventListener("message",u.authMessageHandler,!1)}else l.reauthUrl=P()+(N()?`${N()}`:"/?reAuth=true");return l})(l).then((l=>{const u={openReauthMessageModal:!0,reAuthenticationURL:l.reauthUrl,url:c,redirectOrigin:l.redirectOrigin};zr.publish(G.PUB_SUB_EVENTS.EVENT_REAUTH,u)}))},ki=(c,l)=>"OAuth2.0"===l?.authType?c?.includes(l.endPoints.token):c?.includes("updateSession"),$i=c=>{const{config:l}=c,u=l.headers&&l.headers.context;return l.data&&(l.body=l.data),{url:l.url,config:l,context:u}},Bi=(c,l,u)=>{const{config:d}=c,{url:p,config:h,callback:g,isRefreshTokenPresent:f}=(c=>{let l="",u={},d={},p=!0;if("OAuth2.0"===c?.authType){l=c.endPoints.token;const h=new URLSearchParams;(!c.tokenInfo.refresh_token||c.tokenInfo.refresh_token&&c.tokenInfo.refresh_token.length<=0)&&(p=!1),h.append("client_id",c.client_id),h.append("grant_type","refresh_token"),c.clientSecret&&h.append("client_secret",c.clientSecret),c.secureCookie&&h.append("send_token_as_cookie","true"),c.tokenInfo?.refresh_token&&h.append("refresh_token",c.tokenInfo.refresh_token),u={method:"POST",body:h.toString(),headers:{"content-type":"application/x-www-form-urlencoded"}},d={success:l=>{const{data:u}=l,d={access_token:u?.access_token,refresh_token:u?.refresh_token};lc({tokenInfo:{...c.tokenInfo,...d}}),c.secureCookie?cc({pzCTkn:u?.csrf}):cc({Authorization:`${u?.token_type} ${u?.access_token}`});const{onTokenRetrieval:p}=c;p&&"function"==typeof p&&p(u)},failure:l=>{if(c.popupReauth)return Vi(l,c);zr.publish(G.PUB_SUB_EVENTS.EVENT_FULL_REAUTH,c)}}}else l=`${P()}/updateSession`,u={method:"GET",headers:{}},d={failure:Vi};return{url:l,config:u,callback:d,isRefreshTokenPresent:p}})(u),m=d.headers&&d.headers.context;d.data&&(d.body=d.data);const y=sc(d.url,d,m,l);return f?rc(p,h).then((c=>(l.setUpdateSessionStatus(!1),g?.success?.(c,d),zr.publish("updateSession",{updateStatus:"success"}),y.then((c=>Promise.resolve(c))).catch((c=>Promise.reject(c)))))).catch((c=>c&&c.config&&ki(c.config.url,u)?(g?.failure?.(d.url,u),y):Promise.reject(c))):(g?.failure?.(d.url,u),y)},Gi=class{constructor(c){this.xrayInfo={},this.xRayDebugger=c}startXRay(){if(!this.xRayDebugger.xray)return null;const c=`${Date.now()+Math.random()}`;return this.xrayInfo[c]={startTime:Date.now()/1e3},c}startXRayRestApi(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],restApisTime:{...this.xrayInfo[c]?this.xrayInfo[c].restApisTime:{},[l]:Date.now()}})}stopXRayRestApi(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],restApisTime:{...this.xrayInfo[c]?.restApisTime,[l]:(Date.now()-this.xrayInfo[c]?.restApisTime[l])/1e3}})}updateXRay(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],...l})}stopXRay(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],totalTime:Date.now()/1e3-this.xrayInfo[c].startTime},l().setXRayInfo(this.xrayInfo[c]),delete this.xrayInfo[c])}},Hi=new class{constructor(){this.xray=!1,this.onXRayCallback=null,this.xrayRuntime=new Gi(this),this.isPreview=!1,this.debugLevels="vcv=1;tracer=0;log=0"}onXRay(c){this.onXRayCallback=c}toggleXRay(c){this.xray=c,this.xrayRuntime.xrayInfo={},null!==this.onXRayCallback&&this.onXRayCallback(c)}enableXRay(){this.toggleXRay(!0)}disableXRay(){this.toggleXRay(!1)}toggle(){this.xray?this.toggleXRay(!1):this.toggleXRay(!0)}isXRayOn(){return this.xray}getXRayRuntime(){return this.xrayRuntime}setPreviewMode(){this.isPreview=!0}getPreviewMode(){return this.isPreview}enableTracer=()=>{this.debugLevels="vcv=1;tracer=1;log=0"};disableTracer=()=>{this.debugLevels="vcv=1;tracer=0;log=0"};getDebugLevels=()=>this.debugLevels},zi=new class{constructor(){this.externalHeaders={},this.defaultHeaders={},this.SPECIAL_CHARS={SLASH:"/"}}registerHeader(c,l){return!this.defaultHeaders[c]&&(this.externalHeaders[c]=l,!0)}unRegisterHeader(c){this.externalHeaders[c]&&delete this.externalHeaders[c]}getRegisteredHeaders(){return this.externalHeaders}setDefaultHeaders(c){this.defaultHeaders={...this.defaultHeaders,...c}}getDefaultHeaders(){return this.defaultHeaders}addDebugHeaders(c={}){return{[W.COREHEADER_APP_DEBUG_ID]:c.debugId,[W.COREHEADER_APP_DEBUG_LEVELS]:Hi.getDebugLevels()}}getCoreHeadersFromContext(c){if(["root","app"].includes(c)||!c)return;const l=Zp.getProperty(W.COREHEADERS,"",c);return l?{...l,debugInfo:Hi.getPreviewMode()&&{...l.debugInfo,[W.COREHEADER_APP_DEBUG_LEVELS]:Hi.getDebugLevels()}}:(c=c.substr(0,c.lastIndexOf(this.SPECIAL_CHARS.SLASH)),this.getCoreHeadersFromContext(c))}processCoreHeaders(c,l,u){const d=this.getCoreHeadersFromContext(u);if(d){const l=Object.keys(c);if(l.includes(W.SKIPCOREHEADERS))return void delete c[W.SKIPCOREHEADERS];const u=Object.assign({},...Object.values(d));Object.keys({...u}).forEach((d=>{l.includes(d)||(c[d]=u[d])}))}}injectCoreAdditionalHeaders(c,l,u,d){d?.includeRemoteSystemIdIfPresent&&q.injectRemoteCaseHeader(c,l,u),this.processCoreHeaders(c,l,u)}},Yi=zi,Ki="updateSession",Xi={},Ji=new class{constructor(){this.updateSessionInProgress=!1}getUpdateSessionStatus=()=>this.updateSessionInProgress;setUpdateSessionStatus=c=>{this.updateSessionInProgress=c}},Qi=new class{constructor(){this.timerID=void 0,this.expiryBuffer=45,this.timeoutWarned=!1}setTimerID=c=>{this.timerID=c};getTimerID=()=>this.timerID;resetInactiveTimeout=c=>{const l=window.PCore?.getEnvironmentInfo().getInactivityTimeout();if(this.timeoutWarned&&(zr.unsubscribe(G.PUB_SUB_EVENTS.RESET_TIMER,"resetCallback"),this.timeoutWarned=!1),l)return c&&clearTimeout(c),this.startInactivityTimeout(l>60?l:60)};startInactivityTimeout=c=>{const l=setTimeout((()=>{zr.publish(G.PUB_SUB_EVENTS.TIMEOUT_REMINDER,{timeRemaining:this.expiryBuffer}),clearTimeout(l),zr.subscribe(G.PUB_SUB_EVENTS.RESET_TIMER,this.resetInactiveTimeout,"resetCallback"),this.timeoutWarned=!0}),1e3*(c-this.expiryBuffer));return this.setTimerID(l),l}};let Zi={},ec={},tc={},nc="";const rc=(c,l,u="root",d={})=>{const{doNotMergeHttpMessagesForStatusCode:p=null,cancelContext:h=u,includeRemoteSystemIdIfPresent:g=!0,actionLabel:f="",assignmentID:m=""}=d;let{topLevelAction:y=!1}=d;const I=y;y||(y=l.topLevelAction||!1),nc=p,null===c&&window.console.error("Error: url passed to Service Broker fetch is null (or) undefined");const{body:E,signal:A,withoutDefaultHeaders:_=!1,...C}=l;let S={};kd.getPerformanceDashboardVisibility()&&(S={assignmentID:m,...Fi.buildActionsList({url:c,topLevelAction:y,userAction:I,actionLabel:f,context:u})});const{Authorization:T,pzCTkn:N,...P}=l.headers||{};_||Yi.injectCoreAdditionalHeaders(P,l.body,u,{includeRemoteSystemIdIfPresent:g}),h&&Xi[h]>=0?Xi[h]+=1:h&&void 0===Xi[h]&&(Xi[h]=1);let D=_?{...P}:{...Yi.getDefaultHeaders(),...Yi.getRegisteredHeaders(),...P,context:u};if(c&&ki(c,ec)&&Ji.getUpdateSessionStatus()||!Ji.getUpdateSessionStatus()){ki(c,ec)&&"OAuth2.0"===ec?.authType&&(D={...P});const{restApi:l}=Vd.doesRestApiExist("Logout")&&Vd.getRestEndPoint("Logout")||{restApi:null};return(!l||c&&!c.endsWith(l))&&Qi.setTimerID(Qi.resetInactiveTimeout(Qi.getTimerID())),function(c){return new Promise((function(l,u){var d,p=!1;c.subscribe({next:function(c){d=c,p=!0},error:u,complete:function(){p?l(d):u(new Uo)}})}))}(Li(Mo({context:u,...C,url:c,data:E,...A&&void 0===A.aborted&&{cancelToken:A},...A&&void 0!==A.aborted&&{signal:A},headers:D,withCredentials:(b=ec,!("OAuth2.0"!==b?.authType||!b.secureCookie)||!("custom"!==b?.authType||!b.customCookies)||void 0),...S})).pipe(Ui((()=>{const c=Yi.getCoreHeadersFromContext(D.context);c&&(c=>{zr.publish(W.PUB_SUB_EVENTS.FETCH_SUCCESS,c)})({...c})}))))}var b;return sc(c,l,u,Ji)},sc=(c,l,u,d)=>new Promise(((p,h)=>{zr.subscribe(Ki,(g=>{d.setUpdateSessionStatus(!g.updateStatus),"success"===g.updateStatus?rc(c,l,u).then((c=>p(c))).catch((c=>h(c))):h(g.updateStatus.error)}),Ki)})),ac=c=>{Xi[c]>0&&(Xi[c]-=1,0===Xi[c]&&delete Xi[c])};Mo.interceptors.request.use((c=>(Zi.request&&(c=Zi.request(c)),c)),(c=>Promise.reject(c))),Mo.interceptors.response.use((c=>{const l=c.config.url;if(kd.getPerformanceDashboardVisibility()&&Fi.reformActionList(l,c,!0,!1),202===c.status&&c.config.headers.context&&c.data?.caseInfo?.errorMessage){const l=[{type:"error",message:c.data.caseInfo.errorMessage}];let u=c.config.headers.context;return u&&u.includes("/workarea")&&(u=u.substring(0,u.lastIndexOf("/workarea"))),er({messages:l,category:"HTTP",context:u}),Promise.reject(c)}return c.config.headers&&c.config.headers.context&&(c.config.skipClearErrorMessages||(Qn({type:"error",category:"HTTP",context:c.config.headers.context}).length>0&&Zn({type:"error",category:"HTTP",context:c.config.headers.context}),Qn({type:"error",category:c.config.headers.context===W.APP.APP?"PAGE":"",context:c.config.headers.context}).length>0&&Zn({type:"error",category:"PAGE",context:c.config.headers.context})),ac(c.config.headers.context)),Zi.response&&(c=Zi.response(c)),c}),(c=>{if(c.config&&c.config.headers&&c.config.headers.context&&ac(c.config.headers.context),kd.getPerformanceDashboardVisibility()){const l=c.config.url,u=Mo.isCancel(c);Fi.reformActionList(l,u?c:c.response,!1,u)}return!c.response||!c.response.status||401!==c.response.status||c.config&&ki(c.config.url,ec)||zr.subscribe(Ki,(c=>{Ji.setUpdateSessionStatus(!c.updateStatus)}),Ki),((c,l,u,d)=>{if(c.config&&ki(c.config.url,u))return Promise.reject(c);if(c.response&&c.response.status&&401===c.response.status&&!l.getUpdateSessionStatus()){if(zr.unsubscribeAllWithEventType(Ki),l.setUpdateSessionStatus(!0),"custom"===u?.authType){zr.publish(G.PUB_SUB_EVENTS.EVENT_CUSTOM_REAUTH);const{url:u,config:d,context:p}=$i(c);return sc(u,d,p,l)}return Bi(c,l,u)}if(c.response&&c.response.status&&401===c.response.status&&l.getUpdateSessionStatus()){const{url:l,config:u,context:d}=$i(c);return rc(l,u,d)}if(c.response&&c.response.status&&422!==c.response.status&&424!==c.response.status&&c.config.headers.context&&c.response.data&&!d){const l=c.response.data.errorDetails&&c.response.data.errorDetails.map((l=>((c,l)=>l[G.TRACE_ID]?{type:"error",message:c.localizedValue||c.message,correlationID:l[G.TRACE_ID]}:{type:"error",message:c.localizedValue||c.message})(l,c.response.headers))),u=c.config.headers.context;return er({messages:l,category:"HTTP",context:u}),Promise.reject(c)}return Promise.reject(c)})(c,Ji,ec,c.response&&c.response.status&&c.response.status===Number(nc)?nc:null)}));const oc=()=>Mo.CancelToken.source(),ic=c=>Mo.isCancel(c),cc=c=>{Yi.setDefaultHeaders(c)},lc=c=>{ec={...ec,...c}},uc=c=>{tc={...tc,...c}},dc=()=>({...tc}),pc=()=>({...ec}),hc=class{static isCaseActive(c,l){if(!c||!l)return!1;const u=xu(l);if(u){const d=$u(l),{items:p={}}=u;return!(!d||!p[d]||p[d].key!==c)}return!1}static getCaseEditMetadata=(c,l)=>{const u={caseID:c,viewID:"pyEdit"},{restApi:d,reqType:p}=eg("loadView",u);return rc(d,{method:p},l)};static getCaseEditLock=(c,l)=>{const u={caseID:c,actionID:"pyUpdateCaseDetails"},{restApi:d,reqType:p}=eg(Ze,u);return rc(`${d}?viewType=page`,{method:p},l)};static updateCaseEditFieldsData=(c,l,u,d)=>{const p={caseID:c,actionID:"pyUpdateCaseDetails"},{restApi:h}=eg(Ze,p),g=l[c];return rc(`${h}?viewType=form`,{method:"PATCH",body:{content:{...g}},headers:{"if-match":u}},d)};static getCaseMessages=c=>Fp(c)?.caseMessages;static getPropertiesToReplace=c=>(Yc(c)||[]).filter((c=>!c.allowMultiple)).map((c=>c.fullPath));static getUniqueGadgetId=()=>Xp.generateUniqueID().substring(0,5);static getRemoteCaseMapping=()=>q.getRemoteCaseMapping();static isTraditionalRemoteCase=c=>q.isTraditionalRemoteCase(c);static getRemoteCaseKey=(c,l)=>{let u=l;try{c&&(u=c.slice(c.indexOf(" ")+1,c.indexOf("!")))}catch{}return u}},{RESOURCE_TYPES:gc}=G,fc={PAGE:"page",FORM:"form"},mc={[gc.CASE]:[Ke,ze,Ye],[gc.PAGE]:[Ge,He],[gc.DATA]:[We]},yc=(c,l,u={})=>{if(!c)return{};const d={etag:c.etag},{RemoteSystemID:p}=u;return c[G.REMOTE_SYSTEM_ID]||c[G.REMOTE_SYSTEM_ID.toLowerCase()]||p?d.RemoteSystemID=c[G.REMOTE_SYSTEM_ID]||c[G.REMOTE_SYSTEM_ID.toLowerCase()]||p:l&&q.isRemoteCase(l)&&(d.RemoteSystemID=q.getRemoteHeader(l)),d},Ic=(c,l={})=>{const{onlyChangedData:u=!1,nonEmptyAndChangedData:d=!1,skipUUID:p=!0,isTransientContext:h=!1,includeDisabledFields:g=!1}=l;let f={};f=Kc(c,{isTransientContext:h,includeDisabledFields:g}),u&&(delete f?.caseInfo?.content,h&&(f={}));const m=ll(c,!1);!h&&d&&((c,l)=>{Object.entries(c?.caseInfo?.content).forEach((([u,d])=>{const p=Fp(l),h=M()(p,G.CASE_INFO.CASE_INFO_CLASSID),g=up(u,h);("True-False"===g?.type&&!d||""===d)&&delete c.caseInfo.content[u]}))})(f,c);const y=j()(m,f);let I={},E=!1;({content:I,attachmentsExist:E}=((c,l)=>{let u={},d=!1;return(c||l?.caseInfo)&&(u=c?{...l}:{...l?.caseInfo},l?.caseInfo?.attachments&&(d=!0)),{content:u,attachmentsExist:d}})(h,y));const A=[...Cr(c)];return p&&A.forEach((c=>{delete c.content?.EmbedListUUID__})),I.pageInstructions=A,(mr[c]||[]).forEach((c=>{if(I?.content){const l=c?.replace(W.CASE_INFO.CASE_INFO_CONTENT,"");Xp.deleteIn(I.content,(c=>{if(!c)return"";const l=c.split(".");let u,d="";for(u of l)if(u){if(u.includes("[")&&u.includes("]"))return d+=`['${u.substring(0,u.lastIndexOf("["))}']`,d;d+=`['${u}']`}return d})(l))}})),!h&&y?.dataInfo?(I={...y.dataInfo,pageInstructions:I.pageInstructions},{content:I}):{content:I,attachmentsExist:E}},Ec=(c,l)=>{let u,d,p={};const h=Xp.getIn(c,W.UI_RESOURCES),g=Xp.getIn(c,"confirmationNote");h?(u=Xp.getIn(c,W.UI_RESOURCES_CONTEXT_DATA),d=Xp.getIn(c,W.ROOT),p=Xp.getIn(c,W.ACTION_BUTTONS)):g&&(d={});const{data:f={},Errors:m,semanticURL:y,key:I,flowName:E}=c,A=Xp.getIn(c,"nextAssignmentInfo",null),_=Xp.getIn(c,"nextAssignmentInfo.context",""),C=Xp.getIn(c,"confirmationLinks",null),{isInCreateStage:S,openCaseViewAfterCreate:T,debugInfo:N}=l;return{data:{...f,key:I,flowName:E,coreHeaders:N&&{debugInfo:{[W.COREHEADER_APP_DEBUG_ID]:N.debugId}},caseInfo:{...f.caseInfo,actionButtons:p,headers:l.headers},[W.CONTEXT_DATA]:S?{...f[W.CONTEXT_DATA],...u,openCaseViewAfterCreate:T,errors:m}:{...f[W.CONTEXT_DATA],...u,errors:m}},semanticURL:y,nextAssignmentInfo:A,assignmentContext:_,confirmationLinks:C,key:I,root:d,...l}},Ac=async(c,l,u,d=!1,p=!1)=>{const h=Xp.getIn(c,W.LOCALE_REFERENCES);await Bd.loadLocaleResources(h);const g=Xp.getIn(c,W.COMPONENTS);if(g)try{await Gr(g)}catch(c){console.error(c)}const f={actionConfig:l,...u};d?ig({...c,options:f,directUrlUpdation:!0}):Fr(c,f,p)},_c=(c="")=>{const l=c.indexOf(" "),u=c.indexOf("!");return c.substring(l+1,u)},Cc=c=>{if(c){const[,l]=c.split("!");return{key:_c(c),flowName:l}}return{}},Sc=c=>{const{payload:l}=c,{err:u,context:d,actionMgrID:p}=l,h=u&&u.response?u.response.data:"",g=Qc(d);return p&&gn.rejectActionByID(p),Lh(Uh,"Error action triggered",h,d,g)},Tc=(c,l)=>ed(c)&&nd(c)?Lh(vh,l):Lh(gh,l),Nc=(c,l,u=W.APP.APP,d={})=>{let p=null;const{buildNew:h=!0}=d;return ed(c)?p=nd(c)?$u(c):X(l,u):td(c)&&(nd(c)&&!h?p=zu(c):nd(c)&&!h||(p=X(l,u))),p},Pc=c=>c&&c.type===De,Dc=c=>{let l=!1;const u=Ju(c);for(let d=0;d<u.length;d+=1){const c=u[d];if(c&&hl(c)){l=!0;break}}return l},bc=(c,l={})=>{let u=!1,d=!1,p={},h=!0,g=!1,f=!1;const{showConfirmDialogForMaxDocumentLimitReached:m=!1,dirtyMessage:y,skipChildDirtyState:I=!1}=l;if(ed(c)){const l=$u(c);if(!l)return{continueExecution:h,removeActionPayload:p};const d=Hu(l);hl(d)&&(u=!0),I||u||(u=Dc(l))}else if(td(c)&&ad(c)){let l=cd(c);l||(l=$u(c),d=!0),p.containerItemID=l,p.context=Hu(l)}if(u){const c=y||il;g=window.confirm(Bd.getLocaleValue(c,"Messages"))}if(!g&&u&&(p={},h=!1),d){const c=Bd.getLocaleValue(cl,"Messages");m?f=window.confirm(c):(window.alert(c),h=!1)}return!f&&d&&(p={},h=!1),{continueExecution:h,removeActionPayload:p}},Rc=(c,l)=>{let u=!1;const d=kd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT),{insKey:p,isParallelCall:h,skipFlowNameCheck:g}=l;if(!p)return{};const[,f]=p.split("!")||"",m=g?p:_c(p),y=ju(c,m);let I={},E=!1;if(y&&!d&&(u=!0,I=wu(c,y),!g)){let c=I?.flowName;const l=Jr(y),d=Ku(y);if(d.length){const u=Ct(l,d[0]);c=wu(u,d[0])?.flowName}else u=c===f;(c!==f||h)&&(E=!0)}return{activate:u,activateContainerActionPayload:{target:c,isParallelAssignment:E,containerItemID:y,semanticURL:I.semanticURL,insKey:p}}},Oc=(c,l,u)=>c===gc.PAGE?((c,l={})=>{let u=!1;const{semanticURL:d}=l,p=ju(c,d);return p&&(u=!0),{activate:u,activateContainerActionPayload:{target:c,containerItemID:p,semanticURL:d}}})(l,u):c===gc.ASSIGNMENT?Rc(l,u):c===gc.CASE?Rc(l,{...u,skipFlowNameCheck:!0}):{},vc=(c=[])=>{nd(`${W.APP.APP}/${W.PREVIEW}`)&&c.push(Lh(hh,od({context:G.APP.APP,name:W.PREVIEW})))},xc=c=>{let l;for(const u of Object.keys(mc))if(mc[u].includes(c)){l=u;break}return l},wc=(c,l)=>{const{data:u={},context:d,caseViewMode:p}=c,h={data:{...u},caseViewMode:p,context:K(d)};Xp.deleteIn(h.data,"shared"),Xp.setIn(h.data,["context_data","caseViewMode"],p),l.push({type:lt,payload:{context:h.context}}),l.push(Lh(oh,h))},Mc=c=>{if(Array.isArray(c)&&c.length>0){const l=(c=>{const l=c[0];for(const u of c)if("other"===u?.payload?.nextAssignmentInfo?.context||"remote"===u?.payload?.nextAssignmentInfo?.context)return u;return l})(c),u=Xp.getIn(l,["payload","assignmentContext"]);if("other"===u||"remote"===u){const d=Xp.getIn(l,["payload","nextAssignmentInfo","ID"]);if(l?.payload?.isProcessAction){const u={acName:Xp.getIn(l,["payload","target"]),caseID:l.payload.data.caseInfo.ID,containerItemID:Xp.getIn(l,["payload","context"]),context:Xp.getIn(l,["payload","context"])},d={type:Ie,payload:{...u}};c.push(d),c=c.filter((c=>delete c?.payload?.data?.caseMessages)),Up(c),c=c.filter((c=>c.type!==Ie))}const p=((c,l,u)=>({assignmentID:c,vcName:W.PRIMARY,targetContainerName:Xp.getIn(l,["payload","target"]),context:Xp.getIn(l,["payload","context"]),..."other"===u&&{isChild:!0},isProcessAction:l?.payload?.isProcessAction,..."remote"===u&&{isRemote:!0},..."remote"===u&&{remoteClassName:l.payload.nextAssignmentInfo.className}}))(d,l,u);ed(p.targetContainerName)||l?.payload?.containerName!==W.WORKAREA||(p.isMultiDoc=!0,c=[]);const h={type:Ee,payload:{...p}};c.push(h),Up(c)}else Up(c)}},Lc=(c,l)=>j()(c,l,(function(c,l){if(Array.isArray(c))return c.concat(l)})),Uc=c=>{let l={},u=Dd(c);for(;u;){const c=Ic(u);l=Lc(c.content,l),u=Dd(u)}return l};class Jc{static getChanges(c){return{...ll(c)}}static getSubmitData(c,l){const{isTransientContext:u=!1,includeDisabledFields:d=!1}=l||{},{content:p}=Ic(c,{isTransientContext:u,includeDisabledFields:d});return p}static isStateModified(c){return hl(c)||Or(c)||!(!c||!dl(c))}static isFormValid(c,l){return Xc(c,l)}static clearChangedProperties(c){return Tr(c),_r(c),gl(c)}static getEditableFields(c){return Zc(c)}static setCustomValidator(c,l){Lr.register(c,l)}static isPropertyEditable(c,l){return Jc.getEditableFields(c).some((c=>c.name===l))}}const Fc=Jc,jc=new class{constructor(){this.states={},this.unConnectedStates={}}getStateMachine(c,l,u){return this.states?.[c]?.[`${l}${u}`]||this.unConnectedStates?.[c]?.[`${l}${u}`]}isStateMachineExist(c,l,u){return!!this.states?.[c]?.[`${l}${u}`]||!!this.unConnectedStates?.[c]?.[`${l}${u}`]}getUnConnectedStateMachines(c){return this.unConnectedStates?.[c]}getAllStateMachines(c,l,u){return{states:this.states?.[c]?.[`${l}${u}`],unConnectedStates:this.unConnectedStates?.[c]?.[`${l}${u}`]}}getAllStateMachinesByContext(c){return{states:this.states?.[c],unConnectedStates:this.unConnectedStates?.[c]}}setStateMachine(c,l,u,d){const p=`${u}${l}`,{stateMachine:h}=this.getStateMachineObjByPath(p,c,!0),g=(l,u,d=!1)=>{const p=d?this.states:this.unConnectedStates;p[c]||(p[c]={}),p[c][l]||(p[c][l]={}),p[c][l]=u};if(h&&h.targetPageReference!==d.targetPageReference)return h.addChild(d),void g(p,d);const f=Object.entries(this.states[c]||{}).filter((([c])=>{if(c.includes(p)){const l=c.substring(0,p.length).length;return c.substring(l).startsWith("[")||c.substring(l).startsWith(".")}return!1})).reduce(((c,[l,u])=>({...c,[l]:u})),{});Object.keys(f)?.length?(Object.entries(f).forEach((([l,u])=>{delete this.states[c][l],d.addChild(u),g(l,u)})),this.states[c][p]=d):g(p,d,!0)}buildPageInstructionsByContext(c,l){const u=this.getStateMachinesByContext(c)||{},d=[];return Object.keys(u).sort().forEach((p=>{const h=Rn.getContextReferences(c)?.get(p),g=u[p];if(h){const c=g.buildSubmitPageInstructions(l);d.push(...c)}})),d}buildClientChangeList(c){const l=this.getStateMachinesByContext(c)||{};let u={};const d={};return Object.keys(l).forEach((c=>{const d=l[c].getChangeList();u={...u,...d}})),Xp.flatten(u,"",d),d}getStateMachinesByContext(c){return c?this.states?.[c]:void 0}clearStateMachines(c){this.states[c]={},this.unConnectedStates[c]={}}setStateMachineEmpty(c,l){const u=this.getStateMachine(c,l,"");u.root=null,u.current=null;const d=this.getUnConnectedStateMachines(c)||{};Object.keys(d).forEach((c=>{c.includes(l)&&delete d[c]}))}removeStateMachine(c,l){delete this.states[c]?.[l]}getStateMachineObjByPath(c,l,u){const d=/\[\d+\]$/gm;let p=null;for(;c&&!this.isStateMachineExist(l,"",c);)p=null,u&&c.endsWith("]")?(p=c.match(d),p=p?.[p.length-1]?.substring(1,p[p.length-1].length-1),[c]=c.split(d)):c=c.substring(0,c.lastIndexOf("."));return c?{stateMachineTarget:c,stateMachine:this.getStateMachine(l,"",c),index:p}:{}}executeStateMachine(c,l,u,d=!0,p={}){const{stateMachineTarget:h,index:g}=this.getStateMachineObjByPath(l,c,d);if(!h)return!1;let[,f]=l.split(h);if(!f)return!1;null!==g&&([,f]=f.split(/^\[\d+\]/gm));const m={[kc(f)]:u},y=this.getStateMachine(c,"",h);return null!==g?y.update(m,Number(g)+1,p.skipStateUpdate??!0,p):y.updatePage(Xp.unflatten(m)),!0}registerForServerChanges(){vp.registerForListChanges(((c,l,u)=>{setTimeout((()=>{!l.includes(".classID")&&Fc.isPropertyEditable(c,l)&&this.executeStateMachine(c,l,u)}),0)}))}unRegisterForServerChanges(){vp.unRegisterForListChanges()}},Vc={},kc=c=>c.startsWith(".")?c.substring(1):c,$c=c=>{delete Vc[c]},Bc=(c,l={})=>{const{includeDisabledFields:u=!1}=l,d=Zp.resolveContextTreeNodeProps(c),p=!0!==d.readOnly&&!1!==d.visibility&&(u||!0!==d.disabled),h="string"==typeof c?.value&&c?.value.includes("@FILTERED_LIST"),g=(c=>c.selectionList||c.selectionKey||"Editable"===c.renderMode&&c.referenceList)(c);return(c?.value||g)&&!h&&p},Gc=(c,l,u,d,p)=>{let h=(kp(`.attachmentsList.${l?.replace(".","")}`,"context_data",u)||[]).filter((c=>`${d.pageReference}.${c.label}`===p));return h=Xp.buildAttachmentsFormData(h),h.length>0&&(c=[...c,...h]),c},Wc=(c,l,u,d,p)=>(jc.executeStateMachine(c,d,Zp.getLitePropertyValue(u,l))||p.push(d),p),Hc=c=>{const l=c.pageReference?.replace(G.CASE_INFO.CASE_INFO_CONTENT,"")?.replace(G.DATA_INFO.DATA_INFO_CONTENT,"");return"Attachment"===c.componentName&&""!==l},qc=(c,l,u)=>{const d=l.isInsideList,{ignoreFieldsInsideList:p=!0}=u;return(!d||d&&!p)&&!Array.isArray(Zp.getLitePropertyValue(l,c))&&"Address"!==l.componentName},zc=(c,l={})=>{let u=[],d=[];const p=[],h=Rn.getContextReferences(c);if(!h)return{formInputs:u,attachments:d,formPageFields:p};if(({attachmentList:d,editableFormFieldsReferenceList:u}=((c,l,u)=>{const{includeDisabledFields:d=!1}=u;let p=[],h=[];for(const[g,f]of c){const c=Zp.resolveContextTreeNodeProps(f.props),m=c.propertyName;if(Bc(f.props,{includeDisabledFields:d})){const d=Hc(c);"Attachment"!==c.componentName||d?!d&&qc(g,c,u)&&(p=Wc(l,m,c,g,p)):h=Gc(h,m,l,c,g)}}return{attachmentList:h,editableFormFieldsReferenceList:p}})(h,c,l)),Vc[c])for(const g in Vc[c].fieldOrder)Object.hasOwn(Vc[c].fieldOrder,g)&&p.push(g);return{formInputs:u,attachments:d,formPageFields:p}},Yc=c=>{let l=[];const u=Rn.getContextReferences(c);if(u)for(const[d,p]of u){const c=p?.props;if(Bc(c)&&"Attachment"===c?.componentName){const u="true"===c?.allowMultiple;l=[...l,{type:"File",allowMultiple:u,fullPath:d}]}}return l},Kc=(c,l={})=>{const u={},d=Fp(c),{ignoreFieldsInsideList:p=!0,isTransientContext:h=!1,includeDisabledFields:g=!1}=l;if(h||d?.caseInfo?.content){const{formInputs:l,attachments:f,formPageFields:m}=zc(c,{ignoreFieldsInsideList:p,includeDisabledFields:g});f&&f.length>0&&Xp.buildObject("caseInfo.attachments",u,f),((c,l,u)=>{c.forEach((c=>{let d=Xp.getIn(l,c);"object"==typeof d&&(d=Xp.deepClone(d),delete d?.classID),Xp.buildObject(c,u,d)}))})(m,d,u),l&&l.length>0?l.forEach((c=>{Xp.buildObject(c,u,Xp.getIn(d,c))})):h||Xp.buildObject(G.CASE_INFO.CASE_INFO_CONTENT,u,{})}if(!h&&d?.dataInfo?.content){const{formInputs:l}=zc(c,{ignoreFieldsInsideList:p});l.forEach((c=>{Xp.buildObject(c,u,Xp.getIn(d,c))}))}return u},Xc=(c,l)=>{const u=Rn.getContextReferences(c);let d=!0;if(!u)return d;for(const[p,h]of u){const c=Zp.resolveContextTreeNodeProps(h.props);if(Bc(h.props)&&(!l||p.includes(l))){const l=Lr.validate(c.componentName?.toLowerCase(),c.propertyName,Zp.getLitePropertyValue(c,c.propertyName),c);d&&(d=!l.message)}}return d},Qc=(c,l=!1)=>{const u=Rn.getContextReferences(c),d=[];if(u)for(const[p,h]of u)if(!1!==Zp.resolveContextTreeNodeProps(h.props).visibility){const c=8,u=l?p:p.substring(p.indexOf("content")+c);d.push(u)}return d},Zc=c=>{const l=[],u=Rn.getContextReferences(c);if(u)for(const[d,p]of u){const c=Zp.resolveContextTreeNodeProps(p.props);Bc(p.props)&&"Attachment"!==c.componentName&&"multirecordlist"!==c.type&&l.push({name:d,label:c.label,type:c.componentName?.toLowerCase()})}return l},el=class{static getPropertyName(c){return rn.getPropertyName(c)}static isProperty(c){return rn.isProperty(c)}static getLeafPropertyName(c){return rn.getLeafPropertyName(c)}static isPropertyInternal(c){return c.startsWith("px")||c.startsWith("pz")}},tl=class{static isPageInstruction(c){return c&&c.includes("[")&&c.includes("]")}};class ml{constructor(){this.refreshMap={},this.propChangeRefreshMap={}}static initializeRefreshCache(c,l,u,d,p){void 0===c[l]&&(c[l]={}),c[l][u]=[{uniqueHash:d,callback:p}]}registerForRefresh(c,l,u,d,p){const h=d.split("/").join(W.HASH_DELIMITER),g=Xp.getHashedString(h);"PROP_CHANGE"===c?this.propChangeRefreshMap?.[p]?.[u]?this.propChangeRefreshMap[p][u].some((c=>c.uniqueHash===g))||this.propChangeRefreshMap[p][u].push({uniqueHash:g,callback:l}):ml.initializeRefreshCache(this.propChangeRefreshMap,p,u,g,l):this.refreshMap?.[p]?.[`${c}-${u}`]?this.refreshMap[p][`${c}-${u}`].some((c=>c.uniqueHash===g))||this.refreshMap[p][`${c}-${u}`].push({uniqueHash:g,callback:l}):ml.initializeRefreshCache(this.refreshMap,p,`${c}-${u}`,g,l)}triggerRefreshForType(c,l,u){"PROP_CHANGE"===c?this.propChangeRefreshMap?.[u]?.[l]&&this.propChangeRefreshMap[u][l].forEach((c=>c.callback())):this.refreshMap?.[u]?.[`${c}-${l}`]&&this.refreshMap[u][`${c}-${l}`].forEach((c=>c.callback()))}deRegisterForRefresh(c){delete this.propChangeRefreshMap[c],delete this.refreshMap[c]}}const nl=new ml,{APP:rl}=W;let sl={},al={},ol={};const il="You will lose unsaved changes. Do you want to continue?",cl="You have reached maximum limit of pending changes. Please commit/cancel one or more changes to continue.",ll=(c=rl.APP,l,u)=>{let d=[],p=[];l||(d=Qc(c,!0)),u||(p=(c=>{const l=Rn.getContextReferences(c),u=[];if(l)for(const[d,p]of l)!0===Zp.resolveContextTreeNodeProps(p.props).readOnly&&u.push(d);return u})(c));const h={};((c,l)=>{const u=al[l]||{};Object.keys(u).forEach((l=>{Object.hasOwn(u,l)&&Xp.buildObject(l,c,u[l].value)}))})(h,c);const g=sl[c]||{};return Object.keys(g).forEach((c=>{const u=!l&&d.includes(c)||l;Object.prototype.hasOwnProperty.call(g,c)&&u&&!p.includes(c)&&Xp.buildObject(c,h,g[c].value)})),h},ul=c=>{const{context:l}=c,u=c.reference.startsWith(".")?c.reference.substr(1):c.reference;delete sl[l]?.[u],delete al[l]?.[u]},dl=c=>ol[c],pl=(c,l)=>{const{context:u,initialValue:d="",isStrictTracking:p}=l,h=l.reference.startsWith(".")?l.reference.substr(1):l.reference;c[h]?c[h].previousValue=kp(l.reference,null,u):(c[h]={initialValue:d||kp(l.reference,null,u)},c[h].previousValue=c[h].initialValue),c[h].value=l.value,p&&c[h].value===c[h].initialValue&&ul(l)},hl=c=>{const l=Sr(c)||{};return c&&sl[c]&&Object.keys(sl[c]).some((l=>sl[c][l].initialValue!==sl[c][l].value))||Object.keys(l).length>0},gl=c=>{c&&sl[c]?(sl[c]={},al[c]={}):"all"===c&&(sl={},al={},ol={}),ol[c]&&(ol[c]=!1)},fl=()=>c=>l=>{const{type:u,payload:d={}}=l||{};if(u===ae&&(Jt(d),(c=>{const{context:l,pageReference:u,value:d,reference:p}=c;vp.triggerCascade(l,p,d);const h=en.getDependencies(l,p),g=vp.getResetDependencies(l,p),f={context:l,datapages:{}};[...h,...g].forEach((c=>{const u=Xp.getPropertyNameFromDependency(c);if("multiRecord"===c.mode){const c=u.split("."),d=`.${c.pop()}`,p=c.join(".");jc.getStateMachine(l,p,d).deleteAll()}else tl.isPageInstruction(u)&&jc.executeStateMachine(l,u,""),Up({type:re,payload:{reference:u,value:"",context:l,isArrayDeepMerge:!0,isImplicit:!0}})})),h.forEach((d=>{let p=u;d.startsWith(u)||(p="");const h=d.replace(`${p}`,"").split(".").filter((c=>!!c));h.pop();const g=h.join("."),m=kp(`.${g}`,p,l)?.classID||c.classID,y=up(d.split(".").pop(),m),{datasource:I}=y,E={};let A=[];I.parameters.forEach((c=>{c?.value?(E[c.name]=el.isProperty(c.value)?kp(`.${Xp.getFullPropertyReference([g,Xp.getPropertyName(c.value)])}`,p,l):c.value,void 0===E[c.name]||null===E[c.name]||""===E[c.name]?(E[c.name]="",A.push(W.NULL_STRING)):A.push(E[c.name])):(E[c.name]="",A.push(W.NULL_STRING))})),A=I.name.concat(W.UNDERSCORE_STRING,Xp.getHashedString(A.join(W.HASH_DELIMITER)));const{name:_}=I,C=Ip(_);f.datapages[A]={mode:I.mode,propertyName:d,name:I.name,dataViewParameters:E,refreshStrategy:C?.refreshStrategy}})),h.length&&Up({type:at,payload:f})})(d),(((c,l)=>{if(!c||!l)return!1;const u=sl[c]&&sl[c][l];return!!u&&u.previousValue!==u.value})(d.context,d.reference)||Or(d.context))&&Wn(d),nl.triggerRefreshForType("PROP_CHANGE",d.reference,d.context)),u===ct){const{context:c,referenceList:l}=d;Wn({context:c,pageReference:l})}if(u===re||u===se){const{reference:c,isImplicit:u,context:p,skipDirtyValidation:h=!1}=d;Rn.updateFieldNodeValue(p,c,d.value),tl.isPageInstruction(c)||h?h||(ol[`${p}`]=!0):(c=>{const{payload:l}=c,{context:u}=l,d=l.reference.startsWith(".")?l.reference.substr(1):l.reference;Rn.isFieldExists(u,d)||(al[u]=al[u]||{},pl(al[u],l)),sl[u]=sl[u]||{},pl(sl[u],l)})(l),(d.removePropertyFromChangedList||u)&&ul(d)}if(u===we||u===Me){const{transientItemID:c,data:l}=d;Xp.iterateLeafNodes(l,(l=>{ul({context:c,value:"",reference:l.join(".")})}))}u&&[Fe,be,Ve,xe].includes(u)&&(gl(d.context),vp.purgeResetDependencies(d.context),(c=>{c&&Vn[c]&&delete Vn[c]})(d.context),(d.childContainersContexts||[]).forEach((c=>{gl(c)})),(d.transientItems||[]).forEach((c=>{gl(c)}))),c(l)},yl=new class{getCoreheaders(c){const l=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${W.PRIMARY}`,u=$u(l),d=Hu(u),p=Zp.getProperty(W.COREHEADERS,"",d);if(p&&c in p)return p[c]}},Il=class{constructor(c){this.c11nEnv=c}validate(c,l){const{value:u}=this.c11nEnv.getStateProps();if(!l&&!(l=u)){const c=this.c11nEnv.getComponentConfig(),u=this.c11nEnv.getStateProps();l="multi"===c.selectionMode?u.selectionList:"Editable"===c.renderMode?u.referenceList:"single"===c.selectionMode?u.selectionKey:u.value}const d=((c,l,u)=>{const d=""===l&&u?.startsWith(".")?u.substring(1,u.length):u,p=Rn.getContextReferences(c)?.get(`${l}${d}`)?.props;return p?Zp.resolveContextTreeNodeProps(p):p})(this.c11nEnv.getContextName(),this.c11nEnv.getPageReference(),l),{message:p}=Lr.validate(this.c11nEnv.getComponentName()?.toLowerCase(),l,c,d);return p?{status:!1,message:p}:{status:!0}}},El="OPEN_PROCESS_ACTION",Al="OPEN_ASSIGNMENT",_l="DELETE_CASE_IN_CREATE_STAGE",Cl="SAVE_AND_CLOSE",Sl=c=>({type:Cl,payload:c}),Tl=class{static getSavableDataPage(c){return Np(c)}static getLookUpDataPage(c){return Dp(c)}static getLookUpDataPageInfo(c){return bp(c)}static getDataPageKeys(c){return Pp(c)}},Nl=class{constructor(c){this.c11nEnv=c}containerManagerPromise=c=>{const l=gn.getNextActionMgrId();let u,d;const p=new Promise(((c,l)=>{u=c,d=l}));if(!u||!d)throw new Error("resolveFn or rejectFn is not defined.");return gn.register(l,p,u,d,c),{actionMgrID:l,promise:p}};initializeContainers(c){const l=Ne,u=this.c11nEnv,d={context:u.getContextName(),name:u.getContainerName(),type:W.CONTAINER_TYPE.SINGLE},{actionMgrID:p,promise:h}=this.containerManagerPromise(l),g={...d,...c,actionMgrID:p};return Up(ph(g)),h}addContainerItem(c){const l=De,u=this.c11nEnv,d=u.getMetadata(),{children:p}=d||{};let h;p&&([h]=p);const g=u.getContextName(),f=u.getContainerName(),m=X(f,g,c?.containerType===W.CONTAINER_TYPE.SINGLE),y=Ct(f,g),I={root:{...h,config:{...h?.config,context:h?.config?.context||u.getPageReference?.()}},containerItemID:m,context:m,target:y,containerName:f};c=JSON.parse(JSON.stringify(c)),[W.WORKAREA].includes(f)&&delete c.data?.coreHeaders;const{actionMgrID:E,promise:A}=this.containerManagerPromise(l),_={...I,...c,actionMgrID:E};return Up(gh(_)),A}updateContainerItem(c){if(!c?.containerItemID)return Promise.reject(new Error("updateContainerItem : containerItemID is required in containerInfo object"));const l=Fe,u={context:Hu(c.containerItemID),target:ld(c.containerItemID)},{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return Up(Ah(h)),p}activateContainerItem(c){if(!c?.containerItemID)return Promise.reject(new Error("activateContainerItem : containerItemID is required in containerInfo object"));const l=Ue,u={target:ld(c.containerItemID)},{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return Up(Nh(h)),p}removeContainerItem(c){if(!c?.containerItemID)return Promise.reject(new Error("removeContainerItem : containerItemID is required in containerInfo object"));const l=be,u={context:Hu(c.containerItemID),target:ld(c.containerItemID)},{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return Up(bh(h)),p}resetContainers(c){if(!c?.context||!c?.name)return Promise.reject(new Error("resetContainers : context and name are required in containerInfo object"));const l=Pe,u=od(c),{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return Up(hh(h)),p}addTransientItem(c){const{id:l,data:u}=c,d=this.c11nEnv.getContextName(),p=Q(l,d),h=gd(d);return p&&h.includes(p)||Up(fh({transientItemID:p,contextName:d,target:ld(d),data:u})),p}updateTransientData(c){const{transientItemID:l,data:u}=c,d=this.c11nEnv.getContextName();if(l){if(!gd(d).includes(l))return;Up(mh({transientItemID:l,data:u}))}}removeTransientItem(c){const l=this.c11nEnv.getContextName(),{target:u=this.c11nEnv.getTarget(),containerItemID:d,transientItemID:p}=c;if(p&&d){if(!gd(l).includes(p))return;Up(Oh({target:u,containerItemID:d,transientItemID:p}))}}createContainerPConnect(c,l,u,d=!1){Pu.createContainerPConnect(c,l,u,d)}hasContainerItems(){const c=this.c11nEnv.getContextName(),l=this.c11nEnv.getContainerName();return nd(`${c}/${l}`)}isContainerInitialized(){const c=this.c11nEnv.getContextName(),l=this.c11nEnv.getContainerName();return Vu(c,l)}};var Pl=function(c,l){return c===l||"function"==typeof l&&c===l.toString()};function Dl(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u,d=c.length;return u=1===d?function(l){return Pl(l.type,c[0])}:function(l){for(var u=0;u<d;u++)if(Pl(l.type,c[u]))return!0;return!1},Ri((function(c,l){var d=0;c.subscribe(Oi(l,(function(c){return u.call(undefined,c,d++)&&l.next(c)})))}))}function bl(c,l){return Ri((function(u,d){var p=null,h=0,g=!1,f=function(){return g&&!p&&d.complete()};u.subscribe(Oi(d,(function(u){null==p||p.unsubscribe();var g=0,m=h++;Pi(c(u,m)).subscribe(p=Oi(d,(function(c){return d.next(l?l(u,c,m,g++):c)}),(function(){p=null,f()})))}),(function(){g=!0,f()})))}))}function Rl(c,l){return Ri((function(u,d){var p=0;u.subscribe(Oi(d,(function(u){d.next(c.call(l,u,p++))})))}))}function Ol(c,l,u){return void 0===u&&(u=1/0),Ho(l)?Ol((function(u,d){return Rl((function(c,p){return l(u,c,d,p)}))(Pi(c(u,d)))}),u):("number"==typeof l&&(u=l),Ri((function(l,d){return function(c,l,u,d){var p=[],h=0,g=0,f=!1,m=function(){!f||p.length||h||l.complete()},y=function(c){return h<d?I(c):p.push(c)},I=function(c){h++;var f=!1;Pi(u(c,g++)).subscribe(Oi(l,(function(c){l.next(c)}),(function(){f=!0}),void 0,(function(){if(f)try{h--;for(var c=function(){var c=p.shift();I(c)};p.length&&h<d;)c();m()}catch(c){l.error(c)}})))};return c.subscribe(Oi(l,y,(function(){f=!0,m()}))),function(){}}(l,d,c,u)})))}function vl(c){return c&&Ho(c.schedule)}function xl(c){return c[c.length-1]}function wl(c){return vl(xl(c))?c.pop():void 0}function Ml(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return Li(c,wl(c))}function Ll(c){return Ri((function(l,u){var d,p=null,h=!1;p=l.subscribe(Oi(u,void 0,void 0,(function(g){d=Pi(c(g,Ll(c)(l))),p?(p.unsubscribe(),p=null,d.subscribe(u)):h=!0}))),h&&(p.unsubscribe(),p=null,d.subscribe(u))}))}var Ul=new yi((function(c){return c.complete()}));function Fl(c){return c?function(c){return new yi((function(l){return c.schedule((function(){return l.complete()}))}))}(c):Ul}const jl=(c,l,u)=>Ll((d=>("ERR_CANCELED"!==d?.code&&console.error(c,d),Ml(Uh(c,d,l,null,u))))),Vl=(c,l)=>u=>new yi((d=>{let p={},h=0;return u.pipe(Ol((u=>{const d=Date.now();let g;return g=l||A(),g&&g(u,p)&&d-h<c?Fl():(p=u,h=d,Ml(u))}))).subscribe(d)})),kl=new class{constructor(){this.components={}}_checkComponent(c,l){return!!this.components[l]?.[c]}start(c,l,u,d,p){const h={viewName:c,pageReference:u,contextName:d,isInProgress:!0,active:!0,caseKey:l};this.components[d]=this.components[d]||{},this.components[d][p]=h}stop(c,l){this._checkComponent(c,l)&&(this.components[l][c].isInProgress=!1)}remove(c,l){this._checkComponent(c,l)&&delete this.components[l][c]}removeContext(c){delete this.components[c]}enableCascade(c){this.components[c]&&Object.values(this.components[c]).forEach((c=>{c.isInProgress&&(c.cascade=!0)}))}activate(c,l){this._checkComponent(c,l)&&(this.components[l][c].active=!0)}deactivate(c,l){this._checkComponent(c,l)&&(this.components[l][c].active=!1)}refreshActiveComponents(c){c&&this.components[c]&&Object.keys(this.components[c]).forEach((l=>{this.refreshComponent(l,c)}))}refreshComponent(c,l){if(!this._checkComponent(c,l))return;const u=this.components[l][c];if(u.active&&u.cascade){const{caseKey:c,viewName:d,pageReference:p}=u;kn(c,d,l,p,{})}}},$l="postDataViewMetadata",Bl={getData:(c,l,u,d)=>((c,l,u,d={})=>{const p={dataViewName:c},{skipClearErrorMessages:h,signal:g,doNotMergeMessagesForStatusCode:f}=d,{restApi:m,reqType:y}=eg("getListData",p);return rc(m,{method:y,body:l,...g&&{signal:g},...h&&{skipClearErrorMessages:h}},u,f)})(c,l,u,d),getListCount:(c,l,u)=>{const d={dataViewName:c},{restApi:p,reqType:h}=eg("getListDataCount",d);return rc(p,{method:h,body:l},u)},getDataViewMetadata:(c,l,u,d)=>{const p=!!u,h=!!d,g=Vd.doesRestApiExist($l),f=(p||h)&&g?$l:"getDataViewMetadata",m={dataViewName:c},{restApi:y,reqType:I}=eg(f,m);if(g){if(p)return rc(y,{method:I,body:{associationFilter:u}},l);if(h)return rc(y,{method:I,body:{propertyFilter:d}},l)}return rc(y,{method:I},l)},getDataObjectView:(c,l,u,d,p={})=>{const{skipClearErrorMessages:h,signal:g,doNotMergeMessagesForStatusCode:f}=p,m={data_view_ID:c,view_ID:l},y={dataViewParameters:u},{restApi:I,reqType:E}=eg("readDataObject",m);return rc(I,{method:E,body:y,...g&&{signal:g},...h&&{skipClearErrorMessages:h}},d,f)},getCaseEditMetadata:(c,l)=>hc.getCaseEditMetadata(c,l),getCaseEditLock:(c,l)=>hc.getCaseEditLock(c,l),updateCaseEditFieldsData:(c,l,u,d)=>hc.updateCaseEditFieldsData(c,l,u,d),moveListRecords:(c,l)=>{const{sourceID:u,destinationID:d,context:p,listClass:h,viewName:g,viewClassName:f}=c,m={viewName:g,viewClassName:f},{restApi:y,reqType:I}=eg("moveListRecords",m);return rc(y,{method:I,body:{content:{sourceID:u,destinationID:d,context:p,listClass:h}}},l)},isTimeElapsed:(c,l,u="")=>{if(l){if(c&&u===W.RELOAD_IF_OLDER_THAN)return new Date(c).setSeconds(l)<Date.now();if(c&&u===W.RELOAD_ONCE_PER_INTERACTION)return!0}return!0},getAppCacheKey:c=>void 0!==Xu("root").find((c=>c.includes("authoring-preview")))?`${W.AUTHORING_PREVIEW_CONTAINER}-${c}`:`${Vr.getAppAlias()}-${c}`,isDistinctResultsOnly:c=>{const l=kd.getKeyMapping("pyGUID");return!c.some((c=>c.field===l))}},Gl=class{constructor(c,l,u){this.filter=c,this.messageHandler=l,this.contextName=u}},Wl=class{constructor(){this.users={},this.connected=!1,this.connectionsCount=1}_handleUserPresence({message:c}){const{state:l,updateById:u}=c,d=this.users[u];d&&(d.state=l,Object.keys(d.subscribers).forEach((c=>{d.subscribers[c]?.callback({state:d.state})})))}_getAutoGenId(){return this.connectionsCount+=1,`${Date.now()}_${this.connectionsCount}`}subscribe(c,l,u){const d=this._getAutoGenId(),p=this.users[c];if(p)return p.subscribers[d]={callback:l,contextName:u},d;this.users[c]={subscribers:{[d]:{callback:l,contextName:u}}};const h={matcher:"PRESENCE",criteria:{userId:c}};return Kl.subscribe(h,this._handleUserPresence.bind(this)),d}unsubscribe(c,l){const u={matcher:"PRESENCE",unsubscribeUsers:{users:[c]}};this.users[c]&&this.users[c].subscribers&&(delete this.users[c].subscribers[l],0===Object.keys(this.users[c].subscribers).length&&(delete this.users[c],Kl.publishMessage(u)))}getUserState(c){return this.users[c]&&this.users[c].state}clearContext(c){Object.keys(this.users).forEach((l=>{Object.keys(this.users[l].subscribers).forEach((u=>{this.users[l].subscribers[u].contextName===c&&this.unsubscribe(l,u)}))}))}};var Hl=s(924),ql=s.n(Hl);const zl=class{constructor(c,l){this.atomicSubscribers={},this.connectionsCount=1,this.connected=!1,this.matcher=c,this.criteria=l}_handleAtomicMessage({message:c}){Object.keys(this.atomicSubscribers).forEach((l=>{const u=this.atomicSubscribers[l],d=Object.keys(u.criteria),p=Object.keys(c);0===ql()(d,p).length&&u.callback(c)}))}_getAutoGenId(){return this.connectionsCount+=1,`${Date.now()}_${this.connectionsCount}`}subscribe(c,l){if(!this.connected){const c={matcher:this.matcher,criteria:this.criteria};Kl.subscribe(c,this._handleAtomicMessage.bind(this)),this.connected=!0}const u=this._getAutoGenId();return this.atomicSubscribers[u]={criteria:c,callback:l},u}unsubscribe(c){delete this.atomicSubscribers[c]}},Yl=new class{constructor(){this.subscriptions={}}getOrCreateSubscription(c){if(!this.subscriptions[c]){const l={caseId:c};this.subscriptions[c]=new zl("CASE",l)}return this.subscriptions[c]}};class mu{static subscribers={};static connectionsCount=0;static webSocket=null;static connectionConfig=null;static inProgressSubscriptions=[];static inProgressMessages=[];static isServiceAlive=null;static serviceAliveHandler=null;static userPresence=new Wl;static refreshB2SOffset=10;static initConnection(c){if(!c)return;const{messagingService:l}=c;if(!l||l&&l.length<=6)return;const u=Vr.b2sJWT;if(!u||u.length<4)return;this.webSocket&&(this.cleanSocketListeners(),this.webSocket.close());const d=l.endsWith("/")?l+"ws":l+"/ws";try{const c=new WebSocket(`${d}`);this.webSocket=c,c.addEventListener("open",this.handleOnOpen.bind(this)),c.addEventListener("message",this.handleOnMessage.bind(this)),c.addEventListener("error",this.handleOnError.bind(this)),c.addEventListener("close",this.handleOnClose.bind(this))}catch(c){console.log(c)}}static handleOnError(c){this.getTokenExpiryTime()<=0&&(clearInterval(this.reInitInterval),this.reInitInterval=void 0),console.log("web socket connection error event: ",c)}static handleOnClose(c){null!==this.serviceAliveHandler&&(clearTimeout(this.serviceAliveHandler),this.serviceAliveHandler=null),c&&4001===c.code||this.connectionConfig?.disableReInit||this.reInitInterval||this.getTokenExpiryTime()<=0||this.reInitialization()}static handleOnOpen(){if(clearInterval(this.reInitInterval),this.reInitInterval=void 0,null!==this.webSocket&&1===this.webSocket.readyState){const c=Vr.b2sJWT;if(!c||c.length<4)return;this.publishMessage({token:c})}}static handleOnMessage(c){if(null!==c&&"ALIVE"===c.data)null===this.isServiceAlive&&this.checkLiveliness(8e3),this.isServiceAlive=!0;else{let u=null;try{u=JSON.parse(c.data)}catch(l){console.error("Invalid data received from messaging service",c.data)}if(u&&u.msgId&&this.webSocket.send(`{"ack":"${u.msgId}"}`),u&&u.filter){const{matcher:c,criteria:l}=u.filter;delete l.environmentID,Object.keys(this.subscribers).forEach((d=>{const p=this.subscribers[d];p.filter.matcher===c&&Xp.isEqual(p.filter.criteria,l)&&p.messageHandler(u)}))}else if(u&&u.tokenExpiryTime){this.setTokenExpiryTime(u);const c=1e3*(this.getTokenExpiryTime()-this.refreshB2SOffset);setTimeout((()=>this.refreshB2STokenReInit()),c);let l=[];this.inProgressSubscriptions.forEach((({messageSubscriber:c,id:u})=>{l?.includes(u)||(l?.push(u),this.subscribeToSocket(c,u))})),this.inProgressSubscriptions=[],this.inProgressMessages.forEach((c=>{this.publishMessage(c)})),this.inProgressMessages=[],l=null}else console.error("filter missing from received data from messaging service",c.data)}}static reInitialization(c){this.reInitInterval||(Object.keys(this.subscribers).forEach((c=>{this.inProgressSubscriptions.push({messageSubscriber:this.subscribers[c],id:c})})),c?this.initConnection(this.connectionConfig):this.reInitInterval=setInterval((()=>{this.initConnection(this.connectionConfig)}),5e3))}static checkLiveliness(c){!1===this.isServiceAlive?this.reInitialization(!0):this.isServiceAlive=!1,null!==this.serviceAliveHandler&&clearTimeout(this.serviceAliveHandler),this.serviceAliveHandler=setTimeout((()=>{this.checkLiveliness(c)}),c)}static setConnectionConfig(c){this.connectionConfig=c}static cleanSocketListeners(){null!==this.webSocket&&(this.webSocket.removeEventListener("open",this.handleOnOpen.bind(this)),this.webSocket.removeEventListener("message",this.handleOnMessage.bind(this)),this.webSocket.removeEventListener("error",this.handleOnError.bind(this)),this.webSocket.removeEventListener("close",this.handleOnClose.bind(this)))}static disconnect(){null!==this.webSocket&&(this.cleanSocketListeners(),this.webSocket.close(),this.webSocket=null)}static subscribe(c,l,u,d){this.connectionsCount+=1;const p=d||`${Date.now()}_${this.connectionsCount}`,h=new Gl(c,l,u);return null!==this.webSocket&&1===this.webSocket.readyState?(this.subscribeToSocket(h,p),p):(this.inProgressSubscriptions.push({messageSubscriber:h,id:p}),null===this.webSocket&&this.initConnection(this.connectionConfig),p)}static subscribeToSocket(c,l){this.subscribers[l]=c;const u={filter:c.filter,subscribe:{id:l}};this.webSocket.send(JSON.stringify(u))}static unsubscribe(c){if(this.subscribers[c]){delete this.subscribers[c];const l={unsubscribe:{id:c}};null!==this.webSocket&&1===this.webSocket.readyState&&this.webSocket.send(JSON.stringify(l))}}static publishMessage(c){null!==this.webSocket?null===this.webSocket||1!==this.webSocket.readyState?this.inProgressMessages.push(c):this.webSocket.send(JSON.stringify(c)):console.error("Web socket not initialized.")}static getUserPresence=()=>this.userPresence;static getCaseSubscription=c=>Yl.getOrCreateSubscription(c);static refreshB2STokenReInit=async()=>{const c={body:{B2SToken:Vr.b2sJWT}};PCore.getRestClient().invokeRestApi("refreshB2S",c).then((c=>{const{newB2SToken:l}=c.data;l&&l.length>30?(Vr.b2sJWT=l,this.setTokenExpiryTime({tokenExpiryTime:Math.round(Date.now()/1e3)+60}),this.webSocket.close()):console.log("refreshB2S: invalid b2s length")})).catch((c=>{console.log(`refreshB2S: error occurred while fetching: ${c}`)}))};static getTokenExpiryTime=()=>{const c=Math.round(Date.now()/1e3);return this.tokenExpiryTime-c};static setTokenExpiryTime=c=>{this.tokenExpiryTime=c.tokenExpiryTime};static clearContext(c){Object.keys(this.subscribers).forEach((l=>{this.subscribers[l].contextName===c&&this.unsubscribe(l)})),this.userPresence.clearContext(c)}}const Kl=mu,Xl=class{constructor(){this.records=[],this.maxRecords=0,this.isDirty=!1}getRecords(c){if(c){const l=[],{pageNumber:u,pageSize:d}=c,p=u*d;let h=p-d;for(;h<p;h+=1){if(!this.records[h])return this.maxRecords===h?l:[];l.push(this.records[h])}return l}return this.records}mergeRecords(c,l){if(l){const{pageNumber:u,pageSize:d}=l,p=u*d;let h=0;for(let l=p-d+1-1;l<p;l+=1)this.records[l]=c[h],h+=1;if(c.length<d){const l=(u-1)*d+c.length;this.setMaxRecordsCount(l)}}else c||(c=[]),Array.isArray(this.records)&&Array.isArray(c)&&(this.records=qp(this.records,c,{isArrayDeepMerge:!1})),this.setMaxRecordsCount(this.records.length)}setMaxRecordsCount(c){this.maxRecords=c}getMaxRecordsCount(){return this.maxRecords}},Jl=new class{constructor(){this.dataStore={},this.dataStoreMeta={},this.subscribers={},this.dataPageSubscribers={},this.isCacheEnabled=!0,this.subscribedDataPageNames=new Set}SUBSCRIPTION_STATUS_FAILED="FAILED";SUBSCRIPTION_STATUS_SUCCESS="SUCCESS";DATAPAGE_NOT_CACHED="Data Page Not Cached";DUPLICATE_SUBSCRIPTION_ID="Duplicate Subscription Id";MISSING_MANDATORY_FIELD="Missing Mandatory Field(s)";getData(c,l,u,d){const p=this.generateHash(c,l,d);if(this.dataStore[c]&&this.dataStore[c][p]){const l=this.dataStore[c][p];return l.isDirty?[]:l.getRecords(u)}return[]}generateHash(c,l,u){const d=Ip(c);let p=[];d||(p=Object.keys(l||{}).map((c=>({name:c}))));let h="",g=c;const f=[];return(d?.parameters||p).forEach((c=>{l?.[c.name]?f.push(l[c.name]):f.push(c.defaultValue??W.NULL_STRING)})),u&&f.push(JSON.stringify(u)),f.join(W.HASH_DELIMITER)&&(h=Xp.getHashedString(f.join(W.HASH_DELIMITER)),g=c+W.UNDERSCORE_STRING+h),g}async getDataAsync(c,l,u={},d,p,h={}){if(this.subscribeToMessageService(c),h.purgeDataPageCache&&(this.dataStore[c]={},this._removeDataStoreMetaEntry(c)),!this.isCacheable(c,p)||h.invalidateCache){const g=await this.fetchData(c,u,d,p,l,h),f=g?.data?.data??[];return{...g.data,data:f,pageNumber:g?.data?.pageNumber,pageSize:g?.data?.pageSize,queryStats:g?.data?.queryStats,status:g?.status}}const g=this.getData(c,u,d,p);if(g.length>0)return Promise.resolve({data:g});const f=await this.fetchData(c,u,d,p,l,h);return{...f.data,data:this.mergeDataStore(c,u,d,p,f),pageNumber:f?.data?.pageNumber,pageSize:f?.data?.pageSize,queryStats:f?.data?.queryStats,status:f?.status}}async getPageDataAsync(c,l,u={},d={}){this.subscribeToMessageService(c);const p=this.generateHash(c,u,null);if(d.purgeDataPageCache&&(this.dataStore[c]={},this._removeDataStoreMetaEntry(c)),this.isCacheable(c)&&this.dataStore[c]&&this.dataStore[c][p]){if(!d?.invalidateCache)return Promise.resolve(this.dataStore[c][p]);delete this.dataStore[c][p],this._removeDataStoreMetaEntry(c,u,p)}const{restApi:h,reqType:g}=eg(W.GET_PAGE_DATA,{dataViewName:c,dataViewParameters:encodeURIComponent(JSON.stringify(u))}),f={method:g},m=h&&u&&0===Object.keys(u).length?h.split("?")[0]:h;return rc(m,f,l).then((l=>(this.isCacheable(c)&&(this.dataStore[c]={...this.dataStore[c],[p]:l.data},this._addDataStoreMetaEntry(c,u,p)),l.data)))}subscribeToDataPageUpdates(c,l,u,d={}){if(!c||!l||!u)return!1;const p=this.generateHash(u,d,null);this.dataPageSubscribers[u]??={};const h=this.dataPageSubscribers[u];h[p]??={};const g=h[p];return!g[c]&&(g[c]??=l,!0)}unsubscribeToDataPageUpdates(c,l,u={}){if(!c||!l)return!1;const d=this.generateHash(l,u,null);return delete this.dataPageSubscribers[l]?.[d]?.[c],!0}_isDataPageCached(c,l){if(l&&Xp.isObjectEmpty(l))return!!this.dataStore[c];const u=this.generateHash(c,l,null);return!!this.dataStoreMeta[c]?.[u]?.length}updateDataPageStore(c={}){Object.keys(c).forEach((l=>{this.dataStore[l]||(this.dataStore[l]={});const u=c[l];Object.keys(u).forEach((u=>{if(this.dataStore[l][u])this.dataStore[l][u].mergeRecords(c[l][u].pxResults);else{const d=new Xl;this.dataStore[l][u]=d,d.mergeRecords(c[l][u].pxResults||[])}}))}))}_addDataStoreMetaEntry(c,l,u){const d=this.generateHash(c,l,null);this.dataStoreMeta[c]??={};const p=this.dataStoreMeta[c];p[d]??=[];const h=p[d];h.includes(u)||h.push(u)}_removeDataStoreMetaEntry(c,l,u){if(!c||l||u||(this.dataStoreMeta[c]={}),c&&l&&u){const d=this.generateHash(c,l,null);this.dataStoreMeta[c][d]=this.dataStoreMeta[c][d].filter((c=>c!==u))}}mergeDataStore(c,l,u,d,p){const h=this.generateHash(c,l,d),g=p?.data?.data;if(!g||0===g.length)return[];this.dataStore[c]||(this.dataStore[c]={}),this.dataStore[c][h]||(this.dataStore[c][h]=new Xl);const f=this.dataStore[c][h];return f.mergeRecords(g,u),f.isDirty=!1,this._addDataStoreMetaEntry(c,l,h),f.getRecords(u)}async fetchData(c,l,u,d,p,h){const{additionalApiParams:{useExtendedTimeout:g=!1,includeTotalCount:f=!1}={},...m}=h,y={dataViewParameters:l};return f&&(y.includeTotalCount=!0),g&&(y.useExtendedTimeout=!0),u&&(y.paging=u),d&&(y.query=d),Bl.getData(c,y,p,m)}isDataPage(c=""){return c.startsWith("D_")||c.startsWith("Declare_")}handleCascadeUpdate(){const{dataPageName:c,scope:l}=this;l.handleMessage({message:{datapage:c,parameters:""}})}subscribeToUpdate(c,l,u,d,p,h){this.subscribers[c]=this.subscribers[c]||{},this.subscribers[c].callback=this.subscribers[c].callback||{},h&&!this.subscribers[c].callback?.[h]&&(this.subscribers[c].callback[h]=p),this.subscribeToCascadeUpdates(c,l,u,d,h)}unsubscribe(c,l,u,d,p){delete this.subscribers[c]?.callback?.[p],l&&l.length>0&&vp.unRegisterFields(u,d,l,p)}subscribeToCascadeUpdates(c,l,u,d,p){l&&l.length>0&&vp.registerFields(u,d,l,this.handleCascadeUpdate.bind({dataPageName:c,scope:this}),p)}subscribeToMessageService(c){if(c&&this.subscribedDataPageNames.has(c))return;const l={matcher:"DATAPAGE_UPDATED",criteria:{datapage:c}};Kl.subscribe(l,this.handleMessage.bind(this)),this.subscribedDataPageNames.add(c)}handleMessage(c){const{msgId:l,message:u}=c,{datapage:d,parameters:p=""}=u,h=this.subscribers[d];this.markDataInstanceDirty(d,""===p?null:JSON.parse(p)),l&&this._executeDataPageSubscriptions(c),!l&&h?.callback&&Object.keys(h.callback).forEach((l=>{h.callback?.[l](c.message)}))}markDataInstanceDirty(c,l){let u,d;l&&(u=this.generateHash(c,l,null),d=this.dataStoreMeta[c]?.[u],!d)||!this.dataStore[c]||Object.keys(this.dataStore[c]).filter((c=>!l||!d||d.includes(c))).forEach((l=>{this.dataStore[c][l].isDirty=!0}))}_executeDataPageSubscriptions(c){const{message:l}=c,{datapage:u,parameters:d}=l,p=d?JSON.parse(d):null;if(this.dataPageSubscribers[u])if(p){const l=[];l.push(this.generateHash(u,p,null)),l.push(this.generateHash(u,null,null)),l.forEach((l=>{const d=this.dataPageSubscribers[u]?.[l]??{};Object.keys(d).forEach((l=>{d[l](c.message)}))}))}else{const l=this.dataPageSubscribers[u];Object.keys(l).forEach((u=>{const d=l[u];Object.keys(d).forEach((d=>{l[u][d](c.message)}))}))}}isPerInteraction(c){const l=Ip(c);return"reloadOncePerInteraction"===l?.refreshStrategy?.type}isCacheable(c,l){return!(this.isPerInteraction(c)||!this.isCacheEnabled||l&&Object.keys(l).length>1)}disableCache(c){this.isCacheEnabled=!c}},Ql=class{constructor(c,l,u,d,p=100,h=500){this.finalDataViewCall=c,this.combiner=l,this.comparator=u,this.separator=d,this.maxtime=p,this.maxsize=h,this.groupedDataViewArray=[]}findCombinableDataViewCall(c){return this.groupedDataViewArray.find((l=>this.comparator(l,c)))}dequeueAllDataViewCalls(){for(this.groupedDataViewArray.reverse();this.groupedDataViewArray.length>0;){const c=this.groupedDataViewArray.pop();this.finalDataViewCall(c).then((l=>{this.separator(c,l)}))}clearTimeout(this.timeoutId)}dequeueDataViewCallOnSizeExceed(c){const l=this.groupedDataViewArray.findIndex((l=>this.comparator(l,c)));this.groupedDataViewArray[l]&&(this.groupedDataViewArray.splice(l,1),this.finalDataViewCall(c).then((l=>{this.separator(c,l)})))}queueDataViewCall(c,l){let u,d,p=this.findCombinableDataViewCall(c);return u=new Promise((c=>{d=c})),p&&!p.dataViewCallMap[l]?(this.combiner(p,c),p.dataViewCallMap[l]={promise:u,resolve:d}):p?u=p.dataViewCallMap[l].promise:(p={...c,dataViewCallMap:{[l]:{promise:u,resolve:d}}},this.groupedDataViewArray.push({...c,dataViewCallMap:{[l]:{promise:u,resolve:d}}})),Object.keys(p.dataViewCallMap).length===this.maxsize?this.dequeueDataViewCallOnSizeExceed(p):(clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.dequeueAllDataViewCalls()),this.maxtime)),u}},Zl=class{constructor(){this.bufferedDataQueues={}}getBufferedDataQueueForDataPage(c){return this.bufferedDataQueues[c]}addBufferedDataQueueForDataPage(c,l,u,d,p,h,g){return this.getBufferedDataQueueForDataPage(c)||(this.bufferedDataQueues[c]=new Ql(l,u,p,d,h,g)),this.bufferedDataQueues[c]}},eu=c=>c.map((c=>c.field)),tu=(c,l)=>{const u=(c.query?.filter).filterConditions,d=(l.query?.filter).filterConditions;let p=(l.query?.filter).logic;const h=Object.keys(u).length;((c,l)=>((c,l)=>1===Object.keys(c).length&&Object.keys(c).length===Object.keys(l).length)(c,l)&&((c,l)=>"EQ"===l.F0.comparator&&(c.F0.comparator===l.F0.comparator||"IN"===c.F0.comparator))(c,l)&&c.F0.ignoreCase===l.F0.ignoreCase)(u,d)?("EQ"===u.F0.comparator&&(c=>{const l=c?.F0.rhs.value;c.F0.rhs={values:[l]},c.F0.comparator="IN"})(u),u.F0.rhs.values.push(d.F0.rhs.value)):(Object.keys(d).forEach(((c,l)=>{const g=`F${h+l}`;u[g]=d[c],p=p.replace(c,g)})),(c.query?.filter).logic+=` OR ${p}`);const g=eu(c.query?.select);eu(l.query?.select).forEach((l=>{g.includes(l)||(c.query?.select).push({field:l})}))},nu=(c,l)=>((c,l)=>Object.keys(c.filterConditions).length%Object.keys(l.filterConditions).length==0&&!Object.keys(l.filterConditions).some((u=>c.filterConditions[u].lhs.field!==l.filterConditions[u]?.lhs.field)))(c.query?.filter,l.query?.filter)&&(((c,l)=>c.dataViewParameters&&l.dataViewParameters&&Object.keys(l.dataViewParameters).length===Object.keys(c.dataViewParameters).length&&!Object.keys(c.dataViewParameters).some((u=>"string"==typeof l.dataViewParameters?.[u]?c.dataViewParameters?.[u]!==l.dataViewParameters?.[u]:!Xp.isEqual(c.dataViewParameters?.[u],l.dataViewParameters?.[u]))))(c,l)||((c,l)=>!c.dataViewParameters&&!l.dataViewParameters)(c,l)),ru=(c,l)=>{const{data:u}=l,{dataViewCallMap:d,filterDataOnClient:p}=c;Object.keys(d).forEach((c=>{d[c].resolve({data:p(c,u)})}))},su=(c,l)=>{try{window.sessionStorage.setItem(c,l)}catch(c){}};class bu{constructor(c,l){this.isInitialised=!1,this.isQueryable=!0,this.dataSourceMetaData={},this.nonQueryableData=[],this.fetchedNQData=!1,this.previousSearchText=null,this.totalRecordCount=0,this.fetchedRecordCount=0,this.cache={},this.pageNumber=0,this.isNQDataFetchInProgress=!1,this.fetchNQDataPromise=null,this.dataSource="",this.bufferInitialized=!1,c&&(this.listType=c.listType,this.dataSource=c.dataSource,c.enablePagination?(this.enablePagination=c.enablePagination,this.pageSize=c.pageSize):this.maxResultsDisplay=c.maxResultsDisplay,this.parameters=c.parameters,this.columns=c.columns,this.matchPosition=c.matchPosition,this.ignoreCase=!1!==c.ignoreCase,this.dataSourceMetaData=c.dataSourceMetaData,this.context=l)}static searchResultsCache={};static init(c,l){return new Promise(((u,d)=>{const p=[...c.columns.map((c=>c.value)),...Object.entries(c.parameters).map((([c,l])=>`${c}+${l}`)),c.matchPosition,c.maxResultsDisplay].join(W.HASH_DELIMITER),h=Xp.getHashedString(p),g=`${c.dataSource}_${h}`,f=Bl.getAppCacheKey(c.dataSource);if(window.sessionStorage.getItem(f)){const p=JSON.parse(window.sessionStorage.getItem(f));if(l&&bu.searchResultsCache?.[l]?.[g])u(bu.searchResultsCache[l][g]);else if("form"!==c.cacheLifeSpan&&bu.searchResultsCache?.persisted?.[g])u(bu.searchResultsCache.persisted[g]);else{const h=new bu(c,l);JSON.stringify(p.associationFilter)===JSON.stringify(c.associationFilter)?(h.dataSourceMetaData=p.dataSourceMetaData,h.isQueryable=p.isQueryable,h.isInitialised=p.isInitialised,h.associationFilter=p.associationFilter,bu.initializeCache(l,c,g,h),u(h)):(h.associationFilter=c.associationFilter,h.propertyFilter=c.propertyFilter,h.fetchMetaData(l).then((d=>{su(f,JSON.stringify({isQueryable:d.data.isQueryable,dataSourceMetaData:d.data,isInitialised:!0,associationFilter:c.associationFilter})),h.isQueryable=d.data.isQueryable,h.dataSourceMetaData=d.data,h.isInitialised=!0,bu.initializeCache(l,c,g,h),u(h)})).catch((c=>{h.isInitialised=!1,d(c)})))}}else if(c.deferDatasource&&Ip(c.dataSource)){const d=new bu(c,l),p=Ip(c.dataSource);d.isQueryable=!!p?.isQueryable,d.isInitialised=!0,d.dataSourceMetaData=p,su(f,JSON.stringify({isQueryable:p?.isQueryable,dataSourceMetaData:p,isInitialised:!0})),d.context=l,bu.initializeCache(l,c,g,d),u(d)}else{const p=new bu(c,l);p.associationFilter=c.associationFilter,p.propertyFilter=c.propertyFilter,p.fetchMetaData(l).then((d=>{su(f,JSON.stringify({isQueryable:d.data.isQueryable,dataSourceMetaData:d.data,isInitialised:!0,associationFilter:c.associationFilter})),p.isQueryable=d.data.isQueryable,p.dataSourceMetaData=d.data,p.isInitialised=!0,bu.initializeCache(l,c,g,p),u(p)})).catch((c=>{p.isInitialised=!1,d(c)}))}}))}static bufferedDataView=new Zl;registerForBufferedCall(c){return this.isQueryable&&(this.initializeBufferCallsForDataPage((c=>({combiner:tu,comparator:nu,separator:ru,...c}))(c)),this.bufferInitialized=!0),this}static clearContextedCache(c){delete bu.searchResultsCache[c]}static initializeCache(c,l,u,d){c&&"form"===l.cacheLifeSpan?.toLowerCase()?(void 0===bu.searchResultsCache[c]&&(bu.searchResultsCache[c]={}),bu.searchResultsCache[c][u]=d):(void 0===bu.searchResultsCache.persisted&&(bu.searchResultsCache.persisted={}),bu.searchResultsCache.persisted[u]=d)}fetchMetaData(c){return Bl.getDataViewMetadata(this.dataSource,c,this.associationFilter,this.propertyFilter)}initializeBufferCallsForDataPage(c){bu.bufferedDataView.addBufferedDataQueueForDataPage(this.dataSource,(c=>Jl.getDataAsync(this.dataSource,this.context,c.dataViewParameters,c.paging,c.query)),c.combiner,c.separator,c.comparator,c.waitTime,c.maxSize)}buildSchemaForQueryableBufferDP(c){return{...this.buildSchemaForQueryableDP(c),paging:void 0,filterDataOnClient:this.filterDataOnClient.bind(this)}}getData(c,l){if(this.isQueryable){if(this.bufferInitialized)try{const l=this.buildSchemaForQueryableBufferDP(c);return bu.bufferedDataView.getBufferedDataQueueForDataPage(this.dataSource).queueDataViewCall(l,c)}catch{const u=this.buildSchemaForQueryableDP(c,l);return Jl.getDataAsync(this.dataSource,this.context,u.dataViewParameters,u.paging,u.query)}const u=this.buildSchemaForQueryableDP(c,l);return Jl.getDataAsync(this.dataSource,this.context,u.dataViewParameters,u.paging,u.query)}return this.fetchNonQueryableResults(c,l)}memoizedGetData(c,l){const u=c?.toLowerCase();if(this.enablePagination?u in this.cache&&this.pageNumber in this.cache[u]:u in this.cache)return this.enablePagination?this.cache[u][this.pageNumber]:this.cache[u];const d=this.getData(c,l);return this.enablePagination?(this.cache[u]=this.cache[u]||{},this.cache[u][this.pageNumber]=d):this.cache[u]=d,d}fetchData(c,l=!1,u){return this.isValidDatasource()&&this.isInitialised?(this.pageNumber=l?this.pageNumber:1,this.memoizedGetData(c,u)):Promise.reject(new Error)}fetchPaginatedData(c){return this.pageNumber+=1,this.fetchData(c,!0)}fetchNonQueryableResults(c,l){if(void 0===c)return Promise.resolve({data:[]});if(this.fetchedNQData)return Promise.resolve({data:this.filterDataOnClient(c,this.nonQueryableData,l)});if(this.isNQDataFetchInProgress)return this.fetchNQDataPromise?.then((()=>({data:this.filterDataOnClient(c,this.nonQueryableData,l)}))).catch((c=>Promise.reject(c)));if(this.dataSourceMetaData?.structure&&"list"===this.dataSourceMetaData.structure.toLowerCase()){const u=this.buildSchemaForNonQueryableDP();return this.fetchNQDataPromise=Jl.getDataAsync(this.dataSource,this.context,u.dataViewParameters),this.isNQDataFetchInProgress=!0,new Promise(((u,d)=>{this.fetchNQDataPromise?.then((d=>(this.nonQueryableData=[...d.data],this.fetchedNQData=!0,u({data:this.filterDataOnClient(c,this.nonQueryableData,l)})))).catch((c=>d(c))).finally((()=>{this.isNQDataFetchInProgress=!1,this.fetchNQDataPromise=null}))}))}return Promise.resolve(null)}filterDataOnClient(c,l,u){const d=(u?.columns??this.columns)?.filter((c=>c.useForSearch)).map((c=>c.value));return l.reduce(((l,p)=>(Object.keys(p).every((h=>!(d?.includes(h)&&p[h]&&this.positionMatches(`${p[h]}`,c,u)&&(l.push({...p}),1)))),l)),[])}positionMatches(c,l,u){const d=u?.ignoreCase??this.ignoreCase,p=d?c.toLowerCase():c,h=d?l.toLowerCase():l;switch(u?.matchPosition??this.matchPosition){case"start":return p.startsWith(h);case"contains":return p.includes(h);case"equals":return p===h;default:return!1}}buildSelect(c){const l=[],u=[];return(c?.columns??this.columns)?.forEach((c=>{if(!u.includes(c.value)){u.push(c.value);const d={field:c.value};l.push(d)}})),l}buildFilters(c,l){const u=l?.matchPosition??this.matchPosition,d=l?.ignoreCase??this.ignoreCase,p={};let h=0;(l?.columns??this.columns)?.forEach((l=>{if(l.useForSearch){const g=`F${h}`;h+=1;const f={field:l.value},m={value:c};let y="CONTAINS";"start"===u?y="STARTS_WITH":"equals"===u&&(y="EQ");const I={...`${parseFloat(c)}`!==c==1&&{ignoreCase:d?"true":"false"},lhs:f,rhs:m,comparator:y};p[g]=I}}));const g=Object.keys(p).join(" OR ");return{filterConditions:p,logic:g}}buildQuery(c,l){const u=this.buildSelect(l);return c?{select:u,filter:this.buildFilters(c,l),...Bl.isDistinctResultsOnly(u)&&{distinctResultsOnly:"true"}}:{select:u,...Bl.isDistinctResultsOnly(u)&&{distinctResultsOnly:"true"}}}buildPageOptions(){return this.enablePagination?{pageNumber:this.pageNumber,pageSize:this.pageSize}:{maxResultsToFetch:this.maxResultsDisplay}}buildSchemaForQueryableDP(c,l){return{dataViewParameters:this.parameters,query:this.buildQuery(c,l),paging:this.buildPageOptions()}}buildSchemaForNonQueryableDP(){return{dataViewParameters:this.parameters}}isValidDatasource(){return!!this.dataSource}}const au=bu,ou=class{static cleanCaches(c){vp.purgeCascadeFields(c),kl.removeContext(c),au.clearContextedCache(c),zr.cleanContextSubscribers(c),$c(c),Rn.removeContextTreeNode(c),Kl.clearContext(c),nl.deRegisterForRefresh(c)}},iu="GET_DESCENDANTS",cu=new class{MISSING_CONTEXT_PARAM="context is required parameter";INVALID_CONTEXT_DETAILS="Invalid Context";INVALID_CONTEXT_OPERATION="Invalid Operation on Given Context";schedulePendingActionOnCompletion(c,l){const u=[],d=l.context_data?.blocking_action_counter??0,p=l.context_data?.deferred_action_queue?[...l.context_data.deferred_action_queue]:[];let h=l.context_data?.is_deferred_action_in_progress??!1;if(d<=0){if(h)u.push({type:Ae,payload:{context:c,data:{context_data:{is_deferred_action_in_progress:!1}}}});else{if(!(p.length>0))return;{const l=p.shift();h=!h,u.push({type:Ae,payload:{context:c,data:{context_data:{deferred_action_queue:p,blocking_action_counter:d,is_deferred_action_in_progress:h}}}}),u.push(l)}}Up(u)}}executeOrQueueDeferredAction(c){if(!c?.payload?.context)return Promise.reject(new Error("Action Context is Mandatory Field."));const l=Fp(c?.payload?.context);if(l){const u=[],d=l.context_data?.blocking_action_counter??0,p=l.context_data?.deferred_action_queue?[...l.context_data.deferred_action_queue]:[];let h=l.context_data?.is_deferred_action_in_progress??!1;return p.length<=0&&!h&&(d<=0?(u.push(c),h=!h):p.push(c),u.unshift({type:Ae,payload:{context:c.payload.context,data:{context_data:{deferred_action_queue:p,blocking_action_counter:d,is_deferred_action_in_progress:h}}}}),Up(u)),Promise.resolve()}return Promise.reject(new Error(this.INVALID_CONTEXT_DETAILS))}handleDeferredActionCompletion(c){if(!c)return Promise.reject(new Error(this.MISSING_CONTEXT_PARAM));const l=Fp(c);return l&&!0===l.context_data?.is_deferred_action_in_progress?(Up({type:Ae,payload:{context:c,data:{context_data:{is_deferred_action_in_progress:!1}}}}),this.schedulePendingActionOnCompletion(c,l),Promise.resolve()):Promise.reject(new Error(this.INVALID_CONTEXT_DETAILS))}registerBlockingAction(c){return c?Fp(c)?(Up({type:ut,payload:{context:c,isInitiateBlockingAction:!0}}),Promise.resolve()):Promise.reject(new Error(this.INVALID_CONTEXT_DETAILS)):Promise.reject(new Error(this.MISSING_CONTEXT_PARAM))}deRegisterBlockingAction(c){if(!c)return Promise.reject(new Error(this.MISSING_CONTEXT_PARAM));const l={...Fp(c)};return l.context_data={...l.context_data},l&&l.context_data?.blocking_action_counter>0?(Up({type:ut,payload:{context:c,isInitiateBlockingAction:!1}}),l.context_data.blocking_action_counter-=l.context_data.blocking_action_counter,this.schedulePendingActionOnCompletion(c,l),Promise.resolve()):Promise.reject(new Error(this.INVALID_CONTEXT_OPERATION))}cancelDeferredActionsOnError(c){if(!c)return;const l=Fp(c);if(l){const u={...l};u.context_data={...u.context_data},u.context_data?.deferred_action_queue&&Xp.rejectPendingActions(u.context_data.deferred_action_queue)&&(u.context_data.deferred_action_queue=[]),u.context_data?.blocking_action_counter&&(u.context_data.blocking_action_counter=0),u.context_data?.is_deferred_action_in_progress&&(u.context_data.is_deferred_action_in_progress=!1),Up({type:Ae,payload:{context:c,data:{...u}}}),hn.disableLoadingIndicator({context:c})}}},lu=(c,l)=>{const u={},d=Tl.getLookUpDataPage(c),p=Tl.getDataPageKeys(d);if(p)for(const h of p)u[h.keyName]=h.isAlternateKeyStorage?l[h.linkedField]:l[h.keyName];return{dataViewParameters:u,dataPageID:d,dataPageKeys:p}},uu=(c,l)=>{const u=Tl.getSavableDataPage(c),d=Tl.getDataPageKeys(u);return d?.forEach((c=>{c.isAlternateKeyStorage&&(c.keyName===c.linkedField||Object.keys(l).includes(c.linkedField))?c.keyName=l[c.linkedField]:c.isAlternateKeyStorage&&Object.keys(l).includes(c.keyName)&&c.keyName!==c.linkedField?(l[c.linkedField]=l[c.keyName],delete l[c.keyName]):c.keyName=l[c.keyName]})),{keys:l,dataPageID:u,dataPageKeys:d}},du=c=>{zr.publish(G.PUB_SUB_EVENTS.EVENT_CANCEL,c)},pu=(c,l,u)=>{const{callbacks:d}=u;return u.callbacks=null,c(l,u).then((c=>{"cancel"===c?d?.cancel?.():d?.submit?.()}))},hu=class{constructor(c){this.c11nEnv=c}MSG_CLASSNAME_REQUIRED="className is required parameter";MSG_CLASSNAME_STRING="className must be a string";MSG_ACTION_ID_REQUIRED="actionID is required parameter";MSG_ACTION_ID_STRING="actionID must be a string";MSG_ACTION_NAME_REQUIRED="actionName is required parameter";MSG_ACTION_NAME_STRING="actionName must be a string";MSG_KEY_PROPERTIES_REQUIRED="keyProperties is required parameter";MSG_DATAVIEWID_REQUIRED="dataViewID is required parameter";MSG_DATAVIEWID_STRING="dataViewID must be a string";MSG_CONTAINERITEMID_REQUIRED="containerItemID is required parameter";MSG_CONTAINERITEMID_STRING="containerItemID must be a string";MSG_PAGENAME_REQUIRED="pageName is required parameter";MSG_PAGENAME_STRING="pageName must be string";MSG_INSIGHTID_REQUIRED="insightID is required parameter";MSG_DASHBOARDID_REQUIRED="DashboardID is required parameter";MSG_ACTIVE_SUGGESTION_UNATTENDED="You must accept or decline autofilled fields.";MSG_CASE_ID_REQUIRED="caseID is required parameter";MSG_CONTEXT_STRING="context must be string";shouldDeleteCaseInCreateStage=(c,l,u)=>!c&&l||u;getSaveActionPayload=(c,l=!1)=>{const u=c,d=u&&u.includes(W.MODAL),p=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),h=this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),g=this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID)?this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID):this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENTACTION_ID),f=this.c11nEnv.getContainerName(),m=this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),y=l?void 0:Xc(this.c11nEnv.getContextName()),I=this.c11nEnv.getValue("isProcessAction","isProcessAction");return th.buildActionObject({context:u,containerItemID:c,assignmentID:h,actionID:g,caseID:p,containerName:f,caseType:m,isModalAction:d,isFormValid:y,isProcessAction:I,saveOnly:l},this.c11nEnv)};actionsApiPromise=(c,l,u=!0)=>{let d,p,h="";h=l&&null!==l.actionMgrID?l.actionMgrID||"":gn.getNextActionMgrId();const g=new Promise(((c,l)=>{d=c,p=l}));if(!d||!p)throw new Error("resolveFn or rejectFn is not defined.");return gn.register(h,g,d,p,c,l,u),{actionMgrID:h,promise:g}};showDataObjectCreateView(c,l=G.VIEW_NAMES.DATA_OBJECT_CREATE_VIEW){const u=th.buildActionObject({viewName:l,className:c},this.c11nEnv),d=ie,{promise:p}=this.actionsApiPromise(d,u);return Up({type:d,payload:{...u,containerName:G.MODAL,skipSemanticUrl:!0,isCreateDataObject:!0}}),p}cancelDataObject(c){if(!c)return Promise.reject(new Error("containerItemId is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=c;if(!hl(l))return new Nl(this.c11nEnv).removeContainerItem({containerItemID:c,skipReleaseLockRequest:!0});const u=Xe,d=th.buildActionObject({containerItemID:c,context:l},this.c11nEnv),p=l&&l.includes(W.MODAL);Up({type:u,payload:{...d,isModalAction:p,isDataObject:!0,skipReleaseLockRequest:!0}});const{promise:h}=this.actionsApiPromise(u,d);return h.then((()=>{du({})}))}createDataObject(c){if(!c)return Promise.reject(new Error("containerItemID is required parameter"));const{data:l}=Lp()?.getState()||{},u=l[c]?.dataInfo?.content?.classID;if(!u)return Promise.reject(new Error(W.DATA_CLASS_NOT_FOUND));const d=Tl.getSavableDataPage(u),p=dt,h=!!c&&c.includes(W.MODAL),g=th.buildActionObject({containerItemID:c,dataPageID:d},this.c11nEnv),{promise:f}=this.actionsApiPromise(p,g);return Up({type:"CREATE_DATA_OBJECT",payload:{...g,isModalAction:h,isFormValid:Xc(c)}}),f}deleteDataObject(c,l){if(!c)return Promise.reject(new Error("className is required parameter"));if(!l)return Promise.reject(new Error("keys is required parameter"));const u=pt,d=Tl.getSavableDataPage(c),p=Tl.getDataPageKeys(d),h={};if(p)for(const m of p)h[m.keyName]=m.isAlternateKeyStorage?l[m.linkedField]:l[m.keyName];const g=th.buildActionObject({dataViewName:d,dataViewParameters:h},this.c11nEnv),{promise:f}=this.actionsApiPromise(u,g);return Up({type:"DELETE_DATA_OBJECT",payload:{...g}}),f}getDataObjectView(c,l,u={viewName:""}){if(!c)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(!l)return Promise.reject(new TypeError(this.MSG_KEY_PROPERTIES_REQUIRED));if("object"!=typeof l)return Promise.reject(new TypeError("keyProperties must be a object"));const d=ht,{dataPageID:p,dataViewParameters:h}=lu(c,l),g=th.buildActionObject({dataLookUp:p,keyProperties:l,requestPayload:h,viewName:u.viewName||G.VIEW_NAMES.DATA_OBJECT_EDIT_VIEW,containerName:W.MODAL},this.c11nEnv),{promise:f}=this.actionsApiPromise(d,g);return Up({type:"VIEW_DATA_OBJECT",payload:{...g}}),f}updateDataObject(c,l){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if(!l)return Promise.reject(new Error("keys is required parameter"));const{data:u}=Lp()?.getState()||{},d=u[c]?.dataInfo?.content?.classID;if(!d)return Promise.reject(new Error(W.DATA_CLASS_NOT_FOUND));const{dataPageID:p,keys:h}=uu(d,l),g=gt,f=c&&c.includes(W.MODAL),m=th.buildActionObject({containerItemID:c,dataPageID:p,key:h},this.c11nEnv),{promise:y}=this.actionsApiPromise(g,m);return Up({type:"UPDATE_DATA_OBJECT",payload:{...m,isModalAction:f,isFormValid:Xc(c)}}),y}openDataObjectAction(c,l,u,d){if(!c)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(!l)return Promise.reject(new TypeError(this.MSG_KEY_PROPERTIES_REQUIRED));if("object"!=typeof l)return Promise.reject(new TypeError("keyProperties must be a object"));if(!u)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));if(!d)return Promise.reject(new Error(this.MSG_ACTION_NAME_REQUIRED));const p=ft,{dataViewParameters:h,dataPageID:g,dataPageKeys:f}=lu(c,l),m=th.buildActionObject({actionID:u,actionName:d,dataViewParameters:h,lookupDatapage:g,containerName:W.MODAL,dataViewPayload:f,context:this.c11nEnv.getContextName()},this.c11nEnv),{promise:y}=this.actionsApiPromise(p,m);return Up({type:p,payload:{...m}}),y}submitDataObjectAction(c,l,u){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));if(!l)return Promise.reject(new Error(this.MSG_KEY_PROPERTIES_REQUIRED));if(!u)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));const{data:d}=Lp()?.getState()||{},p=d[c]?.dataInfo?.content?.classID;if(!p)return Promise.reject(new Error(W.DATA_CLASS_NOT_FOUND));const h=Rd(c),g=ld(h),f=wu(g,h)||{},{resourceType:m="",key:y=""}=f,I=mt,{dataPageID:E,keys:A}=uu(p,l),_=th.buildActionObject({containerItemID:c,actionID:u,resourceType:m,key:y,keys:A,savableDatapage:E,containerName:W.MODAL,context:c},this.c11nEnv);_.context=c;const{promise:C}=this.actionsApiPromise(I,_);return Up({type:I,payload:{..._,isFormValid:Xc(c)}}),C}createWork(c,l={flowType:"",containerName:"",openCaseViewAfterCreate:!1,modalOptions:{dockable:!1},startingFields:Object,remoteCaseMeta:{},channelName:""}){if(!c)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.createWork)return window.pms.plugins.c11n.createWork(c,"pyStartCase");const{dockable:u=!1}=l?.modalOptions||{};let d=ge;const p=th.buildActionObject({class:c,flowType:"pyStartCase",containerName:W.PRIMARY,openCaseViewAfterCreate:!0,...l,modalOptions:{isDockable:u}},this.c11nEnv),{promise:h}=this.actionsApiPromise(d,p);if(l.channelName&&(p.headers=p.headers||{},p.headers[W.X_ORIGIN_CHANNEL]=l.channelName),q.isRemoteCase(c)){const{RemoteClassName:l,RemoteSystemID:u,name:h}=q.getRemoteCase(c);if(p.className=c,p.class=l,p.headers=p.headers||{},p.headers.RemoteSystemID=u,q.isTraditionalRemoteCase(c)){const u={className:c,name:h,action:"createWork",remoteClassName:l};d=this.setTraditionalRemoteCaseParams(p,u)}}return Hi.getPreviewMode()&&(p.debugInfo={debugId:Xp.generateUniqueID()}),Up({type:d,payload:{...p}}),h}setTraditionalRemoteCaseParams(c,l){return c.className=l.className,c.isTraditionalRemoteCase=q.isTraditionalRemoteCase(l.className),c.remoteClassName=l.remoteClassName,c.action=l.action,c.viewName=H,c.gadgetId=l.gadgetId??hc.getUniqueGadgetId(),c.name=l.name,c.skipSemanticUrl=!0,ie}getDataObjectActions(c,l){if(!c)return Promise.reject(new Error(this.MSG_DATAVIEWID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_DATAVIEWID_STRING));const u=Ce,d=th.buildActionObject({dataViewID:c,dataViewParameters:l},this.c11nEnv),{promise:p}=this.actionsApiPromise(u,d);return Up({type:u,payload:{...d}}),p}getDescendants(c,l){if(!c)return Promise.reject(new Error(this.MSG_CASE_ID_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CONTEXT_STRING));const u=l||this.c11nEnv.getContextName(),d=th.buildActionObject({caseID:c,currentContext:u},this.c11nEnv),{promise:p}=this.actionsApiPromise("GET_DESCENDANTS",d),h=(g={...d,context:u},{type:iu,payload:g});var g;return Up(h),p}openWorkByHandle(c,l,u={}){if(!c)return Promise.reject(new Error("workID is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("workID must be a string"));if(!l)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.openWorkByHandle)return window.pms.plugins.c11n.openWorkByHandle(c,l);const d={insKey:c,acTargetName:u.targetContainer||W.PRIMARY,containerName:u.targetContainer||W.PRIMARY};let p=fe;const h=th.buildActionObject(d,this.c11nEnv),{promise:g}=this.actionsApiPromise(p,h);return u.channelName&&(h.headers=h.headers||{},h.headers[W.X_ORIGIN_CHANNEL]=u.channelName),h.className=l,q.isRemoteCase(l)&&(p=this.setRemoteCaseParamsForOpenCase(h,l,u.remoteCaseMeta)??p),Hi.getPreviewMode()&&![W.WORKAREA].includes(u.targetContainer)&&(h.debugInfo={debugId:Xp.generateUniqueID()}),Up({type:p,payload:{...u,...h}}),g}setRemoteCaseParamsForOpenCase(c,l,u={}){const{RemoteSystemID:d,RemoteClassName:p,name:h}=q.getRemoteCase(l);if(c.headers=c.headers||{},c.headers.RemoteSystemID=d,c.isRemoteCase=!0,c.remoteCaseClass=l,q.isTraditionalRemoteCase(l)){c.remoteCaseMeta=u;const d={className:l,name:h,action:At,remoteClassName:p};return this.setTraditionalRemoteCaseParams(c,d)}}openAssignment(c,l,u={isActionFromToDoList:!1,isChild:!1,context:"",viewType:"",skipBrowserSemanticUrlUpdate:!1,containerName:"",channelName:"",remoteCaseMeta:{}}){if(!c)return Promise.reject(new Error("assignmentID is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("assignmentID must be a string"));if(!l)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.openAssignment)return window.pms.plugins.c11n.openAssignment(c,l);const d={assignmentID:c,doDeleteCaseSummary:!0,containerName:u.containerName,isActionFromToDoList:u.isActionFromToDoList,isChild:!1};u.isChild&&(d.containerName=W.PRIMARY,d.isChild=u.isChild);let p=Al;const h=th.buildActionObject(d,this.c11nEnv),{promise:g}=this.actionsApiPromise(p,h);if(u.channelName&&(h.headers=h.headers||{},h.headers[W.X_ORIGIN_CHANNEL]=u.channelName),q.isRemoteCase(l)){const{RemoteClassName:c,RemoteSystemID:d,name:g}=q.getRemoteCase(l);if(h.headers=h.headers||{},h.headers.RemoteSystemID=d,q.isTraditionalRemoteCase(l)){h.remoteCaseMeta=u.remoteCaseMeta;const d={className:l,name:g,action:"openAssignment",remoteClassName:c};p=this.setTraditionalRemoteCaseParams(h,d)}}h.className=l,h.activeItemCaseViewMode=this.c11nEnv.getValue("context_data.caseViewMode"),Hi.getPreviewMode()&&![W.WORKAREA].includes(u.containerName)&&(h.debugInfo={debugId:Xp.generateUniqueID()});const f={context:h.context||u.context,containerName:h.containerName||u.containerName,targetContainerName:h.containerName||u.containerName,viewType:h.viewType||u.viewType,skipBrowserSemanticUrlUpdate:u.skipBrowserSemanticUrlUpdate};return Up({type:p,payload:{...h,...f}}),g}finishAssignment(c,l={outcomeID:"",jsActionQueryParams:{}}){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const u=Hu(c);let d=u;if(u?.includes("/workarea")&&(d=u.substring(0,d?.lastIndexOf("/workarea"))),(c=>{const l=Rn.getContextReferences(c);if(l)for(const[,u]of l)if(Zp.resolveContextTreeNodeProps(u.props).hasSuggestions)return!0;return!1})(u)){const c=[{type:"error",message:Bd.getLocaleValue(this.MSG_ACTIVE_SUGGESTION_UNATTENDED,"Messages")}];return er({messages:c,context:d,category:G.PAGE}),Promise.reject({type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR})}const p=ye,h=l?.isTriggeredFromDifferentContext,{caseID:g,assignments:f,localActionID:m,caseActions:y,caseInfo:I,businessID:E,caseTypeID:A,caseTypeName:_}=pn(c,this.c11nEnv,{isTriggeredFromDifferentContext:h}),C=sn(I);let S,T=!1;if(y){const c=y.find((c=>c.ID===m));T="Case"===c?.type}else S=Fp(u);let{assignmentID:N}=pn(c,this.c11nEnv,{isTriggeredFromDifferentContext:h});S?.context_data?.actionType&&(T=S.context_data.actionType===W.CASE,N=N||S.context_data.assignmentID);const P=((c,l,u)=>{let d;const p=c?.find((c=>c.ID===l))?.actions,h=p?.filter((c=>c.ID===W.FIX_BROKEN_ASSIGNMENTS))||[];return d=u&&h?.length>0?h[0].ID:u||((c,l)=>{if(!Array.isArray(c)||!l)throw new Error("Invalid parameters passed to getAssignmentActionID API");return c.find((c=>c.ID===l))?.actions?.[0]?.ID})(c,l),d})(f,N,m),[D,b]=g.split(" "),R={class:D,actionID:P,assignmentID:N,caseID:g,workID:b,containerName:this.c11nEnv.getContainerName(),containerItemID:c,isCaseWideAction:T,doDeleteCaseSummary:!0,isInCreateStage:C,businessID:E,caseTypeID:A,caseTypeName:_};c?.includes(W.MODAL)&&(R.containerName=W.MODAL,R.isModalAction=!0),R.outcome=l.outcomeID,R.jsActionQueryParams=l.jsActionQueryParams,I?.isLocalAction&&(R.viewType=fc.FORM);const O=th.buildActionObject(R,this.c11nEnv),{promise:v}=this.actionsApiPromise(p,O),x=this.c11nEnv.getValue("isProcessAction","isProcessAction");return O.isProcessAction=x,cu.executeOrQueueDeferredAction({type:p,payload:{...O,context:u}}),v}getNextWork(){const c=Al,l=th.buildActionObject({containerName:W.PRIMARY,isGetNextWork:!0},this.c11nEnv),{promise:u}=this.actionsApiPromise(c,l);return Up({type:c,payload:{...l}}),u}openStage(c){if(!c)return Promise.reject(new Error("stageID is required parameter for openStage"));const l=Al,u=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),d=this.c11nEnv.getCaseSummary().headers,p=th.buildActionObject({containerName:this.c11nEnv.getContainerName(),isOpenStage:!0,stageID:c},this.c11nEnv),{promise:h}=this.actionsApiPromise(l,p),g={type:l,payload:{...p,caseID:u,headers:d}};return Up(g),h}submitBulkAction(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l="SUBMIT_BULK_ACTION",u=this.c11nEnv.getValue(G.CASE_INFO.CASES),d=this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID),p={containerName:this.c11nEnv.getContainerName(),containerItemID:c,isCaseWideAction:!0,doDeleteCaseSummary:!0,isInCreateStage:!1};c&&c.includes(W.MODAL)&&(p.containerName=W.MODAL,p.isModalAction=!0);const h=th.buildActionObject(p,this.c11nEnv),{promise:g}=this.actionsApiPromise(l,h),f=Hu(c);return Up({type:l,payload:{...h,context:f,cases:u,actionID:d,isFormValid:Xc(f),classID:this.c11nEnv.getCurrentClassID()}}),g}submitBulkActionAsync(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l="SUBMIT_BULK_ACTION_ASYNC",u=this.c11nEnv.getValue(G.CASE_INFO.CASES),d=this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID),p={containerName:c.includes(W.MODAL)?W.MODAL:this.c11nEnv.getContainerName(),containerItemID:c,isCaseWideAction:!0,doDeleteCaseSummary:!0,isInCreateStage:!1,isModalAction:c.includes(W.MODAL)},h=th.buildActionObject(p,this.c11nEnv),{promise:g}=this.actionsApiPromise(l,h),f=Hu(c);return Up({type:l,payload:{...h,context:f,cases:u,actionID:d,isFormValid:Xc(f),classID:this.c11nEnv.getCurrentClassID()}}),g}openBulkAction(c,l){if(!c)return Promise.reject(new Error("actionID is required parameter for openBulkAction"));if("string"!=typeof c)return Promise.reject(new TypeError("actionID must be a string openBulkAction"));const{selectedList:u,runningMode:d}=l,p=l.type,h={selectedList:u,vcName:l.target,actionName:l?.name,actionID:c,doDeleteCaseSummary:!0,localActionType:p,runningMode:d,...l},g="OPEN_BULK_ACTION",f=th.buildActionObject(h,this.c11nEnv),{promise:m}=this.actionsApiPromise(g,f);return Up({type:g,payload:{...f}}),m}cancelBulkAction(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=be,u={containerItemID:c,context:c,skipReleaseLockRequest:!0,target:`${W.APP.APP}/${W.MODAL}`,caseViewMode:W.PERFORM_MODE,deleteContext:!0};Up({type:l,payload:u});const{promise:d}=this.actionsApiPromise(l,u);return d}approveCase(c){return c?"string"!=typeof c?Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING)):(Up({type:re,payload:{reference:G.CASE_INFO.APPROVALFLAG,value:W.APPROVED,context:c}}),this.finishAssignment(c)):Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED))}rejectCase(c){return c?"string"!=typeof c?Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING)):(Up({type:re,payload:{reference:G.CASE_INFO.APPROVALFLAG,value:W.REJECTED,context:c}}),this.finishAssignment(c)):Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED))}resolveDuplicateCase(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const[,l]=this.c11nEnv.getValue(G.CASE_INFO.DUPLICATECASEINSKEY).split(" "),u={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEFLAG,value:W.DUPLICATE,context:c}},d={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEID,value:l,context:c}};return Up([u,d]),this.finishAssignment(c)}ignoreDuplicateCase(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEFLAG,value:W.IGNORE,context:c}},u={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEID,value:"",context:c}},d={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEINSKEY,value:"",context:c}};return Up([l,u,d]),this.finishAssignment(c)}openLocalAction(c,l){if(!c)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_ACTION_ID_STRING));const u=l.caseID||this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID);if(window.pms?.plugins?.c11n?.openLocalAction)return l.caseID=u,pu(window.pms.plugins.c11n.openLocalAction,c,l);const d=l.assignKey||this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),p=l.type,h={caseID:u,assignmentID:d,vcName:l.target,actionName:l?.name,assignKey:d,actionID:c,doDeleteCaseSummary:!0,localActionType:p,...l},g="OPEN_LOCAL_ACTION",f=th.buildActionObject(h,this.c11nEnv),m=this.c11nEnv.getContextName(),{promise:y}=this.actionsApiPromise(g,f),I=Xu(m)[0];let E=!1;const A=q.getRemoteHeaderByContext(m);let _;if(A&&(f.headers={},f.headers.RemoteSystemID=A),!I)return _=m,Up({type:g,payload:{...f,contextName:m,continueExecution:E}}),y;_=$u(I);const C=xu(I);if(C?.accessedOrder.forEach((c=>{u===C.items[c].key&&(E=!0,_=C.items[c].context)})),!E||_&&"review"===Lp()?.getState()?.data[_]?.context_data?.caseViewMode)return Up({type:g,payload:{...f,contextName:m,continueExecution:E}}),y;const S=_,T=S&&S.includes(W.MODAL),N=l.assignKey||this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),P=Fp(_),D=P?.caseInfo?.assignments?P.caseInfo.assignments[0]?.actions[0]?.ID:void 0,b=this.c11nEnv.getContainerName(),R=this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),O=this.c11nEnv.getValue("isProcessAction","isProcessAction"),v=th.buildActionObject({context:S,containerItemID:_,assignmentID:N,actionID:D,caseID:u,containerName:b,caseType:R,isModalAction:T,isFormValid:!0,isProcessAction:O},this.c11nEnv);v.context=_;const x=Hu(_),w=this.c11nEnv.getCaseSummary(),M=sn(w),L=th.buildActionObject({caseID:u,containerItemID:_,cancelContext:x},this.c11nEnv);let U={};return T?(L.acTargetName=W.MODAL,L.isInCreateStage=M,L.isModalAction=T,U={...L}):U={...L,acName:Ct(this.c11nEnv.getContainerName(),L.context)},Up({type:g,payload:{...f,contextName:m,saveActionPayload:v,cancelActionPayload:U,continueExecution:E}}),y}openProcessAction(c,l){if(!c)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_ACTION_ID_STRING));const u=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID)||l.caseID;if(window.pms?.plugins?.c11n?.openProcessAction)return l.caseID=u,pu(window.pms.plugins.c11n.openProcessAction,c,l);const d=this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID)||l.assignKey,p=l.type,h={caseID:u,assignmentID:d,vcName:l.target,actionName:l?.name,assignKey:d,actionID:c,doDeleteCaseSummary:!0,processActionType:p,isProcessAction:!0,...l},g=El,f=th.buildActionObject(h,this.c11nEnv),{promise:m}=this.actionsApiPromise(g,f);return Up({type:g,payload:{...f}}),m}navigateToStep(c,l){if(!c)return Promise.reject(new Error("stepID is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("stepID must be a string"));if(!l)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const u="NAVIGATE_TO_STEP",d=this.c11nEnv.getValue(G.NEXT_ASSIGNMENT_INFO_ID)?this.c11nEnv.getValue(G.NEXT_ASSIGNMENT_INFO_ID):this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),p=sn(this.c11nEnv.getCaseSummary()),h={ID:d,stepID:c,acTargetName:this.c11nEnv.getContainerName(),targetContainerName:this.c11nEnv.getContainerName(),containerItemID:l,doDeleteCaseSummary:!0,isInCreateStage:p};l&&l.includes(W.MODAL)&&(h.acTargetName=W.MODAL);const g=th.buildActionObject(h,this.c11nEnv),{promise:f}=this.actionsApiPromise(u,g),m=Hu(l);return Up({type:u,payload:{...g,containerItemID:l,context:m}}),f}cancelAssignment(c,l){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const{CASE_INFO:u}=G,d=Ie,p=Hu(c),h=c&&c.includes(W.MODAL),g=this.c11nEnv.getCaseSummary(),f=sn(g),m=this.c11nEnv.getValue(u.CASE_INFO_ID),y=this.c11nEnv.getValue(u.ASSIGNMENT_ID),I=th.buildActionObject({caseID:m,containerItemID:c,context:p},this.c11nEnv);let E={};h?(I.acTargetName=W.MODAL,I.isInCreateStage=f,I.isModalAction=h,E={...I}):E={...I,acName:Ct(this.c11nEnv.getContainerName(),I.context)};const{promise:A}=this.actionsApiPromise(d,I);return Up({type:d,payload:E}),A.then((()=>{l||du({caseID:m,assignmentID:y,context:this.c11nEnv.getContextName()})}))}cancelLocalAction(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const{CASE_INFO:l}=G,u=c,d=Xe,p=c&&c.includes(W.MODAL),h=this.c11nEnv.getValue(l.CASE_INFO_ID),g=th.buildActionObject({caseID:h,containerItemID:c,context:u},this.c11nEnv);if(!hl(u))return new Nl(this.c11nEnv).removeContainerItem({containerItemID:c}).then((()=>{du({caseID:h,context:this.c11nEnv.getContextName()})}));Up({type:d,payload:{...g,isModalAction:p}});const{promise:f}=this.actionsApiPromise(d,g);return f}cancelCreateStageAssignment(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const{CASE_INFO:l}=G,u=Xe,d=c,p=d&&d.includes(W.MODAL),h=this.c11nEnv.getCaseSummary(),g=sn(h),f=this.c11nEnv.getValue(l.CASE_INFO_ID),m=th.buildActionObject({caseID:f,containerItemID:c,context:d},this.c11nEnv),y=this.c11nEnv.getValue("isProcessAction","isProcessAction"),I=kd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT);if(m.isProcessAction=y,g&&(p||I)&&!on(h)){const l=this.c11nEnv.getValue(W.CASE_INFO.IS_FIRST_ASSIGNMENT),f=hl(d);if(this.shouldDeleteCaseInCreateStage(f,l,I))return this.deleteCaseInCreateStage(c);Up({type:u,payload:{...m,isModalAction:p,isChildCase:un(h),isInCreateStage:g}})}const{promise:E}=this.actionsApiPromise(u,m);return E.then((()=>{}))}saveAssignment(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=Cl,u=this.getSaveActionPayload(c,!0),{promise:d}=this.actionsApiPromise(l,u);return Up(Sl(u)),d}saveAndClose(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=Cl,u=this.getSaveActionPayload(c),{promise:d}=this.actionsApiPromise(l,u);return Up(Sl(u)),d}deleteCaseInCreateStage(c,l=!1){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const u=_l,d=c,p=d&&d.includes(W.MODAL),h=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),g=this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),f=th.buildActionObject({caseID:h,caseType:g,containerItemID:c,context:d,ignoreCaseDeletion:l},this.c11nEnv),m=this.c11nEnv.getValue("isProcessAction","isProcessAction"),y=this.c11nEnv.getValue(G.CASE_INFO.PARENTCASEINFO);f.isProcessAction=m,f.parentCaseInfo=y;const I=`${W.APP.APP}/${Ou.PRIMARY}`,E=Nc(I,Ou.PRIMARY);f.parentContext=E,p&&(f.targetName=W.MODAL,f.containerName=Ou.MODAL,f.isModalAction=p),Up((c=>({type:_l,payload:c}))(f));const{promise:A}=this.actionsApiPromise(u,f);return A.then((()=>{du({caseID:h,context:this.c11nEnv.getContextName()})}))}getRecents(c){if(!c)return Promise.reject(new Error("maxResultsToFetch is required parameter"));if("number"!=typeof c)return Promise.reject(new TypeError("maxResultsToFetch must be number"));let{restApi:l}=Vd.getRestEndPoint("getRecents")||{};l=`${l}?maxResultsToFetch=${c}`;const u=P()+l;return rc(u,{method:"GET",headers:{}})}updateRecents(c,l,u,d){const{restApi:p}=Vd.getRestEndPoint("updateRecents")||{},h=`${P()}${p}`;return rc(h,{method:"PATCH",headers:{"Content-Type":"application/json"},body:{pyLabel:u,pyID:l,classID:c,ID:d}})}logout(){const{restApi:c}=Vd.getRestEndPoint("Logout")||{},l=`${P()}${c}`;return rc(l,{method:"GET",headers:{}}).then((c=>(Object.keys(Rn.rootNodes).forEach((c=>{ou.cleanCaches(c)})),Rn.rootNodes={},sessionStorage.clear(),Kp(),Promise.resolve(c))))}invoke(c,l={}){const u={method:l.method||"GET",body:l.body};return rc(c,u,this.c11nEnv.getContextName())}showCasePreview(c,l={}){this.loadView(c,"pyCasePreview",{container:Ou.PREVIEW,containerName:Ou.PREVIEW,context:G.APP.APP,...l})}showDataPreview(c,l,u){return c?"string"!=typeof c?Promise.reject(new TypeError("dataContext must be string")):l?"object"!=typeof l?Promise.reject(new TypeError("dataContextParameters must be an object")):this.showData("pyDataPreview",c,l,{container:Ou.PREVIEW,containerName:Ou.PREVIEW,context:G.APP.APP,...u||{},skipSemanticUrl:!0}):Promise.reject(new Error("dataContextParameters is required parameter")):Promise.reject(new Error("dataContext is required parameter"))}loadView(c,l,u){let d=th.buildActionObject({caseId:c,viewName:l,caseClassName:this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),RemoteSystemID:q.getRemoteHeaderByContext(this.c11nEnv.getContextName())},this.c11nEnv);u||(u={containerName:this.c11nEnv.getContainerName(),updateData:!1}),u&&"object"==typeof u?(Object.hasOwn(u,"container")&&!Object.hasOwn(u,"containerName")&&(u.containerName=u.container),d={...d,...u}):d={...d,containerName:this.c11nEnv.getContainerName()};const p=oe,{promise:h}=this.actionsApiPromise(p,d,!1);return Up({type:p,payload:{...d}}),h}showPage(c,l,u={containerName:"",skipSemanticUrl:""}){if(!c)return Promise.reject(new Error(this.MSG_PAGENAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_PAGENAME_STRING));if(!l)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.showPage)return window.pms.plugins.c11n.showPage(c,l,u);const d=th.buildActionObject({viewName:c,className:l},this.c11nEnv),p=ie,{promise:h}=this.actionsApiPromise(p,d);return Hi.getPreviewMode()&&(d.debugInfo={debugId:Xp.generateUniqueID()}),Up({type:p,payload:{...d,containerName:u.containerName||this.c11nEnv.getContainerName(),skipSemanticUrl:u.skipSemanticUrl}}),h}showInsight(c,l={}){if(!c)return Promise.reject(new Error(this.MSG_INSIGHTID_REQUIRED));const u=th.buildActionObject({},this.c11nEnv),d=le,{promise:p}=this.actionsApiPromise(d,u);return Up({type:d,payload:{...u,containerName:this.c11nEnv.getContainerName(),skipSemanticUrl:l.skipSemanticUrl||!1,insightID:c}}),p}showDashboard(c,l={}){if(!c)return Promise.reject(new Error(this.MSG_DASHBOARDID_REQUIRED));const u=th.buildActionObject({},this.c11nEnv),d=ue,{promise:p}=this.actionsApiPromise(d,u);return Up({type:d,payload:{...u,containerName:this.c11nEnv.getContainerName(),skipSemanticUrl:l.skipSemanticUrl||!1,dashboardID:c}}),p}showData(c,l,u,d={containerName:"",skipSemanticUrl:!1}){if(!c)return Promise.reject(new Error(this.MSG_PAGENAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_PAGENAME_STRING));if(!l)return Promise.reject(new Error("dataContext is required parameter"));if("string"!=typeof l)return Promise.reject(new TypeError("dataContext must be string"));const p=th.buildActionObject({pageName:c,dataContext:l,dataContextParameters:u},this.c11nEnv),h=ce,{promise:g}=this.actionsApiPromise(h,p);return Up({type:h,payload:{...p,...d,skipSemanticUrl:Boolean(d.skipSemanticUrl)}}),g}changeHandler(c,l){th.changeHandler(c,l)}eventHandler(c,l){th.eventHandler(c,l)}triggerFieldChange(c,l,u=!1){const d=this.c11nEnv.getContextName(),p=this.c11nEnv.getPageReference(),h=Zp.getContextPath(p,c);u||this.c11nEnv.getValidationApi().validate(l),this.c11nEnv.isInsideList()&&this.c11nEnv.getListActions().updateProperty(c,l);let g=this.c11nEnv.getValue(W.CLASS_ID);const f=c?c.split(".").filter((c=>!!c)):[];f.length>1&&(f.pop(),g=kp(`.${f.join(".")}.classID`,p,d)),c=Xp.trimDotForProperty(c),Up({type:ae,payload:{reference:h,value:l,context:d,pageReference:this.c11nEnv.getPageReference(),propertyName:c||this.c11nEnv.getComponentConfig().value,classID:g}})}updateFieldValue(c,l,u={}){const{removePropertyFromChangedList:d=!1,isArrayDeepMerge:p=!0,contextPageReference:h="",isListEntry:g=!1,skipDirtyValidation:f=!1}=u,m=this.c11nEnv.getContextName();let y=this.c11nEnv.getPageReference();const I=h?.startsWith(y)?h.replace(y,""):h;y=h||y;const E=Zp.getContextPath(y,c);let A=!1;this.c11nEnv.isInsideList()&&this.c11nEnv.getListActions().updateProperty(I?`${I}${c}`:c,l,{isArrayDeepMerge:p}),this.c11nEnv.isBulkAction()&&(A=!0),c||(c=this.c11nEnv.getStateProps().value),Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,property:c,pageReference:y,context:m,isListEntry:g}),Up({type:re,payload:{reference:E,value:l,context:m,isArrayDeepMerge:p,skipDirtyValidation:f,...A&&{isStrictTracking:A},...d&&{removePropertyFromChangedList:d}}})}activateModalContainerItem(c){const l=ke,{context:u}=c,d=u&&u.includes(W.MODAL),p=th.buildActionObject({...c,containerName:this.c11nEnv.getContainerName(),containerItemID:u},this.c11nEnv);d&&(p.containerName=W.MODAL,p.isModalAction=d),Up({type:l,payload:p});const{promise:h}=this.actionsApiPromise(l,p);return h}refreshCaseView(c,l,u,d={}){const{promise:p,actionMgrID:h}=this.actionsApiPromise("REFRESH_DATA"),{autoDetectRefresh:g,propertyName:f,preserveClientChanges:m,classID:y,context:I,optionalPayload:E}=d,A={actionMgrID:h,caseViewAction:!0,preserveClientChanges:m,propertyName:f,classID:y,optionalPayload:E};d.refreshFor&&(A.refreshFor=d?.refreshFor);const _=I||this.c11nEnv.getContextName(),C=this.c11nEnv.getPageReference();return!this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.IS_MULTI_RECORD_DATA)&&g&&(((c,l)=>ln(c)&&!cn(c,l))(_,C)||cn(_,C))?Gn(_,u,A):kn(c,l,_,u,A),p}openEmbeddedDataModal(c,l,u,d,p,h){const g=yt,f=l.getCaseInfo().getKey(),m=`${l.getPageReference().replace(G.CASE_INFO.CASE_INFO_CONTENT,"")}${u}[${d}]`,y={targetProperty:u,index:d,viewID:c,ID:f,actionType:p,interestPage:Xp.convertPageRefToClipboardPageNotation(m),heading:h},I=th.buildActionObject(y,this.c11nEnv),{promise:E}=this.actionsApiPromise(g,I);return kd.getFeatureMap().granularUIRefresh&&(l.getMetadata().config.children[0].children||[]).forEach((c=>{const u=rn.trimAnnotation(c.config.value),d=up(u.startsWith(".")?u.replace(".",""):u,c.config.classID);if(d?.isDeclarativeTarget){const c=l.getPageReference();Rn.addFieldNode(l.getContextName(),c+m,l.viewName,u,"",{isDeclarativeTarget:!0,propertyName:u,pageReference:c+m})}})),Up({type:g,payload:{...I,containerName:G.MODAL,skipSemanticUrl:!0}}),E}submitEmbeddedDataModal(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=It,u=this.c11nEnv.getPageReference().replace(G.CASE_INFO.CASE_INFO_CONTENT,""),d=Hu(c),p={containerItemID:c,containerName:this.c11nEnv.getContainerName(),doDeleteCaseSummary:!0,isInCreateStage:!1,ID:this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),viewID:this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.VIEW_NAME),isFormValid:Xc(d),interestPage:Xp.convertPageRefToClipboardPageNotation(u),parentContext:this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.PARENT_CONTEXT),isModalAction:!1,target:this.c11nEnv.getTarget()};c&&c.includes(W.MODAL)&&(p.containerName=W.MODAL,p.isModalAction=!0);const h=th.buildActionObject(p,this.c11nEnv),{promise:g}=this.actionsApiPromise(l,h);if(hl(d)){const[c,l,u]=In(this.c11nEnv.getPageReference());Rn.mutatePageList(this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.PARENT_CONTEXT),c,l,{type:rt,rowIndex:u}),Up({type:rt,payload:{pageReference:this.c11nEnv.getPageReference(),context:this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.PARENT_CONTEXT),isListEntry:!0}})}return cu.executeOrQueueDeferredAction({type:l,payload:{...h,context:d}}),g}fillFormWithAI(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=Hu(c),u=this.c11nEnv.getPageReference(),{promise:d,actionMgrID:p}=this.actionsApiPromise(Et);return Gn(l,u,{actionMgrID:p,isFillFormWithAI:!0,preserveClientChanges:!1}),d}},gu=class{constructor(c){this.c11nEnv=c}async getCaseStages(c,l){const u={caseID:c},{restApi:d,reqType:p}=eg("getCaseStages",u);return(await rc(d,{method:p},l)).data.stages}getCaseTypeName(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_TYPE_NAME)}getName(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_NAME)}getClassName(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_TYPE_ID)}getAvailableProcesses(){return this.c11nEnv.getValue(W.CASE_INFO.AVAILABLEPROCESSES)}getKey(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ID)}getID(){const c=this.getKey();if(c){const[,l]=c.split(" ");return l||c}}getAssignmentID(){return this.c11nEnv.getValue(W.CASE_INFO.ASSIGNMENT_ID)}getActions(){return this.c11nEnv.getValue(W.CASE_INFO.ACTION_BUTTONS)}getActiveFlowActionID(){return this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID)||this.c11nEnv.getValue(W.CASE_INFO.ASSIGNMENTACTION_ID)}getParentCaseInfo(){return this.c11nEnv.getValue(W.CASE_INFO.PARENTCASEINFO)}isPerform(){return this.c11nEnv.getValue(`${W.CONTEXT_DATA}${W.CASE_VIEW_MODE_PROP}`)===W.PERFORM_MODE}isReview(){return this.c11nEnv.getValue(`${W.CONTEXT_DATA}${W.CASE_VIEW_MODE_PROP}`)===W.REVIEW_MODE}isAssignmentInCreateStage(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO);return sn(c)}isLocalAction(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO);return on(c)}getCurrentAssignmentViewName(){let c=null,l=!1;if(this.c11nEnv.getValue("context_data.caseViewMode")===W.PERFORM_MODE){if(this.isLocalAction())return c;if(this.isAssignmentInCreateStage())l=!0;else{const l=this.c11nEnv.getTarget(),u=this.c11nEnv.getContextName(),d=wu(l,u),{config:p}=l&&u?d&&d.view:this.c11nEnv.getMetadata();c=p?.type===W.VIEW?p?.name:null}(c&&c.startsWith(W.PROPERTY_ANNOTATION)||l)&&(c=this.c11nEnv.getValue(W.CASE_INFO.VIEW_NAME))}return c}getActionRefreshConditions(){const c=this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID),l=K(this.c11nEnv.getContextName());let u;l&&(u=Fp(l));const d=u?.caseInfo?.availableActions,p=Fp(this.c11nEnv.getContextName()),h=p?.caseInfo?.refreshConditions;if(c){if(d){const l=d.find((l=>l.ID===c));return l?l.refreshConditions:h}return h}return this.c11nEnv.getValue(W.CASE_INFO.ACTION_REFRESH_CONDITIONS)}getBusinessID(){return this.c11nEnv.getValue(W.CASE_INFO.BUSINESS_ID)}getAssignments(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO)?.assignments}getChildAssignments(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO)?.childCases?.[0]?.assignments}isCaseWideLocalAction=()=>{const c=this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID),l=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS);if(l&&c){const u=l.find((l=>l.ID===c));return"Case"===u?.type}return!1};getAllAssignments(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS),l=this.c11nEnv.getValue(W.CASE_INFO.ASSIGNMENT_LABEL),u=this.c11nEnv.getValue(W.CASE_INFO.D_CASE_ASSIGNMENTS_RESULTS)||[],d=this.getChildAssignments()||[];let p=JSON.parse(JSON.stringify(d));p=p.map((c=>(c.isChild=!0,c)));const h=[...u,...p];let g=JSON.parse(JSON.stringify(h));return c&&!this.isPerform()&&(g=g.map((c=>(c.name=this.getActiveCaseActionName()||c?.name||l,c)))),g}getActiveCaseActionName(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS),l=this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID),u=c.find((c=>c.ID===l));return u?.name||""}getFirstCaseActionName(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS);return c[0]?.name||""}hasAssignments(){const c=this.c11nEnv.getValue(W.CASE_INFO.D_CASE_ASSIGNMENTS_RESULTS),l=this.getChildAssignments();return!!(c||l||this.isCaseWideLocalAction())}hasMessages=()=>!!this.c11nEnv.getValue("caseMessages");hasGetNextWorkLinks(){return!!this.c11nEnv.getValue(W.CASE_INFO.GETNEXTWORK)}},{RESOURCE_TYPES:fu}=G,yu=class{static openCase(c,l,u,d={}){const p={insKey:c,acTargetName:u,actionMgrID:gn.getNextActionMgrId(),context:l,...d},h=fe;d&&d.channelName&&(p.headers={},p.headers[W.X_ORIGIN_CHANNEL]=d.channelName);const{promise:g}=gn.actionManagerPromise(h,p.actionMgrID);return Up({type:h,payload:p}),g}static openAssignment(c,l,u,d={}){const p={assignmentID:c,vcName:u,doDeleteCaseSummary:!0,actionMgrID:gn.getNextActionMgrId(),context:l,...d},h=Ee;d&&d.channelName&&(p.headers={},p.headers[W.X_ORIGIN_CHANNEL]=d.channelName);const{promise:g}=gn.actionManagerPromise(h,p.actionMgrID);return Up({type:h,payload:{...p}}),g}static createCase(c,l,u,d={}){const p=ge,h={class:c,acTargetName:u,actionMgrID:gn.getNextActionMgrId(),context:l,...d};d&&d.channelName&&(h.headers={},h.headers[W.X_ORIGIN_CHANNEL]=d.channelName);const{promise:g}=gn.actionManagerPromise(p,h.actionMgrID);return Up({type:p,payload:{...h}}),g}static getNextWork(c,l,u={}){const d=Ee,p={isGetNextWork:!0,vcName:l,doDeleteCaseSummary:!0,actionMgrID:gn.getNextActionMgrId(),context:c,...u},{promise:h}=gn.actionManagerPromise(d,p.actionMgrID);return Up({type:d,payload:{...p}}),h}static getOpenedCaseItems(c){const l=[],u=xu(c);if(u){const{items:d={}}=u,p=Object.keys(d),h=$u(c);p.forEach((u=>{if(d[u]&&(d[u].resourceType===fu.CASE||d[u].resourceType===fu.ASSIGNMENT)){const{key:p="",context:g}=d[u],f=d[u],m=p.substring(p.indexOf(" ")+1),y=kp(".caseTypeID",W.CASE_INFO.CASE_INFO,g),I=h===u;l.push({...f,key:p,workID:p,caseID:m,className:y,context:g,containerItemID:u,target:c,active:I})}}))}return l}static getCaseDetails=c=>{const l={caseID:c},{restApi:u,reqType:d}=eg(ze,l);return rc(u,{method:d})};static getCaseBulkActions=async c=>{const{restApi:l,reqType:u}=eg("getBulkActions"),d=c.map((c=>({ID:c}))),p=d.length,h=p/5,g={},f=[];for(let I=0;I<p;I+=h)g.cases=d.slice(I,I+h),g.cases.length&&f.push(rc(l,{method:u,body:g}));const m=await Promise.all(f);let y=[];for(let I=0;I<m.length;I+=1)0!==I?y.length&&(y=y.filter((c=>m[I].data.availableActions.some((l=>c.ID===l.ID))))):y=m[I].data.availableActions;return y};static getCaseBulkActionsByCaseTypeID=async c=>{const l={casetypeID:c},{restApi:u,reqType:d}=eg("getCaseBulkActions",l),p=await rc(u,{method:d});let h=[];return p.data?.availableActions?.length&&(h=p.data.availableActions),h}};class Bu{constructor(c){Bu._instance=this,this.context=`${c}/${W.SUGGESTION}`,Lp()?.getState().data?.[this.context]||Up({type:Be,payload:{context:this.context,data:{}}})}getField(c){return kp(c,"",this.context)}setField(c,l){Up({type:re,payload:{reference:c,value:l,context:this.context}})}removeField(c){Up({type:_e,payload:{reference:c,context:this.context}})}setState(c){Up(oh({context:this.context,data:c,isArrayDeepMerge:!0}))}}const Iu=Bu,Eu=class{static getSharedState(c){const l=c.startsWith(".")?c.substring(1):c,u=jp();return u?Xp.getIn(u,l):null}static setSharedState(c,l){c&&Up($h({key:c,value:l}))}static updateState(c,l,u,d={}){const{isArrayDeepMerge:p=!0,pageReference:h}=d;c&&l&&Up(Bh({context:c,reference:h?`${h}.${l}`:l,value:u,isArrayDeepMerge:p}))}static getSuggestionsContext(c){return new Iu(c)}},Au=class{constructor(c,l,u){this.meta=c,this.datasource=l,this.index=0,this.options=u,this.datasourceObj=Zp.getPropertyValue(l,u.pageReference,u.context)}hasNext(){return this.index<this.datasourceObj.length}next(){if(!this.hasNext())throw new Error("No Children");const c=Zp.getContextPath(this.datasource,this.index);return this.index+=1,Nu({meta:this.meta,options:{...this.options,pageReference:c}})}resetIndex(){this.index=0}};class qu{constructor(c,l){this.children=c,this.index=0,this.options=l}hasNext(){return this.index<this.children.length}next(){if(!this.hasNext())throw new Error("No Children");const c=this.children[this.index];return this.index+=1,Nu({meta:c,index:this.index,options:this.options})}resetIndex(){this.index=0}}class Yu{static allowedComponetsForBulkProcessing={Currency:!0,TextInput:!0,Phone:!0,Percentage:!0,Email:!0,Integer:!0,Decimal:!0,URL:!0,SemanticLink:!0,Checkbox:!0,RadioButtons:!0,DateTime:!0,Date:!0,Time:!0,Text:!0,TextArea:!0,RichText:!0,Dropdown:!0,Search:!0,Location:!0,Attachment:!0,AutoComplete:!0,MultiSelect:!0,UserReference:!0,Region:!0,TextContent:!0,View:{Forms:!0,DefaultForm:!0,OneColumn:!0,TwoColumn:!0,ThreeColumn:!0}};static getItemView(c,l){const u=[];if(c&&["portal","view"].includes(l)){const{accessedOrder:l,items:d}=c;if(l&&d){const c=l[l.length-1];d[c]&&d[c].view&&Object.keys(d[c].view).length>0&&u.push(d[c])}}return u}static getDependentProperties=c=>{let l=[];return c._rawConfig?.config?.parameters?l=Object.values(c._rawConfig?.config?.parameters||{}):c.getFieldMetadata(c.getStateProps()?.value)?.datasource?.parameters&&(l=(c.getFieldMetadata(c.getStateProps()?.value)?.datasource?.parameters||[]).map((c=>c?.value))),l.filter((c=>el.isProperty(c))).map((c=>el.getPropertyName(c)))}}const _u=new Yu;let Cu;Object.freeze(_u);const Su=(c,l,u)=>{c&&(Object.keys(c).forEach((d=>{if("children"!==d){const p=c[d],h=rn.trimAnnotation(p);if("string"!=typeof h&&"string"!=typeof p||!(Xp.isValidAnnotation(p)&&Xp.isPropertyRef(h)||p.startsWith("@W ")||p.startsWith("@E ")||p.startsWith("@ATTACHMENT "))){if(Array.isArray(h))h.forEach(((c,u)=>{const p={parentStateObj:l,parentKey:d,isObjHasValue:!!l[d]};l[d]=l[d]||[],l[d][u]=Object.create({}),Su(c,l[d][u],p)}));else if(h&&"object"==typeof h&&"exp"!==h.type){const c={parentStateObj:l,parentKey:d,isObjHasValue:!!l[d]};l[d]=l[d]||{},Su(h,l[d],c)}}else u&&u.parentKey&&(u.isObjHasValue=!0),l[d]=h}})),u&&!u.isObjHasValue&&delete u.parentStateObj[u.parentKey])},Tu=(c,l)=>{c._inheritedProps=c._inheritedProps||[],c.inheritedProps=[...c._inheritedProps,...Xp.deepClone(l.inheritedProps)]};class Zu{constructor(c){const{meta:l,isRoot:u,options:d={},useCustomContext:p}=c;this.meta=l,this._isRoot=u,this.options=d,this.useCustomContext=p,this._rawConfig=l?.config,this._isExpressionExist=!1,this._isWhenExist=!1,this._isValidatorExist=!1,this._pageReference="",this._referenceContext="",this._contextName="",this._stateProps={},this._actions={},this._children="",this._additionalRegisteredProps={},this._caseInfo=null,this.viewName=d.viewName,this.parentViewName=d.viewName??"",this._referenceList=d.referenceList||"",this._isInsideList=d.isInsideList||!1,this._inheritedConfig={},this._localeRuleName=d.localeReference,this._containerTarget=d.target,this.xrayInfo={},this._readOnly=l?.config?.readOnly||d.readOnly,this._hasSuggestions=!1,this._actionsApi=null,this._classID=null,this.index=c.index,this.categoryName=d.categoryName||"",d.inheritedConfig&&(this._inheritedConfig=Xp.deepClone(d.inheritedConfig)),l?.config?.inheritedProps&&Tu(this._inheritedConfig,l?.config),Su(this._rawConfig,this._stateProps),this._isState=!Xp.isObjectEmpty(this._stateProps),this._rawConfig&&this._rawConfig.config&&(this._isExpressionExist=Xp.isExpressionExist(this._rawConfig.config),this._isWhenExist=Xp.isWhenExist(this._rawConfig.config),this._isValidatorExist=Lr.isValidatorExist(this._rawConfig.config)),this._isRoot?this._contextName=G.APP.APP:this._contextName=this.meta?.config?.contextName||this.options.context,this._type=this.meta?.type;let h=this.options.pageReference;if(this.options.pageReference&&(h=rn.handleAnnotation(this.options.pageReference,this)),this._pageReference=Zp.getContextPath(h||this.options.parentPageReference,this._pageReference),this._pageReference||(this._pageReference=""),"reference"===this._type&&(this._rawConfig=l),"reference"===this._type&&Xp.isWhenExist({visibility:this.meta?.config?.visibility})&&$n(this.viewName,this._contextName,this._pageReference),"reference"!==this._type&&l&&(this._rawConfig=Zp.resolveReference(l,this)),this._rawConfig){const c=this.getRawConfigProps();c&&(this._localeRuleName=rn.trimAnnotation(c.localeReference)||d.localeReference,this._isExpressionExist=Xp.isExpressionExist(c),this._isWhenExist=Xp.isWhenExist(c),this._isValidatorExist=Lr.isValidatorExist(c)),this._children=this._rawConfig.children,this._rawConfig?.type?.toLowerCase()===W.VIEW&&this._rawConfig.name&&(this.viewName=rn.handleAnnotation(this._rawConfig.name,this)),this.options.hasForm&&(c=>{let l=!1;if(c.isWhenExist())l=!0;else{const u=c.getRawMetadata()?.config?.value;if(u){const d=up(rn.getLeafPropertyName(u),Zp.resolveClassID(u,c.getPageReference(),c.getContextName()));l=!!d?.isDeclarativeTarget,!l&&d?.datasource?.parameters&&(l=((c,l)=>{let u=!1;if(Array.isArray(l)){const d=l=>{const d=l.value;return d.startsWith("@P")&&(u=Bn(c,d)),u};l.some(d)}else if("object"==typeof l)for(const d in l)if(l[d].startsWith("@P")&&(u=Bn(c,l[d]),u))break;return u})(c,d?.datasource?.parameters)),l||(l=d?.datasource?.tableType===W.DECISION)}}l&&$n(c.getCurrentView(),c.getContextName(),c.getPageReference())})(this)}}isDeclarativeTarget(){let c=!1;if(this.getValue(this._pageReference)||""===this._pageReference){const l=rn.trimAnnotation(this.getPropertyName()),u=this.getFieldMetadata(l);c=u?.isDeclarativeTarget||!1}return c}_getPropertyName(){const c=rn.trimAnnotation(this.getPropertyName());return""===this._pageReference&&c.startsWith(".")?c.substring(1,c.length):c}addFieldNode(){const c=this._getPropertyName(),{value:l,label:u,required:d,readOnly:p,disabled:h,visibility:g,validationType:f,caption:m,allowMultiple:y}=this.getRawConfigProps();if(this.getValue(this._pageReference)||""===this._pageReference){const I="Address"===this._type&&this._rawConfig?.config?.associatedView?rn.trimAnnotation(this._rawConfig.config.associatedView):"",E=u||m,A={target:this._containerTarget,context:this._contextName,pageReference:this._pageReference,propertyName:rn.trimAnnotation(l),label:E?.startsWith("@")?rn.handleAnnotation(E,this,void 0):E,required:d,readOnly:p,disabled:h,visibility:g||this.options?.visibility,skipRequiredValidation:this.options?.isBulkAction,inheritedProps:this.getInheritedProps(),useCustomContext:this.useCustomContext,value:l,validationType:f,componentName:this._rawConfig?.type,hasSuggestions:this._hasSuggestions,isInsideList:this.isInsideList(),index:this.index,allowMultiple:y,isDeclarativeTarget:this.isDeclarativeTarget()};Rn.addFieldNode(this._contextName,this._pageReference,(I||this.categoryName||this.viewName)??"",c,this.getValue(c),A)}}removeNode(){if(!this.isVisible())if(Object.hasOwn(this._rawConfig?.config??{},"value"))Rn.removeFieldNode(this._contextName,this._pageReference,this.viewName||"",rn.trimAnnotation(this.getPropertyName()),this.index);else{const c=this._rawConfig?.config?.context?`${this._pageReference}${this._rawConfig?.config.context}`:this._pageReference;Rn.removeViewNode(this._contextName,c,this._rawConfig?.config?.name||this._rawConfig?.config?.id||"",this.index)}}addViewNode(){this._rawConfig?.type?.toLowerCase()===W.VIEW&&this._rawConfig.name&&this.viewName&&Rn.addViewNode(this._contextName,this._pageReference,this.viewName,this.parentViewName),"Group"===this._rawConfig?.type&&this._rawConfig?.config?.id&&Rn.addViewNode(this._contextName,this._pageReference,this._rawConfig.config.id,this.parentViewName),"Address"===this._rawConfig?.type&&this._rawConfig?.config?.associatedView&&Rn.addViewNode(this._contextName,this._pageReference,rn.trimAnnotation(this._rawConfig.config.associatedView),this.parentViewName),"deferload"===this._rawConfig?.type?.toLowerCase()&&this._rawConfig.config?.name&&Rn.addViewNode(this._contextName,this._pageReference,this._rawConfig.config.name,this.parentViewName)}addWhenNode(){let c="",l="";const u=Xp.getWhenNames(this._rawConfig?.config),d=this.getRawConfigProps();if(d?.type&&d?.type?.toLowerCase()===W.VIEW)l=W.CONTEXT_TREE_NODE_TYPES.VIEW,c=this.getCurrentView();else{l=W.CONTEXT_TREE_NODE_TYPES.FIELD;const u=this.getPropertyName();c=rn.isProperty(u)?rn.trimAnnotation(u):""}c&&u.forEach((u=>{Rn.addWhenNode(this.getContextName(),this.getPageReference(),l,c,u,{pageReference:this.getPageReference(),context:this.getContextName()})}))}updateContextTree(){if(this.isVisible()&&(this.addViewNode(),this._rawConfig?.config&&Object.hasOwn(this._rawConfig.config,"value")&&"DISPLAY_ONLY"!==this._inheritedConfig.displayMode&&"DISPLAY_ONLY"!==this._rawConfig.config?.displayMode&&this.addFieldNode(),(this._rawConfig?.type?.toLowerCase()!==W.VIEW||"Editable"===this._rawConfig.config?.renderMode)&&this._rawConfig?.config?.referenceList)){const{value:c,label:l,required:u,readOnly:d,disabled:p,visibility:h,validationType:g,selectionMode:f,selectionList:m,selectionKey:y,referenceList:I,renderMode:E,caption:A}=this.getRawConfigProps(),_=l||A;Rn.addPageListNode(this._contextName,this._pageReference,this.viewName??"",rn.trimAnnotation(this.getPropertyName()),{target:this._containerTarget,context:this._contextName,pageReference:this._pageReference,propertyName:rn.trimAnnotation(this.getPropertyName()),label:_?.startsWith("@")?rn.handleAnnotation(_,this,void 0):_,required:u,readOnly:d,disabled:p,visibility:h||this.options.visibility,skipRequiredValidation:this.options.isBulkAction,inheritedProps:this.getInheritedProps(),useCustomContext:this.useCustomContext,value:c,validationType:g,componentName:this._rawConfig.type,type:this._rawConfig.config?.type,hasSuggestions:this._hasSuggestions,isInsideList:this.isInsideList(),selectionMode:f,selectionList:m,renderMode:E,referenceList:I,selectionKey:y,index:this.index});const C=this.getValue(rn.trimAnnotation(this.getPropertyName()),this._pageReference)||[];Rn.updatePageListNode(this._contextName,this._pageReference,rn.trimAnnotation(this.getPropertyName()),C.length)}this.isWhenExist()&&this.addWhenNode(),this.removeNode()}setXRayInfo(c){Xp.mergeDeep(c,this.xrayInfo)}getXRayInfo(){return this.xrayInfo}getStateProps(){return this._stateProps}setStateProps(c){Xp.mergeDeep(c,this._stateProps)}getMetadata(){return this._rawConfig}getCaseInfo(){return this._caseInfo||(this._caseInfo=new gu(this)),this._caseInfo}getCaseLocaleReference(){const c=this.getCaseInfo(),l=c.getClassName();return Bd.getCaseLocaleReference(l,c.getCaseTypeName())}getListActions(){return wr(this)}getReferenceList(){return this._referenceList}isInsideList(){return this._isInsideList||/\[\d+\]/g.test(this.getPageReference())}getRawMetadata(){return this.getMetadata()}setReferenceList(c){this._referenceList=c}getComponentConfig(){return this.getMetadata()?.config||{}}isExpressionExist(){return this._isExpressionExist}isWhenExist(){return this._isWhenExist}isConditionExist(){return this.isExpressionExist()||this.isWhenExist()}isBoundToState(){return this._isState}getPageReference(){return this._pageReference}getPropertyName(){const c=this.getComponentConfig();let l;return l="multi"===c.selectionMode?"selectionList":"single"===c.selectionMode&&c.selectionKey?"selectionKey":"Editable"===c.renderMode?"referenceList":"Address"===this._type?"addressProp":"value",this.getComponentConfig()[l]}getFullReference(){const c=this.getPageReference(),l=this.getPropertyName();return Zp.getContextPath(c,l)}getContextName(){return this._contextName}getContainerName(){const{type:c}=this.getMetadata()||{},l=[W.CONTAINERS.ROOT_CONTAINER,W.CONTAINERS.VIEW_CONTAINER,W.CONTAINERS.FLOW_CONTAINER,W.CONTAINERS.MODAL_VIEW_CONTAINER,W.CONTAINERS.PREVIEW_VIEW_CONTAINER,W.CONTAINERS.HYBRID_VIEW_CONTAINER],{acTargetName:u=Ou.PRIMARY,name:d,routingInfo:p}=this.getComponentConfig();return(c&&l.includes(c)||"@ROUTING_INFO"===p)&&d?d:this.options.containerName||u}getTarget(){return this._containerTarget}getCurrentView(){return this.viewName}populateSuggestionProps(c){if(this._rawConfig?.config&&Object.hasOwn(this._rawConfig.config,"value")&&this.getStateProps()?.value&&this.options.hasForm){const l=f?.getStore()?.getState()?.data[`${this.getContextName()}/${W.SUGGESTION}`],u=this.getStateProps()?.value,d=Zp.getContextPath(this.getPageReference(),u),p=l?Eu.getSuggestionsContext(this.getContextName()).getField(d):void 0;this._hasSuggestions=!!p,c.hasSuggestions=this._hasSuggestions,this._stateProps.hasSuggestions=this._hasSuggestions}}getConfigProps(c={}){const l={...Mr.getDefaultsforType(this._type),readOnly:this._readOnly,...this._rawConfig&&this._rawConfig.config,...this._additionalRegisteredProps,...this._inheritedConfig};return this.populateSuggestionProps(l),this.resolveConfigProps(l,c),Xp.resolveStringBooleans(c)}getRawConfigProps(){const c={...Mr.getDefaultsforType(this._type),...this._rawConfig?.config,...this._additionalRegisteredProps,...this._inheritedConfig};return this.populateSuggestionProps(c),c}resolveConfigProps(c,l={}){return c&&(Zp.resolveProps(c,l,this),rn.handleComponentMapping(l,{type:this.getComponentName(),config:c},this)),l}registerAdditionalProps(c={}){return Object.assign(this._additionalRegisteredProps,c),Su(c,this._stateProps),this.resolveConfigProps(this._additionalRegisteredProps)}deRegisterAdditionalProps(c=[]){return c.forEach((c=>{delete this._additionalRegisteredProps[c]})),!0}populateAdditionalProps(c){const l=this.getComponentName(),u=this.getComponentConfig(),d=l===W.ROOT_CONTAINER&&"portal"!==c.renderingMode;if(l===W.MODAL_VIEW_CONTAINER||l===W.CASE_CREATE_STAGE){const l=$u(`${W.APP.APP}/${this.getContainerName()}`),u=Qn({context:l,category:G.PAGE});c.pageMessages=u,this._stateProps.pageMessages=c.pageMessages}if(this.isEditable()){let{value:l}=this.getStateProps();void 0===l&&"multi"===this.getComponentConfig()?.selectionMode?l=this.getStateProps().selectionList||rn.trimAnnotation(this.getRawConfigProps().selectionList):!l&&"Editable"===this.getComponentConfig()?.renderMode&&this.getStateProps().referenceList&&(l=this.getStateProps().referenceList);const u=Qn({property:l,pageReference:this.getPageReference(),context:this.getContextName(),type:G.MESSAGES.MESSAGES_TYPE_ERROR}),d=Qn({property:l,pageReference:this.getPageReference(),context:this.getContextName(),type:G.MESSAGES.MESSAGES_TYPE_INFO});if(u&&u[0]){const l=u.map((c=>Bd.getLocaleValue(c.message,"Messages")));c.validatemessage=l.join(". "),c.status=W.FIELD_LEVEL_ERROR,this._stateProps.validatemessage=c.validatemessage,this._stateProps.status=c.status}d&&d[0]&&(c.infoMessage=d[0].message,c.status=W.FIELD_LEVEL_WARNING,this._stateProps.infoMessage=c.infoMessage,this._stateProps.status=c.status)}if(l===W.ROOT_CONTAINER){const l=nr(d,$u(`${W.APP.APP}/${this.getContainerName()}`));c.httpMessages=l,this._stateProps.httpMessages=c.httpMessages;const u=Eu.getSharedState("isLoggedOut");c.isLoggedOut=u,this._stateProps.isLoggedOut=u;const p=Qn({context:W.APP.ROOT,category:"PAGE"});c.pageMessages=p,this._stateProps.pageMessages=c.pageMessages}if(l===W.HYBRID_VIEW_CONTAINER){const l=Qn({context:W.APP.APP,category:W.HTTP});c.httpMessages=l,this._stateProps.httpMessages=l}if(l===W.APP_SHELL&&c.portalDocMode===W.CONTAINER_TYPE.MULTIPLE&&(c.activeCases=yu.getOpenedCaseItems(`${G.APP.APP}/${W.PRIMARY}`),this._stateProps.activeCases=c.activeCases),l===W.APP_SHELL){const l=Qn({context:W.APP.APP,category:"PAGE"});c.pageMessages=l,this._stateProps.pageMessages=c.pageMessages}if(c.value&&l===W.SCALARLIST&&(this._stateProps.value=c.value),l===W.APP_SHELL||l===W.MODAL_VIEW_CONTAINER||l===W.CASE_CREATE_STAGE||u.template===W.CASE_PREVIEW){let l=Qn({context:W.APP.APP,category:"HTTP"});const u=Qn({context:$u(`${W.APP.APP}/${this.getContainerName()}`),category:"HTTP"});l?u&&(l=l.concat(Qn({context:$u(`${W.APP.APP}/${this.getContainerName()}`),category:"HTTP"}))):l=Qn({context:$u(`${W.APP.APP}/${this.getContainerName()}`),category:"HTTP"}),c.httpMessages=l?l.map((c=>c.message)):l,this._stateProps.httpMessages=c.httpMessages,l?.forEach((l=>{l.errorDetails&&(c.errorDetails=c.errorDetails?c.errorDetails.push(...l.errorDetails):l.errorDetails,this._stateProps.errorDetails=c.errorDetails),l.correlationID&&(c.correlationID=l.correlationID)}))}if(l===W.VIEW_CONTAINER||l===W.FLOW_CONTAINER||l===W.MODAL_VIEW_CONTAINER||l===W.PREVIEW_VIEW_CONTAINER||l===W.ROOT_CONTAINER){if(c.routingInfo=St(this.getContainerName(),this._contextName),l===W.ROOT_CONTAINER&&(c.rootConfig=Yu.getItemView(c.routingInfo,c.renderingMode),this._stateProps.rootConfig=c.rootConfig),this._stateProps.routingInfo=c.routingInfo,l===W.FLOW_CONTAINER){const l=Qn({context:this.getContextName(),category:W.CASEMESSAGES}),u=this.getContextName();c.caseMessages=l,this._stateProps.caseMessages=c.caseMessages,c.caseViewMode=this.getValue("context_data.caseViewMode"),this._stateProps.caseViewMode=c.caseViewMode;const d=Xu(u)[0];if(d){const l=$u(d),u=f?.getStore()?.getState()?.data;u&&l&&(c.lastUpdateTime=u[l]?.caseInfo?.lastUpdateTime,this._stateProps.lastUpdateTime=u[l]?.caseInfo?.lastUpdateTime);const p=Qn({context:l,category:G.PAGE}),h=Qn({context:l,category:"HTTP"});c.httpMessages=h,c.pageMessages=p,this._stateProps.pageMessages=c.pageMessages,this._stateProps.httpMessages=c.httpMessages,h?.forEach((l=>{l.errorDetails&&(c.errorDetails=c.errorDetails?c.errorDetails.push(...l.errorDetails):l.errorDetails,this._stateProps.errorDetails=c.errorDetails),l.correlationID&&(c.correlationID=l.correlationID)}))}}if(c.loadingInfo=this.getLoadingStatus(this.getContextName()),c.assignmentNames=this.getCaseInfo().getAssignments()?.map((c=>c.name)),c.childAssignmentNames=this.getCaseInfo().getChildAssignments()?.map((c=>c.name)),l===W.MODAL_VIEW_CONTAINER){const l=c.routingInfo?.accessedOrder||[],u=l[l.length-1];u&&(c.loadingInfo=this.getLoadingStatus(u))}this._stateProps.loadingInfo=c.loadingInfo,this._stateProps.assignmentNames=c.assignmentNames,this._stateProps.childAssignmentNames=c.childAssignmentNames}else u.template===W.CASE_VIEW||u.template===W.CASE_PREVIEW||u.template===W.OBJECT_PAGE?(c.caseInfo=this.getCaseSummary(),this._stateProps.caseInfo=c.caseInfo):l===W.CASE_STAGES&&(c.stages=this.getCaseStages(),c.stageID=this.getStageID(),this._stateProps.stages=c.stages,this._stateProps.stageID=c.stageID);this.populateFieldMetadata(c),this.updateContextTree()}isReadOnlyField(c,l){const u=el.isPropertyInternal(l),d=c.datasource,p=this.getComponentConfig().isSearchField,{isClassKey:h,isSpecial:g,isDeclarativeTarget:f}=c.fieldMetadata,m=c.listType!==W.ASSOCIATED;return!p&&(f||u||!d&&(h||g)&&m)}getPropertyDetails(c,l,u){return c===W.ASSOCIATED?{propertyValue:l,propertyAnnotation:W.ASSOCIATED_PROPERTY_ANNOTATION}:{propertyValue:u,propertyAnnotation:W.PROPERTY_ANNOTATION}}updateConfigData(c,l,u){c.fieldMetadata=l,this.isReadOnlyField(c,u)&&(c.readOnly=!0,this._stateProps.readOnly=c.readOnly,c.fieldMetadata.isDeclarativeTarget&&this.registerAdditionalProps({readOnly:!0})),c.fieldMetadata?.isReadOnly&&(c.readOnly=!0,this.registerAdditionalProps({readOnly:!0}))}populateFieldMetadata(c){const{value:l,datasource:u,listType:d}=this.getComponentConfig(),{propertyValue:p,propertyAnnotation:h}=this.getPropertyDetails(d,u,l);if(p&&"string"==typeof p&&(p.includes(h)||p.includes(W.ATTACHMENT_ANNOTATION))){const l=rn.getPropertyName(p),u=this.getFieldMetadata(l);u&&this.updateConfigData(c,u,l)}}resolvePropertyMetadata(c,l){if(!c)return c;const u=Rp(`${this._pageReference}.${l}`,this._contextName);return(u||null===u)&&(c.additionalInformation=u),c}getFieldMetadata(c){if(!c)return null;const l=c.split(".");if(l.length<2){let l=this.getValue(W.CLASS_ID);return!l&&this._rawConfig&&this._rawConfig.config&&this._rawConfig.config.ruleClass&&(l=this._rawConfig.config.ruleClass),this.resolvePropertyMetadata(up(c,l),c)}return this.resolvePropertyMetadata(up(l.pop(),this.getValue(`.${l.join(".")}${W.CLASS_ID}`)),c)}getCurrentPageFieldMetadata(c=null){let l=this.getPageReference().split(".");null!==c&&(l=c.split("."));const u=l.pop();return this.resolvePropertyMetadata(up(u,this.getValue(`${l.join(".")}${W.CLASS_ID}`)))}getCurrentClassID(){return this._classID??this.getValue(W.CLASS_ID)}getCaseSummary(){const c={...this.getDataObject()[G.CASE_INFO.CASE_INFO]};return c.CaseID=c.CaseID||this.getValue(G.CASE_INFO.CASE_INFO_PZINSKEY),{...c,isCaseWideAction:()=>cn(this.getContextName(),this.getPageReference())}}getReferencedUser(c){const l=this.getValue("referencedUsers");if(Array.isArray(l)){const u=l.find((l=>l.UserID===c));if(u)return{userId:u.UserID,UserName:u.UserName}}return l&&l[c]?l[c]:null}getCaseStages(){return this.getDataObject()[G.CASE_INFO.CASE_INFO].stages}getStageID(){return this.getDataObject()[G.CASE_INFO.CASE_INFO].stageID}getActions(){return this._actions}isRoot(){return this._isRoot}resolveContextProps(c){const{value:l}=this.getStateProps();l&&(c.error=this.getContextDataValue(`${this.getPageReference()+l}.error`),c.validatemessage=this.getContextDataValue(`${this.getPageReference()+l}.validatemessage`))}isValidatorExist(){return!!this._isValidatorExist}getValidationApi(){return new Il(this)}isEditable(){return this._rawConfig&&this._rawConfig.config&&!(this._inheritedConfig&&this._inheritedConfig.readOnly)&&(Object.hasOwn(this._rawConfig.config,"value")||this._rawConfig.config.selectionList||"Editable"===this._rawConfig.config.renderMode&&this._rawConfig.config.referenceList)&&!("string"==typeof this._rawConfig.config?.value&&this._rawConfig.config.value.includes("@FILTERED_LIST"))&&!(Object.hasOwn(this._rawConfig.config,"readOnly")&&("true"===this._rawConfig.config.readOnly||!0===this._rawConfig.config.readOnly))&&!(Object.hasOwn(this._rawConfig.config,"disabled")&&!0===this._rawConfig.config.disabled)}isVisible(){return this._rawConfig?.config&&Object.hasOwn(this._rawConfig?.config,"visibility")&&"string"==typeof this._rawConfig?.config?.visibility?rn.handleAnnotation(this._rawConfig?.config?.visibility,this):"string"!=typeof this.options?.visibility||rn.handleAnnotation(this.options?.visibility,this)}isReadOnly(){return void 0!==this._readOnly&&("true"===this._readOnly||!0===this._readOnly||"string"==typeof this._readOnly&&rn.handleAnnotation(this._readOnly,this))}hasChildren(){return!!this._children}getComputedVisibility(){const c="reference"===this._type&&this.getReferencedView()?this.getReferencedViewPConnect().getPConnect():this;if(!1===this.getConfigProps().visibility)return!1;if(!1===this.getConfigProps().requiresVisibleChildren)return!0;const l=c.getConfigProps(),u={includeTypes:["Group","Region","View"],excludeTemplates:["ListView","SimpleTable","StudioTable"]};let d=c._type&&u.includeTypes.includes(c._type)&&!u.excludeTemplates.includes(l.template);if(!!l.highlightedData&&l.highlightedData.length&&l.showHighlightedData&&(d=!1),!d)return!0;const p=c.getChildren();return!!p&&p.some((c=>c.getPConnect().getComputedVisibility()))}getChildrenIterator(){return this._children.setContext(this.getPageReference()),this._children}setAction(c,l){this._actions[c]=l}getComponentName(){return this._rawConfig&&this._rawConfig.type}isComponentRefreshable(){return!(!this._rawConfig||!this._rawConfig.isRefreshable)}getDataObject(c){return Fp(c||this.getContextName())}getImagePath(c){return`${Vr.getConstellationServiceUrl()}/v860/${Vr.getAppAlias()}/image/${c}?org=${Vd.getOrganizationName()}`}skipRequiredValidation(){return this.options.isBulkAction}isBulkAction(){return this.options.isBulkAction}getChildren(){if(this._children&&this._children.length){const c=((c,l)=>{const u=!!c?.repeat;if(c?.["repeat-self"])return new Au(c,c.context||"",l);if(u){const u=Bp(`${l.context}.${W.SUMMARY_OF_LISTS}`,c.pageReference,l.context);return new Au(c.children[0],u||c.context,l)}return c?.children?new qu(c.children,l):void 0})(this._rawConfig,{pageReference:this._pageReference,context:this._contextName,localeReference:this._localeRuleName,hasForm:this.options.hasForm,isBulkAction:this.options.isBulkAction,containerName:this.getContainerName(),containerItemName:this.options.containerItemName,viewName:this.viewName,inheritedConfig:this._inheritedConfig,target:this._containerTarget,readOnly:this._readOnly,categoryName:"Group"===this._type?this._rawConfig?.config?.id:null}),l=[];for(;c?.hasNext();){const u=c.next();if(this.isBulkAction()){const c=u.getPConnect().getComponentName(),{template:l}=u.getPConnect().getConfigProps();if(!c||!0!==Yu.allowedComponetsForBulkProcessing[c]&&!0!==Yu.allowedComponetsForBulkProcessing[c]?.[l])continue}l.push(u)}return c?.resetIndex(),l}return[]}setInheritedProp(c,l){this._inheritedConfig[c]=l}getLocaleRuleName(){return this._localeRuleName}getLocalizedValue(c,l,u){const d=u||this.getLocaleRuleName(),p=this?.getMetadata();let h=null;const g=kd.getLocale();if(p){const l=p?.type,u=["View","Region"],d=p?.config?.label??p?.config?.caption;if("en-US"!==g&&d?.startsWith(W.FIELD_LABEL_ANNOTATION)){const l=d.split(`${W.FIELD_LABEL_ANNOTATION} `).pop(),u=l?.split("."),p=u?.pop();let g=`${p}`;const f=this.getFieldMetadata(g),m=f?.classID||this.getValue(`.${u?.join(".")}${W.CLASS_ID}`),y=f?.definedOnClassID;return g=`${y||m}.${g}`,Bd.getLocaleValue(c,g,Bd.FIELD_LABELS_BUNDLE_KEY,h)}l&&!u.includes(l)&&(h=l)}return Bd.getLocaleValue(c,l,d,h)}getLocalizedParagraphValue(c){const l=Sp(c,this.getCurrentClassID()),u=l?.definedOnClassID;return Bd.getParagraphLocaleValue(u||this.getCurrentClassID(),c)||l?.content}getLocaleRuleNameFromKeys(c,l,u){return`${c}!${l}!${u}`}getValue(c,l){return this.useCustomContext?(c=c.startsWith?.(".")?c.substring(1):c,c.split?.(".").reduce(((c,l)=>c?.[l]??void 0),this.useCustomContext)):this._hasSuggestions&&this.getStateProps()?.value===c?Zp.getPropertyValue(c,this.getPageReference(),`${this._contextName}/${W.SUGGESTION}`):Zp.getPropertyValue(c,l||this.getPageReference(),this._contextName)}setInheritedConfig(c){if(!c)return;const{readOnly:l,displayMode:u,referenceType:d,hideLabel:p}=c;p&&(this._inheritedConfig.hideLabel=p),d&&(this._inheritedConfig.referenceType=d),u&&(this._inheritedConfig.displayMode=u),(this._inheritedConfig.readOnly||l)&&(this._inheritedConfig.readOnly=l),c.inheritedProps&&(c.inheritedProps?.forEach((c=>{"required"===c.prop&&(this._inheritedConfig[c.prop]=c.value)})),Tu(this._inheritedConfig,c))}getInheritedProps(){const c={},l={};return this._inheritedConfig.inheritedProps?.forEach((c=>{l[c.prop]=c.value})),Zp.resolveProps(l,c,this),c}setValue(c,l,u,d=!1,p={}){let h,g;const{isArrayDeepMerge:f}=p;this.isInsideList()&&this.getListActions().updateProperty(c,l),this.isBulkAction()&&(h=!0,l||(g=!0)),Up({type:"SET_PROPERTY",payload:{reference:`${this.getPageReference()}${c}`,value:l,initialValue:u,isImplicit:d,context:this.getContextName(),...void 0!==f&&{isArrayDeepMerge:f},...h&&{isStrictTracking:h},...g&&{removePropertyFromChangedList:g}}})}updateDirtyCheckChangeList(c,l){(({value:c,context:l,reference:u})=>{if(tl.isPageInstruction(u))return;const d=u?.startsWith(".")?u?.substr(1):u;sl[l]=sl[l]||{},sl[l][d]||(sl[l][d]={initialValue:kp(d,null,l)}),sl[l][d].value=c})({reference:`${this.getPageReference()}${c}`,value:l,context:this.getContextName()})}getContextDataValue(c,l){return $p(l||this.getPageReference(),c,this._contextName)}updateState(c){const l=this._pageReference.indexOf(W.CASE_INFO.CASE_INFO_CONTENT),u=this._pageReference.indexOf(".");let d=W.CASE_INFO.CASE_INFO_CONTENT;0!==l&&(d=u>0?this._pageReference.substring(u):this._pageReference),Up(oh({context:this._contextName,data:c,rootPageReference:d}))}replaceState(c,l,u={}){const{skipDirtyValidation:d=!1}=u;Up({type:"REPLACE_PROPERTY",payload:{reference:`${this.getPageReference()}${c}`,value:l,context:this.getContextName(),skipDirtyValidation:d}})}reportError(c,l,u){Up(Uh(c,l||{},u))}getComponent(){return Cu({getPConnect:()=>this})}createComponent(c,l,u,d){let p=this._pageReference;if(l){const c=Bp(`${this.getPageReference()}.${W.SUMMARY_OF_LISTS}`,l,this._contextName);p=Zp.getContextPath(c||l,u)||l}else if(d&&d.pageReference){let c=d.pageReference;c=rn.handleAnnotation(c,this),p=Zp.getContextPath(this._pageReference,c)||""}return Cu(Nu({meta:c,index:this.index,options:{containerName:this.getContainerName(),hasForm:this.options.hasForm,...c.options,pageReference:p,context:this._contextName,target:this._containerTarget,readOnly:this._readOnly||this._inheritedConfig?.readOnly,viewName:this.viewName}}),d)}getReferencedView(){if(this.meta)return Zp.resolveReference(this.resolveConfigProps(this.meta),this)}_resolvePageRef(c){return this.getPageReference().includes(c)||c.startsWith(W.CLASS_ANNOTATION)?this.getPageReference():`${this.getPageReference()}${c}`}getReferencedViewPConnect(c=!1){const l={...this.getComponentConfig()};return delete l?.name,delete l?.type,Nu({meta:this.getReferencedView(),options:{...c?this.options:void 0,...l,context:this.getContextName(),pageReference:l.context?this._resolvePageRef(l.context):this.getPageReference(),viewName:this.viewName}})}getContainerManager(){return new Nl(this)}getActionsApi(){return this._actionsApi||(this._actionsApi=new hu(this)),this._actionsApi}getActionManager(){return gn}getGoogleMapsAPIKey(){return C}getServerURL(){return P()}getLoadingStatus(c){let l=null;return c?(l=Fp(c),l=l?l.context_data:null):l=this.getDataObject().context_data,!!l&&!!l.isLoading&&l.isLoading}clearErrorMessages(c){c?.property?Zn({type:"error",property:c.property,pageReference:this.getPageReference(),context:this.getContextName()}):c?.context?Zn({type:"error",...c}):(Zn({type:"error",...c,context:W.APP.APP}),Zn({type:"error",...c,context:$u(`${W.APP.APP}/${this.getContainerName()}`)}))}resolveDatasourceReference(c){return Bp(`${this.getPageReference()}.${W.SUMMARY_OF_LISTS}`,c,this.getContextName())||c}removeFormField(){}addFormField(){}setPageValue(c,l,u){delete c?.classID,this.setValue(l,c,void 0,void 0,{isArrayDeepMerge:!1}),((c,l,u)=>{const d=kc(l);Vc[c]?Vc[c].fieldOrder[d]=u:Vc[c]={fieldOrder:{[d]:u}}})(this.getContextName(),`${this.getPageReference()}${l}`,this),u&&((c,l,u)=>{const d=(c,l)=>{Object.entries(c).forEach((([c,p])=>{if(Array.isArray(p)){const d=PCore.createPConnect({options:{pageReference:u.getPageReference(),context:u.getContextName(),referenceList:`${l}.${c}`}}).getPConnect();xr(d,`${l}.${c}`,{skipStateUpdate:!0});for(let c=0;c<p.length;c+=1)Pr(p[c],c,d,void 0,{})}else"object"==typeof p&&d(p,`${l}.${c}`)}))};d(c,l)})(c,l,this)}acceptSuggestion(c){if(this.getStateProps()?.value&&this.options.hasForm&&this._hasSuggestions){const l=Eu.getSuggestionsContext(this.getContextName()),u=this.getStateProps()?.value||c,d=Zp.getContextPath(this.getPageReference(),u),p=l.getField(d);this._hasSuggestions=!1,this.getActionsApi().updateFieldValue(u,p),this.getActionsApi().triggerFieldChange(u,p),l.removeField(d)}}ignoreSuggestion(c){if(this.getStateProps()?.value&&this.options.hasForm&&this._hasSuggestions){const l=this.getStateProps()?.value||c,u=Zp.getContextPath(this.getPageReference(),l);this._hasSuggestions=!1,Eu.getSuggestionsContext(this.getContextName()).removeField(u)}}}function Nu(c){const l=new Zu(c);return{getPConnect:()=>l}}const Pu=class{static createContainerPConnect(c,l,u,d=!1){const{accessedOrder:p,items:h}=c;if(p&&h){const c=p[p.length-1];if(h[c]?.view&&Object.keys(h[c].view).length>0){const p=h[c],g=c.substring(0,c.lastIndexOf("_")),{view:f,context:m}=p,{viewName:y,viewContext:I}=this.processRootViewDetails(f,p,l);return y?Nu({meta:f,options:{context:m,pageReference:I||l,containerName:u,containerItemID:c,parentPageReference:l,hasForm:d||u===Ou.WORKAREA||u===Ou.MODAL||y===W.CREATE_DETAILS_VIEW_NAME,target:g}}).getPConnect:null}}return null}static processRootViewDetails(c,l,u){const{config:{context:d,name:p}={}}=c,{context:h}=l;let g=p,f=d;const m=el.isProperty(p),y=el.isProperty(d);if(y){const c=el.getPropertyName(d);f=kp(`.${c}`,c.startsWith(".")?u:"",h)}if(f||(f=u),m){const c=el.getPropertyName(p);g=kp(`.${c}`,f,h)}return m&&y&&""!==g&&(g=p,f=d),{viewName:g,viewContext:f}}static addFlowContainerItem(c){const l=c.getContainerManager(),u=c.getContextName();let d,p;if("review"!==c.getValue("context_data.caseViewMode")){const c=u.substring(0,u.lastIndexOf("_")),l=$u(c),h=wu(c,l);h&&({key:d,flowName:p}=h)}l.addContainerItem({semanticURL:"",key:d,flowName:p,caseViewMode:"perform",resourceType:"ASSIGNMENT",data:c.getDataObject(u)})}},Du={defaultLimit:16},Ru={SINGLE:"single",MULTIPLE:"multiple"},Ou={PRIMARY:"primary",WORKAREA:"workarea",MODAL:"modal",PREVIEW:"preview"},vu=()=>Lp()?.getState()?.containers,xu=c=>c?Lp()?.getState().containers[c]:(Nt.error("getContainerData: target is the required parameter"),null),wu=(c,l)=>{if(!c||!l)return null;const u=vu(),d=u?.[c];return d&&d.items&&d.items[l]||null},Mu=c=>c?Lp()?.getState().containers[c]?.items:(Nt.error("getContainerItems: target is the required parameter"),null),Lu=c=>c?Lp()?.getState().containers[c]?.accessedOrder||[]:(Nt.error("getContainerAccessOrder: target is the required parameter"),[]),Uu=c=>c?Lu(c)?.length>0||!1:(Nt.error("areContainerItemsPresent: target is the required parameter"),!1),Fu=(c,l,u)=>{if(!c||!l)return Nt.error("isContainerItemExists: target and key are required parameters"),!1;const d=vu(),p=d?.[c],h=p&&p.items||null,g=u||((c,l)=>c===l);if(l&&h)for(const f in h)if(g(l,h[f].key))return!0;return!1},ju=(c,l,u)=>{if(!c||!l)return Nt.error("getContainerItemName: target and key are required parameters"),null;const d=vu(),p=d?.[c],h=p&&p.items||null,g=u||((c,l)=>c?.toLowerCase()===l?.toLowerCase());if(l&&h)for(const f in h)if(g(l,h[f].key))return f;return null},Vu=(c,l)=>{if(!c||!l)return Nt.error("isContainerInitialized: context and name are required parameters"),!1;const u=vu();return u&&Object.prototype.hasOwnProperty.call(u,`${c}/${l}`)},ku=(c,l)=>{if(!c||!l)return Nt.error("getContainerType: context and name are required parameters"),null;const u=vu(),d=u?.[`${c}/${l}`];return d&&d.type},$u=c=>{if(!c)return Nt.error("getActiveContainerItemName: target is the required parameter"),null;let l=null;const u=vu();if(u&&u[c]){const d=u[c],{accessedOrder:p}=d;l=p&&p.length>0?p[p.length-1]:null}return l},Gu=(c,l,u)=>{if(!c||!l)return Nt.error("isContainerItemActive: target and key are required parameters"),!1;const d=ju(c,l,u);return!!d&&d===$u(c)},Wu=(c,l)=>{let u=null;const d=vu();for(const p in d)if(Object.prototype.hasOwnProperty.call(d,p)&&d[p].items){const h=d[p].items[c];if(u=h?h[l]:null,u)break}return u},Hu=c=>c?Wu(c,"context"):(Nt.error("getDataContextName: containerItemName is required parameters"),null),zu=c=>{if(!c)return Nt.error("getActiveContainerItemContext: target is required parameters"),null;let l=null;const u=vu();if(u&&u[c]){const d=u[c],{accessedOrder:p}=d,h=p&&p.length>0?p[p.length-1]:null;l=Hu(h)}return l},Ku=c=>{if(!c)return Nt.error("getChildContainerItems: containerItemName is required parameters"),[];const l=c.endsWith("/")?c:`${c}/`;let u=[],d=!1;const p=vu(),h=u=>{const p=[];return Object.keys(u).forEach((u=>{u.startsWith(l)&&u!==l&&p.push(u),u===c&&(d=!0)})),p};for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g)&&p[g].items){const c=h(p[g].items);c&&c.length>0&&(u=u.concat(c)),u=u.sort()}return d?u:[]},Xu=c=>{if(!c)return Nt.error("getChildContainers: containerItemName is required parameters"),[];const l=[],u=vu();for(const d in u)Object.prototype.hasOwnProperty.call(u,d)&&d.startsWith(c)&&d!==c&&l.push(d);return l},Ju=c=>{if(!c)return Nt.error("getChildContainersContexts: parentContainerItemID is required parameters"),[];const l=[],u=vu();for(const d in u)Object.prototype.hasOwnProperty.call(u,d)&&d.startsWith(c)&&d!==c&&(Lu(d)||[]).forEach((u=>{Hu(u)!==c&&l.push(Hu(u))}));return l},Qu=c=>{const l=[...Ju(c),c],u=[],d=Lp()?.getState().data||{};return l.forEach((c=>{Object.prototype.hasOwnProperty.call(d,`${c}/${W.SUGGESTION}`)&&u.push(`${c}/${W.SUGGESTION}`)})),u},ed=c=>c?c&&xu(c)&&xu(c).type===Ru.SINGLE:(Nt.error("isContainerSingleMode: target is required parameters"),null),td=c=>c?c&&xu(c)&&xu(c).type===Ru.MULTIPLE:(Nt.error("isContainerMultipleMode: target is required parameters"),null),nd=c=>c?xu(c)&&xu(c).items&&Object.keys(xu(c)?.items).length>0||!1:(Nt.error("hasContainerItems: target is required parameters"),!1),rd=c=>c&&Du[c]?Du[c]:Du.defaultLimit,sd=(c,l=Du.defaultLimit)=>{c?Du[c]=l:Nt.error("setContainerLimit: target is required parameter")},ad=c=>{if(!c)return Nt.error("isContainerLimitReached: target is required parameter"),!1;let l=!1;const u=xu(c),{items:d={}}=u,p=Object.keys(d),h=rd(c);return p&&p.length>0&&p.length>=h&&(l=!0),l},od=c=>{if(!c||!c.name||!c.context)return Nt.error("resetContainersPayload: containerInfo object should contain name and context"),null;const l=c?.name,u=xu(`${c?.context}/${l}`),d=Array.isArray(u?.accessedOrder)&&u?.accessedOrder.map((c=>u?.items[`${c}`]?.context))||[],p=Xu(`${W.APP.APP}/${W.PREVIEW}`),h=Ju(`${W.APP.APP}/${W.PREVIEW}`);return{context:c?.context,name:l,containerItems:[...d,...h],childContainers:p}},id=c=>{if(!c)return Nt.error("isContainerDirty: containerItemID is the required parameter"),!1;const l=Hu(c);return hl(l)||Dc(c)},cd=c=>{if(!c)return Nt.error("getLeastRecentlyUsedNonDirtyContainerItemID: target is required parameter"),null;let l;const u=xu(c),{accessedOrder:d=[]}=u;for(let p=0;p<d.length;p+=1){const c=d[p];if(!id(c)){l=c;break}}return l},ld=c=>{if(!c)return Nt.error("getTargetFromContainerItemID: containerItemID is the required parameter"),null;const{containers:l}=Lp()?.getState()||{};for(const d in l)if(l[d]?.accessedOrder?.includes(c))return d;const u=c.lastIndexOf(W.UNDERSCORE_STRING);return c.substring(0,u)},ud=(c,l={})=>{if(!c)return Nt.error("closeContainerItem: containerItemID is the required parameter"),Promise.reject(new Error("closeContainerItem: containerItemID is the required parameter"));const u=ld(c),d=Hu(c),{skipDirtyCheck:p}=l;let h=!0,g=[];if(id(c)&&!p&&(h=window.confirm(Bd.getLocaleValue(il,"Messages"))),h){const{accessedOrder:l=[],items:p={},type:h}=xu(u);g=l.filter((l=>l!==c));const f=g[g.length-1],m=p[f]||{},{semanticURL:y=W.FORWARD_SLASH_STRING,context:I}=m;g.length>0&&y&&y!==W.FORWARD_SLASH_STRING?ig({directUrlUpdation:!0,semanticURL:y,options:{containerItemID:f,context:I}}):ig({directUrlUpdation:!0,semanticURL:W.FORWARD_SLASH_STRING,options:{}}),Up(bh({containerItemID:c,context:d,target:u,containerInfo:{newAccessedOrder:g,containerType:h}}))}return Promise.resolve({newAccessedOrder:g,removeItem:h})},dd=(c,l,u,d)=>{const p="root",h=X(l,p,!0),g=Ct(l,p),f={data:u,context:d?"app":h},m=[gh({root:c,containerItemID:h,context:d?"app":h,target:g,containerName:l})];m.push(oh(f)),Up(m)},pd=(c,l,u)=>{let d=Lu(c);d=d.filter((c=>c!==l));let p=!1;for(let h=0;h<d.length;h+=1)if(Hu(d[h])===u){p=!0;break}return p},hd=c=>{if(!c)return Nt.error("isContainerItemContextBeingUsedInOtherContainers: containerItemID is the required parameter"),!1;const l=vu(),u=Hu(c),d=l?Object.keys(l):[];let p=!1;for(let h=0;h<d.length&&(p=pd(d[h],c,u),!p);h+=1);return p},gd=c=>{Array.isArray(c)||(c=[c]);const l=vu()||{};return c.map((c=>{const u=ld(c);return Xp.getIn(l,[u,"items",c,"transientItems"])||[]})).flat()},fd=c=>{const{transientItemID:l,data:u,options:d}=c,p=Xp.deepClone(Lp()?.getState().data[l]);d?.reset&&Xp.iterateLeafNodes(p,(c=>{"classID"!==c[c.length-1]&&Xp.setIn(p,c,"")})),Up(mh({transientItemID:l,data:Xp.mergeDeep(u,p)}))},md=c=>{const{transientItemID:l,data:u}=c;Up(Ih({transientItemID:l,data:u}))},yd=c=>{const l=Xp.deepClone(Lp()?.getState().data[c]);Xp.iterateLeafNodes(l,(c=>{"classID"!==c[c.length-1]&&Xp.setIn(l,c,"")})),Up(yh({transientItemID:c,data:l}))},Id=c=>{const l=Xp.deepClone(Lp()?.getState().data[c]);Xp.iterateLeafNodes(l,(c=>Xp.setIn(l,c,""))),Up(Eh({transientItemID:c,data:l}))};class Wd{static addContainerItems(c){this.items=c}static getContainerItems(){return this.items}static deleteContainerItem(c){const l=this?.items?.indexOf(c);void 0!==l&&-1!==l&&this.items.splice(l,1)}}const Ed=()=>Wd,Ad=c=>{const l={containerName:c};l.childContainers=Xu(c),Up({type:$e,payload:l})},_d=(c,l)=>{const u=Ku(c),{key:d}=wu(ld(c),c),p=[];u.forEach((c=>{const{key:u}=wu(ld(c),c);if(u===d){const u={data:{caseInfo:{headers:{etag:l}}},target:ld(c),context:c};p.push({type:Ae,payload:u})}})),p.length&&Up(p)},Cd=(c,l)=>{const u=[],d={data:{caseInfo:{headers:{etag:l}}},target:ld(c),context:c};u.push({type:Ae,payload:d}),u.length&&Up(u)},Sd=()=>kd.isPortalLoaded?"app":"root",Td=()=>yl,Nd=(c,l)=>{const u={data:{caseInfo:{lastUpdateTime:l}},target:ld(c),context:c};Up({type:Ae,payload:u})},Pd=(c,l)=>{const u=ju(c,l),d=ju(`${u}/workarea`,l);return Hu(d)},Dd=c=>c?Wu(c,"parentContext"):(Nt.error("getContainerParentContext: containerItemName is required parameters"),null),bd=c=>{const{accessedOrder:l}=c;return l&&l.length>0?l[l.length-1]:""},Rd=c=>{if(c&&"string"==typeof c){const l=c.split("/");return l.pop(),l.join("/")}return null},Od=()=>Pu,vd=/{(.*?)}/i,xd=/{(.*?)}/g,wd=c=>null!==c.match(vd),Md=c=>(c&&(c.startsWith("/")&&(c=c.substring(1,c.length)),c.endsWith("/")&&(c=c.substring(0,c.length-1))),c),Ld=c=>{const l=c[c.length-1],u=c[c.length-2];if("y"!==l.toLowerCase())return`${c}s`;switch(u.toLowerCase()){case"a":case"e":case"i":case"o":case"u":return`${c}s`;default:return`${c=c.substring(0,c.length-1)}ies`}},Ud=()=>Md(window.location.pathname),Fd=(c,l,u)=>{switch(u){case"warning":l?console.warn(c,l):console.warn(c);break;case"error":l?console.error(c,l):console.error(c);break;default:l?console.log(c,l):console.error(c)}},jd=new class{constructor(){this.staticRoutesList=[],this.dynamicRoutesList=[],this.reqContextName="",this.defaultViewUrlPath="",this.portalName=""}init=(c,l)=>{c&&c.routes&&c.routesMeta?(this.routingInfo=c,this.appRoutes=c.routes,this.appRoutesMeta=c.routesMeta,this.reqContextName=c.reqContextName,this.reqServletPath=c.reqServletPath,this.appName=c.appName,this.appAlias=c.appAlias,this.orgName=c.orgName,this.defaultViewUrlPath=l,this._createStaticDynamicRoutesList(this.appRoutes),this.appDelimeter=c.appDelimeter,this.reqServletNameReal=c.pxReqServletNameReal,this.bDefaultPortal=c.isDefaultPortal,this.portalName=c.portalName,this.ignoreFromEndPoint=["reactMode=dev","reactMode=prod"]):console.error("Routing info is not appropriate. Missing routes and routesMeta objects in routingInfo",JSON.stringify(c))};addRoutes=c=>{c?.routes&&c.routesMeta&&(this.appRoutes={...this.appRoutes,...c.routes},this.appRoutesMeta={...this.appRoutesMeta,...c.routesMeta},this.routingInfo&&(this.routingInfo.routes={...this.routingInfo.routes,...c.routes},this.routingInfo.routesMeta={...this.routingInfo.routesMeta,...c.routesMeta}),this._createStaticDynamicRoutesList(c.routes))};setDefaultRoute=c=>{this.defaultViewUrlPath=c};_createStaticDynamicRoutesList=c=>{Object.keys(c).forEach((c=>{wd(c)?this.dynamicRoutesList?.push(c):this.staticRoutesList?.push(c)}))};_getDynamicKeyName=c=>{const l=c.indexOf("{")+1,u=c.lastIndexOf("}");return c.slice(l,u)};isDefaultPortal=()=>"false"!=`${this.bDefaultPortal}`;getPortalName=()=>this.portalName;getApplicationPath=()=>Md(`${this.getReqContextName()}/${this.getReqServletNameReal()}`);getReqServletNameReal=()=>`${this.reqServletNameReal}`;getAppDelimeter=()=>`${this.appDelimeter}`;getApplicationName=()=>`${this.appName}`;getApplicationAlias=()=>`${this.appAlias}`;getServletPath=()=>`${this.reqServletPath}`;getOrganizationName=()=>`${this.orgName}`;getReqContextName=()=>Md(this.reqContextName);getRoutingInfo=()=>this.routingInfo;processUrl=(c,l)=>{l&&(c=c.toLowerCase()),c&&(c=decodeURIComponent(c));const u=new RegExp(this.getApplicationPath(),"i");return c=c.replace(u,""),Md(c)};getEndPointInfo=c=>{this.ignoreFromEndPoint?.forEach((l=>{c.includes(l)&&(c=c.substring(0,c.indexOf(l)))}));let l=this.processUrl(c,!0),u=this._getMatchedRouteInRoutingTable(l);void 0===u&&(l=this.processUrl(this.defaultViewUrlPath,!0),u=this._getMatchedRouteInRoutingTable(l)||"");const{routeKey:d,payload:p}=this.appRoutes[u],{reqType:h,endPoint:g,params:f}=this.appRoutesMeta?.[d].restApi||{},m={...p},{caseClassName:y,caseID:I}=m;if(q.isRemoteCase(y)){const{RemoteClassGroup:c,RemoteSystemID:l}=q.getRemoteCase(y);m.caseID=I?.replace(y,c?.toUpperCase()),m.RemoteSystemID=l}const E={routeKey:d,requestType:h,routeEndpoint:g,payload:{...f,...m}};return this._resolveRoute(E,this.processUrl(c,!1),u)};getSemanticURL(c,l,u){return this.buildSemanticURL(c,l,u)}getResolvedSemanticURL(c,l,u={}){const d=this.getSemanticURL(c,l,u);let p=d;if(wd(d)){const c=d.match(xd);c?.forEach((c=>{const l=this._getDynamicKeyName(c);u[l]&&(p=p.replace(c,u[l]))}))}const h=og(p),g=new URL(h);return this.isDefaultPortal()||this.getPortalName()&&!g.searchParams.toString().includes("portal=")&&g.searchParams.append("portal",this.getPortalName()),g.toString()}updateSemanticURLAndDocumentTitle(c){const{key:l,actionName:u,caseClassName:d,isRemoteCase:p}=c;if(p&&!d)return;const h=this.getSemanticURL(u,{caseClassName:d}).replace(/{.+?}/,String(rs(l))),g=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${G.PRIMARY}`,f={semanticURL:h,directUrlUpdation:!0,options:{acName:g,context:zu(g)}};ag(f);const m=d.substring(d.lastIndexOf("-")+1),y=l.substring(l.lastIndexOf(" ")+1),I=kd.environmentInfoObject?.pxApplication?.pyLabel;hg(`${m} (${y}) - ${I}`)}buildSemanticURL(c,l,u){const{urlPattern:d}=this.appRoutesMeta?.[c]||{},p=d?.split("/").length,h=d?.split("/"),g=Object.keys(this.appRoutes).filter((c=>p===c.split("/").length)).filter((c=>{const l=c.split("?")[0].split("/");return h?.every(((c,u)=>c.startsWith("{")||c===l[u]))}));if(1===g.length)return this._getQueryParamsResolvedURL(g[0],u);if(0===Object.keys(l).length)return"";const f=g.find((c=>{const d=this.appRoutes[c].payload,p={...u};delete p.dataViewName,delete p.dataContext;const h=d.dataViewKeys||d.dataContextParameters||{},g=Object.keys(l).every((c=>l[c]===d[c]));return!!g&&(Xp.isEmpty(h)||Xp.isEmpty(p)?g:Object.keys(p).every((c=>Object.prototype.hasOwnProperty.call(h,c))))}));return f?this._getQueryParamsResolvedURL(f,u):g.includes("cases/{id}")&&u?.id?"cases/{id}":""}_getQueryParamsResolvedURL(c,l,u=!1){const[d,p]=c.includes("?")?c.split("?"):[c];if(p){const c={};for(const[u,d]of Object.entries(l))c[u.toLowerCase()]=d;const h=new URLSearchParams(p),g={};for(const[d,p]of h.entries())if("string"==typeof p&&wd(p)){const h=this._getDynamicKeyName(p);g[d]=u?l[h]||c[h.toLowerCase()]:l[h]}else"string"==typeof p&&(g[d]=p);return`${d}?${new URLSearchParams(g).toString()}`}return d}_getQueryParamsObject(c){const l={},u=new URLSearchParams(c);for(const[d,p]of u.entries())l[d]=p;return l}getRestEndPoint(c,l){try{return this._buildRestApi(c,l)}catch(c){return console.error(c),null}}_buildRestApi(c,l){if(c&&this.appRoutesMeta?.[c]){const{reqType:u,body:d}=this.appRoutesMeta[c].restApi;let{endPoint:p}=this.appRoutesMeta[c].restApi;l?.params&&l.params.pageName&&(p=`${p}&pageName=${l.params.pageName}`);const h=p.match(xd);if(h)for(let c=0;c<h.length;c+=1){const u=h[c].replace("{","").replace("}",""),d=new RegExp(h[c],"g");p=p.replace(d,l?.[u])}if(d){let c={};return Object.keys(d).forEach((u=>{this._isSpecialInstruction(u)&&(c={...c,...this._processInstruction(u,d[u],l)})})),{restApi:p,reqType:u,body:c}}return{restApi:p,reqType:u}}throw new Error(`Cannot find route metadata for the routeKey: ${c}.`)}_isSpecialInstruction(c){return c&&c.startsWith("@")}_processInstruction(c,l,u){const d={};return"@COPY"===c&&l.forEach((c=>{d[c]=u[c]})),d}doesRestApiExist(c){return!(!this.appRoutesMeta||!this.appRoutesMeta[c])}_resolveRoute=(c,l,u)=>{const d=[],[p,h]=l.includes("?")?l.split("?"):[l],[g,f]=u.includes("?")?u.split("?"):[u],m=p.split("/"),y=g.split("/"),I={};for(let T=0;T<y.length;T+=1)d[T]=y[T],wd(y[T])&&(I[this._getDynamicKeyName(y[T])]=m[T],d[T]=m[T]);const E=this._getQueryParamsObject(f),A=this._getQueryParamsObject(h),_={};for(const[T,N]of Object.entries(A))_[T.toLowerCase()]=N;for(const T in E)wd(E[T])?I[T]=A[T]||_[T.toLowerCase()]:I[T]=E[T];let C;h&&(C=this._getQueryParamsResolvedURL(u,A,!0));const S=this._resolvePayload(c,I,u);return{...this._resolveRouteEndPoint(S,u),urlPath:C||d.join("/")}};_resolveRouteEndPoint=(c,l)=>{let{routeEndpoint:u}=c;if(!wd(u))return c;const d={};if(d[l]=c,void 0!==c.payload){const l=u.match(xd);for(let p=0;p<l.length;p+=1){const h=l[p],g=this._getDynamicKeyName(h);if(void 0!==c.payload[g]){const l=c.payload[g];u=u.replace(h,l)}else this._sendWarningAndErrorMessages(`Unable to resolve dynamic token {${g}} in routeEndpoint- ${g} is missing in payload`,d)}}else this._sendWarningAndErrorMessages("Unable to resolve dynamic token(s) in routeEndpoint- payload is missing in routing table for-",d);return{...c,routeEndpoint:u}};_resolvePayload=(c,l,u)=>{if(void 0===c.payload)return c;const d={...c.payload,...this._resolvePayloadRecursive(c.payload,l)};return{...c,payload:d}};_resolvePayloadRecursive(c,l){const u={};for(const d in c)if(Object.prototype.hasOwnProperty.call(c,d)){let p=c[d];if("string"==typeof p&&wd(p)){const c=p.match(xd);for(let u=0;u<c.length;u+=1){const d=c[u],h=this._getDynamicKeyName(d);if(void 0!==l[h]){const c=l[h];p=p.replace(d,c)}else this._sendWarningAndErrorMessages(`Unable to resolve dynamic token {${h}} in payload- {${h}} is missing in semantic url construct`)}u[d]=p}else"object"==typeof p&&(u[d]=this._resolvePayloadRecursive(p,l))}return u}_getMatchedRouteInRoutingTable=c=>{let l=this._findMatchedRouteInStaticList(c);return void 0!==l?l:(l=this._findMatchedRouteInDynamicList(c),void 0!==l?l:void 0)};_findMatchedRouteInStaticList=c=>this.staticRoutesList?.find((l=>l.toLowerCase()===c.toLowerCase()));_findMatchedRouteInDynamicList=c=>{const[l,u]=c.includes("?")?c.split("?"):[c],d=l.split("/");return this.dynamicRoutesList?.find((c=>{const[l,p]=c.includes("?")?c.split("?"):[c],h=l.split("/");if(h.length!==d.length)return!1;let g=0;for(g=0;g<h.length;g+=1){const c=h[g].toLowerCase();if(!wd(c)&&c!==d[g]&&Ld(c)!==d[g])return!1}if(p){const c=new URLSearchParams(u.toLowerCase()),l=new URLSearchParams(p.toLowerCase()),d=new Set,h=new Set,g=/\{[a-zA-Z]+\}/;for(const u of c.keys())d.add(u);for(const u of l.keys())h.add(u);if(h.size!==d.size)return!1;for(const u of d){if(!h.has(u))return!1;const d=l.get(u);if(c.get(u)!==d&&!g.test(d))return!1}}return!0}))};_sendWarningAndErrorMessages=(c,l)=>{Fd(c,l,"warning"),Fd("Error in Generated Routing Table",null,"error"),Fd("Back | Forward for this page may NOT work as intended",null,"warning"),Fd("Bookmark | Refresh for this page may NOT work as intended",null,"warning")}},Vd=jd,kd=new class{constructor(){this.environmentInfoObject=null,this.isPortalLoaded=!1,this.pageName=null,this.KeyMapping={},this.isAssignmentHeaderHidden=!1,this.coexistenceMeta={appType:"",isCoexistence:!1},this.brandingInfo=null,this.cookieComplianceMethod="none",this.showPerformanceDashboard=!1,this.isExtraCallRequiredForDefaultHome="false"}setEnvironmentInfo(c){this.environmentInfoObject=c;const l=this.environmentInfoObject?.features||Xp.convertObjectWithStringToBoolean(this.environmentInfoObject?.pyFeatures)||{granularUIRefresh:!1};this.environmentInfoObject.features={...l,granularUIRefresh:l.granularUIRefresh||l.pyEnableGranularUIRefresh||!1}}getOperatorName(){return this.environmentInfoObject?.pxOperator?.pyUserName}getOperatorWorkGroup(){return this.environmentInfoObject?.pxOperator?.pyWorkGroup}getOperatorIdentifier(){return this.environmentInfoObject?.pxOperator?.pyUserIdentifier}getOperatorImageInsKey(){return this.environmentInfoObject?.pxOperator?.pyImageInsKey}getApplicationLabel(){return this.environmentInfoObject?.pxApplication?.pyLabel}getPortalName(){return Vd.getPortalName()}getApplicationName(){return this.environmentInfoObject?.pxApplication?.pyRuleName}getUseLocale(){return this.environmentInfoObject?.pxLocale?.pyUseLocale}getAccessGroup(){return this.environmentInfoObject?.pxOperator?.pyAccessGroup}getTimeZone(){return this.environmentInfoObject?.pxLocale?.pyTimeZone}getTheme(){return this.themeOverrides}setTheme(c){return this.themeOverrides=c,this.themeOverrides}getBrandingInfo(){return this.brandingInfo}setBrandingInfo(c){return this.brandingInfo=c,this.brandingInfo}getCookieComplianceMethod(){return this.cookieComplianceMethod}setCookieComplianceMethod(c){this.cookieComplianceMethod=c}setLocale(c){const l=c.replaceAll("-","_").split("_").slice(0,2);this.locale=l.join("-"),this.environmentInfoObject?.pxLocale&&(this.environmentInfoObject.pxLocale.pyUseLocale=this.locale)}getLocale=()=>this.locale;getEnvironmentKeys(){return Object.keys(W.ENV_INFO_KEYS)}getMaxAttachmentSize(){return this.environmentInfoObject?.pxApplication?.pyMaxAttachmentSize}getDefaultOperatorDP(){return this.environmentInfoObject?.pxApplication?.pyDefaultOperatorDP}getDocumentUrlDP(){return this.environmentInfoObject?.pxApplication?.pyDocumentUrlDP}getCaseInstanceListDP(){return this.environmentInfoObject?.pxApplication?.pyCaseInstanceListDP}getBaseLocale(){return this.environmentInfoObject?.pxApplication?.pyBaseLocale||"en-US"}getRenderingMode(){return this.environmentInfoObject?.renderingMode}getBuiltOnAppNames(){return this.environmentInfoObject?.pxApplication?.pyBuiltOnApplications}setPreviewMode(){Hi.setPreviewMode()}setDefaultCasePage(c){this.pageName=c}getDefaultCasePage(){return this.pageName}disableAssignmentHeader(c){this.isAssignmentHeaderHidden=c}isAssignmentHeaderDisabled(){return this.isAssignmentHeaderHidden}getDefaultPortal(){return this.environmentInfoObject?.pxOperator?.pyDefaultPortal}updateFeatureMap(c){const l=this.environmentInfoObject?.features;return this.environmentInfoObject&&c&&(this.environmentInfoObject?.features?this.environmentInfoObject.features={...l,...c}:this.environmentInfoObject.features={...c}),this.getFeatureMap()}getFeatureMap(){return this.environmentInfoObject?.features||{}}setKeyMapping(c){return this.KeyMapping=c,this.KeyMapping}getKeyMapping(c){const l=this.KeyMapping[c];return void 0!==l?l:null}setCoexistenceMeta(c){return c&&(this.coexistenceMeta=c),this.getCoexistenceMeta()}getCoexistenceMeta(){return this.coexistenceMeta}isCoexistenceAppOfType(c){return!(!this.coexistenceMeta.isCoexistence||this.coexistenceMeta.appType!==c)}getCaseTypeList(){return this.environmentInfoObject&&this.environmentInfoObject?.pyCaseTypeList||[]}getUserSettings(){return this.environmentInfoObject?.pyUserSettings||null}getAvailableLocalePacks(){return this.environmentInfoObject?.pyAvailableLocalePacks?.map((c=>c.pyLabel))||[]}getPerformanceDashboardVisibility(){return this.showPerformanceDashboard}setPerformanceDashboardVisibility(c){this.showPerformanceDashboard=c}getIsExtraCallRequiredForDefaultHome(){return this.isExtraCallRequiredForDefaultHome}setIsExtraCallRequiredForDefaultHome(c){this.isExtraCallRequiredForDefaultHome=c}getInactivityTimeout(){const c=this.environmentInfoObject?.pxOperator?.pyAuthenticationTimeout;return c?Number(c):c}isUnifiedObject(){return this.environmentInfoObject?.features?.isUnifiedObject||!1}getRuntime(){return"undefined"!=typeof window&&window.document?"Browser":"Native"}},$d=class{static regex=/\{@P[^}]*\s*:\s*[^}]*\}/g;static subRegex=/:'[a-zA-Z0-9!@#$&()\\-`.+,/\s"]*'/;static keyMap={};static formatLocaleKey(c){let l=0,u="";for(;l<=c.length;){const d=c.indexOf("{@P ",l);if(-1===d){u+=c.substring(l,c.length);break}u+=c.substring(l,d);const p=c.indexOf("}",l),h=c.substring(d,p+1),[g,f]=this.getKeyAndValue(h);this.addKeyToMap(g,f),u+=`${h.split(":")[0]}}`,l=p+1}return u}static getKeyAndValue(c){const l=c.indexOf(":"),u=c.indexOf("}");return[`${c.substring(0,l)}}`,c.substring(l+1,u)]}static addKeyToMap(c,l){this.keyMap[c]=l}static replaceWithValue(c){let l=0,u="";for(;l<=c.length;){const d=c.indexOf("{@P ",l);if(-1===d){u+=c.substring(l,c.length);break}u+=c.substring(l,d);const p=c.indexOf("}",l),h=c.substring(d,p+1);u+=this.keyMap[h],l=p+1}return u}},Bd=new class{GENERIC_BUNDLE_KEY="@BASECLASS!GENERIC!PYGENERICFIELDS";FIELD_LABELS_BUNDLE_KEY="@BASECLASS!LABEL!PYFIELDLABELS";GENERIC_BUNDLE_KEY_LP="GENERIC!GENERICFIELDS";MESSAGE_BUNDLE_KEY="@BASECLASS!MESSAGE!PYMESSAGES";BASE_CLASS="@BASECLASS";DATA_PAGE_LOCALECONTEXT="datapage";constructor(){this.localeStore={},this.getLocaleValue=this.getLocaleValue.bind(this)}setLocaleForRule=(c,l)=>{const u=c.LocaleContent||c;this.localeStore[l]=u};getLocaleForRule(c=this.#c()){return this.localeStore[c]}resetLocaleStore=()=>{this.localeStore={}};#l(c){return c??this.#c()}#u(c){let l=!1;return c&&"string"==typeof c&&(l=c.includes("@P ")),l}#d(c,l){return l!==this.FIELD_LABELS_BUNDLE_KEY?c?`${c}.fields`:"fields":c}getLocaleValue(c,l,u,d){u=this.#l(u);const p=this.#u(c);p&&(c=$d.formatLocaleKey(c));const h=this.#p(c,u,l,d);return"Messages.fields"===(l=this.#d(l,u))&&"string"==typeof c?this.getLocalizedErrorMessage(h,c)||c:p?$d.replaceWithValue(h[c]||c):h[c]||c}#p(c,l,u,d){l!==this.FIELD_LABELS_BUNDLE_KEY&&(u=u?`${u}.fields`:"fields");let p=this.localeStore[l.toUpperCase()],h=p?Xp.getIn(p,u,{}):{};return!h[c]&&d&&(p=this.localeStore[this.#c().toUpperCase()],h=p?Xp.getIn(p,`${d}.${u}`,{}):{}),h}#c(){return 2===kd.getFeatureMap().localizationVersion?this.GENERIC_BUNDLE_KEY_LP:this.GENERIC_BUNDLE_KEY}getParagraphLocaleValue(c,l){const u=`${c}!${W.PARAGRAPH}!${l}`,d=this.localeStore[u.toUpperCase()];return d?decodeURIComponent(atob(d.content).split("").map((c=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")):null}getPortalLocaleReference(c){return c?`PORTAL!${c}`.toUpperCase():`PORTAL!${kd.getPortalName()}`.toUpperCase()}getCaseLocaleReference(c,l){return c?2===this.getLocalizationVersion()?`CASE!${c}`.toUpperCase():l?`${c}!CASE!${l}`.toUpperCase():null:null}getLocalizationVersion(){return kd.getFeatureMap().localizationVersion||1}async getLocaleJsons(c){if(!(await this.isCurrentLocalePackAvailable()))return[];const l=kd.getUseLocale(),u=[],d=PCore.getLocaleUtils().localeStore;if((c=(c=c.filter((c=>!d[c]))).map((c=>c.toUpperCase()))).length>0){const d=c.map((c=>({localeRuleKey:c,promise:Vr.getSvcLocale(l,`${c}.json`)}))),p=await Promise.allSettled(d.map((c=>c.promise)));await Promise.all(p.map((async(c,l)=>{if("fulfilled"===c.status){const p=d[l];let h;try{h=await c.value.json()}catch{h=null}h&&u.push({localeRuleKey:p.localeRuleKey,jsonData:h})}})))}return u}async loadLocaleResources(c){const l=kd.getUseLocale(),u=kd.getBaseLocale();if(kd&&l&&(l!==u||"en-US"!==u)&&c?.length>0)try{(await this.getLocaleJsons(c)).forEach((c=>{this.setLocaleForRule(c.jsonData,c.localeRuleKey)}))}catch(c){console.warn(c)}}setTimezone(c){this.timezone=c}getTimeZoneInUse(){const c=Intl.DateTimeFormat().resolvedOptions().timeZone;return this.timezone||c}matchPatternWithText(c,l){let u=l;const d=[];for(let p=0;p<c.length;){const l=c[p];if(0!==l.length){const c=u.indexOf(l);if(-1===c)return null;if(p>0){const l=u.slice(0,c);d.push(l)}u=u.slice(c+l.length)}p+=1}return u&&d.push(u),d}getLocalizedErrorMessage(c,l){let u="";if(c[l])return c[l];for(const d of Object.keys(c)){const p=d.split(/\{\d+\}/),h=this.matchPatternWithText(p,l);if(h){const l=c[d];if(u=this.replacePlaceHolders(h,l),u)return u}}return u}replacePlaceHolders(c,l){for(let u=0;u<c.length;){if(!l.includes(`{${u+1}}`))return"";l=l.replace(`{${u+1}}`,c[u]),u+=1}return l}async isCurrentLocalePackAvailable(){const c=kd.getLocale();return this.availableLangPacks||(this.availableLangPacks=await Vr.getSvcAvailableLocales()),c&&this.availableLangPacks.includes(c)}};let Gd;const Hd=c=>{if(c){const l=(new DOMParser).parseFromString(c,"text/html").getElementsByTagName("pega-reference")[0].getAttribute("data-rule-id")??"";if(l){const c=Gd.getValue(l);return Gd.registerAdditionalProps({[l]:`@P ${l}`}),c}}},qd=class{static getParagraphStream(c,l){return((c,l)=>{Gd=l;const u=c.replace(/<pega-reference(.*?)<\/pega-reference>/g,Hd);return/^(<p>)\s*(<\/p>)$/.test(u)?null:u})(c,l)}};nn.registerHandler("@L",((c,l)=>l.getLocalizedValue(c))),nn.registerHandler("@P",((c,l,u)=>l?l.getValue(c):Zp.getLitePropertyValue(u))),nn.registerHandler("@E",((c,l,u)=>{try{const d=Wt(c),p=Ht(d);return qt(p,l,u)}catch(c){}return!0})),nn.registerHandler("@W",((c,l,u)=>{let d;if(l)d=l.getContextDataValue(`.${W.SUMMARY_OF_WHEN_CONDITIONS}.${c}`);else{const{pageReference:l,context:p}=u??{};d=$p(l,`.${W.SUMMARY_OF_WHEN_CONDITIONS}.${c}`,p)}return!0===d||"true"===d})),nn.registerHandler("@ASSOCIATED",((c,l)=>{let u={};const d=[];let p="",h="";const g=l.getPageReference();if(c.startsWith(".")){p=`${g}.${c.substring(1)}`;const d=c.split(".").filter((c=>!!c));d.length>1&&(d.pop(),h=d.join(".")),u=l.getFieldMetadata(c.substring(1))}else u=l.getFieldMetadata(c),p=c;const f=u?.datasource?.tableType,m=u?.datasource?.mode===W.READONLY,y=u?.datasource?.name||"",I=l.getComponentConfig();if(I&&I.deferDatasource&&(I.datasourceMetadata=`@FIELD_META ${c}`,l.setStateProps({datasourceMetadata:I.datasourceMetadata}),f===W.DATA_PAGE))return null;if(f===W.DECISION||f===W.RULE_REFERENCE)return function(c,l){const u=rn.getPropertyName(c?.propertyForDisplayText??""),d=rn.getPropertyName(c?.propertyForValue??""),p=l.getContextDataValue(`.${W.SUMMARY_OF_EXPRESSIONS}.${c?.name}`)||[];return p?.map((c=>({key:c[d]||c[`.${d}`],value:c[u]||c[`.${u}`]})))}(u?.datasource,l);if(f!==W.DATA_PAGE)return u?.datasource?.records;const E=rn.getPropertyName(u?.datasource?.propertyForDisplayText),A=rn.getPropertyName(u?.datasource?.propertyForValue),_=Array.isArray(u?.datasource?.parameters)?u?.datasource?.parameters:[],C=l.getContextName(),S=[];if(_.forEach((c=>{if(rn.isProperty(c?.value)){let l=kp(`.${Xp.getFullPropertyReference([h,rn.getPropertyName(c.value)])}`,g,C);S.push(Xp.getFullPropertyReference([g,h,rn.getPropertyName(c?.value)])),null!=l&&""!==l||(l=W.NULL_STRING),d.push(l)}else d.push(c?.value||W.NULL_STRING)})),C){const c=en.getContextObjectByName(C)||{};S.forEach((l=>{if(l in c){const u=c[l];c[l]=[...new Set([...u,p])]}else c[l]=[p]})),en.addContextName(C,c)}const T=function(c,l,u,d){let p="",h=u;if(l.join(W.HASH_DELIMITER)&&(p=Xp.getHashedString(l.join(W.HASH_DELIMITER)),h=u+W.UNDERSCORE_STRING+p),d){const c=jp(),l=c?c[u]?.[h]:{};return Array.isArray(l?.pxResults)?l.pxResults:[]}const g=(c.getDataObject()[u]||{})[h]||{};return Array.isArray(g?.pxResults)?g.pxResults:[]}(l,d,y,m);return T.map((c=>({key:c[A]||c[`.${A}`],value:c[E]||c[`.${E}`]})))})),nn.registerHandler("@ROUTING_INFO",((c,l)=>St(l.getContainerName(),l.getContextName()))),nn.registerHandler("@ENV",((c,l)=>{switch(c){case W.ENV_INFO_KEYS.APPLICATION_NAME:return kd.getApplicationName();case W.ENV_INFO_KEYS.ACCESS_GROUP:return kd.getAccessGroup();case W.ENV_INFO_KEYS.USER_NAME:return kd.getOperatorName();case W.ENV_INFO_KEYS.USER_ID:return kd.getOperatorIdentifier();case W.ENV_INFO_KEYS.APPLICATION_DESC:return l.getLocalizedValue(kd.getApplicationLabel()||"");case W.ENV_INFO_KEYS.USER_IMAGE:return kd.getOperatorImageInsKey();case W.ENV_INFO_KEYS.LOCALE:return kd.getUseLocale();case W.ENV_INFO_KEYS.TIMEZONE:return kd.getTimeZone();case W.ENV_INFO_KEYS.WORK_GROUP:return kd.getOperatorWorkGroup();default:return c}})),nn.registerHandler("@DATASOURCE",((c,l)=>{const u=l.getValue(c)||[],d=l.getComponentConfig(),p=Object.keys(d).find((l=>d[l]?.source?.includes(c)));if(p){const{fields:c,copyAll:l}=d[p],h=[];return u.forEach((u=>{const d={};l?Object.keys(u).forEach((c=>{const l=rn.getPropertyName(c);d[l]=u[l]})):Object.keys(c).forEach((l=>{const p=rn.getPropertyName(c[l]);d[l]=u[p]})),h.push(d)})),h}return[]})),nn.registerHandler("@FIELD_META",((c,l)=>{let u,d={};if(d=c.startsWith(".")?l.getFieldMetadata(c.substring(1)):l.getFieldMetadata(c),d&&d.datasource&&d.datasource.parameters){let p="";const h=c.split(".").filter((c=>!!c));if(h.length>1&&(h.pop(),p=`.${h.join(".")}`),Array.isArray(d.datasource.parameters)){const c=[];d.datasource.parameters.forEach((u=>{const d={},{name:h,value:g}=u;d.name=h,"string"==typeof g&&g.startsWith("@P")?d.value=`@P ${p}${g.substring(3)}`:d.value=g,c.push(l.resolveConfigProps(d))})),u=c}else u=l.resolveConfigProps(d.datasource.parameters);d={...d,datasource:{...d.datasource,parameters:u}}}return d})),nn.registerHandler("@USER",((c,l,u={})=>{const d=l?.getValue(c)||Zp.getLitePropertyValue(u,c),p=l?.getReferencedUser(d)||Zp.getReferencedUser(d,u);return{userId:d,userName:p?p.UserName:null}})),nn.registerHandler("@ACTIVE_CASES",((c,l)=>yu.getOpenedCaseItems(`${l.getContextName()}/${l.getContainerName()}`))),nn.registerHandler("@LR",(c=>c)),nn.registerHandler("@CASE",((c,l)=>c===W.ID?l.getCaseInfo().getKey():c)),nn.registerHandler("@SHARED",(c=>Eu.getSharedState(c))),nn.registerHandler("@PARAGRAPH",((c,l)=>{const u=l.getLocalizedParagraphValue(c);return u?qd.getParagraphStream(u,l):null})),nn.registerHandler("@FILTERED_LIST",((c,l)=>{const u=c.substring(1,c.indexOf("[")),d=c.substring(c.indexOf("]")+2),p=c.substring(c.indexOf("[")+1,c.indexOf("]"));if(!l)return null;const{useCustomContext:h}=l;let g;return Xp.isEmpty(h)?g=l.getValue(`.${u}`):(g=h,g=Xp.getIn(g,u)),g&&d.length>0?(p&&(g=g.filter((c=>zt(p,c)))),g.map((c=>Xp.getIn(c,d)))):null})),nn.registerHandler("@ADDRESS",((c,l)=>{const u=l.getValue(c)?.pyCountry;return u?`pyAddressForm_${u}`:"pyAddressForm"})),nn.registerHandler("@DATATYPE",((c,l)=>l.getValue(c)));const zd="downloadAttachment",Yd={},Kd=c=>{const l=oc();return Yd[c]=l,l},Xd=c=>{let l="document-doc";if(!c)return l;if(c.startsWith("audio"))l="audio";else if(c.startsWith("video"))l="video";else if(c.startsWith("image"))l="picture";else if(c.includes("pdf"))l="document-pdf";else{const[,u]=c.split("/"),d=c=>c.some((c=>u.includes(c)));d(["excel","spreadsheet"])?l="document-xls":d(["zip","compressed","gzip","rar","tar"])&&(l="document-compress")}return l},Jd=c=>{let l,u,d,p;return l=c.pyCategoryLabel?`${c.pyCategoryLabel},`:c.pyCategoryName?`${c.pyCategoryName},`:c.Category,u=c.pxCreateOpName?c.pxCreateOpName:c.pxCreateOperator?c.pxCreateOperator:c.CreateUser?.Name||"",d=c.pyFileName?c.pyFileName:c.FileExtension&&""!==c.FileExtension&&c.FileName.endsWith(c.FileExtension)?c.FileName.substring(0,c.FileName.lastIndexOf(c.FileExtension)-1):c.FileName,p=c.pyAttachName&&c.pyFileName?c.pyAttachName.startsWith(c.pyFileName)&&c.pyAttachName.split(".").length-1===c.pyFileName.split(".").length?c.pyAttachName.split(".").pop():"":c.FileExtension,{props:{meta:`${l} ${u}`,name:c.pyAttachName?c.pyAttachName:c.FileName,icon:Xd(c.pyMimeFileExtension||c.MimeType)},responseProps:{fileName:c.pyAttachName?c.pyAttachName:c.FileName,name:d,category:c.pyCategoryName?c.pyCategoryName:c.Category,extension:p,ID:c.pzInsKey?c.pzInsKey:c.ID,mimeType:c.pyMimeFileExtension?c.pyMimeFileExtension:c.MimeType,attachmentURL:c.pyAttachmentLink?c.pyAttachmentLink:c.AttachmentURL,createUser:u,createDateTime:c.pxCreateDateTime?c.pxCreateDateTime:c.CreateDateTime,responseType:c.responseType??(c.ID?"binary":null)}}},Qd={uploadAttachment:(c,l,u,d)=>{const p=new FormData;p.append("appendUniqueIdToFileName",!0),p.append("file",c);const{restApi:h,reqType:g}=eg("uploadAttachment",{});return rc(h,{method:g,headers:{"Content-Type":"multipart/form-data"},body:p,onUploadProgress:l,signal:Kd(c.ID).token},d).then((l=>({type:"File",category:c.category||"File",ID:l.data.ID,clientFileID:c.ID,filename:c.name}))).catch(u?u(ic,c):c=>{throw c.isHandled=!1,c}).finally((()=>delete Yd[c.ID]))},linkAttachmentsToCase:(c,l,u,d)=>{const p={};if("File"===u){const[c]=l,{clientFileID:u}=c;delete c.clientFileID,p.signal=Kd(u).token}const{restApi:h,reqType:g}=eg("linkCaseAttachment",{caseID:c});return rc(h,{...p,body:{attachments:l},method:g},d)},getCaseAttachments:(c,l,u=!1)=>{const{restApi:d,reqType:p}=eg("getCaseAttachments",{caseID:c,includeThumbnail:u});return rc(d,{method:p},l).then((c=>c.data.attachments))},getAttachmentCategories:(c,l,u)=>{const{restApi:d,reqType:p}=eg("getAttachmentCategories",{caseID:c,type:l});return rc(d,{method:p},u).then((c=>c.data))},downloadAttachment:(c,l,u)=>{const{restApi:d,reqType:p}=eg(zd,{attachmentID:c});return rc(d,{method:p,..."binary"===u&&{responseType:"arraybuffer"}},l)},editAttachment:(c,l,u)=>{const{restApi:d,reqType:p}=eg("editAttachment",{attachmentID:c});return rc(d,{method:p,body:{...l}},u)},deleteAttachment:(c,l)=>{const{restApi:u,reqType:d}=eg("deleteAttachment",{attachmentID:c});return rc(u,{method:d},l)},downloadDocument:(c,l)=>{const{restApi:u,reqType:d}=eg("downloadDocument",{documentID:c});return rc(u,{method:d},l)},deleteDocument:(c,l,u)=>{const{restApi:d,reqType:p}=eg("deleteDocument",{caseID:c,documentID:l});return rc(d,{method:p},u)},getDocumentURL:c=>{const l=PCore.getEnvironmentInfo().getDocumentUrlDP()||"D_pxGetDocumentURL";return PCore.getDataPageUtils().getPageDataAsync(l,c.getContextName(),{},{invalidateCache:!0}).catch((l=>{c.reportError(": Error occurred during ajax call getDocumentURL API : ",l.response)}))},cancelRequest:c=>{Yd[c]&&(Yd[c].cancel(),delete Yd[c])},buildFilePropsFromResponse:Jd,getAttachmentURL:c=>{const{restApi:l}=eg(zd,{attachmentID:c});return l},prepareAttachmentData:c=>{let l=[];if(c&&Object.hasOwn(c,"pyCount")&&c.pyCount>0)l=c?.pxResults?.filter((c=>!!c.pzInsKey)).map((c=>Jd(c)))||[];else if(c&&"object"==typeof c){let u;u=Array.isArray(c)?c:[c],l=u?.filter((c=>c.ID&&c.FileName||c.pzInsKey)).map(Jd)}else l=[];return{hasUploadedFiles:l.length>0,categoryName:c?.pyCategoryName||l?.[0]?.responseProps?.category||"",attachments:l}}};nn.registerHandler("@ATTACHMENT",((c,l,u)=>{let d;return d=l?l.getValue(c):Zp.getLitePropertyValue(u),Qd.prepareAttachmentData(d)})),nn.registerHandler("@FL",((c,l)=>l.getLocalizedValue(l.getFieldMetadata(c)?.label))),nn.registerHandler("@GENAICOACH",((c,l)=>Tp(c,l.getCurrentClassID()))),nn.registerHandler("@REFRESH",((c,l)=>{const u=l.getCaseInfo().getKey(),d=l.getContextName(),p=l.getPageReference();nl.registerForRefresh("PROP_CHANGE",l.getActionsApi().refreshCaseView.bind(l.getActionsApi(),u,"",p,{autoDetectRefresh:!0,preserveClientChanges:!1,refreshFor:!0}),`${p}${c}`,`${d}/${p}`,d)}));const Zd={},ep={},tp={},np={},rp={},sp={},ap={},op={},ip={},cp={},lp=(c={},l={})=>{0!==Object.keys(l).length?Object.keys(c).forEach((u=>{const d=c[u],p=l[u];if(p){const c=Array.isArray(p)?p:[p];(Array.isArray(d)?d:[d]).forEach((l=>{const u=c.findIndex((c=>c.classID===l.classID));if(-1===u)c.push(l);else{const d={isDeclarativeTarget:!1},p={...c[u],...d,...l};c[u]=p}})),l[u]=1===c.length?c[0]:c}else l[u]=d})):Xp.copy(c,l)},up=(c,l="")=>{if(!c)return null;const u=np[c];if(!u)return null;if(!l)return Array.isArray(u)?[...u]:u;let d;return d=Array.isArray(u)?u.find((c=>c.classID.toLowerCase()===l.toLowerCase()))||null:u.classID.toLowerCase()===l.toLowerCase()||("Page"===u.type||"Page List"===u.type)&&u?.pageClass?.toLowerCase()===l.toLowerCase()?u:null,d},dp=(c,l,u,d=[])=>{if(!l||!c)return null;if(!c.includes(".")){let p;const h=up(c,l);return d.length&&(p=d.join(".")),{...h,embeddedType:u,category:p}}const[p,...h]=c.split("."),g=up(p,l);return g&&d.push(g.label),dp(h.join("."),g?.pageClass,g?.type,d)},pp=c=>{lp(c,ep)},hp=c=>{lp(c,tp)},gp=c=>{if(c.views&&lp(c.views,ep),c.navigations&&lp(c.navigations,tp),c.personalizations&&lp(c.personalizations,sp),c.insights&&lp(c.insights,ap),c.paragraphs&&lp(c.paragraphs,Zd),c.dataTypes&&lp(c.dataTypes,op),c.datapages&&lp(c.datapages,ip),c.genAICoaches&&lp(c.genAICoaches,cp),c.fields){Object.keys(c.fields).forEach((l=>{const u=c.fields[l];if(Array.isArray(u)){if(c.datapages&&u.forEach((l=>{l.datasource&&"DataPage"===l.datasource.tableType&&(l.datasource.mode=c.datapages[l.datasource.name].mode)})),1===u.length){const[d]=u;c.fields[l]=d}}else c.datapages&&u.datasource&&"DataPage"===u.datasource.tableType&&(u.datasource.mode=c.datapages[u.datasource.name].mode)}));const{datapages:l={}}=c;Object.keys(l).forEach((c=>{rp[c]=l[c]}))}lp(c.fields,np)},fp=c=>ep[c],mp=(c,l)=>{const u=ep[c];return Array.isArray(u)?u.some((c=>c.classID===l)):u?.classID===l},yp=c=>tp[c],Ip=c=>c in rp?rp[c]:null,Ep=c=>c in sp?sp[c]:null,Ap=c=>c in ap?ap[c]:null,_p=c=>{const l={};return Object.keys(np).forEach((u=>{const d=np[u];let p;Array.isArray(d)?p=d.find((l=>c===l.classID)):c===d.classID&&(p=d),p&&(l[u]=Xp.deepClone(p))})),l},Cp=(c,l)=>{const u=up(c,l)?.datasource?.parameters;return u?Xp.deepClone(u):null},Sp=(c,l)=>{let u=null;const d=Zd[c];return d&&(Array.isArray(d)?u=d.find((c=>c.classID===l)):d.classID===l&&(u=d)),u?Xp.deepClone(u):null},Tp=(c,l)=>{let u=null;const d=cp[c];return d&&(Array.isArray(d)?u=d.find((c=>c.classID===l)):d.classID===l&&(u=d)),u?Xp.deepClone(u):null},Np=c=>{if(c in op){const{savableDataPage:l}=op[c];return l}return null},Pp=c=>{const l=ip[c];if(!l)return null;const{classID:u,isAlternateKeyStorage:d,parameters:p}=l;if(d)return p.map((c=>({keyName:c.name,isAlternateKeyStorage:d,linkedField:c.linkedField})));const h=op[u];return h?h.classKeys.map((c=>({keyName:c,isAlternateKeyStorage:d}))):[]},Dp=c=>{if(c in op){const{lookupDataPage:l}=op[c];return l}return null},bp=c=>{if(Object.prototype.hasOwnProperty.call(op,c)){const{lookupDataPageInfo:l}=op[c];return l}return null},Rp=(c,l)=>{const u=c.split("."),d=u.pop(),p=new Zu({options:{pageReference:`${u.join(".")}`,context:l}}),h=up(d,p.getCurrentClassID())?.additionalInformation;if(!h?.includes("@PARAGRAPH"))return h;const g=rn.trimAnnotation(h),f=p.getCurrentClassID(),m=Sp(g,f),y=m?.definedOnClassID,I=Bd.getParagraphLocaleValue(y||f,g);return I?qd.getParagraphStream(I,p):m?.content?qd.getParagraphStream(m.content,p):null},Op=(c,l)=>{const u=c.split("."),d=u.pop(),p=new Zu({options:{pageReference:`${u.join(".")}`,context:l}}),h=up(d,p.getCurrentClassID()),g={};return p._classID=p.getCurrentClassID(),p.resolveConfigProps(h,g),g};class nh{constructor(){this.name="CascadeManager",this.cascadeSubscribers={},this.cascadeResetSubscribers={},this.listChangeSubscribers=[]}registerResetDependencies(c,l,u,d,p,h="singleRecord"){if(!c||!u||!d?.length)return;const g=u.startsWith(".")?`${l}.${u.substring(1)}`:u,f=this.cascadeResetSubscribers[c]||{},m=this._handlePageReference(l,u,p);d.forEach((c=>{if(!c)return;let l=c.startsWith(".")?c.substring(1):c;if(l=Xp.getFullPropertyReference([m,l]),l in f){const c=f[l];c.find((c=>c.propertyName===g))||c.push({propertyName:g,mode:h})}else f[l]=[{propertyName:g,mode:h}]})),Object.keys(f).length>0&&(this.cascadeResetSubscribers[c]=f)}deregisterResetDependencies(c,l,u,d,p){if(!c||!u||!d?.length)return;const h=u.startsWith(".")?`${l}.${u.substring(1)}`:u,g=this.cascadeResetSubscribers[c]||{},f=this._handlePageReference(l,u,p);d.forEach((c=>{if(c){let l=c.startsWith(".")?c.substring(1):c;if(l=Xp.getFullPropertyReference([f,l]),l in g){const c=g[l];Xp.removeExistingDependentProperty(c,h)}}})),Object.keys(g).length>0&&(this.cascadeResetSubscribers[c]=g)}getResetDependencies(c,l){return this.cascadeResetSubscribers[c]?.[l]||[]}purgeResetDependencies(c){c&&this.cascadeResetSubscribers[c]&&delete this.cascadeResetSubscribers[c]}registerFields(c,l,u,d,p){this.cascadeSubscribers[c]=this.cascadeSubscribers[c]||{},u?.forEach((u=>{this.cascadeSubscribers[c][`${l}${u}`]=this.cascadeSubscribers[c][`${l}${u}`]||{};const h=this.cascadeSubscribers[c][`${l}${u}`];if(!h[p]){h[p]=d;const g=kp(u,l,c);h.previousValue="object"==typeof g?null:g}}))}registerListField(c,l,u,d,p){const h=nh._getFieldsForList(c,l,u);h.length>0&&(this.registerFields(c,l,h,d,p),kl.enableCascade(c))}unRegisterListField(c,l,u,d){const p=nh._getFieldsForList(c,l,u);p.length>0&&this.unRegisterFields(c,l,p,d)}static _getFieldsForList(c,l,u){const d=[],p=up(u,kp("classID",l,c));return p&&!Array.isArray(p)&&p.datasource&&p.datasource.parameters&&Object.values(p.datasource.parameters).forEach((c=>{if(rn.isProperty(c)){const l=rn.trimAnnotation(c);d.push(l)}})),d}unRegisterFields(c,l,u,d){this.cascadeSubscribers[c]&&u?.forEach((u=>{if(!this.cascadeSubscribers[c][`${l}${u}`])return;const p=this.cascadeSubscribers[c][`${l}${u}`];p[d]&&delete p[d]}))}triggerCascade(c,l,u,d){let p=!1;this.cascadeSubscribers[c]&&this.cascadeSubscribers[c][l]&&(Object.keys(this.cascadeSubscribers[c][l]).forEach((h=>{const g=this.cascadeSubscribers[c][l];"previousValue"!==h&&g.previousValue!==u&&(p=!0,d?d.add(g[h]):g[h](l,u))})),p&&(this.cascadeSubscribers[c][l].previousValue=u))}purgeCascadeFields(c){delete this.cascadeSubscribers[c]}handleServerChanges(c,l=[],u=[]){if(!c)return;const d=new Set;u.forEach((l=>{const u=kp(l,"",c);this.triggerCascade(c,l,u,d)})),d.forEach((c=>{c()})),0!==this.listChangeSubscribers.length&&0!==l.length&&l.forEach((l=>{this.listChangeSubscribers.forEach((u=>{const d=kp(l,"",c);u(c,l,d)}))}))}_updateChangedProperties(c,l,u,d,p,h,g){if(c!==l){const c=d.lastIndexOf("."),l=d.substring(0,c),f=d.substring(c),m=ar.getMessages({type:"error",property:f,context:p,pageReference:l});if(m?.length>0&&g.push(d),!u)return;h.push(d)}}_getServerProperties(c,l,u,d,p,h){if("object"!=typeof c){p.push(u.replace(/\.(\d+)/g,"[$1]"));const g=/[a-zA-Z]+\.(\d+)\./g;let f=!0;0!==this.listChangeSubscribers.length&&g.test(u)||(f=!1),u=u.replace(/\.(\d+)/g,"[$1]");const m=kp(u,"",l);if(void 0===m&&!c&&0!==c)return;return void this._updateChangedProperties(m,c,f,u,l,d,h)}const g=Object.keys(c??{});for(let f=0,m=g.length;f<m;f+=1){const m=g[f],y=`${u}.${m}`;this._getServerProperties(c[m],l,y,d,p,h)}}getServerProperties(c,l,u=W.CASE_INFO.CASE_INFO_CONTENT){const d=[],p=[],h=[],g=Xp.getIn(c,u);return g&&l?(this._getServerProperties(g,l,u,d,h,p),{changedListProperty:d,leafProperty:h,changedPropertyWithError:p}):{changedListProperty:d,leafProperty:h,changedPropertyWithError:p}}_handlePageReference(c,l,u){let d=c;return"Page"===u&&l.startsWith(".")&&l.slice(1).includes(".")&&(d=`${c}${l.substring(0,l.lastIndexOf("."))}`),d}registerForListChanges(c=()=>{}){this.listChangeSubscribers.push(c)}unRegisterForListChanges(){this.listChangeSubscribers=[]}}const vp=new nh;let xp=null;const wp=c=>c?.split(/\.(?![^[]+\])|\[|\]/g).filter(Boolean),Mp=c=>{xp=c},Lp=()=>xp,Up=c=>{if(!c)return;let l=[],u=[],d=[];Array.isArray(c)||"MERGE_DATA"!==c.type||({changedListProperty:l,leafProperty:u,changedPropertyWithError:d}=vp.getServerProperties(c.payload.data,c.payload.context,c.payload.rootPageReference)),Lp()?.dispatch(c),Array.isArray(c)||"MERGE_DATA"!==c.type||(d.forEach((l=>{const u=l.lastIndexOf("."),d=l.substring(0,u),p=l.substring(u);ar.clearMessages({type:"error",property:p,pageReference:d,context:c.payload.context});const h=Rn.getFieldReferenceForProperty(c.payload.context,l),g=Zp.resolveContextTreeNodeProps(h.props);Lr.validate(g.componentName?.toLowerCase(),g.propertyName,Zp.getLitePropertyValue(g,g.propertyName),g)})),vp.handleServerChanges(c.payload.context,l,u))},Fp=c=>Lp()?.getState().data?.[c],jp=()=>Lp()?.getState().data[W.SHARED],Vp=(c,l,u)=>{if(!(d=c)||d.startsWith('"')||d.startsWith("'"))return(c=>c&&c.trim().substring(1,c.length-1))(c);var d;const p=c?.startsWith(".")?l+c:c,h=wp(p);return Xp.getIn(u,h)},kp=(c,l,u)=>Vp(c,l,Fp(u)),$p=(c,l,u)=>Vp(l,c?`${W.CONTEXT_DATA}.${c}`:`${W.CONTEXT_DATA}`,Fp(u)),Bp=(c,l,u)=>((c,l,u)=>{const d=wp(`${l}.${u}`);return Xp.getIn(c,d)})(Fp(u),`${W.CONTEXT_DATA}.${c}`,l),Gp=c=>{const{context:l}=c,u=Lp()?.getState().data[l];if(u)return me;const{action:d}=c;return["createWork","showHarness","openAssignment","openWorkByHandle","initRouting"].includes(d)?De:me},Wp=(c,l)=>{const u=wp(l);return Xp.deleteIn(c,u)},Hp=c=>!Array.isArray(c)&&"object"==typeof c,qp=(c,l,u={})=>{const{isArrayDeepMerge:d,propertiesToReplace:p=[]}=u;Array.isArray(c)&&!l&&(l=[]),Array.isArray(p)&&p.length>0&&p.forEach((l=>{Xp.setIn(c,l,{})}));const h=(c,l)=>{if(Hp(c)&&null!==l&&"string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l)return j()(c,l,h);if(Array.isArray(c)&&null!==l&&Array.isArray(l)){if(d)return j()(c,l,h);{const u=l.length;if(void 0===d&&u===c.length)return j()(c,l,h)}}return""===l&&c&&"object"==typeof c?c:l};return h(c,l)},zp=(c,l,u,d={isArrayDeepMerge:!0})=>{const{isArrayDeepMerge:p}=d,h=wp(l);if("object"==typeof u){const l=qp(Xp.getIn(c,h),u,{isArrayDeepMerge:p});return Xp.setIn(c,h,l)}return Xp.setIn(c,h,u)},Yp=(c,l,u)=>{const d=wp(l);return Xp.setIn(c,d,u)},Kp=()=>{const c=st,{promise:l,actionMgrID:u}=gn.actionManagerPromise(c);return Up({type:c,payload:{actionMgrID:u}}),l};class Ch{static mergeDeep(c,l){return j()(l,c)}static hasIn(c,l){return x()(c,l)}static getIn(c,l,u){return M()(c,l,u)}static setIn(c,l,u){return U()(c,l,u)}static deleteIn(c,l){return O()(c,l)}static isObjectEmpty(c){return!c||0===Object.entries(c).length}static isEmpty(c){return k()(c)}static deepClone(c={}){return JSON.parse(JSON.stringify(c))}static copy(c,l){Object.keys(c).forEach((u=>{l[u]=c[u]}))}static isPropertyRef(c){if(!c||-1===c.indexOf("."))return!1;let l=0;const u=c.length;for(;l<u;l+=1)if(" @#$%=!<>/\\".includes(c[l]))return!1;return!0}static isWhenExist(c){const l=["visibility","disabled","readOnly","required"];let u=!1;for(const d in c)l.includes(d)&&"string"==typeof c[d]&&c[d]?.startsWith("@W ")&&(u=!0);return u||"multirecordlist"!==c?.type||"Editable"!==c?.renderMode||(u=Object.keys(c?.allowActions??{}).some((l=>"string"==typeof c?.allowActions?.[l]&&c.allowActions[l]?.startsWith("@W ")))),u}static getWhenNames(c){const l=["visibility","disabled","readOnly","required"];let u="";const d=new Set;for(const p in c)l.includes(p)&&"string"==typeof c[p]&&c[p]?.startsWith("@W ")&&(u=rn.trimAnnotation(c[p]),d.add(u));return"multirecordlist"===c?.type&&"Editable"===c?.renderMode&&Object.keys(c?.allowActions??{}).forEach((l=>{"string"==typeof c?.allowActions[l]&&c.allowActions[l]?.startsWith("@W ")&&(u=rn.trimAnnotation(c.allowActions[l]),d.add(u))})),[...d]}static isExpressionExist(c){const l=["disabled","visibility","readOnly","required"];let u=!1;for(const d in c)l.includes(d)&&"string"==typeof c[d]&&c[d]?.startsWith("@E ")&&(u=!0);return u}static buildDataObject(c,l){let u={};const d=u;return l.indexOf(".")>0?l.split(".").forEach((c=>{if(c.includes("[")){const[l]=c.split("[");u[l]=[],u=u[l],c=c.substring(c.indexOf("[")+1,c.lastIndexOf("]"))}u[c]={},u=u[c]})):(u[l]={},u=u[l]),Object.keys(c).forEach((l=>{let d=l;l.startsWith(".")&&(d=l.substring(1)),u[d]=c[l]})),d}static buildObject=(c,l,u)=>{if(void 0===u)return;const d=c.split(".");let p=0;for(;p<d.length-1;p+=1){const c=d[p];c?.toString().length&&!l[c]&&(l[c]={}),l[c]&&(l=l[c])}"object"==typeof u?(l[d[p]]||(l[d[p]]=Array.isArray(u)?[]:{}),qp(l[d[p]],u,{isArrayDeepMerge:!0})):l[d[p]]=u};static getHashedString(c){return(0,b.crc32)(c).toString(16)}static getPropertyName(c){if(c){const l=c.startsWith("@P"),u=l?c.indexOf(" "):-1;return l?c.substring(u+2):c}return c}static getPropertyNameFromDependency(c){return"string"==typeof c?c:c.propertyName}static isValidJson(c){try{return JSON.parse(c)}catch(c){return console.error("not a Valid JSON",c),!1}}static isEqual(c,l){return A()(c,l)}static isContains(c,l){const u=Object.keys(c);for(let d=0;d<u.length;d+=1)if(c[u[d]]&&Ch.isEqual(c[u[d]],l))return!0;return!1}static removeExistingDependentProperty(c,l){const u=c.findIndex((c=>c.propertyName===l));u>=0&&c.splice(u,1)}static getFullPropertyReference(c){return Array.isArray(c)?c.filter((c=>!!c)).join("."):""}static iterateLeafNodes(c,l){const u=(c,d=[])=>{Object.entries(c).forEach((([p,h])=>{d.push(Array.isArray(c)?Number(p):p),Array.isArray(h)?h.forEach(((c,l)=>{d.push(l),u(c,d),d.pop()})):"object"==typeof h?u(h,d):l(d.slice(),h),d.pop()}))};u(c)}static resolveStringBooleans(c){const l=["required","readOnly","visibility"];return Object.keys(c).forEach((u=>{l.includes(u)&&"string"==typeof c[u]&&(c[u]="true"===c[u])})),c}static generateUniqueID(){return crypto.randomUUID()}static unflatten(c){const l={};return Object.entries(c).forEach((([c,u])=>{const d=c.split(".");let p;d.reduce(((c,l,h)=>(p=c[l]?c[l]:Number.isNaN(Number(d[h+1]))?d.length-1===h?u:{}:[],c[l]=p,c[l])),l)})),l}static flatten(c,l,u){l||(l=""),Array.isArray(c)?c.forEach(((c,d)=>{Ch.flatten(c,`${l}[${d}]`,u)})):"object"==typeof c&&null!==c?Object.keys(c).forEach((d=>{const p=l?`${l}.${d}`:d;Ch.flatten(c[d],p,u)})):u[l]=c}static buildInstructionPageReference(c,l){const u=`${c}${l}`.replace(W.CASE_INFO.CASE_INFO_CONTENT,"").replace(W.DATA_INFO.DATA_INFO_CONTENT,"");return zn.formatPageReference(u)}static buildAttachmentsFormData(c){return c.map((c=>{if(c.delete){let l="";return l=c.responseProps.ID?c.responseProps.ID:c.responseProps.pzInsKey,{type:"File",attachmentFieldName:c.label,delete:!0,pzInsKey:l}}return{type:"File",attachmentFieldName:c.label,category:c.category,ID:c.handle,clientFileID:c.ID}}))}static convertPageRefToClipboardPageNotation(c){return c.replace(/\[\d+\]/g,(c=>c.replace(/\d+/g,(c=>`${parseInt(c,10)+1}`)).replace("[","(").replace("]",")")))}static convertClipboardPageToPageRefNotation(c){return c.replace(/\(\d+\)/g,(c=>c.replace(/\d+/g,(c=>""+(parseInt(c,10)-1))).replace("(","[").replace(")","]")))}static isString(c){return"string"==typeof c}static rejectPendingActions(c){return c.forEach((c=>c.payload.actionMgrID&&gn.rejectActionByID(c.payload.actionMgrID))),!0}static isValidAnnotation(c){const l=new Set(["@DATASOURCE","@ACTIVE_CASES","@ADDRESS","@ASSOCIATED","@ATTACHMENT","@CASE","@FILTERED_LIST","@PARAGRAPH","@P","@ROUTING_INFO","@USER","@W","@E","@SHARED"]),u=c.indexOf(" "),d=c.substring(0,u);return l.has(d)}static trimDotForProperty(c){return"string"==typeof c&&c.startsWith(".")?c.substring(1):c}static convertObjectWithStringToBoolean(c){if(c&&!Array.isArray(c)&&"object"==typeof c)return Object.keys(c).forEach((l=>{let u;const d=c[l];u="string"==typeof d?"true"===d||"false"!==d&&d:d,c[l]=u})),c}}const Xp=Ch,Jp=W.SUMMARY_OF_LISTS,Qp=W.SUMMARY_OF_WHEN_CONDITIONS;class Ph{static updateData(c){Object.keys(c).forEach((l=>{Up(oh({context:l,data:c[l]}))}))}static updateContextData(c){Object.keys(c).forEach((l=>{Up(oh({context:l,data:c[l]}))}))}static resolveWhen(c,l){return!!l.getContextDataValue(`.${Qp}.${c}`)}static resolveFieldValue(c,l){return l.getLocalizedValue(c)}static resolveNavigation(c,l){return yp([this.resolveName(c,l)])}static resolveView(c,l,u=""){const d=fp([this.resolveName(c,l)]);let p=[];return Array.isArray(d)&&d.length>0?(l&&(u||(u=l.getValue(W.CLASS_ID)),p=d.filter((c=>c[W.CLASSID]===u))),0===p.length?d[0]:p[0]):d}static resolveName(c,l){return c&&"string"==typeof c&&c.startsWith("param.")?(c=c.substring(6),l.getContextDataValue(`.$parameters.${c}`)):(c&&"string"==typeof c&&c.startsWith("@")&&(c=rn.handleAnnotation(c,l)),c)}static getContextPath(c,l){return"number"!=typeof l&&!l||"number"!=typeof(l=rn.trimAnnotation(l))&&"string"!=typeof l?c:"number"==typeof l&&parseInt(l,10)===l?`${c}[${l}]`:l.startsWith(".")?c+l:`${l}`}static getRuleClass(c,l,u){let d;return l?d=l.startsWith(W.CLASS_ANNOTATION)?l.split(W.CLASS_ANNOTATION)[1].trim():this.resolveClassID(l,c.getPageReference(),c.getContextName()):u?.authorContext&&(d=u.ruleClass),d}static resolveReference(c,l){const{type:u}=c;let d;if("reference"===u){const{config:u}=c,p=u?.type,{ref:h,name:g,context:f}=u||{},m=this.getRuleClass(l,f,u);return"navigation"===p?d=this.resolveNavigation(h||g,l):"view"===p?d=this.resolveView(h||g,l,m||""):"widget"===p&&(d={type:"Widget",config:{name:g,ruleClass:m}}),d}return c}static resolvePropertyReference(c,l,u){return kp(l,c,u)}static getProperty(c,l,u){let d=this.resolvePropertyReference(l,c,u);if(null==d||0===d.length){const p=Bp(`${l}.${Jp}`,c,u);p&&(d=this.resolvePropertyReference(l,p,u))}return d}static getPropertyValue(c,l,u){return c=rn.trimAnnotation(c),this.getProperty(c,l,u)}static getReferencedUser(c,l){const u=Ph.getLitePropertyValue(l,"referencedUsers");if(Array.isArray(u)){const l=u.find((l=>l.UserID===c));if(l)return{userId:l.UserID,UserName:l.UserName}}return u?.[c]}static getLitePropertyValue(c,l){if(!c)return;const{useCustomContext:u,propertyName:d,hasSuggestions:p,pageReference:h,context:g}=c;let f=l||d;return u?(f=f?.startsWith?.(".")?f.substring(1):f,f?.split?.(".").reduce(((c,l)=>c?.[l]??void 0),u)):p?Ph.getPropertyValue(f,h,`${g}/${W.SUGGESTION}`):Ph.getPropertyValue(f,h,g)}static _handlePropString(c,l,u,d,p){u.startsWith("@")?c[l]=rn.handleAnnotation(u,d,p):c[l]=u}static _resolveProps(c,l,u){c&&Object.keys(c).forEach((d=>{const p=c[d];"string"==typeof p?this._handlePropString(c,d,p,l,u):Array.isArray(p)?p.forEach((d=>{this._resolveProps("object"==typeof d?d:c[d],l,u)})):"object"==typeof p&&this._resolveProps(c[d],l,u)}))}static resolveProps(c,l,u){return c&&l?(Xp.mergeDeep(c,l),this._resolveProps(l,u,void 0),l):l}static resolveContextTreeNodeProps(c){const l={};return c?(Xp.mergeDeep(c,l),this._resolveProps(l,void 0,c),Xp.resolveStringBooleans(l)):l}static resolveClassID(c,l,u){const d=rn.trimAnnotation(c);let p;for(p=d.startsWith(".")?`${l}${d}`:`${d}`;p;){const c=kp(W.CLASS_ID,p,u);if(c)return c;p=p.substring(0,p.lastIndexOf("."))}return null}}const Zp=Ph,eh=new class{constructor(){this.actionHandlers={}}getHandler(c){return this.actionHandlers[c]}registerHandler(c,l){this.actionHandlers[c]=l}},th=class{static#h=[];static#g=!1;static getActionHandlers=(c,l,u)=>{const d=[];return{mouseenter:"hover",change:"onChange",blur:"onBlur"}[u]!==l||c.forEach((c=>{const l=eh.getHandler(c.action),{config:u}=c;d.push({handler:l,config:u})})),d};static isEditable=c=>{const{tagName:l}=c;return"INPUT"===l||"TEXTAREA"===l||"SELECT"===l||"DATETIME"===l};static isNonKeyInput=c=>{const{tagName:l,type:u}=c;return"SELECT"===l||"checkbox"===u||"radio"===u};static#f=(c,l,u)=>{for(let d=0;d<c.length;d+=1){const p=c[d],h={actionHandler:p.handler,component:l,eventType:u,config:p.config};this.#h.push(h)}};static buildActionObject=(c,l)=>{const u={...c};return u.context="Browser"===kd.getRuntime()?l.getContextName():u.context,u.pageReference=l.getPageReference(),u.actionMgrID=gn.getNextActionMgrId(),u};static#m=c=>{const l=c.actionHandler,u=c.component,{config:d}=c,p={};Zp.resolveProps(d,p,u),l&&(l(c.eventType,p,u),this.#y())};static#y=()=>{if(!this.#g){if(0===this.#h.length)return;const c=this.#h.shift();this.#m(c),c.config&&"true"===c.config.parallel&&this.#h.length>0&&this.#y()}};static#I=()=>{this.#y()};static#E=(c,l,u)=>{this.#f(c,l,u),this.#I()};static getFullRef=c=>{const l=c.getPageReference(),u=c.getComponentConfig().value;return Zp.getContextPath(l,u)};static#A(c,l){const u=c.getComponentConfig().behaviours||[];for(let d=0;d<u.length;d+=1){const{behaviour:p,actions:h}=u[d];if(h){const u=this.getActionHandlers(h,p,l);u&&u.length>0&&this.#E(u,c,l)}}}static changeHandler=(c,l)=>{const u=c.getStateProps().value,d=c.getContextName();if(Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,property:u,pageReference:c.getPageReference(),context:d}),("Browser"===kd.getRuntime()?l?.nativeEvent instanceof Event||l instanceof Event:l?.nativeEvent)||null!==l.value&&void 0===l.prop){let{target:u}=l;null===u&&l&&l.auxiliaryTarget&&(u=l.auxiliaryTarget);const p=void 0===u?l.value:"value"in u?u.value:u.innerText,h=this.getFullRef(c);Up({type:re,payload:{reference:h,value:p,context:d}}),void 0!==u&&this.isEditable(u)&&!this.isNonKeyInput(u)||Up({type:ae,payload:{reference:h,pageReference:c.getPageReference(),value:p,context:d,propertyName:c.getComponentConfig().value,classID:c.getValue(W.CLASS_ID)}})}else{const u=c.getPageReference(),p=c.getStateProps();for(const c of Object.keys(l)){const h=p[c],g=l[c];Up({type:re,payload:{reference:Zp.getContextPath(u,h),value:g,context:d}}),Up({type:ae,payload:{reference:Zp.getContextPath(u,h),value:g,context:d}})}}};static blurHandler=(c,l)=>{let{target:u}=l;null===u&&l&&"auxiliaryTarget"in l&&(u=l.auxiliaryTarget);const{value:d,validationValue:p}=u,h=this.getFullRef(c),g=c.getContextName();u.clearMessages&&Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,property:c.getStateProps().value,pageReference:c.getPageReference(),context:g}),this.isEditable(u)&&(c.getValidationApi().validate("validationValue"in u?p:d),c.isInsideList()&&c.getListActions().updateProperty(c.getStateProps().value,d),!this.isNonKeyInput(u)&&Up({type:ae,payload:{reference:h,pageReference:c.getPageReference(),value:d,context:g,propertyName:c.getComponentConfig().value,classID:c.getValue(W.CLASS_ID)}}))};static eventHandler=(c,l)=>{const{type:u}=l;switch(u){case"change":this.changeHandler(c,l);break;case"blur":this.blurHandler(c,l)}u&&this.#A(c,u)};static pause=()=>{this.#g=!0};static resume=()=>{this.#g=!1,this.#y()};static isQueueEmpty=()=>0===this.#h.length;static clearQueue=()=>{this.#h=[]};static getActionsQueue=()=>this.#h;static EVENTS_MAP={click:"onClick",change:"onChange",hover:"onMouseEnter",blur:"onBlur"}},rh="CREATE_WORK",sh=c=>({type:rh,payload:c}),ah=(c,l,u,d="")=>{const p=[];Object.keys(c).forEach((h=>{"object"==typeof c[h]&&h.includes("[")?function(c,l,u,d,p,h){const g=d.substring(0,d.indexOf("[")),f=d.substring(d.indexOf("[")+1,d.indexOf("]"));Array.isArray(l[g])&&(l[g]?.splice(+f,1,c[d]),h.push(g),u.add(`${p}.${d}`))}(c,l,u,h,d,p):c[h]&&"object"==typeof c[h]?(l[h]||(l[h]=Array.isArray(c[h])?[]:{}),ah(c[h],l[h],u,`${d}.${h}`)):l[h]=c[h]})),function(c,l,u){Object.keys(c).forEach((d=>{(Array.isArray(c[d])&&!u.includes(d)||!Array.isArray(c[d])&&!Object.hasOwn(l,d))&&delete c[d]}))}(l,c,p)},oh=(c,l={})=>{const{serverPrecedenceFields:u=[],propertiesToReplace:d=[]}=l,{context:p,data:h,isArrayDeepMerge:g,preserveClientChanges:f=!1}=c,m=ll(p,!0);((c,l={})=>{const u=jc.buildClientChangeList(c)||{};Object.keys(u).forEach((c=>{Xp.buildObject(c,l,u[c])}))})(p,m);const y=Fp(p);let I={};if(y&&h){I=JSON.parse(JSON.stringify(y));const c=JSON.parse(JSON.stringify(h)),l=new Set;ah(m,I,l),((c,l,u)=>{const d=new Set;c.forEach((c=>{c=Xp.trimDotForProperty(c);const[p,h,g]=In(c);p&&h&&g&&!d.has(`${p}.${h}`)&&((Xp.getIn(u,`${p}.${h}`)||[]).forEach(((c,u)=>{u!==+g&&Xp.setIn(l,`${p}.${h}[${u}]`,c)})),d.add(`${p}.${h}`))}))})(l,I,c)}!function(c,l){const u=Xp.getIn(c,W.REFERENCED_USERS);let d;if(void 0!==u){if(!Array.isArray(u)&&"object"==typeof u)return d=Xp.getIn(l,W.REFERENCED_USERS,{}),void Xp.setIn(c,W.REFERENCED_USERS,{...d,...u});d=Xp.getIn(l,W.REFERENCED_USERS,[]);const p=new Map;for(const c of[...d,...u])if(p.has(c.UserID)){const l=p.get(c.UserID);p.set(c.UserID,{...l,...c})}else p.set(c.UserID,c);u.length=0;for(const c of p.values())u.push(c)}}(h,y);const E={caseInfo:{content:{...I?.caseInfo?.content}}};let A=h;return f?(u.forEach((c=>{Xp.deleteIn(E,`caseInfo.content.${c}`)})),A=qp(h,E,{isArrayDeepMerge:!g})):((c,l)=>{const u=sl[c]||{};Object.keys(u).forEach((c=>{Xp.hasIn(l,c)&&(u[c].value=Xp.getIn(l,c))}));let d=jc.getStateMachinesByContext(c)||{};d={...d,...jc.getUnConnectedStateMachines(c)||{}},Object.keys(d).forEach((u=>{if(Xp.hasIn(l,u)){const d=Xp.getIn(l,u);d&&Array.isArray(d)&&0===d.length&&jc.setStateMachineEmpty(c,u)}}))})(p,h),{type:Ae,payload:{...c,data:A,...d.length>0?{propertiesToReplace:d}:null}}},ih=c=>({type:"SHOW_HARNESS",payload:c}),ch=c=>({type:oe,payload:c}),lh=c=>({type:ie,payload:c}),uh=c=>({type:"ADD_WORK",payload:c}),dh=c=>({type:fe,payload:c}),ph=c=>({type:Ne,payload:c}),hh=c=>({type:Pe,payload:c}),gh=c=>({type:De,payload:c}),fh=c=>({type:Re,payload:c}),mh=c=>({type:Oe,payload:c}),yh=c=>({type:we,payload:c}),Ih=c=>({type:Le,payload:c}),Eh=c=>({type:Me,payload:c}),Ah=c=>{const{containerItemID:l}=c;return c.suggestionContexts=Qu(l),{type:Fe,payload:c}},_h=c=>{const{context:l}=c;return{type:de,payload:{context:l}}},Sh=c=>{const{context:l}=c;return{type:pe,payload:{context:l}}},Th=c=>({type:je,payload:c}),Nh=c=>({type:Ue,payload:c}),Dh=c=>({type:nt,payload:c}),bh=c=>{const{context:l,containerItemID:u}=c;let d=l;return d||(d=Hu(u)),c.context=d,c.deleteContext=!hd(u),c.childContainers=Xu(u),c.childContainersContexts=Ju(u),c.transientItems=gd([...c.childContainersContexts,u]),c.suggestionContexts=Qu(u),u===l&&(c.caseID=kp(W.CASE_INFO.CASE_INFO_ID,"",l),c.RemoteSystemID=kp(W.CASE_INFO.REMOTESYSTEMID,"",l)),{type:be,payload:c}},Rh=c=>{const{containerItemID:l}=c;return c.transientItems=gd([...Ju(l),l]),{type:xe,payload:c}},Oh=c=>{const{transientItemID:l}=c;return c.transientItems=[l],{type:ve,payload:c}},vh=c=>{const{context:l,containerItemID:u}=c;let d=l;return d||(d=Hu(u)),c.context=d,c.childContainers=Xu(u),c.childContainersContexts=Ju(u),c.transientItems=gd([...c.childContainersContexts,u]),c.suggestionContexts=Qu(u),u===l&&(c.caseID=kp(W.CASE_INFO.CASE_INFO_ID,"",l),c.RemoteSystemID=kp(W.CASE_INFO.REMOTESYSTEMID,"",l)),{type:Ve,payload:c}},xh=c=>({type:ye,payload:c}),wh=c=>({type:Ee,payload:c}),Mh=c=>({type:Se,payload:c}),Lh=(c,...l)=>(th.resume(),c(...l)),Uh=(c,l,u,d,p)=>({type:Te,payload:{msg:c,err:l,context:u,formFields:d,actionMgrID:p}}),Fh=c=>({type:ot,payload:c}),jh=c=>({type:it,payload:c}),Vh=c=>({type:ct,payload:c}),kh=c=>({type:"SHOW_CASE_PREVIEW",payload:c}),$h=c=>({type:he,payload:c}),Bh=c=>({type:re,payload:c}),Gh="add",Wh="replace",Hh=["portal","noPortal","preview","debug","devtool"];let qh="",zh="Home",Yh="",Kh=!0;const Xh=c=>(Kh=c,Kh),Jh=()=>Kh,Qh=(c,l,u)=>Vd.getSemanticURL(c,l,u),Zh=(c,l)=>Vd.getRestEndPoint(c,l),eg=(c,l)=>{let u=P();const d=Zh(c,l);return d?(d.restApi?.startsWith("/")||(d.restApi=`/${d.restApi}`),u?.endsWith("/")&&(u=u.substring(0,u.length-1)),d.restApi=u+d.restApi,d):{}},tg=(c,l,u)=>{const{root:d,resources:p}=c,{views:h}=p,{config:g}=d,f=Gh;let m="";if(u)m=u;else{const c=h[g.name];let l=c;Array.isArray(c)&&c.length>0&&([l]=c),m=l.config.urlPath}const y=m.match(xd);if(y){const c=Xp.getIn(l,g.context);m=m.replace(y[0],c.pyID)}return m.startsWith("/")&&(m=m.substring(1,m.length)),{pxURLPath:m,historyAction:f}},ng=(c,l,u)=>{let d,p;d=Md(l)?`${c}/${l}`:c;const h=Md(u.pxURLPath);h&&(d=`${d}/${h}`);try{p=new URL(d).searchParams,d=d.includes("?")?d.split("?")[0]:d}catch(c){return console.log("Invalid url",c),""}const g=d.split("/"),f=g[g.length-1],m=new URLSearchParams(window.location.search);if(f.toLowerCase()!==zh.toLowerCase()||m.has("noPortal")||(d=`${c}/${l}`),!Vd.isDefaultPortal()){const c=Vd.getPortalName();m.has("portal")?m.set("portal",c):m.append("portal",c)}return p=((c,l)=>{for(const[u,d]of l.entries())!c.has(u)&&Hh.includes(u)&&c.append(u,d);return c})(p,m),p.toString()&&(d+=`?${p.toString()}`),d},rg=(c,{urlPathObjParam:l,infoParam:u,optionsParam:d},p=!1)=>{let h,g,f;if(!1===window.PCore.getBehaviorOverride("dynamicSemanticUrl"))return;if(p)h=l,g=u,f=d;else{const{uiResources:u,data:d}=c;({options:f}=c),h=l&&l.pxURLPath&&wd(l.pxURLPath)?tg(u,d,l.pxURLPath):l||tg(u,d),g=Vd.getEndPointInfo(h.pxURLPath),h.pxURLPath=g.urlPath}const m=ng(qh,Vd.getApplicationPath(),h),{title:y}=((c,l,u)=>{if(c=(c=>{let l=c.split(" ");return l=l.map((c=>c.charAt(0).toUpperCase()+c.slice(1))),l.join(" ")})(c=c&&""!==c?c:Vd.getApplicationName()),u===`${qh}/${l}/`)return{title:c};const d=new URL(u).pathname.replace(`${l}/`,""),p=d.split("/");return/\d/.test(d)?{title:`${c} - ${p[p.length-1]}`}:{title:`${c} - ${p[0]}`}})(Yh,Vd.getApplicationPath(),m),I=((c,l)=>(void 0!==c&&(c.options=l),{stateObj:c}))(g,{...f,title:y});h.historyAction===Gh?((c,l,u)=>{try{window.history.pushState(c,l,u),window.scrollTo(0,0)}catch(c){throw new Error("Error- Unable to Add to Browser History")}})(I,y,m):h.historyAction===Wh&&((c,l,u)=>{try{window.history.replaceState(c,l,u)}catch(c){throw new Error("Error- Unable to Replace Browser History")}})(I,y,m)},sg=c=>{let l=null;c.directUrlUpdation&&(l={historyAction:Gh,pxURLPath:""},l.pxURLPath=c.semanticURL),rg(c,{urlPathObjParam:l,infoParam:null,optionsParam:null},!1)},ag=c=>{sg(c)},og=c=>{const l={pxURLPath:c};return ng(qh,Vd.getApplicationPath(),l)},ig=c=>{const{uiResources:l}=c;Jh()&&(c.directUrlUpdation||(c=>{if(c&&c.root){const{root:l}=c,{resources:u}=c,{views:d}=u,p=l.config,h=p.type,g=p.name;if("VIEW"===h.toUpperCase()){const c=d[g];let l=c;Array.isArray(c)&&c.length>0&&([l]=c);const u=l.config;if(u.type){const c=u.type;return!(!u.urlPath||"PAGE"!==c.toUpperCase())}}return!1}return!1})(l))&&sg(c)},cg=c=>{const l={routeEndpoint:c.routeEndpoint,requestType:c.requestType,payload:c.payload,routeKey:c.routeKey,options:null};return c.options&&(l.options=c.options),l},lg=(c,l,u)=>{const{caseClassName:d,workID:p}=c.payload,{containerName:h,context:g}=l,{RemoteClassGroup:f,RemoteSystemID:y,name:I}=q.getRemoteCase(d),E={...c,headers:{RemoteSystemID:y},className:d,isTraditionalRemoteCase:!0,action:At,viewName:H,gadgetId:hc.getUniqueGadgetId(),context:u??g,skipSemanticUrl:!0,insKey:`${f?.toUpperCase()} ${p}`,containerName:h,name:I};Up(m.showPage(E))},ug=c=>{const l=(c=>c.state?c.state.stateObj:null)(c);l&&(q.isTraditionalRemoteCase(l.payload?.caseClassName)?lg({...l},l.options):Up(m.showHistory(cg(l))))},dg=()=>Vd.getApplicationPath()!==Ud(),pg=(c,l=!1)=>{var u;qh=c.domain,!1===l&&Jh()&&(u=ug,window.addEventListener("popstate",(c=>u(c))),window.onbeforeunload=()=>null),Vd.init(c,zh)},hg=c=>{(c=>{window.document.title=c})(c)};function gg(c){return`Minified Redux error #${c}; visit https://redux.js.org/Errors?code=${c} for the full message or use the non-minified dev environment for full errors. `}var fg="function"==typeof Symbol&&Symbol.observable||"@@observable",mg=()=>Math.random().toString(36).substring(7).split("").join("."),yg={INIT:`@@redux/INIT${mg()}`,REPLACE:`@@redux/REPLACE${mg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mg()}`};function Ig(c,l,u){if("function"!=typeof c)throw new Error(gg(2));if("function"==typeof l&&"function"==typeof u||"function"==typeof u&&"function"==typeof arguments[3])throw new Error(gg(0));if("function"==typeof l&&void 0===u&&(u=l,l=void 0),void 0!==u){if("function"!=typeof u)throw new Error(gg(1));return u(Ig)(c,l)}let d=c,p=l,h=new Map,g=h,f=0,m=!1;function y(){g===h&&(g=new Map,h.forEach(((c,l)=>{g.set(l,c)})))}function I(){if(m)throw new Error(gg(3));return p}function E(c){if("function"!=typeof c)throw new Error(gg(4));if(m)throw new Error(gg(5));let l=!0;y();const u=f++;return g.set(u,c),function(){if(l){if(m)throw new Error(gg(6));l=!1,y(),g.delete(u),h=null}}}function A(c){if(!function(c){if("object"!=typeof c||null===c)return!1;let l=c;for(;null!==Object.getPrototypeOf(l);)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(c)===l||null===Object.getPrototypeOf(c)}(c))throw new Error(gg(7));if(void 0===c.type)throw new Error(gg(8));if("string"!=typeof c.type)throw new Error(gg(17));if(m)throw new Error(gg(9));try{m=!0,p=d(p,c)}finally{m=!1}return(h=g).forEach((c=>{c()})),c}return A({type:yg.INIT}),{dispatch:A,subscribe:E,getState:I,replaceReducer:function(c){if("function"!=typeof c)throw new Error(gg(10));d=c,A({type:yg.REPLACE})},[fg]:function(){const c=E;return{subscribe(l){if("object"!=typeof l||null===l)throw new Error(gg(11));function u(){const c=l;c.next&&c.next(I())}return u(),{unsubscribe:c(u)}},[fg](){return this}}}}}function Eg(...c){return 0===c.length?c=>c:1===c.length?c[0]:c.reduce(((c,l)=>(...u)=>c(l(...u))))}var Ag=function(c){function l(l,u){return c.call(this)||this}return jo(l,c),l.prototype.schedule=function(c,l){return void 0===l&&(l=0),this},l}(Ko),_g={setInterval:function(c,l){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];var p=_g.delegate;return(null==p?void 0:p.setInterval)?p.setInterval.apply(p,Bo([c,l],$o(u))):setInterval.apply(void 0,Bo([c,l],$o(u)))},clearInterval:function(c){var l=_g.delegate;return((null==l?void 0:l.clearInterval)||clearInterval)(c)},delegate:void 0},Cg=function(c){function l(l,u){var d=c.call(this,l,u)||this;return d.scheduler=l,d.work=u,d.pending=!1,d}return jo(l,c),l.prototype.schedule=function(c,l){var u;if(void 0===l&&(l=0),this.closed)return this;this.state=c;var d=this.id,p=this.scheduler;return null!=d&&(this.id=this.recycleAsyncId(p,d,l)),this.pending=!0,this.delay=l,this.id=null!==(u=this.id)&&void 0!==u?u:this.requestAsyncId(p,this.id,l),this},l.prototype.requestAsyncId=function(c,l,u){return void 0===u&&(u=0),_g.setInterval(c.flush.bind(c,this),u)},l.prototype.recycleAsyncId=function(c,l,u){if(void 0===u&&(u=0),null!=u&&this.delay===u&&!1===this.pending)return l;null!=l&&_g.clearInterval(l)},l.prototype.execute=function(c,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var u=this._execute(c,l);if(u)return u;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(c,l){var u,d=!1;try{this.work(c)}catch(c){d=!0,u=c||new Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),u},l.prototype.unsubscribe=function(){if(!this.closed){var l=this.id,u=this.scheduler,d=u.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Yo(d,this),null!=l&&(this.id=this.recycleAsyncId(u,l,null)),this.delay=null,c.prototype.unsubscribe.call(this)}},l}(Ag),Sg=function(c){function l(l,u){var d=c.call(this,l,u)||this;return d.scheduler=l,d.work=u,d}return jo(l,c),l.prototype.schedule=function(l,u){return void 0===u&&(u=0),u>0?c.prototype.schedule.call(this,l,u):(this.delay=u,this.state=l,this.scheduler.flush(this),this)},l.prototype.execute=function(l,u){return u>0||this.closed?c.prototype.execute.call(this,l,u):this._execute(l,u)},l.prototype.requestAsyncId=function(l,u,d){return void 0===d&&(d=0),null!=d&&d>0||null==d&&this.delay>0?c.prototype.requestAsyncId.call(this,l,u,d):(l.flush(this),0)},l}(Cg),Tg={now:function(){return(Tg.delegate||Date).now()},delegate:void 0},Ng=function(){function c(l,u){void 0===u&&(u=c.now),this.schedulerActionCtor=l,this.now=u}return c.prototype.schedule=function(c,l,u){return void 0===l&&(l=0),new this.schedulerActionCtor(this,c).schedule(u,l)},c.now=Tg.now,c}(),Pg=function(c){function l(l,u){void 0===u&&(u=Ng.now);var d=c.call(this,l,u)||this;return d.actions=[],d._active=!1,d}return jo(l,c),l.prototype.flush=function(c){var l=this.actions;if(this._active)l.push(c);else{var u;this._active=!0;do{if(u=c.execute(c.state,c.delay))break}while(c=l.shift());if(this._active=!1,u){for(;c=l.shift();)c.unsubscribe();throw u}}},l}(Ng),Dg=new(function(c){function l(){return null!==c&&c.apply(this,arguments)||this}return jo(l,c),l}(Pg))(Sg),bg=Lo((function(c){return function(){c(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Rg=function(c){function l(){var l=c.call(this)||this;return l.closed=!1,l.currentObservers=null,l.observers=[],l.isStopped=!1,l.hasError=!1,l.thrownError=null,l}return jo(l,c),l.prototype.lift=function(c){var l=new Og(this,this);return l.operator=c,l},l.prototype._throwIfClosed=function(){if(this.closed)throw new bg},l.prototype.next=function(c){var l=this;oi((function(){var u,d;if(l._throwIfClosed(),!l.isStopped){l.currentObservers||(l.currentObservers=Array.from(l.observers));try{for(var p=ko(l.currentObservers),h=p.next();!h.done;h=p.next())h.value.next(c)}catch(c){u={error:c}}finally{try{h&&!h.done&&(d=p.return)&&d.call(p)}finally{if(u)throw u.error}}}}))},l.prototype.error=function(c){var l=this;oi((function(){if(l._throwIfClosed(),!l.isStopped){l.hasError=l.isStopped=!0,l.thrownError=c;for(var u=l.observers;u.length;)u.shift().error(c)}}))},l.prototype.complete=function(){var c=this;oi((function(){if(c._throwIfClosed(),!c.isStopped){c.isStopped=!0;for(var l=c.observers;l.length;)l.shift().complete()}}))},l.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(l.prototype,"observed",{get:function(){var c;return(null===(c=this.observers)||void 0===c?void 0:c.length)>0},enumerable:!1,configurable:!0}),l.prototype._trySubscribe=function(l){return this._throwIfClosed(),c.prototype._trySubscribe.call(this,l)},l.prototype._subscribe=function(c){return this._throwIfClosed(),this._checkFinalizedStatuses(c),this._innerSubscribe(c)},l.prototype._innerSubscribe=function(c){var l=this,u=this,d=u.hasError,p=u.isStopped,h=u.observers;return d||p?Xo:(this.currentObservers=null,h.push(c),new Ko((function(){l.currentObservers=null,Yo(h,c)})))},l.prototype._checkFinalizedStatuses=function(c){var l=this,u=l.hasError,d=l.thrownError,p=l.isStopped;u?c.error(d):p&&c.complete()},l.prototype.asObservable=function(){var c=new yi;return c.source=this,c},l.create=function(c,l){return new Og(c,l)},l}(yi),Og=function(c){function l(l,u){var d=c.call(this)||this;return d.destination=l,d.source=u,d}return jo(l,c),l.prototype.next=function(c){var l,u;null===(u=null===(l=this.destination)||void 0===l?void 0:l.next)||void 0===u||u.call(l,c)},l.prototype.error=function(c){var l,u;null===(u=null===(l=this.destination)||void 0===l?void 0:l.error)||void 0===u||u.call(l,c)},l.prototype.complete=function(){var c,l;null===(l=null===(c=this.destination)||void 0===c?void 0:c.complete)||void 0===l||l.call(c)},l.prototype._subscribe=function(c){var l,u;return null!==(u=null===(l=this.source)||void 0===l?void 0:l.subscribe(c))&&void 0!==u?u:Xo},l}(Rg),vg=function(c,l){return vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},vg(c,l)};Object.create,Object.create;var xg=function(c){function l(l,u){var d=c.call(this,(function(c){var l=d.__notifier.subscribe(c);return l&&!l.closed&&c.next(d.value),l}))||this;return d.__notifier=new Rg,d.value=u,l.subscribe((function(c){c!==d.value&&(d.value=c,d.__notifier.next(c))})),d}return function(c,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function u(){this.constructor=c}vg(c,l),c.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)}(l,c),l}(yi),wg=s(923),Mg=Symbol.for("immer-nothing"),Lg=Symbol.for("immer-draftable"),Ug=Symbol.for("immer-state");function Fg(c,...l){throw new Error(`[Immer] minified error nr: ${c}. Full error at: https://bit.ly/3cXEKWf`)}var jg=Object.getPrototypeOf;function Vg(c){return!!c&&!!c[Ug]}function kg(c){return!!c&&(Bg(c)||Array.isArray(c)||!!c[Lg]||!!c.constructor?.[Lg]||zg(c)||Yg(c))}var $g=Object.prototype.constructor.toString();function Bg(c){if(!c||"object"!=typeof c)return!1;const l=jg(c);if(null===l)return!0;const u=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return u===Object||"function"==typeof u&&Function.toString.call(u)===$g}function Gg(c,l){0===Wg(c)?Reflect.ownKeys(c).forEach((u=>{l(u,c[u],c)})):c.forEach(((u,d)=>l(d,u,c)))}function Wg(c){const l=c[Ug];return l?l.type_:Array.isArray(c)?1:zg(c)?2:Yg(c)?3:0}function Hg(c,l){return 2===Wg(c)?c.has(l):Object.prototype.hasOwnProperty.call(c,l)}function qg(c,l,u){const d=Wg(c);2===d?c.set(l,u):3===d?c.add(u):c[l]=u}function zg(c){return c instanceof Map}function Yg(c){return c instanceof Set}function Kg(c){return c.copy_||c.base_}function Xg(c,l){if(zg(c))return new Map(c);if(Yg(c))return new Set(c);if(Array.isArray(c))return Array.prototype.slice.call(c);const u=Bg(c);if(!0===l||"class_only"===l&&!u){const l=Object.getOwnPropertyDescriptors(c);delete l[Ug];let u=Reflect.ownKeys(l);for(let d=0;d<u.length;d++){const p=u[d],h=l[p];!1===h.writable&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(l[p]={configurable:!0,writable:!0,enumerable:h.enumerable,value:c[p]})}return Object.create(jg(c),l)}{const l=jg(c);if(null!==l&&u)return{...c};const d=Object.create(l);return Object.assign(d,c)}}function Jg(c,l=!1){return Zg(c)||Vg(c)||!kg(c)||(Wg(c)>1&&(c.set=c.add=c.clear=c.delete=Qg),Object.freeze(c),l&&Object.entries(c).forEach((([c,l])=>Jg(l,!0)))),c}function Qg(){Fg(2)}function Zg(c){return Object.isFrozen(c)}var ef,tf={};function nf(c){const l=tf[c];return l||Fg(0),l}function rf(){return ef}function sf(c,l){l&&(nf("Patches"),c.patches_=[],c.inversePatches_=[],c.patchListener_=l)}function af(c){of(c),c.drafts_.forEach(lf),c.drafts_=null}function of(c){c===ef&&(ef=c.parent_)}function cf(c){return ef={drafts_:[],parent_:ef,immer_:c,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lf(c){const l=c[Ug];0===l.type_||1===l.type_?l.revoke_():l.revoked_=!0}function uf(c,l){l.unfinalizedDrafts_=l.drafts_.length;const u=l.drafts_[0];return void 0!==c&&c!==u?(u[Ug].modified_&&(af(l),Fg(4)),kg(c)&&(c=df(l,c),l.parent_||hf(l,c)),l.patches_&&nf("Patches").generateReplacementPatches_(u[Ug].base_,c,l.patches_,l.inversePatches_)):c=df(l,u,[]),af(l),l.patches_&&l.patchListener_(l.patches_,l.inversePatches_),c!==Mg?c:void 0}function df(c,l,u){if(Zg(l))return l;const d=l[Ug];if(!d)return Gg(l,((p,h)=>pf(c,d,l,p,h,u))),l;if(d.scope_!==c)return l;if(!d.modified_)return hf(c,d.base_,!0),d.base_;if(!d.finalized_){d.finalized_=!0,d.scope_.unfinalizedDrafts_--;const l=d.copy_;let p=l,h=!1;3===d.type_&&(p=new Set(l),l.clear(),h=!0),Gg(p,((p,g)=>pf(c,d,l,p,g,u,h))),hf(c,l,!1),u&&c.patches_&&nf("Patches").generatePatches_(d,u,c.patches_,c.inversePatches_)}return d.copy_}function pf(c,l,u,d,p,h,g){if(Vg(p)){const g=df(c,p,h&&l&&3!==l.type_&&!Hg(l.assigned_,d)?h.concat(d):void 0);if(qg(u,d,g),!Vg(g))return;c.canAutoFreeze_=!1}else g&&u.add(p);if(kg(p)&&!Zg(p)){if(!c.immer_.autoFreeze_&&c.unfinalizedDrafts_<1)return;df(c,p),l&&l.scope_.parent_||"symbol"==typeof d||!Object.prototype.propertyIsEnumerable.call(u,d)||hf(c,p)}}function hf(c,l,u=!1){!c.parent_&&c.immer_.autoFreeze_&&c.canAutoFreeze_&&Jg(l,u)}var gf={get(c,l){if(l===Ug)return c;const u=Kg(c);if(!Hg(u,l))return function(c,l,u){const d=yf(l,u);return d?"value"in d?d.value:d.get?.call(c.draft_):void 0}(c,u,l);const d=u[l];return c.finalized_||!kg(d)?d:d===mf(c.base_,l)?(Ef(c),c.copy_[l]=Af(d,c)):d},has:(c,l)=>l in Kg(c),ownKeys:c=>Reflect.ownKeys(Kg(c)),set(c,l,u){const d=yf(Kg(c),l);if(d?.set)return d.set.call(c.draft_,u),!0;if(!c.modified_){const d=mf(Kg(c),l),g=d?.[Ug];if(g&&g.base_===u)return c.copy_[l]=u,c.assigned_[l]=!1,!0;if(((p=u)===(h=d)?0!==p||1/p==1/h:p!=p&&h!=h)&&(void 0!==u||Hg(c.base_,l)))return!0;Ef(c),If(c)}var p,h;return c.copy_[l]===u&&(void 0!==u||l in c.copy_)||Number.isNaN(u)&&Number.isNaN(c.copy_[l])||(c.copy_[l]=u,c.assigned_[l]=!0),!0},deleteProperty:(c,l)=>(void 0!==mf(c.base_,l)||l in c.base_?(c.assigned_[l]=!1,Ef(c),If(c)):delete c.assigned_[l],c.copy_&&delete c.copy_[l],!0),getOwnPropertyDescriptor(c,l){const u=Kg(c),d=Reflect.getOwnPropertyDescriptor(u,l);return d?{writable:!0,configurable:1!==c.type_||"length"!==l,enumerable:d.enumerable,value:u[l]}:d},defineProperty(){Fg(11)},getPrototypeOf:c=>jg(c.base_),setPrototypeOf(){Fg(12)}},ff={};function mf(c,l){const u=c[Ug];return(u?Kg(u):c)[l]}function yf(c,l){if(!(l in c))return;let u=jg(c);for(;u;){const c=Object.getOwnPropertyDescriptor(u,l);if(c)return c;u=jg(u)}}function If(c){c.modified_||(c.modified_=!0,c.parent_&&If(c.parent_))}function Ef(c){c.copy_||(c.copy_=Xg(c.base_,c.scope_.immer_.useStrictShallowCopy_))}function Af(c,l){const u=zg(c)?nf("MapSet").proxyMap_(c,l):Yg(c)?nf("MapSet").proxySet_(c,l):function(c,l){const u=Array.isArray(c),d={type_:u?1:0,scope_:l?l.scope_:rf(),modified_:!1,finalized_:!1,assigned_:{},parent_:l,base_:c,draft_:null,copy_:null,revoke_:null,isManual_:!1};let p=d,h=gf;u&&(p=[d],h=ff);const{revoke:g,proxy:f}=Proxy.revocable(p,h);return d.draft_=f,d.revoke_=g,f}(c,l);return(l?l.scope_:rf()).drafts_.push(u),u}function _f(c){if(!kg(c)||Zg(c))return c;const l=c[Ug];let u;if(l){if(!l.modified_)return l.base_;l.finalized_=!0,u=Xg(c,l.scope_.immer_.useStrictShallowCopy_)}else u=Xg(c,!0);return Gg(u,((c,l)=>{qg(u,c,_f(l))})),l&&(l.finalized_=!1),u}Gg(gf,((c,l)=>{ff[c]=function(){return arguments[0]=arguments[0][0],l.apply(this,arguments)}})),ff.deleteProperty=function(c,l){return ff.set.call(this,c,l,void 0)},ff.set=function(c,l,u){return gf.set.call(this,c[0],l,u,c[0])};var Cf=new class{constructor(c){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(c,l,u)=>{if("function"==typeof c&&"function"!=typeof l){const u=l;l=c;const d=this;return function(c=u,...p){return d.produce(c,(c=>l.call(this,c,...p)))}}let d;if("function"!=typeof l&&Fg(6),void 0!==u&&"function"!=typeof u&&Fg(7),kg(c)){const p=cf(this),h=Af(c,void 0);let g=!0;try{d=l(h),g=!1}finally{g?af(p):of(p)}return sf(p,u),uf(d,p)}if(!c||"object"!=typeof c){if(d=l(c),void 0===d&&(d=c),d===Mg&&(d=void 0),this.autoFreeze_&&Jg(d,!0),u){const l=[],p=[];nf("Patches").generateReplacementPatches_(c,d,l,p),u(l,p)}return d}Fg(1)},this.produceWithPatches=(c,l)=>{if("function"==typeof c)return(l,...u)=>this.produceWithPatches(l,(l=>c(l,...u)));let u,d;return[this.produce(c,l,((c,l)=>{u=c,d=l})),u,d]},"boolean"==typeof c?.autoFreeze&&this.setAutoFreeze(c.autoFreeze),"boolean"==typeof c?.useStrictShallowCopy&&this.setUseStrictShallowCopy(c.useStrictShallowCopy)}createDraft(c){kg(c)||Fg(8),Vg(c)&&(c=function(c){return Vg(c)||Fg(10),_f(c)}(c));const l=cf(this),u=Af(c,void 0);return u[Ug].isManual_=!0,of(l),u}finishDraft(c,l){const u=c&&c[Ug];u&&u.isManual_||Fg(9);const{scope_:d}=u;return sf(d,l),uf(void 0,d)}setAutoFreeze(c){this.autoFreeze_=c}setUseStrictShallowCopy(c){this.useStrictShallowCopy_=c}applyPatches(c,l){let u;for(u=l.length-1;u>=0;u--){const d=l[u];if(0===d.path.length&&"replace"===d.op){c=d.value;break}}u>-1&&(l=l.slice(u+1));const d=nf("Patches").applyPatches_;return Vg(c)?d(c,l):this.produce(c,(c=>d(c,l)))}},Sf=Cf.produce;Cf.produceWithPatches.bind(Cf),Cf.setAutoFreeze.bind(Cf),Cf.setUseStrictShallowCopy.bind(Cf),Cf.applyPatches.bind(Cf),Cf.createDraft.bind(Cf),Cf.finishDraft.bind(Cf);const Tf=(c,l)=>{const{data:{shared:u={}}={},context:d}=l;((c,l)=>{Jl.updateDataPageStore(l),Object.keys(l).forEach((u=>{Xp.getIn(c,[W.SHARED,u])?Object.keys(l[u]).forEach((d=>{Xp.setIn(c,[W.SHARED,u,d],l[u][d])})):Xp.setIn(c,[W.SHARED,u],l[u])}))})(c,u),d&&Xp.deleteIn(c,[d,"shared"])},Nf=(c,l,u=!1)=>{const{context:d,caseViewMode:p=(u?void 0:W.PERFORM_MODE),containerName:h}=l;h!==Ou.WORKAREA&&p&&Xp.setIn(c,[d,"context_data","caseViewMode"],p)},Pf=(c,l)=>{const{context:u}=l;Xp.setIn(c,[u,"context_data","actionType"],l.actionType),Xp.setIn(c,[u,"context_data","assignmentID"],l.assignmentID)},Df=(c,l=[])=>{l.forEach((l=>Xp.deleteIn(c,l)))},bf=(c,l=[])=>{l.forEach((l=>Xp.deleteIn(c,l)))},Rf=(c,l=[])=>{l.forEach((l=>{Xp.deleteIn(c,l)}))},Of=(c,l,u={})=>{const{deleteAssignmentSpecificResources:d=!0,doDeleteConfirmationDetails:p=!0}=u;Xp.deleteIn(c,[l,"nextAssignmentInfo"]),Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"availableActions"]),Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"availableProcesses"]),Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"activeActionID"]),Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"assignments"]),Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"childCases"]),p&&(Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"confirmationLinks"]),Xp.deleteIn(c,[l,"caseMessages"])),d&&(Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"actionButtons"]),Xp.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"navigation"]))},vf=/\[(\d+)\]$/gi,xf=/(\d+)/gi,wf=/\[.\]$/gi,Mf=(c,l,u,d=[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO,W.CONTENT])=>{const p=Xp.getIn(l,d);if(p){const l=tr(p,[],[]);for(const p of l)Xp.setIn(c[u],[...d,...p],{})}},Lf=(c,l,u,d)=>{const{property:p,pageReference:h,category:g,type:f}=d.payload,m=Xp.getIn(c[l],u);if(m&&g===W.CASEMESSAGES)Xp.setIn(c[l],Kn(p,h,g),"");else if(m&&m.length>0&&Array.isArray(m)){const d=m.filter((c=>c.type!==f));u&&u.length>0&&Xp.setIn(c[l],Kn(p,h,g),d)}};function Uf(c,l){const{err:u,formFields:d}=l.payload;let{context:p}=l.payload;const{fieldErrors:h,pageErrors:g}=((c,l)=>{const u=[],d=[];return c.forEach((c=>{((c,l,u,d)=>{switch(!0){case Boolean(c[W.ERROR_IN_PAGE_IDENTIFIER]&&c[W.ERROR_FIELD_IN_PAGE]):{const p=`${c[W.ERROR_FIELD_IN_PAGE]}`.replace(/(\(\d+\))/g,(c=>`[${parseInt(c.substring(1,c.length-1),10)-1}]`)),h=`${p}${c[W.ERROR_IN_PAGE_IDENTIFIER]}`,g=Xp.deepClone(c);g[W.ERROR_FIELD_IN_PAGE]=p,l.includes(h.slice(1))||l.includes(h.substring(h.indexOf(".")+1,h.indexOf("[")))?d.push(g):u.push(c);break}case Boolean(c[W.ERROR_IN_PAGE_IDENTIFIER]&&!c[W.ERROR_FIELD_IN_PAGE]):{const p=c[W.ERROR_IN_PAGE_IDENTIFIER].slice(1);l.includes(p)?d.push(c):u.push(c);break}default:u.push(c)}})(c,l,u,d)})),{fieldErrors:d,pageErrors:u}})(u.errorDetails,d);if(Xp.setIn(c,[p,...Yn.FIELD_MESSAGES_PATH],{}),Xp.setIn(c,[p,...Yn.PAGE_MESSAGES_PATH],[]),h.forEach((l=>{if(l[W.ERROR_FIELD_IN_PAGE]){const u=l[W.ERROR_FIELD_IN_PAGE].slice(1);if(u){const l=function(c){let l=null;const u=c.lastIndexOf(".");return u<0?null:(l=c.substring(0,u),l?`caseInfo.content.${l}`.replace(/\(/g,"[").replace(/\)/g,"]"):l)}(u);if(!l)return!1;const d=u.substring(u.lastIndexOf(".")+1),h=Kn(d,l,W.PROPERTY);Xp.setIn(c,[p,...h],[])}}})),h.length>0&&((c,l,u)=>{u.forEach((u=>{((c,l,u)=>{const d=u[W.ERROR_FIELD_IN_PAGE].slice(1),p=u[W.ERROR_IN_PAGE_IDENTIFIER].slice(1);if(p){let h=d?`caseInfo.content.${d}`:"caseInfo.content";h=h.replace(/\(/g,"[").replace(/\)/g,"]");const g=Kn(p,h,W.PROPERTY),f={type:G.MESSAGES.MESSAGES_TYPE_ERROR,message:u.localizedValue},m=Xp.getIn(c[l],g,[]);if(Xp.isContains(m,f))return;Xp.setIn(c[l],g,[...m,f])}})(c,l,u)}))})(c,p,h),g.length>0){const l=(c=>{const l=[];return c.forEach((c=>{l.push({type:G.MESSAGES.MESSAGES_TYPE_ERROR,message:c.localizedValue})})),l})(g);c[p]||(p=W.APP.APP),Xp.setIn(c,[p,...Yn.PAGE_MESSAGES_PATH],l)}else p.includes&&p.includes(Ou.WORKAREA)&&(p=K(p)),Xp.deleteIn(c,[p,...Yn.PAGE_MESSAGES_PATH]);return c}const Ff=[(c,l)=>Sf(c,(c=>{switch(l.type){case Ae:{const{propertiesToReplace:u=[]}=l.payload;return c[l.payload.context]=qp(c[l.payload.context],l.payload.data,{isArrayDeepMerge:l.payload.isArrayDeepMerge,propertiesToReplace:[...u]}),Nf(c,l.payload,!0),Tf(c,l.payload),c}case re:{const{context:u,reference:d,value:p,isArrayDeepMerge:h}=l.payload;return zp(c[u],d,p,{isArrayDeepMerge:h}),c}case se:{const{context:u,reference:d,value:p}=l.payload;return Yp(c[u],d,p),c}case _e:return Wp(c[l.payload.context],l.payload.reference),c;case de:return Xp.setIn(c[l.payload.context],"context_data.isLoading",!0),c;case pe:return Xp.setIn(c[l.payload.context],"context_data.isLoading",!1),c;case ot:{const{data:u}=l.payload;return Tf(c,{data:{shared:u}}),c}case it:{const{dataPagesToBeRemoved:u=[]}=l.payload;return u.forEach((l=>{const{dataPageName:u,dataPageNameWithHash:d}=l;Xp.deleteIn(c.shared,[u,d]);const p=Xp.getIn(c.shared,[u]);p&&0===Object.keys(p).length&&Xp.deleteIn(c.shared,[u])})),c}case ut:{const u=Xp.getIn(c[l.payload.context].context_data,"blocking_action_counter",0);return l.payload.isInitiateBlockingAction?Xp.setIn(c[l.payload.context].context_data,"blocking_action_counter",u+1):Xp.setIn(c[l.payload.context].context_data,"blocking_action_counter",u-1),c}default:return c}})),(c,l)=>Sf(c||{},(c=>{switch(l.type){case De:{if(!l.payload.data||c[l.payload.context])return c;l.payload.doDeleteCaseSummary&&Of(c,l.payload.context);const{target:u}=l.payload;return!u||-1===u.indexOf(W.WORKAREA)&&-1===u.indexOf(W.MODAL)?c[l.payload.containerItemID]=l.payload.data:c[l.payload.context]=l.payload.data,Nf(c,l.payload),Pf(c,l.payload),Tf(c,l.payload),((c,l)=>{const{context:u}=l;Xp.deleteIn(c,[u,"context_data","blocking_action_counter"]),Xp.deleteIn(c,[u,"context_data","deferred_action_queue"])})(c,l.payload),c}case Fe:{l.payload.doDeleteCaseSummary&&Of(c,l.payload.context,{deleteAssignmentSpecificResources:l.payload.deleteAssignmentSpecificResources});const{target:u,propertiesToReplace:d=[]}=l.payload;return!u||-1===u.indexOf(W.WORKAREA)&&-1===u.indexOf(W.MODAL)?c[l.payload.containerItemID]=qp(c[l.payload.containerItemID],l.payload.data,{propertiesToReplace:[...d]}):c[l.payload.context]=qp(c[l.payload.context],l.payload.data,{propertiesToReplace:[...d]}),(l.payload.actionType||l.payload.assignmentID)&&Pf(c,l.payload),Nf(c,l.payload),Tf(c,l.payload),bf(c,l.payload.suggestionContexts),c}case be:{const{childContainersContexts:u=[]}=l.payload;return((c,l)=>{const{containerItemID:u,context:d,deleteContext:p}=l;p&&Xp.deleteIn(c,[d]),Xp.deleteIn(c,[u])})(c,l.payload),Rf(c,u),Df(c,l.payload.transientItems),bf(c,l.payload.suggestionContexts),c}case Pe:{const{containerItems:u}=l.payload;return Array.isArray(u)?u.forEach((l=>{Xp.deleteIn(c,[l])})):Xp.deleteIn(c,[u]),c}case je:{const{context:u,contextToBeRemoved:d,data:p,childContainersContextsToBeRemoved:h}=l.payload;return Of(c,l.payload.context),Nf(c,l.payload),c[u]=qp(c[u],c[d]),c[u]=qp(c[u],p),Xp.deleteIn(c,[d]),Rf(c,h),Tf(c,l.payload),c}case Ve:{const{payload:{context:u,pulseReplace:d=!0,childContainersContexts:p=[]}}=l;let{payload:{data:h}}=l;const g=Xp.getIn(c[u],"pulse");let f=Xp.getIn(c[u],"OperatorID"),m=Xp.getIn(c[u],"pxRequestor");return m&&h.pxRequestor&&(m=Xp.mergeDeep(m,h.pxRequestor)),f&&h.OperatorID&&(f=Xp.mergeDeep(f,h.OperatorID)),!d&&g&&(h=zp(h,"pulse",g),h=zp(h,"OperatorID",f),h=zp(h,"pxRequestor",m)),Xp.setIn(c,u,h),Nf(c,l.payload),Tf(c,l.payload),Rf(c,p),Df(c,l.payload.transientItems),bf(c,l.payload.suggestionContexts),c}case lt:{const{context:u,doDeleteConfirmationDetails:d=!0}=l.payload;return Of(c,u,{doDeleteConfirmationDetails:d}),c}case Re:{const{transientItemID:u,data:d}=l.payload;return Xp.setIn(c,u,d)}case ve:case xe:{const{transientItems:u}=l.payload;return u.forEach((l=>Xp.deleteIn(c,l))),c}case Oe:case we:{const{transientItemID:u,data:d}=l.payload;return qp(Xp.getIn(c,u),d),c}case Me:{const{transientItemID:u,data:d}=l.payload;for(const l in d)Object.prototype.hasOwnProperty.call(d,l)&&Xp.deleteIn(c,[u,l]);return c}case Le:{const{transientItemID:u,data:d}=l.payload;return Xp.deleteIn(c,u),Xp.setIn(c,u,d)}case he:{const{key:u,value:d}=l.payload;return Xp.setIn(c,`${W.SHARED}.${u}`,d),c}case Be:{const{context:u,data:d}=l.payload;return Xp.setIn(c,u,d)}default:return c}})),(c,l)=>Sf(c||Gf().data,(c=>{switch(l.type){case Te:return l.payload.err.errorDetails&&("Validation fail"===l.payload.err.errorClassification||(l.payload.err?.displayButtonsOnErrors?.length??0)>0)?Uf(c,l):c;case Fe:{const{context:u}=l.payload,d=[u,...Yn.FIELD_MESSAGES_PATH],p=[u,...Yn.PAGE_MESSAGES_PATH];if(Xp.setIn(c,d,{}),Xp.setIn(c,p,[]),u&&u.includes(Ou.WORKAREA)){const l=[te(u),...Yn.PAGE_MESSAGES_PATH];Xp.setIn(c,l,[])}return c}case rt:{const{isListEntry:u}=l.payload;return u?((c,l)=>{const{property:u,pageReference:d,category:p,isListEntry:h,deletingIndex:g,stateObj:f}=l.payload,{context:m}=l.payload;if(f)return Mf(c,f,m),c;const y=Kn(u,d,p,h);if(Number.isInteger(g)){Xp.deleteIn(c[m],y);const l=y.slice(0,y.length-1);let u=Xp.getIn(c[m],l)||{};const d=Object.keys(u);u=d.map((c=>u[c])),u.forEach(((u,p)=>{const h=d[p].match(vf);if(h?.length){const f=parseInt(h[0].match(xf)[0],10);f>g&&(Xp.deleteIn(c[m],l.concat(d[p])),Xp.setIn(c[m],l.concat(d[p].replace(wf,`[${f-1}]`)),u))}}))}else Xp.setIn(c[m],y,{});return c})(c,l):((c,l)=>{const{property:u,pageReference:d,category:p,isListEntry:h,stateObj:g}=l.payload,{context:f}=l.payload;let m=f;if(g)return Mf(c,g,f),c;const y=Kn(u,d,p,h);return p===W.PAGE&&f?.includes(Ou.WORKAREA)&&(m=K(f)),Lf(c,m,y,l),Lf(c,f,y,l),c})(c,l)}case nt:{const{messages:u,property:d,pageReference:p,context:h,category:g}=l.payload,f=Kn(d,p,g);return u&&u.length>0&&Array.isArray(u)&&f&&f.length>0&&Xp.setIn(c[h],Kn(d,p,g),u),c}default:return c}})),(c,l)=>Sf(c,(c=>{if(l.type===ct){const{instruction:u,actions:d,context:p,referenceList:h,listIndex:g,listMoveToIndex:f,content:m={}}=l.payload,y=wp(h);switch(u){case W.LIST_ACTIONS.INSERT:((c,l,u,d,p)=>{Xp.setIn(c[l],[...u,d],p)})(c,p,y,g,m);break;case W.LIST_ACTIONS.UPDATE:((c,l,u,d,p)=>{const h=qp(Xp.getIn(c[l],[...u,d],{}),p);Xp.setIn(c[l],[...u,d],h)})(c,p,y,g,m);break;case W.LIST_ACTIONS.DELETE:((c,l,u,d)=>{const p=Xp.getIn(c[l],u,[]);p.splice(d,1),Xp.setIn(c[l],u,p),Rn.deleteListNode(l,u,p.length)})(c,p,y,g);break;case W.LIST_ACTIONS.MOVE:((c,l,u,d,p)=>{const h=Xp.getIn(c[l],[...u,d],{}),g=Xp.getIn(c[l],u,[]);g.splice(d,1),g.splice(p,0,h),Xp.setIn(c[l],u,g),((c,l,u,d,p)=>{const h=Xp.deepClone(Xp.getIn(c,[`${l}`])),g=Xp.getIn(h,[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO]);if(!g)return;const f=u.substring(0,u.lastIndexOf(".")),m=u.substring(u.lastIndexOf(".")+1),y=((c,l,u)=>{const d=Xp.getIn(c,[W.CONTEXT_DATA,...u.split(".")]);return Object.keys(d).filter((c=>c.includes(`${l}[`)))})(h,m,f);if(0!==y.length)if(Xn(g,m,d).content[`${m}[${d}]`]){const g={},f=`${u}[${d}]`,m=Xp.getIn(h,[W.CONTEXT_DATA,...f.split(".")]);g[`${u}[${p}]`]=m,Xp.deleteIn(c[l],[W.CONTEXT_DATA,...f.split(".")]),Jn(c,l,y,d,p,u,g)}else Jn(c,l,y,d,p,u)})(c,l,u?.join("."),d,p)})(c,p,y,g,f);break;case W.LIST_ACTIONS_TYPE.SELECT_DESELECT:((c,l,u,d)=>{const p=Xp.getIn(c[l],u)||[];d.forEach((c=>{const{instruction:d,content:h,listIndex:g}=c;if(d===W.LIST_ACTIONS.SELECT){p[g]=h;const c=u?.join(".");Ar(l,c)}else delete p[g]})),Xp.setIn(c[l],u,p.filter(Boolean))})(c,p,y,d);break;case W.LIST_ACTIONS_TYPE.DESELECT_ALL:((c,l,u)=>{Xp.setIn(c[l],u,[])})(c,p,y)}}return c}))],jf=(c,l)=>(c||(c=Gf().data),l.type===st?Gf().data:(Ff.forEach((u=>{c=u(c,l)})),c)),Vf=(c,l=[])=>{l.forEach((l=>{Xp.deleteIn(c,[l])}))},kf=(c,l)=>{const{type:u,payload:d}=l,p=u===Fe,{target:h,context:g,semanticURL:f="",root:m,containerItemID:y,childContainers:I,flowName:E,resourceType:A="",key:_="",clearView:C=!1}=d;return m?Xp.setIn(c,[h,"items",y,"view"],m):C&&Xp.deleteIn(c,[h,"items",y,"view"]),g&&Xp.setIn(c,[h,"items",y,"context"],g),E&&Xp.setIn(c,[h,"items",y,"flowName"],E),(!p||p&&_)&&Xp.setIn(c,[h,"items",y,"key"],_.trim()),(!p||p&&f)&&Xp.setIn(c,[h,"items",y,"semanticURL"],f),(!p||p&&A)&&Xp.setIn(c,[h,"items",y,"resourceType"],A),Vf(c,I),c},$f=(c,l)=>(c||(c=Gf().containers),l.type===st?Gf().containers:Sf(c,(c=>{switch(l.type){case Ne:{const{context:u,name:d,type:p,actionMgrID:h}=l.payload,g=`${u}/${d}`;let f=null;return gn.resolveActionByID(h,null,!1),c[g]||(f={type:p,accessedOrder:[],items:{}},Xp.setIn(c,[g],f)),c}case $e:{const{containerName:u,childContainers:d=[]}=l.payload;return Xp.deleteIn(c,[u]),d.forEach((l=>{Xp.deleteIn(c,[l])})),c}case Pe:{const{context:u,name:d,actionMgrID:p,childContainers:h}=l.payload,g=`${u}/${d}`;return gn.resolveActionByID(p,null,!1),Xp.setIn(c,[g,"accessedOrder"],[]),Xp.setIn(c,[g,"items"],{}),Array.isArray(h)&&h.forEach((l=>{Xp.deleteIn(c,[l])})),c}case De:{const{target:u,context:d,isInCreateStage:p,isBulkAction:h,semanticURL:g,root:f,containerItemID:m,actionMgrID:y,key:I,flowName:E,resourceType:A,actionName:_,isMinimizable:C,showProgress:S,progressMessage:T,modalOptions:N,resourceStatus:P,actionID:D,isMultiRecordData:b,acTertiary:R,parentContext:O,heading:v,isTraditionalRemoteCase:x}=l.payload,w=c[u],M=w&&w.type,L=w&&w.accessedOrder||[],U=w&&w.items||{};let F=null;return c[u]&&"single"===M&&L.length>0?kf(c,l):(F={accessedOrder:[...L,m],items:{...U,[m]:{view:f,semanticURL:g,key:I,flowName:E,context:d,isInCreateStage:p,resourceType:A,actionName:_,isMinimizable:C,...h&&{isBulkAction:h},showProgress:S,progressMessage:T,modalOptions:N,isTraditionalRemoteCase:x,resourceStatus:P,...D&&{actionID:D},...R&&{acTertiary:R},...b&&{isMultiRecordData:b},...O&&{parentContext:O},heading:v}}},gn.resolveActionByID(y,null,!1),c[u]=j()(c[u],F),c)}case Fe:{const{actionMgrID:u,data:d}=l.payload;let p=c;try{p=kf(c,l),gn.resolveActionByID(u,d,!1)}catch{gn.rejectActionByID(u,!1)}return p}case Ve:return((c,l)=>{const{actionMgrID:u,data:d,target:p,containerItemID:h}=l.payload;let g=c;try{const f=c&&c[p]?.type;let m=c&&c[p]?.accessedOrder||[];m="single"===f?m.length>0?m:[...m,h]:m.includes(h)?m:[...m,h],Xp.setIn(c,[p,"items",h,"transientItems"],[]),Xp.setIn(c,[p,"accessedOrder"],m),g=kf(c,l),gn.resolveActionByID(u,d,!1)}catch{gn.rejectActionByID(u,!1)}return g})(c,l);case Ue:{const{target:u,containerItemID:d,actionMgrID:p}=l.payload;try{const l=Xp.getIn(c,[u,"accessedOrder"]).filter((c=>c!==d));l.push(d),Xp.setIn(c,[u,"accessedOrder"],l),gn.resolveActionByID(p,null,!1)}catch{gn.rejectActionByID(p,!1)}return c}case je:case be:{const{target:u,containerItemID:d,actionMgrID:p,childContainers:h}=l.payload;try{const l=Xp.getIn(c,[u,"accessedOrder"]).filter((c=>c!==d));Xp.setIn(c,[u,"accessedOrder"],l),Xp.deleteIn(c,[u,"items",d]),Vf(c,h),gn.resolveActionByID(p,null,!1)}catch{gn.rejectActionByID(p,!1)}return c}case Re:{const{transientItemID:u,target:d,contextName:p}=l.payload,h=Xp.getIn(c,[d,"items",p,"transientItems"])??[];return Xp.setIn(c,[d,"items",p,"transientItems"],[...h,u])}case xe:{const{target:u,containerItemID:d}=l.payload;return Xp.deleteIn(c,[u,"items",d,"transientItems"]),c}case ve:{const{target:u,transientItemID:d,containerItemID:p}=l.payload,h=(Xp.getIn(c,[u,"items",p,"transientItems"])??[]).filter((c=>c!==d));return Xp.setIn(c,[u,"items",p,"transientItems"],h)}default:return c}})));let Bf={};const Gf=()=>Bf,Wf=c=>((c=>{const l=c.Data||c.data,{uiResources:u={}}=c,d=u[W.CONTEXT_DATA]||c[W.CONTEXT_DATA];Bf={data:{[W.APP.APP]:{...l,[W.CONTEXT_DATA]:d}},containers:{}}})(c),function(c){const l=Object.keys(c),u={};for(let h=0;h<l.length;h++){const d=l[h];"function"==typeof c[d]&&(u[d]=c[d])}const d=Object.keys(u);let p;try{!function(c){Object.keys(c).forEach((l=>{const u=c[l];if(void 0===u(void 0,{type:yg.INIT}))throw new Error(gg(12));if(void 0===u(void 0,{type:yg.PROBE_UNKNOWN_ACTION()}))throw new Error(gg(13))}))}(u)}catch(c){p=c}return function(c={},l){if(p)throw p;let h=!1;const g={};for(let p=0;p<d.length;p++){const f=d[p],m=u[f],y=c[f],I=m(y,l);if(void 0===I)throw l&&l.type,new Error(gg(14));g[f]=I,h=h||I!==y}return h=h||d.length!==Object.keys(c).length,h?g:c}}({data:jf,containers:$f}));function Hf(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=wl(c),d=function(c){return"number"==typeof xl(c)?c.pop():1/0}(c),p=c;return p.length?1===p.length?Pi(p[0]):function(c){return void 0===c&&(c=1/0),Ol(mi,c)}(d)(Li(p,u)):Ul}const qf=(c,l)=>{c.data=c.data??{};const{assignments:u,availableActions:d=[]}=c.data.caseInfo??{};u&&Array.isArray(u)&&u.length>0&&u[0].actions&&Array.isArray(u[0].actions)&&!l?.stopMergeActions&&(u[0].actions.forEach((c=>{"Assignment"!==c.type&&"LocalAction"!==c.type||d.push(c)})),c.data.caseInfo=c.data.caseInfo??{},c.data.caseInfo.availableActions=d)},zf=(c,l)=>{if(c.confirmationLinks&&(c.data=c.data??{},c.data.caseInfo=c.data.caseInfo??{},c.data.caseInfo.confirmationLinks=c.confirmationLinks),!c.uiResources&&c.confirmationNote){let l=c;const{confirmationNote:u}=l;return l=((c,l)=>{const u=[c];return l.data=l.data??{},l.data.caseMessages=u,l})(u,l),l}if(!c.uiResources||!c.data||!c?.uiResources?.root)return c;const u=c,{uiResources:{actionButtons:d,navigation:p},nextAssignmentInfo:h}=u;if(u.data&&u.data.caseInfo&&(d&&(u.data.caseInfo.actionButtons=d),p&&(u.data.caseInfo.navigation=p),l&&l[G.ACTIONS.DELETEAVIALACTIONS]&&delete u.data.caseInfo.availableActions,qf(u,l),c.confirmationNote)){const{confirmationNote:c}=u,l=[c];u.data.caseMessages=l}return l&&l.isCreateDataObject&&(u.data=u.data??{},u.data.dataInfo={},u.data.dataInfo.content=u.data.pyPortal,u.uiResources.root.config.context="dataInfo.content",u.uiResources.context_data.dataInfo=u.uiResources.context_data.dataInfo??{},u.uiResources.context_data.dataInfo.content=u.uiResources.context_data.dataInfo.content??{},u.uiResources.context_data.dataInfo.content=u.uiResources.context_data?.pyPortal,delete u.data.pyPortal,delete u.key),h&&(u.data=u.data??{},u.data.nextAssignmentInfo=h),u},Yf={},{VIEW:Kf,FIELD:Xf}=W.CONTEXT_TREE_NODE_TYPES,Jf=[(c,l)=>c.pipe(Dl(On,Et),Rl((c=>c.payload)),Ol((c=>{const{context:u,contextData:d,options:p}=c,{propertyName:h="",classID:g=""}=p,f=Ic(u,{skipUUID:!1});let m=[],y=[],I=!1;kd.getFeatureMap().granularUIRefresh?(({fieldsWithDeclarativeTargets:m=[],whens:y=[]}=(c=>{const l=(c=>{const l=[];return Rn.getDeclarativeTargets(c).forEach((({name:c,pageReference:u})=>{const d=u.split(".");d.shift();let p=d.join(".");c&&p&&(p=Xp.convertPageRefToClipboardPageNotation(p),l.push({name:c,context:p}))})),l})(c),u=(c=>{const l=[];return Rn.getWhens(c).forEach((({name:c,type:u,pageReference:d})=>{const p=d.split(".");p.shift();let h=p.join(".");c&&h&&(h=Xp.convertPageRefToClipboardPageNotation(h),l.push({name:c,context:h,type:u}))})),l})(c);return{fieldsWithDeclarativeTargets:l,whens:u}})(u)),I=y.some((c=>c.type===Kf))):I=!0;const E=y.filter((c=>c.type===Xf)),A=Xp.getPropertyName(h),_=A?A.split("."):[],C=_.pop(),S=_.join("."),T=[];if(S){const c=up(S,g);if(c&&"copy"===c.dataRetrievalType){const c=Xp.getIn(f,`content.content.${S}`)||{};Object.keys(c).length>0&&Object.keys(c).filter((c=>c!==C)).forEach((l=>{delete c[l],T.push(`${S}`)}))}}c.serverPrecedenceFields=T;let N={...f.content,contextData:d};const P=Uc(u);Xp.isEmpty(P)||(N=Lc(P,N));const D=((c,l)=>{const{caseWideAction:u,caseViewAction:d,fieldsWithDeclarativeTargets:p,fieldsWithWhen:h,isViewsWithWhen:g,interestPage:f,options:m}=c;let y={};const{optionalPayload:I}=m;I&&(l.content={...I});let E={...l},A=vn;return d?(y=eg(Mn,c),E={...E,interestPage:f}):g&&u?y=eg(xn,c):g&&!u?y=eg(wn,c):(p.length>0||h.length>0)&&(E={...E,calculations:{fields:p,whens:h}},y=eg(u?Un:Fn,c),A=Ln),{restAPI:y,requestBody:E,requestType:A}})({...c,fieldsWithDeclarativeTargets:m,fieldsWithWhen:E,isViewsWithWhen:I},N);cu.registerBlockingAction(u).catch((()=>{}));const{restAPI:b,requestBody:R,requestType:O}=D;(c={...c,requestType:O}).requestType=O;const{reqType:v,restApi:x}=b,w=l.value.data[u]?.caseInfo?.headers;return Li(((c,l)=>{const{context:u}=c;(c=>{c.reqHeaders&&c.reqHeaders.etag&&(c.headers={"if-match":c.reqHeaders.etag})})(c);const d=(c=>{const{ID:l,actionID:u,context:d}=c;return`${l}.${d}.${u}`})(l);if((c=>(c=>Xi[c])(c)>0&&Yf[c])(d)){const l=[];for(let u=0;u<Yf[d].length;){const p=Yf[d][u],h=qn(p,c);if("CANCEL_REFRESH"===h){const c=new Error;return c.code="ERR_CANCELED",Promise.reject(c)}!0===h&&(l.push(u),p.cancelConfig?.cancel()),u+=1}l.forEach((c=>{Yf[d].splice(c,1)}))}const p=oc();return c.signal=p.token,c.cancelConfig=p,Yf[d]?Yf[d].push(c):Yf[d]=[c],rc(c.url,c,u,{cancelContext:d}).then((c=>(delete Yf[d],c))).catch((c=>{throw c&&"ERR_CANCELED"!==c.code&&delete Yf[d],c}))})({reqHeaders:w,context:u,method:v,body:R,url:Hn(c,x)},c)).pipe(Rl((l=>({response:{...l.data||{}},actionConfig:c,actionMgrID:c.options.actionMgrID,headers:yc(l.headers)}))),jl(": Error occurred during fetch call at refreshData Epic : ",c.context,c?.options?.actionMgrID))})),Ol((async c=>{if(c&&c.type===Te)return cu.deRegisterBlockingAction(c.payload?.context).catch((()=>{})),Sc(c);const{actionConfig:l,response:u,actionMgrID:d}=c,{context:p,serverPrecedenceFields:h,requestType:g}=l,f=Wr.getTargetViewContainerName(Ge),m=Ct(f,p),y={acName:m,context:p},I=zf(u,{[G.STOPMERGEACTIONS]:!0,[G.ACTIONS.DELETEAVIALACTIONS]:!0});I.directUrlUpdation=!1,g===vn&&await Ac(I,l,y);const E=Ec(I,{target:m,context:p});E.preserveClientChanges=void 0===l.options.preserveClientChanges||l.options.preserveClientChanges;const A=hc.getPropertiesToReplace(p),_=Lh(oh,E,{serverPrecedenceFields:h,propertiesToReplace:A});return jc.registerForServerChanges(),Up(_),gn.resolveActionByID(d,E),jc.unRegisterForServerChanges(),cu.deRegisterBlockingAction(p).catch((()=>{})),[]})))],Qf=Jf,Zf=[c=>c.pipe(Dl(at),Ol((async c=>{const{context:l}=c.payload,u={},d={},p=Object.keys(c.payload.datapages).map((p=>{const h=c.payload.datapages[p];if(h.mode===W.READONLY&&h?.refreshStrategy){const{timeoutSecs:c="",type:l=""}=h?.refreshStrategy||{},u=jp()[h.name];if(u&&p in u){const d=u[p],{loadTime:h}=d;if(!Bl.isTimeElapsed(h,c,l))return}}return Bl.getData(h.name,{dataViewParameters:h.dataViewParameters},l).then((c=>{const l=h.mode===W.READONLY?d:u;l[h.name]?l[h.name][p]={pxResults:c.data.data,parameters:h.dataViewParameters,loadTime:c.data?.fetchDateTime}:l[h.name]={[p]:{pxResults:c.data.data,parameters:h.dataViewParameters,loadTime:c.data?.fetchDateTime}}})).catch((()=>{}))}));await Promise.allSettled(p);const h=[];return Object.keys(u).length&&h.push(oh({context:l,data:u})),Object.keys(d).length&&h.push(Fh({data:d,context:l})),Up(h),[]})))],em=Zf;class Lm{static OPEN_ASSIGNMENT_ACTION="openAssignment";static DIRTY_POPUP_C11N="displayDirtyPopupFromConstellation";static HANDLE_INFINITY_DISCARD="handleDiscardInInfinity";static OPEN_ASSIGNMENT_MODAL="openAssignmentInModal";static DISPLAY_DIRTY_POPUP="displayDirtyPopup";static LOAD_PREVIEW="loadPreview";static UPDATE_COEXISTENCE_DRILLDOWN_CASE="updateCoexistenceDrilldownCase";static OPEN_WORK_ITEM="openWorkItem";static OPEN_WORK_BY_HANDLE="openWorkByHandle";static GET_NEXT_WORK_ACTION="getNextWork";static CLOSE_CONTAINER_ACTION="closeContainer";constructor(){this.broadcastChannel=null,this.callback=null,this.isReverseCoexistenceCase=!1,this.broadcastEventToIframe=!1,this.isDirtyDialogActive=!1,this.onCreateCallback=null,this.openAssignmentParams=null}getGlobalObject=()=>s.g;getUniqueId=()=>this.getGlobalObject().uniqueId;setUniqueId=()=>{this.getGlobalObject().uniqueId=(new Date).getTime()};initBroadcastChannel=()=>{this.setUniqueId(),this.broadcastChannel=new BroadcastChannel("coexistence"),this.broadcastChannel.onmessage=c=>{switch(c.data.action){case Lm.DISPLAY_DIRTY_POPUP:this.broadcastEventToIframe=c.data.fromInfinity,this.isDirtyDialogActive||(c.data.isFormDirty?(zr.publish(W.PUB_SUB_EVENTS.EVENT_SHOW_CANCEL_ALERT,{isModalAction:!0,hideDelete:!0}),this.isDirtyDialogActive=!0):this.callback?.call(this));break;case Lm.LOAD_PREVIEW:this.loadPreview(c);break;case Lm.UPDATE_COEXISTENCE_DRILLDOWN_CASE:this.updateCoexistenceDrilldownCase(c);break;case Lm.OPEN_ASSIGNMENT_ACTION:this.openAssignment(c);break;case Lm.GET_NEXT_WORK_ACTION:this.getNextWork(c);break;case Lm.OPEN_WORK_BY_HANDLE:this.openWorkByHandle(c);break;case Lm.CLOSE_CONTAINER_ACTION:this.closeContainer(c)}}};loadPreview=c=>{const{pyID:l,caseClassName:u,uniqueId:d}=c.data;d===this.getUniqueId()&&Nu({}).getPConnect().getActionsApi().showCasePreview(l,{caseClassName:u})};navigateToDefaultPage=()=>{const c=Nu({isRoot:!0}),l=PCore.getStore()?.getState().data.app?.pyPortal?.pyPrimaryNavPages;let u;Array.isArray(l)&&l[0]&&(u=l[0]);const d=u?.pyClassName||"Data-Portal",p=u?.pyRuleName||"pyHome";c.getPConnect().getActionsApi().showPage(p,d)};closeContainer=c=>{const{uniqueId:l}=c.data;l===this.getUniqueId()&&this.navigateToDefaultPage()};updateCoexistenceDrilldownCase=c=>{const{key:l,caseClassName:u,actionApi:d,caseLabel:p}=c.data;let h=d;d===Lm.OPEN_WORK_ITEM&&(h=Lm.OPEN_WORK_BY_HANDLE),Vd.updateSemanticURLAndDocumentTitle({key:l,caseClassName:u,actionName:h}),Nu({}).getPConnect().getActionsApi().updateRecents(u,l.substring(l.lastIndexOf(" ")+1),p,l)};openAssignment=c=>{const{pzInsKey:l,uniqueId:u}=c.data;u===this.getUniqueId()&&(this.onCreateCallback&&this.openAssignmentParams&&(l&&this.openAssignmentParams[0]&&this.openAssignmentParams[0].payload&&this.openAssignmentParams[0].payload.data?this.openAssignmentParams[0].payload.data.caseInfo.assignments[0].ID=l:this.openAssignmentParams[0]&&this.openAssignmentParams[0].payload&&this.openAssignmentParams[0].payload.data&&(this.openAssignmentParams[0].payload.data.caseInfo.content.coexistenceAction="openWorkByHandle"),this.onCreateCallback.call(this,this.openAssignmentParams)),this.onCreateCallback=null,this.openAssignmentParams=null)};getNextWork=c=>{const{uniqueId:l}=c.data;if(l===this.getUniqueId()){const c=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${G.PRIMARY}`;Nu({meta:{},options:{context:zu(c)}}).getPConnect().getActionsApi().getNextWork()}};openWorkByHandle=c=>{const{key:l,caseClassName:u,uniqueId:d}=c.data;if(d===this.getUniqueId()){const c=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${G.PRIMARY}`;Nu({meta:{},options:{context:zu(c)}}).getPConnect().getActionsApi().openWorkByHandle(l,u)}};destroyBroadcastChannel=()=>{this.getBroadCastChannel()?.close(),this.broadcastChannel=null};subscribeEvents=()=>{this.setReverseCoexistenceCaseLoaded(!0),zr.subscribe(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.HANDLE_DISCARD,this.handleDiscard),zr.subscribe(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.CHECK_IS_FORM_DIRTY,this.postDirtyPopupMessage)};unsubscribeEvents=()=>{zr.unsubscribeAllWithEventType(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.CHECK_IS_FORM_DIRTY),zr.unsubscribeAllWithEventType(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.HANDLE_DISCARD),this.setReverseCoexistenceCaseLoaded(!1),this.isDirtyDialogActive=!1};init=(c=!0)=>{null===this.broadcastChannel&&this.initBroadcastChannel(),c&&this.subscribeEvents()};destroy=()=>{this.destroyBroadcastChannel(),this.unsubscribeEvents()};setCallBackFunction=c=>{this.callback=c};setReverseCoexistenceCaseLoaded=c=>{this.isReverseCoexistenceCase=c};setIsDirtyDialogActive=c=>{this.isDirtyDialogActive=c};getBroadCastChannel=()=>this.broadcastChannel;getCallBackFunction=()=>this.callback;isReverseCoexistenceCaseLoaded=()=>this.isReverseCoexistenceCase;postDirtyPopupMessage=({callBackFunction:c})=>{this.broadcastChannel?.postMessage({action:Lm.DIRTY_POPUP_C11N,uniqueId:this.getUniqueId()}),this.setCallBackFunction(c)};handleDiscard=()=>{this.broadcastEventToIframe?(this.broadcastChannel?.postMessage({action:Lm.HANDLE_INFINITY_DISCARD,uniqueId:this.getUniqueId()}),this.broadcastEventToIframe=!1):(this.callback?.call(this),this.callback=null),this.isDirtyDialogActive=!1};postCreateCaseMessage=(c,l,u)=>{null===this.broadcastChannel&&this.init(!1),this.broadcastChannel?.postMessage({action:Lm.OPEN_ASSIGNMENT_MODAL,uniqueId:this.getUniqueId(),key:c}),this.broadcastEventToIframe=!1,this.onCreateCallback=l,this.openAssignmentParams=u}}const tm=new Lm,nm=c=>{const{containerName:l,isInCreateStage:u}=c;return u?W.MODAL:l||Wr.getTargetViewContainerName(Ke)},rm=c=>{const l=Xp.getIn(c,[W.DATA,W.CASE_INFO.CASE_INFO]);return sn(l)&&an(kd.getOperatorIdentifier(),l)},sm=[W.TOP_ACTION_LABEL.CREATEWORK,W.TOP_ACTION_LABEL.OPENASSIGNMENT,W.TOP_ACTION_LABEL.FINISHASSIGNMENT,W.TOP_ACTION_LABEL.OPENWORKBYHANDLE,W.TOP_ACTION_LABEL.SAVEANDCLOSE,W.TOP_ACTION_LABEL.SHOWDATA],am=(c,l)=>{let u={};return sm.includes(c)&&(u={topLevelAction:!0,actionLabel:c}),c===W.TOP_ACTION_LABEL.OPENASSIGNMENT&&(u.assignmentID=l),u},om=()=>({registerHeader:(...c)=>Yi.registerHeader(...c),unRegisterHeader:(...c)=>Yi.unRegisterHeader(...c),getRegisteredHeaders:()=>Yi.getRegisteredHeaders()}),im=(c,{body:l={},queryPayload:u={},cancelTokenSource:d,headers:p={},responseType:h},g,f)=>{const{restApi:m,reqType:y}=eg(c,u),I={method:y,headers:p,body:l,...h&&{responseType:h}};return d&&(I.signal=d.token),rc(m,I,g,f??{})},cm=(c,{method:l="GET",body:u={},headers:d={},withoutDefaultHeaders:p=!1},h)=>(c.startsWith("http:")||c.startsWith("https:")||(c=P()+c),rc(c,{method:l,headers:d,body:u,withoutDefaultHeaders:p},h)),lm=c=>Vd.doesRestApiExist(c),um=()=>oc(),dm=c=>ic(c),pm=c=>{(c=>{Zi=c})(c)},hm=()=>gm,gm=class{static createCase(c,l){const{caseInfo:u,startingFields:d,flowType:p,viewType:h=fc.PAGE,pageName:g,context:f=W.APP.APP,debugInfo:m,headers:y}=l;let I={};u&&u.content&&(I=u.content);const E={caseTypeID:c,content:{...I,...d},processID:p};let A={};return kd.getPerformanceDashboardVisibility()&&(A=am(W.TOP_ACTION_LABEL.CREATEWORK)),im("createWork",{body:E,queryPayload:{caseClassName:c,viewType:h,params:{pageName:g}},headers:{...y,...m&&{...Yi.addDebugHeaders(m)}}},f,A).then((l=>({response:l.data,requestPayload:E,headers:yc(l.headers,c,y)})))}},{RESOURCE_TYPES:fm}=G,mm=(c,l=[])=>{const{viewType:u,containerName:d,targetContainerName:p,isChild:h}=c,g=ns(l);return(c=>{if(c){const{stageID:l,stages:u=[]}=c,d=u.length;for(let c=0;c<d;c+=1)if(u[c].ID===l)return"manual"===u[c].transitionType}return!1})(g)&&c?.stageID===g.stageID?fc.PAGE:u||(!Qr(d)&&!Qr(p)||h?fc.PAGE:fc.FORM)},ym=(c,l,u,d,p,h,g)=>{ed(l)&&nd(l)?((c,l,u,d,p)=>{mm(c,l)===fc.FORM?(u.caseViewMode=d||W.PERFORM_MODE,p.push(Lh(Ah,u))):p.push(Lh(vh,u))})(d,p,c,h,u):((c,l,u,d,p)=>{if(cs(c,{removeActionPayload:l,target:u}),((c,l)=>{const u=$u(l);let d=null;return u&&(d=wu(l,u)),d?.key===c&&td(l)})(d.key,u))d.context=zu(u),d.containerItemID=d.context,c.push(Lh(vh,d));else if((p?.isChild||p?.isRemote)&&p?.isMultiDoc){const l=ld(p.context);d.target=l,d.context=p.context,d.containerItemID=p.context,c.push(Lh(vh,d))}else{const l=ld(d.context),u=ju(l,d.key);u?(d.target=l,d.context=u,d.containerItemID=u,c.push(Lh(vh,d))):c.push(Lh(gh,d))}})(u,g,l,c,d)},Im=({restUrl:c,reqType:l,requestHeaders:u,debugInfo:d,context:p,isGetNextWork:h,doNotMergeMessagesForStatusCode:g,assignmentID:f})=>{let m={};return kd.getPerformanceDashboardVisibility()&&(m=am(W.TOP_ACTION_LABEL.OPENASSIGNMENT,f)),rc(c,{method:l,headers:{"if-match":u&&u.etag,...u,...d&&{...Yi.addDebugHeaders(d)}}},p,{doNotMergeHttpMessagesForStatusCode:h?g:"",...m})},{RESOURCE_TYPES:Em}=G,{RESOURCE_TYPES:Am}=G,{RESOURCE_TYPES:_m}=G,Cm=(c,l)=>{const{containerItemID:u,skipReleaseLockRequest:d,isInCreateStage:p,isProcessAction:h}=l,g=Hu(u),f=`${g?.includes("root")?W.APP.ROOT:W.APP.APP}/${Ou.MODAL}`;c.push(Lh(bh,{containerItemID:u,context:g,target:f,skipReleaseLockRequest:d,isInCreateStage:p,isProcessAction:h}))},Sm=c=>kp(".openCaseViewAfterCreate",W.CONTEXT_DATA,c)??!0,Tm=c=>/^app\/preview_[0-9]*/g.test(c),Nm=(c,l)=>{const u=K(c);return!Tm(c)&&(u===l||/^app\/primary_[0-9]*/g.test(u))},Pm=async(c,l,u,d,p)=>{((c,l,u)=>{if(l.isProcessAction&&(Cm(u,{...l,skipReleaseLockRequest:!0}),c)){const d=`${l?.containerItemID.includes("root")?W.APP.ROOT:W.APP.APP}/${Ou.PRIMARY}`,p=Nc(d,Ou.PRIMARY),h={insKey:c.ID,className:c.content.classID,context:p,acTargetName:W.PRIMARY,isChild:!0},g={type:fe,payload:{...h}};u.push(g)}})(c.data.caseInfo.parentCaseInfo,l,p);const h=c?.data?.caseInfo?.parentCaseInfo?.ID;if(h){const u=ld(l?.context),d=wu(u,l?.context)?.parentContext,p=ld(d);l?.isProcessAction&&Fu(p,h)&&Nd(d,c?.data?.caseInfo?.lastUpdateTime)}u.resourceType=_m.CASE,u.directUrlUpdation=!0,l.isProcessAction||await(async(c,{translatedDXAPIResponse:l,actionInPayload:u},d)=>{const{caseID:p}=u,h=(g=l,Xp.getIn(g,Kr.NEXT_ASSIGNMENT_INFO_ID,W.EMPTY_STRING));var g;const f=ss(l),{caseViewMode:m,headers:y,semanticURL:I,actionMgrID:E,directUrlUpdation:A,key:_,flowName:C,resourceType:S}=d;(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CREATE_STAGE_DONE,c)})({caseId:p,assignmentId:h,caseType:f}),Cm(c,{...u,skipReleaseLockRequest:!0});const T=`${u?.containerItemID.includes("root")?W.APP.ROOT:W.APP.APP}/${Ou.PRIMARY}`,N=Nc(T,Ou.PRIMARY),P=Yi.getCoreHeadersFromContext(u.context)||!1,D=Ec(l,{target:T,context:N,containerItemID:N,caseViewMode:m,headers:y,semanticURL:I,key:_,flowName:C,resourceType:S,directUrlUpdation:A,debugInfo:P&&P.debugInfo&&{debugId:P.debugInfo[W.COREHEADER_APP_DEBUG_ID]}});if(ed(T)){const l=Fp(N),p=os({data:l}),[,h]=p?p.split(" "):[],g=`You will lose unsaved changes for ${h}. Do you want to continue?`;if(!Sm(u.context))return c;{const{continueExecution:l}=bc(T,{dirtyMessage:g});if(!l)return d.directUrlUpdation=!1,gn.rejectActionByID(E),Fl();D.currentCaseViewMode=ms(D?.context),c.push(Lh(vh,D))}}else c.push(Lh(gh,D));return l.directUrlUpdation=A,l.semanticURL=I,await Ac(l,{...D,acName:T},{acName:T,context:N}),c})(p,{translatedDXAPIResponse:d,actionInPayload:l},u)},Dm=async(c,l,u,d,p)=>{c.doDeleteCaseSummary=l.doDeleteCaseSummary,c.caseViewMode===W.REVIEW_MODE&&(c.flowName=" ",c.clearView=!0);const{containerItemID:h}=l,g=hc.getPropertiesToReplace(h);p.push(Lh(Ah,{...c,...d,propertiesToReplace:g})),Xp.setIn(c,"acName",d.target),await Ac(u,c),((c,l,{data:u,caseViewMode:d})=>{const{containerItemID:p}=l,h=Hu(p);if(h&&ls(p)){const l=te(h),g={data:u,caseViewMode:d,context:l};Xp.setIn(g.data,["context_data","caseViewMode"],d),c.push({type:lt,payload:{context:l}});const f=hc.getPropertiesToReplace(p);c.push(Lh(oh,g,{propertiesToReplace:f}))}})(p,l,c)},bm=async(c,l,u,d,p,h,g,f)=>{const{isCaseWideAction:m,isInCreateStage:y,containerItemID:I}=c,E=K(c.context),A=as(p),_=ss(p),C=y&&!A&&!m,S=Xu(E)[0],T=S?$u(S):E,N=Jr(I),P=Hu(I),D=Object.freeze({target:c.target,containerItemID:I,context:P,containerName:N});C&&!Tm(c.context)?await Pm(f,c,l,p,h):Nm(c.context,T)?await(async(c,l,u,d,p,h,g,f,m)=>{const{headers:y}=m;if(c){if("object"!=typeof m?.response?.uiResources?.root){const l=(c,l)=>{const u=c.findIndex((c=>c.ID===l));if(-1!==u){const[l]=c.splice(u,1);c.unshift(l)}return c},u=Fp(c),d=m?.response?.data?.caseInfo?.assignments??[],p=u?.caseInfo?.assignments??[],h=ms(c)===W.PERFORM_MODE,g=d[0]?.ID!==p[0]?.ID,f=d.length>0&&p.length>0;h&&g&&f&&m?.response?.data?.caseInfo?.assignments&&(m.response.data.caseInfo.assignments=l(d,p[0]?.ID))}const I=ed(ld(c));let E=!1;const A=ld(u),_=xu(A),C=$u(A);C&&_?.items?.[C]?.key===m?.actionInPayload?.caseID&&(E=!0),Cm(p,{...d,skipReleaseLockRequest:!0});const S=Jr(c),T={target:ld(c),containerItemID:c,context:c,containerName:S};l.doDeleteCaseSummary=d.doDeleteCaseSummary;const N=te(u),P=Fp(N),D=Fp(d.context),b=P?.caseInfo?.ID,R=D?.caseInfo?.ID;if(I&&b===R||!I&&""===g)(void 0===l?.data?.caseInfo?.content||void 0!==l.data.caseInfo.content&&"object"==typeof l.data.caseInfo.content&&0===Object.keys(l.data.caseInfo.content).length)&&(l.root=void 0,delete l.data?.caseMessages),p.push(Lh(Ah,{...l,key:g,resourceType:"",...T}));else if(h){const h=ld(c),f=ju(h,g);if(f)T.target=h,T.context=f,T.containerItemID=f,p.push(Lh(Ah,{...l,key:g,resourceType:"",...T}));else{const c=Xu(u)[0];if(d.target=c,d.context=Nc(c,W.WORKAREA,u),d?.context){d.containerItemID=d.context,p.push(Lh(gh,{...d,...l}));const u=d.containerItemID;p.push(Lh(Nh,{parentContainerTarget:c,containerItemID:u}))}}}if(d.target=ld(c),d.containerName=Jr(c),d.context=c,d.containerItemID=c,Xp.setIn(l,"acName",T.target),await Ac(f,l),E){const{data:c,caseViewMode:d}=l;u.includes(W.WORKAREA)&&ls(u)&&(u=te(u));const h={data:c,caseViewMode:d,context:u};Xp.setIn(h.data,["context_data","caseViewMode"],d),p.push({type:lt,payload:{context:u}}),p.push(Lh(oh,h))}if(!h&&l.caseViewMode===W.PERFORM_MODE){const l=((c,l)=>{const u=ld(c);return ju(u,l)})(c,g),u={data:{caseInfo:{headers:y}},context:l};p.push(Lh(oh,u)),p.push(jn(((c,l=!1,u=!1)=>{const d=gn.getNextActionMgrId();return{ID:Zp.getPropertyValue(G.CASE_INFO.ASSIGNMENT_ID,"",c),actionID:Zp.getPropertyValue(G.CASE_INFO.ASSIGNMENTACTION_ID,"",c),context:c,caseWideAction:l,contextData:u,options:{actionMgrID:d}}})(l)))}}else{Cm(p,d);let c=!1;const g=ld(u),f=xu(g),y=$u(g);if(y&&f?.items?.[y]?.key===m?.actionInPayload?.caseID&&(c=!0),h){const c=Xu(u)[0];d.target=c,d.context=Nc(c,W.WORKAREA,u),d.containerItemID=d.context,p.push(Lh(gh,{...d,...l}));const h=d.containerItemID;p.push(Lh(Nh,{parentContainerTarget:c,containerItemID:h}))}if(c){const{data:c,caseViewMode:d}=l,h={data:c,caseViewMode:d,context:u};Xp.setIn(h.data,["context_data","caseViewMode"],d),p.push({type:lt,payload:{context:u}}),p.push(Lh(oh,h))}}})(T,l,E,c,h,u,d,p,g):m&&!Nm(c.context,T)?(Cm(h,c),((c,l,u)=>{const{containerItemID:d,caseID:p}=l;if(d&&/^app\/preview_[0-9]*/g.test(d)){const{caseClassName:l}=u,h=K(d),g=Hu(h);c.push(Lh(ch,{containerItemID:h,context:g,container:Ou.PREVIEW,containerName:Ou.PREVIEW,caseId:p,viewName:G.PREVIEW_VIEW_NAME,caseClassName:l,updateData:!0}))}})(h,c,{caseClassName:_})):await Dm(l,c,p,D,h)},{RESOURCE_TYPES:Rm}=G,Om=c=>{const l={},{routeKey:u,isModalAction:d,caseID:p,context:h,RemoteSystemID:g}=c;g&&(l.RemoteSystemID=g);const f=u||"releaseAssignmentLock",{restApi:m,reqType:y}=eg(f,{ID:p,caseID:p,viewType:fc.PAGE});return Hi.getPreviewMode()&&(l[W.SKIPCOREHEADERS]=!0),Li(rc(m,{method:y,headers:l},h,{includeRemoteSystemIdIfPresent:!!g})).pipe(Rl((l=>d?{actionInPayload:c}:{response:l.data,actionInPayload:c,headers:yc(l.headers)})),jl(": Error occurred during ajax call at release lock request : ",h))},{RESOURCE_TYPES:vm}=G,xm=(c,l=!1)=>{const{action:u,state$:d,actionMgrID:p}=c;let h=[];return Ml(u.payload).pipe(Ol((c=>((c,l)=>{const{assignmentID:u,actionID:d,context:p}=c,{restApi:h,reqType:g}=eg("save",{assignmentID:u,actionID:d}),{content:f}=Ic(p),m=l.value.data[p]?.caseInfo?.headers;let y={};return kd.getPerformanceDashboardVisibility()&&(y=am(W.TOP_ACTION_LABEL.SAVEANDCLOSE)),Li(rc(h,{method:g,body:f,headers:{"if-match":m&&m.etag}},p,y)).pipe(Rl((l=>({response:l.data,actionInPayload:c,headers:yc(l.headers)}))),jl(": Error occurred during ajax call at saveAndCloseAssignment Epic at save action : ",p))})(c,d))),Ol((c=>{if(c&&es(c.type))return Ml(c);const{containerItemID:l}=c&&c.actionInPayload,d=K(l),p=ld(d),g=xu(p),f=$u(p);if(u.payload.canUpdateAvailableActions&&qf(c.response),g?.items?.[f]?.key===c?.actionInPayload?.caseID){const u={context:d,data:{...c.response.data}},p=hc.getPropertiesToReplace(l);h.push(Lh(oh,u,{propertiesToReplace:p})),h.push(Lh(Ah,{context:l}));const g={context:l,data:{caseInfo:{headers:c.headers}}};h.push(Lh(oh,g))}return fs(c,h),c.actionInPayload.RemoteSystemID=q.getRemoteHeaderByContext(c.actionInPayload.context)??void 0,Om(c.actionInPayload)})),Ol((async u=>{if(u&&es(u.type)){const{payload:l}=u,d=Sc({...u,...l,actionMgrID:p});h.push(d);const g=c.action.payload.modalLoadingContainer;if(g){const c=g.context,{context_data:l}=Fp(c)||{};l?.isLoading&&ud(c)}return h}const{actionInPayload:d}=u,{context:g,containerName:f}=d,m={target:Ct(f,g),containerItemID:g,context:g};return l||h.push(Lh(bh,m)),h})),Rl((()=>(Up(h),ps(h,p),l||(h=[]),h))))},{LOCAL_ACTION_TYPE:wm}=W,{RESOURCE_TYPES:Mm}=G,Um=(c,l)=>{const{actionID:u,assignmentID:d,caseID:p,context:h,openActionType:g,modalLoadingContainer:f,headers:m}=c,{isProcessAction:y}=l,I=y?Qe:(c=>{const l=c.localActionType.toLowerCase();return l===wm.CASE_WIDE||l===wm.EXPRESS?Ze:Je})(c),E=fc.FORM,{reqType:A}=eg(I,{caseID:p,ID:d,actionID:u,viewType:E});let{restApi:_}=eg(I,{caseID:p,ID:d,actionID:u,viewType:E});c.actionType=I===Ze?W.CASE:W.ASSIGNMENT,_&&!_.includes("viewType=")&&(_=_.includes("?")?`${_}&viewType=${E}`:`${_}?viewType=${E}`);const C=f?.context??h;return Li(rc(_,{method:A,headers:m},C)).pipe(Rl((l=>({response:l.data,actionInPayload:c,headers:yc(l.headers)}))),jl(`: Error occurred during ajax call at ${g} Epic : `,C))},Fm=(c,l)=>{const{isProcessAction:u}=l,d=u?Qe:Je;let p;if(c.openActionType=d,"modal"===Xr(d,c)){p=Xu(c.contextName)[0]?Xu(c.contextName):ld(c.contextName);const u=p?$u(p):c.contextName,d=Hu(u),h=Xr(c.openActionType,c),g=Ct(h,c.context),f=ee(c.context,X(h,c.context));return Up(gh({target:g,context:f,containerItemID:f,key:c.caseID,caseViewMode:W.PERFORM_MODE,actionName:c.name,showProgress:!0,root:{type:"reference",config:{context:W.CASE_INFO.CASE_INFO_CONTENT,type:"view"}},data:{key:c.caseID,caseInfo:{ID:c.caseID}}})),Up(_h({context:f})),c.modalLoadingContainer={target:g,context:f},Xu(c.contextName)[0]?c.continueExecution&&hl(d)?(c.saveActionPayload.modalLoadingContainer=c.modalLoadingContainer,c.saveActionPayload.canUpdateAvailableActions=!c.saveActionPayload.isModalAction,Li([Sl(c.saveActionPayload)]).pipe(Ol((c=>(c=>{let l,u=0;const d=[],p={value:Lp()?.getState()};return Ml(c).pipe(Dl(Cl),bl((c=>{const{isFormValid:h}=c.payload;if(({actionMgrID:u,caseType:l}=c.payload),!h){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,c),Ml([])}return xm({action:c,state$:p,actionMgrID:u,caseType:l,actionsOut:d},!0)})))})(c))),Ol((u=>{if(1===u.length&&es(u[0].type)){const{continueExecution:u}=bc(p);if(!u)return gn.rejectActionByID(c.actionMgrID),Ul.pipe(Ui((()=>Fl()))).toPromise();if(u)return Um(c,l)}return Um(c,l)})),Rl((c=>c)))):Um(c,l):Um(c,l)}return Um(c,l)},jm=async(c,l,{headers:u,actionInPayload:d})=>{const{context:p,actionName:h,openActionType:g,doDeleteCaseSummary:f,modalLoadingContainer:m}=d,y=zf(c),I=Xr(g,d),E=m?.target??Ct(I,p);let A,_,C=!1;!nd(E)||td(E)&&!Fu(E,c.data.caseInfo.ID)?(_=X(I,p),Zr(I)&&(_=ee(p,_)),A=_,C=!0):(A=td(E)?ju(E,c.data.caseInfo.ID):$u(E),_=Hu(A));const S={acName:E,target:E,containerName:I,context:_};await Ac(y,d,S),(void 0===y?.data?.caseInfo?.content||void 0!==y.data.caseInfo.content&&"object"==typeof y.data.caseInfo.content&&0===Object.keys(y.data.caseInfo.content).length)&&delete y.data?.caseMessages;const T=y.uiResources?.root;let N;N=T?W.PERFORM_MODE:W.REVIEW_MODE;const P=Ec(y,{target:E,context:_,containerItemID:A,caseViewMode:N,doDeleteCaseSummary:f,headers:u,actionName:h,isMinimizable:!1,isInCreateStage:Zr(I),resourceType:Mm.ASSIGNMENT,isProcessAction:d.isProcessAction,showProgress:d.showProgress,progressMessage:d.progressMessage,assignmentID:d.assignmentID,actionType:d.actionType});T&&us(P,y),Zr(I)&&delete P.doDeleteCaseSummary,d.openActionType===et&&(P.isBulkAction=!0,P.data.caseInfo.actionButtons.main[0].jsAction="async"===d.runningMode?"submitBulkActionAsync":"submitBulkAction",P.data.caseInfo.actionButtons.secondary[0].jsAction="cancelBulkAction",P.data.caseInfo.cases=d.selectedList);const D=C?gh:Ah;if(l.push(Lh(D,P)),C||l.push(Lh(Sh,P)),C){const p=Xu(d.contextName),h=ju(p,c.data.caseInfo.ID);if(h){const c={data:{caseInfo:{headers:u}},context:h};l.push(Lh(oh,c))}}return A!==$u(E)&&l.push(Lh(Nh,{target:E,containerItemID:A})),ls(A)&&!m?.context&&wc(P,l),P.caseViewMode===W.REVIEW_MODE&&l.push(Lh(bh,P)),l};var Vm=Array.isArray,km=Object.getPrototypeOf,$m=Object.prototype,Bm=Object.keys;var Gm=Array.isArray;function Wm(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=function(c){return Ho(xl(c))?c.pop():void 0}(c),d=function(c){if(1===c.length){var l=c[0];if(Vm(l))return{args:l,keys:null};if((d=l)&&"object"==typeof d&&km(d)===$m){var u=Bm(l);return{args:u.map((function(c){return l[c]})),keys:u}}}var d;return{args:c,keys:null}}(c),p=d.args,h=d.keys,g=new yi((function(c){var l=p.length;if(l)for(var u=new Array(l),d=l,g=l,f=function(l){var f=!1;Pi(p[l]).subscribe(Oi(c,(function(c){f||(f=!0,g--),u[l]=c}),(function(){return d--}),void 0,(function(){d&&f||(g||c.next(h?function(c,l){return c.reduce((function(c,u,d){return c[u]=l[d],c}),{})}(h,u):u),c.complete())})))},m=0;m<l;m++)f(m);else c.complete()}));return u?g.pipe(function(c){return Rl((function(l){return function(c,l){return Gm(l)?c.apply(void 0,Bo([],$o(l))):c(l)}(c,l)}))}(u)):g}var Hm=new Pg(Cg),qm=Hm;function zm(c,l){return void 0===c&&(c=0),void 0===l&&(l=Hm),c<0&&(c=0),function(c,l,u){void 0===c&&(c=0),void 0===u&&(u=qm);var d=-1;return null!=l&&(vl(l)?u=l:d=l),new yi((function(l){var p,h=(p=c)instanceof Date&&!isNaN(p)?+c-u.now():c;h<0&&(h=0);var g=0;return u.schedule((function(){l.closed||(l.next(g++),0<=d?this.schedule(void 0,d):l.complete())}),h)}))}(c,c,l)}function Ym(c){return Ri((function(l,u){var d=!1,p=null,h=null,g=function(){if(null==h||h.unsubscribe(),h=null,d){d=!1;var c=p;p=null,u.next(c)}};l.subscribe(Oi(u,(function(l){null==h||h.unsubscribe(),d=!0,p=l,h=Oi(u,g,ni),Pi(c(l)).subscribe(h)}),(function(){g(),u.complete()}),void 0,(function(){p=h=null})))}))}const Km=c=>{const{context:l}=c;let u={...Ic(l).content,contextData:!1};const d=Uc(l);Xp.isEmpty(d)||(u=Lc(d,u));const{restApi:p,reqType:h}=eg("refreshCaseView",c);return u.interestPage=c.interestPage,Li(rc(p,{method:h,body:u},l)).pipe(Rl((l=>({actionInPayload:c,response:l.data,headers:yc(l.headers)}))),jl(": Error occurred during ajax call : ",l))},Xm=[c=>{let l=0,u=[],d="",p=!1;return c.pipe(Dl(rh),Vl(100),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>{const{context:u}=c,d=nm(c),h=Ct(d,u),{continueExecution:g,removeActionPayload:f}=(c=>ed(c)?{continueExecution:!0,removeActionPayload:{}}:bc(c))(h);return p=hs(c.class),g?(c.isTraditionalUICase=p,((c,l)=>{const{class:u,context:d,viewType:p=fc.PAGE}=c,{removeActionPayload:h}=l;let g=c?.pageName?c?.pageName:kd.getDefaultCasePage();return c.isTraditionalUICase&&(g="pyDetails"),Li(gm.createCase(u,{...c,pageName:g,viewType:p,context:d})).pipe(Rl((({response:l,headers:u})=>({response:l,actionInPayload:c,headers:u,removeActionPayload:h}))),jl("Error occurred during ajax call at createWork Epic : ",d))})(c,{removeActionPayload:f})):(gn.rejectActionByID(l),Fl())})),Ol((async c=>{if(c&&c.type===Te)return c.payload.context=Sd(),u.push(Sc(c)),u;const{actionInPayload:h,response:g,headers:f,removeActionPayload:m}=c;let y;y=!(h.renderInline||kd.getDefaultCasePage()||p)&&rm(g),Xp.setIn(g.data,G.CASE_INFO.IS_FIRST_ASSIGNMENT,!0);const I=nm({...h,isInCreateStage:y}),E=Ct(I,h.context),A=Nc(E,I,h.context);if(!Zr(I)&&ed(E)){const{continueExecution:c}=bc(E);if(!c)return gn.rejectActionByID(l),Fl()}if(!(h?.openCaseViewAfterCreate??1)&&!y){const c=Xp.getIn(g.data,G.CASE_INFO.CASE_INFO_CONTENT);d=`${c.pyID} ${Bd.getLocaleValue("has been created.","Assignment")}`;const l=is(g),p=ss(g);return(c=>{zr.publish(W.PUB_SUB_EVENTS.DISPLAY_CASE_CREATED_TOASTER,c)})({toastMessage:d}),(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CREATE_STAGE_DONE,c)})({caseId:`${c.pyID}`,assignmentId:l,caseType:p}),u}const _=zf(g);let C=Qh("createWork",{caseClassName:ss(_)});C=C.replace(/{.+?}/,String(rs(os(_)))),_.semanticURL=C,((c,l)=>{const u=rm(c),{skipBrowserSemanticUrlUpdate:d=!1,isTraditionalUICase:p}=l;Xp.setIn(c,["directUrlUpdation"],(!u||p)&&!d)})(_,h);const S={acName:E,context:A},T=ms(A);await Ac(_,h,S);const N={target:E,context:A,containerItemID:A,headers:f,semanticURL:C,isInCreateStage:y,isMinimizable:y,caseViewMode:_.confirmationNote?W.REVIEW_MODE:W.PERFORM_MODE,currentCaseViewMode:T,assignmentContext:Xp.getIn(_,"nextAssignmentInfo.context"),nextAssignmentInfo:Xp.getIn(_,"nextAssignmentInfo"),resourceType:G.CASE,openCaseViewAfterCreate:h.openCaseViewAfterCreate,modalOptions:h.modalOptions,debugInfo:h.debugInfo};us(N,_);const P=Ec(_,N);p&&(P.data.caseInfo.content.coexistenceAction="openAssignment");const D=Tc(E,P);return Pc(D)&&cs(u,{removeActionPayload:m,target:E}),u.push(D),vc(u),u})),Rl((()=>{const c=gs(),h=sn(Xp.getIn(u[0]?.payload,"data.caseInfo"));return p&&c&&h?tm.postCreateCaseMessage(u[0]?.payload?.nextAssignmentInfo?.ID,Mc,u):Mc(u),ps(u,l),d="",u=[],u})))},c=>{const l="Browser"===kd.getRuntime();let u=0,d=[];const p=[];let h=!1,g=!1;return c.pipe(Dl(Al),Rl((c=>(({actionMgrID:u}=c.payload),{...c.payload,...l?{insKey:c.payload.assignmentID}:{assignmentID:c.payload.assignmentID}}))),Ol((c=>{h=c.isGetNextWork;const{context:l}=c;let d;d=(c?.isChild||c?.isRemote)&&c?.isMultiDoc?fc.FORM:mm(c),c.viewType=d;const p=Xr(Ye,c),f=Ct(p,l),{activate:m,activateContainerActionPayload:y}=Oc(Em.ASSIGNMENT,f,c);if(m&&!c.isParallelCall)return Ml({type:Ue,activateContainerActionPayload:y,actionInPayload:c});const I=$u(f);let E;E=y?.isParallelAssignment?{continueExecution:!0,removeActionPayload:{}}:I?bc(f):{continueExecution:!0,removeActionPayload:{}};const{continueExecution:A,removeActionPayload:_}=E;return A?(g=hs(c.className),c.isTraditionalUICase=g,((c,l)=>{const u=mm(c),{headers:d,context:p,assignmentID:h,isGetNextWork:g,debugInfo:f,isOpenStage:m,stageID:y,caseID:I,jsActionQueryParams:E,isLastStepInCreateStage:A}=c,{restApi:_,reqType:C}=g?eg("getNextWork",{viewType:u}):m?eg("openStage",{caseID:I,stageID:y}):eg(Ye,{assignmentID:h,viewType:u}),{removeActionPayload:S}=l,T=kd.getDefaultCasePage();let N="",P=c.pageName;c.isTraditionalUICase&&(P="pyDetails"),N=T?`${_}?viewType=${u}&pageName=${T}`:P?`${_}?viewType=${u}&pageName=${P}`:`${_}?viewType=${u}`,E&&Object.keys(E).forEach((c=>{N+=`&${c}=${E[c]}`}));const D=(c=>{let l=c?.headers??{};return c?.isRemote&&(l=yc(l,c.remoteClassName)),l})(c);return Li(Im({restUrl:N,reqType:C,requestHeaders:D,debugInfo:f,context:p,isGetNextWork:g,doNotMergeMessagesForStatusCode:"404",assignmentID:h})).pipe(Rl((c=>kd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT)&&!A?sn(c.data.data.caseInfo)?c:(N=N.replaceAll(P,"pyDetails"),kd.setDefaultCasePage("pyDetails"),{isReloadWithDifferentViewTypeRequired:!0,restUrl:N}):c)),Ol((c=>c?.isReloadWithDifferentViewTypeRequired?Im({restUrl:N,reqType:C,requestHeaders:D,debugInfo:f,context:p,isGetNextWork:g,doNotMergeMessagesForStatusCode:"404",assignmentID:h}):Ml(c))),Rl((l=>{const{key:p,flowName:g}=Cc(h);return{response:{...l.data,key:p,flowName:g},actionInPayload:c,viewType:u,removeActionPayload:S,headers:yc({...d,...l.headers})}})),jl("Error occurred during ajax call at openAssignment Epic : ",p))})(c,{removeActionPayload:_})):(gn.rejectActionByID(u),Fl())})),Ol((async c=>{if(c?.type===Te){if(h){const{payload:l}=c,{err:u}=l,d=u.response.status;p.push({status:Number(d)})}return d.push(Sc(c)),d}const{type:l,actionInPayload:u,response:f,viewType:m,headers:y,removeActionPayload:I,activateContainerActionPayload:E}=c;if("openStage"===f?.redirectInfo?.jsAction){const c=f?.redirectInfo?.stageID,l=Al,p=f?.data?.caseInfo?.ID;u.isOpenStage=!0,u.stageID=c,u.jsActionQueryParams=f?.redirectInfo?.jsActionQueryParams;const h={type:l,payload:{...u,caseID:p,headers:y}};return d.push(h),d}const{context:A,caseViewMode:_,debugInfo:C}=u;let S=((c,l)=>{const u=ns(c);let d;d=!kd.getDefaultCasePage()&&sn(u);const{isChild:p,containerName:h}=l,g=p&&d,f=d&&!l.isActionFromToDoList;return g||f?W.MODAL:h||Xr(Ye,l)})(f,u);g=hs(f?.data?.caseInfo?.caseTypeID),u.isTraditionalUICase=g,g&&(S=u.containerName);const T=Ct(S,A);if(l===Ue)return await(async(c,l,u)=>{const{semanticURL:d,containerItemID:p,isParallelAssignment:h,insKey:g}=l,{target:f,actionInPayload:m}=u,{skipBrowserSemanticUrlUpdate:y=!1}=m,I=Hu(p);await Ac({directUrlUpdation:!y,semanticURL:d},m,{acName:f,target:f,context:I}),c.push(Lh(Nh,{containerItemID:p,target:f,isParallelAssignment:h,insKey:g,resourceType:fm.CASE,context:I,doDeleteCaseSummary:m.doDeleteCaseSummary}))})(d,E,{actionInPayload:u,target:T}),vc(d),d;const N=f?.data?.caseInfo?.content,P=f?.uiResources?.root?.config?.name;N&&!N.pyViewName&&P&&"page"!==u.viewType&&Xp.setIn(N,"pyViewName",P);const D=zf(f);((c,l)=>{const u=ns(c),d=os(c),p=sn(u),{skipBrowserSemanticUrlUpdate:h=!1,viewType:g,isTraditionalUICase:f}=l,m=g===fc.PAGE&&(!p||f)&&!h,{caseTypeID:y}=u;if(m){const l=Qh(ze,{caseClassName:y}).replace(/{.+?}/,String(rs(d)));c.semanticURL=l,c.directUrlUpdation=!0}})(D,u);const b=Nc(T,S,A),R={acName:T,target:T,context:b};await Ac(D,u,R);const O={target:T,context:b,containerItemID:b,headers:y,parentContext:K(u?.context),isMinimizable:sn(Xp.getIn(D,"data.caseInfo")),doDeleteCaseSummary:u.doDeleteCaseSummary,acTertiary:u.acTertiary,resourceType:G.CASE,debugInfo:C};us(O,D,{skipFlowNameUpdate:u?.caseViewMode===W.REVIEW_MODE});const v=Ec(D,O);return u.isProcessAction&&(v.data.isProcessAction=u.isProcessAction),g&&(v.data.caseInfo.content.coexistenceAction="openAssignment"),((c,l)=>{c.acTertiary&&(l.data.caseInfo.isFirstAssignment=c.acTertiary)})(u,v),ym(v,T,d,u,f,_,I),m===fc.FORM&&ls(v.containerItemID)&&wc(v,d),vc(d),(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.ASSIGNMENT_OPENED,c)})({actionInContext:A,assignmentID:u.assignmentID,caseKey:v.key}),d})),Rl((()=>{const c=u,l=gs(),h=sn(Xp.getIn(d[0]?.payload,"data.caseInfo"));return g&&l&&h?tm.postCreateCaseMessage(d[0]?.payload?.data?.caseInfo?.assignments?.[0]?.ID,Up,d):Up(d),ps(d,c,p),d[0]?.payload?.isParallelAssignment&&Up({type:Al,payload:{...d[0].payload,isParallelCall:!0}}),d=[],d})))},c=>{let l=0,u=[];return c.pipe(Dl("OPEN_WORK_BY_HANDLE"),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>{const{context:u,isChild:d,viewType:p}=c,h=Xr(ze,c),g=Ct(h,u);let f,m=!0;if("none"!==p){const c=bc(g);m=c.continueExecution,f=c.removeActionPayload}if(!m)return gn.rejectActionByID(l),Fl();const{activate:y,activateContainerActionPayload:I}=Oc(Am.CASE,g,c);return y&&!d&&"none"!==p?Ml({type:Ue,activateContainerActionPayload:I,actionInPayload:c}):((c,l)=>{const{insKey:u,headers:d,context:p,debugInfo:h,viewType:g}=c,{removeActionPayload:f}=l,m=c?.pageName?c?.pageName:kd.getDefaultCasePage(),y=eg(ze,{caseID:u,params:{pageName:m}});let{restApi:I}=y;const{reqType:E}=y;"none"===g&&(I=`${I?.split("viewType")[0]}viewType=none`);let A={};return kd.getPerformanceDashboardVisibility()&&(A=am(W.TOP_ACTION_LABEL.OPENWORKBYHANDLE)),Li(rc(I,{method:E,headers:{...d,...h&&{...Yi.addDebugHeaders(h)}}},p,A)).pipe(Rl((l=>({response:l.data,actionInPayload:c,headers:yc({...d,...l.headers}),removeActionPayload:f}))),jl("Error occurred during ajax call at openWorkByHandle Epic : ",p))})(c,{removeActionPayload:f})})),Ol((async c=>{if(c&&es(c.type))return u.push(Sc(c)),u;const l=Fp(c?.actionInPayload?.context),d=hs(c?.actionInPayload.className);if("none"===c?.actionInPayload?.viewType){if("perform"!==l?.context_data?.caseViewMode){const l=zf(c?.response),p={data:{...l?.data},context:c?.actionInPayload?.context,isArrayDeepMerge:!0};u.push({type:lt,payload:{context:p.context,doDeleteConfirmationDetails:!1}}),d&&p.data.caseInfo?.content&&(p.data.caseInfo.content.coexistenceAction="openWorkByHandle"),u.push(Lh(oh,p));const h=ld(c?.actionInPayload?.context),g=Jr(c?.actionInPayload?.context),f=Object.freeze({target:h,containerItemID:c?.actionInPayload?.context,context:c?.actionInPayload?.context,containerName:g});if(ls(c?.actionInPayload?.context)){const l=Ec(c?.response,{...f});wc({...l,isArrayDeepMerge:!0},u)}}}else await(async(c,l,u)=>{const{actionInPayload:d,activateContainerActionPayload:p,type:h,response:g,removeActionPayload:f,headers:m}=c,{context:y,skipBrowserSemanticUrlUpdate:I,debugInfo:E}=d,A=Xr(ze,d),_=Ct(A,y);if(h===Ue)await(async(c,l)=>{const{activateContainerActionPayload:{semanticURL:u,containerItemID:d},actionInPayload:p,actionInPayload:{context:h,skipBrowserSemanticUrlUpdate:g,doDeleteCaseSummary:f}}=l,m=Xr(ze,p),y=Ct(m,h),I=Hu(d);await Ac({directUrlUpdation:!g,semanticURL:u},p,{acName:y,containerName:m,target:y,context:I}),c.push(Lh(Nh,{containerItemID:d,target:y,context:I,doDeleteCaseSummary:f}))})(l,{activateContainerActionPayload:p,actionInPayload:d});else{const p=Nc(_,A,y,{buildNew:!0}),h=zf(g),C=((c,l)=>{const{isRemoteCase:u,remoteCaseClass:d}=l,p=os(c),h=u?d:ss(c);let g=Qh(ze,{caseClassName:h},{id:l?.insKey});return g=g?.replace("{workID}",String(rs(p)))?.replace("{id}",l?.insKey),g})(h,d);h.semanticURL=C,h.directUrlUpdation=!I;const S={acName:_,context:p};await Ac(h,d,S);const T=Ec(h,{target:_,context:p,containerItemID:p,semanticURL:C,headers:m,debugInfo:E});T.caseViewMode=W.REVIEW_MODE,T.resourceType=Am.CASE,u&&(T.data.caseInfo.content.coexistenceAction="openWorkByHandle"),us(T,h,{skipFlowNameUpdate:!0}),T.currentCaseViewMode=ms(c?.actionInPayload?.context);const N=Tc(_,T);f.containerItemID&&Pc(N)&&l.push(Lh(bh,{containerItemID:f.containerItemID,target:_})),l.push(N)}vc(l),(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CASE_OPENED,c)})({caseKey:d.insKey,actionInContext:y})})(c,u,d);return u})),Rl((()=>(Up(u),ps(u,l),u=[],u))))},c=>{let l=0,u=[];return c.pipe(Dl("OPEN_LOCAL_ACTION"),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>((c,l)=>Fm(c,l))(c,{actionMgrID:l}))),Ol((async c=>{if(!c)return Ul;if(es(c.type)){const l=Sc(c);u.push(l);const{context_data:d}=Fp(c.payload.context)||{};return d?.isLoading&&u.push(Lh(Sh,c.payload)),u}const{actionInPayload:l,headers:d,response:p}=c,{actionID:h}=l;return Xp.setIn(p,"data.caseInfo.activeActionID",h),Xp.setIn(p.data,W.CASE_INFO_IS_LOCAL_ACTION,!0),l.refreshConditions&&Xp.setIn(p.data,W.CASE_INFO_REFRESH_CONDITIONS,l.refreshConditions),await jm(p,u,{headers:d,actionInPayload:l}),(c=>{const{callbacks:l}=c;l?.submit&&(u=c=>{l.submit(c),zr.unsubscribe(W.PUB_SUB_EVENTS.EVENT_EXPRESS_LOCALACTION,"expressLocalActionSubmit")},zr.subscribe(W.PUB_SUB_EVENTS.EVENT_EXPRESS_LOCALACTION,u,"expressLocalActionSubmit"));var u})(l),u})),Rl((()=>(Up(u),ps(u,l),u=[],u))))},c=>{let l=0,u=[];return c.pipe(Dl("OPEN_BULK_ACTION"),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>((c,l)=>{const{context:u}=c,{actionMgrID:d}=l;c.openActionType=et;const p=Xr(et,c),h=Ct(p,u),{continueExecution:g}=bc(h);return g?(c=>{const{actionID:l,context:u,openActionType:d,caseTypeID:p,bulkContextID:h="",bulkContextType:g=""}=c,f=et,{reqType:m,restApi:y}=eg(f,{caseTypeID:p,actionID:l,bulkContextID:h,bulkContextType:g});return Li(rc(y,{method:m},u)).pipe(Rl((l=>({response:l.data,actionInPayload:c,headers:yc(l.headers)}))),jl(`: Error occurred during ajax call at ${d} Epic : `,u))})(c):(gn.rejectActionByID(d),Fl())})(c,{actionMgrID:l}))),Ol((async c=>{if(c&&es(c.type)){const l=Sc(c);return u.push(l),u}const{actionInPayload:l,headers:d,response:p}=c,{actionID:h}=l;return Xp.setIn(p,"data.caseInfo.activeActionID",h),await jm(p,u,{headers:d,actionInPayload:l}),(c=>{const{callbacks:l}=c;l?.submit&&(u=c=>{l.submit(c),zr.unsubscribe(W.PUB_SUB_EVENTS.EVENT_BULKACTION,"bulkActionSubmit")},zr.subscribe(W.PUB_SUB_EVENTS.EVENT_BULKACTION,u,"bulkActionSubmit"));var u})(l),u})),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],u))))},c=>{let l,u=0,d=[],p="";return c.pipe(Dl("SUBMIT_BULK_ACTION"),bl((c=>{const{isFormValid:h}=c.payload;if(({actionMgrID:u}=c.payload),!h){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,c),Ml([])}return Ml(c.payload).pipe(Ol((c=>(l=c,(c=>{const{actionID:l,context:u,cases:d,classID:p}=c,{content:h}=Ic(u,{nonEmptyAndChangedData:!0});let g=5;try{const c=Eu.getSharedState("D_pySingleExecutionBulkActionsMeta.D_pySingleExecutionBulkActionsMeta.pxResults");c?.find((c=>c.pyClassName===p))?.pyList.split(",").includes(l)&&(g=1)}catch(c){console.error('Failed to fetch to "D_pySingleExecutionBulkActionsMeta" DP response',c)}const f=d.map((c=>({ID:c}))),m=f.length/g,y=tt,{reqType:I,restApi:E}=eg(y,{actionID:l}),A=[],_=f.length;for(let C=0;C<_;C+=m)h.cases=f.slice(C,C+m),h.cases.length&&A.push(Li(rc(E,{method:I,body:h},u)).pipe(Rl((l=>{const{data:u,headers:d}=l;return{response:u,actionInPayload:c,headers:yc({...d})}})),jl("Error occurred during ajax call at submitbulkaction Epic : ",u)));return Wm(A)})(l)))),Ol((c=>{let u=0,h=0;const g=[],{containerItemID:f,context:m}=l;return c.map((c=>{const{response:l}=c;u+=Number(l.successCount),h+=Number(l.failureCount),h&&l.results.map((c=>{"200"!==c.status&&c.error&&c.error.errorDetails&&c.error.errorDetails.forEach((l=>{g.push({ID:c.BusinessID,message:l.localizedValue})}))}))})),p=`${u} record(s) updated`,(c=>{zr.publish(W.PUB_SUB_EVENTS.EVENT_BULKACTION,c)})({submitResponse:c}),l.target=`${W.APP.APP}/${Ou.MODAL}`,d.push(Lh(bh,{containerItemID:f,context:m,target:l.target,skipReleaseLockRequest:!0})),h&&d.push(Lh(Dh,{messages:[{type:"error",message:1===h?"1 record failed to update":`${h} records failed to update`,errorDetails:g,showHeader:!1}],context:K(m)||m,category:"HTTP",showHeader:!1})),d})),Rl((()=>(gn.resolveActionByID(u,p),Up(d),d=[],d))))})))},c=>{let l,u=0,d=[],p="";return c.pipe(Dl("SUBMIT_BULK_ACTION_ASYNC"),bl((c=>{const{isFormValid:h}=c.payload;if(({actionMgrID:u}=c.payload),!h){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,c),Ml([])}return Ml(c.payload).pipe(bl((c=>(l=c,(c=>{const{actionID:l,context:u,cases:d}=c,{content:p}=Ic(u,{nonEmptyAndChangedData:!0});p.cases=d.map((c=>({ID:c})));const h=tt,{reqType:g,restApi:f}=eg(h,{actionID:l,runningMode:"async"});return Li(rc(f,{method:g,body:p},u)).pipe(Rl((l=>{const{data:u,headers:d}=l;return{response:u,actionInPayload:c,headers:yc({...d})}})),jl("Error occurred during ajax call at submitbulkaction Epic : ",u))})(l)))),Rl((c=>{const u=[],{containerItemID:h,context:g}=l,{response:f}=c,m=Number(f.failureCount)||0;return m>0&&f.results.forEach((({status:c,error:l,BusinessID:d})=>{"200"!==c&&l&&l.errorDetails&&l.errorDetails.forEach((({localizedValue:c})=>{u.push({ID:d,message:c})}))})),p="Processing bulk actions",(c=>{zr.publish(W.PUB_SUB_EVENTS.EVENT_BULKACTION,c)})({submitResponse:f}),l.target=`${W.APP.APP}/${Ou.MODAL}`,d.push(Lh(bh,{containerItemID:h,context:g,target:l.target,skipReleaseLockRequest:!0})),m&&d.push(Lh(Dh,{messages:[{type:"error",message:1===m?"1 record failed to update":`${m} records failed to update`,errorDetails:u,showHeader:!1}],context:K(g)||g,category:"HTTP",showHeader:!1})),d})),Rl((()=>(gn.resolveActionByID(u,p),Up(d),d=[],d))))})))},c=>{let l=0,u=[];return c.pipe(Dl(El),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>(rr(c.context),((c,l)=>Fm(c,l))(c,{actionMgrID:l,isProcessAction:!0})))),Ol((async c=>{if(c&&es(c.type)){const l=Sc(c);return u.push(l),u}const{actionInPayload:l,headers:d,response:p}=c;return await jm(p,u,{headers:d,actionInPayload:l}),u})),Rl((()=>(Mc(u),ps(u,l),u=[],u))))},(c,l)=>{let u=0,d=[],p={},h="";return c.pipe(Dl("FINISH_ASSIGNMENT"),bl((c=>{const g=kd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT);if(({actionMgrID:u}=c.payload),h=c.payload.context,Zn({context:h,stateObj:Fp(h),clearContextMessages:!0}),!Xc(h)){const l={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,l),cu.handleDeferredActionCompletion(c.payload.context),Ml([])}return Ml(c.payload).pipe(Ol((c=>{((c,l)=>{const{containerItemID:u,context:d,actionMgrID:p,isInCreateStage:h,isModalAction:g}=l;if(h&&g){const l=Jr(u),h=Ct(l,d);c.push(Lh(Nh,{containerItemID:u,target:h,actionMgrID:p}))}})(d,c);return((c,l)=>{const{assignmentID:u,actionID:d,caseID:p,context:h,additionalHeaders:g={},isCaseWideAction:f,outcome:m,jsActionQueryParams:y}=c,{state$:I}=l,E=(c=>{const{isModalAction:l,viewType:u,isInCreateStage:d,isCaseWideAction:p}=c;return l&&d&&!p?fc.PAGE:u||fc.FORM})(c),A=(c=>{const{isCaseWideAction:l}=c;return l?Ze:"finishAssignment"})(c),_={assignmentID:u,actionID:d,caseID:p,viewType:E};let{restApi:C}=eg(A,_),{reqType:S}=eg(A,_);E&&!C?.includes("viewType=")&&(C=C?.includes("?")?`${C}&viewType=${E}`:`${C}?viewType=${E}`),m&&!C?.includes("outcome")&&(C=C?.includes("?")?`${C}&outcome=${m}`:`${C}?outcome=${m}`),C=((c,l)=>(c&&Object.keys(c).forEach((u=>{l+=`&${u}=${c[u]}`})),l))(y,C),f&&(S="PATCH"),c.viewType=E;const{content:T,attachmentsExist:N}=Ic(h);c.attachmentsExist=N;const P=I.value.data[h]?.caseInfo?.headers||{},{etag:D}=P,b={"if-match":D,...g};let R={};return kd.getPerformanceDashboardVisibility()&&(R=am(W.TOP_ACTION_LABEL.FINISHASSIGNMENT)),Li(rc(C,{method:S,body:T,headers:b},h,R)).pipe(Rl((l=>{const{data:u,headers:d}=l;return{response:u,actionInPayload:c,headers:yc({...b,...d})}})),jl("Error occurred during ajax call at finishAssignment Epic : ",h))})({...c},{state$:l})})),Ol((async c=>{if(c&&c.type===Te){(c=>{const l=c?.payload?.err?.response?.data?.displayButtonsOnErrors||[],u=c?.payload?.err?.response?.status;if(Array.isArray(l)&&l.length>0&&424===u){l.forEach((c=>{c.isErrorButton=!0}));const u=c.payload.context,d=Fp(u),p=((c,l)=>(c.forEach((c=>{!0!==c.isErrorButton||l.some((l=>l.actionID===c.actionID))||(l=[...l,c])})),l))(l,d?.caseInfo?.actionButtons?.secondary||[]),h={data:{caseInfo:{actionButtons:{secondary:p}}},target:ld(u),context:u};Up({type:Ae,payload:h})}})(c);const l=Sc(c);return d.push(l),d}au.clearContextedCache(h);const{headers:l,actionInPayload:f,response:m}=c,{containerItemID:y,context:I=Hu(y),isModalAction:E,isInCreateStage:A}=f,_=ld(y);f.target=_;const C=Jr(y),S=Object.freeze({target:f.target,containerItemID:y,context:I,containerName:C});Xp.setIn(m.data,W.CASE_INFO.IS_FIRST_ASSIGNMENT,!1),Xp.setIn(m.data,W.CASE_INFO_IS_LOCAL_ACTION,!1),m?.uiResources?.root?.config?.name&&"page"!==f.viewType&&Xp.setIn(m.data,W.CASE_INFO.VIEW_NAME,m?.uiResources?.root?.config?.name),(c=>{zr.publish(W.PUB_SUB_EVENTS.EVENT_EXPRESS_LOCALACTION,c)})({submitResponse:m});let T=zf(m,{[G.STOPMERGEACTIONS]:!m.nextAssignmentInfo});const N=ss(T),P=K(f.context),D=Xu(P)[0]?$u(Xu(P)[0]):P,b=as(T),R=A&&!b;!E||A||Nm(f.context,D)||(T=((c,l)=>(c?.data?.caseInfo&&l?.caseInfo?.content&&(c.data.caseInfo.content=l?.caseInfo?.content),c))(T,Fp(y)));const O=Ec(T,{headers:l,actionMgrID:u,directUrlUpdation:!1});let v,x;ds(O.data,f),O.caseClassName=N,O.resourceType=Rm.ASSIGNMENT,O.headers=l;const w=T?.data?.caseInfo?.assignments?.some((c=>c.ID===f.assignmentID)),M=((c,l)=>{const{assignmentID:u}=l;return c?.data?.caseInfo?.assignments?.some((c=>c.ID===u&&"true"===c?.canPerform))})(T,f),L=((c,l,u,d,p)=>{let h;const g=ld(l);return h=td(g)?ju(g,u.data?.caseInfo?.ID):$u(g),d&&c&&$p(null,W.CASE_VIEW_MODE_PROP,h)===W.PERFORM_MODE&&p})(w,D,T,E,M),U=f?.actionID===G.LOCAL_ACTIONS.TRANSFER_ASSIGNMENT;T?.data?.nextAssignmentInfo&&!U?(O.caseViewMode=W.PERFORM_MODE,v=os(T),x=!0):L&&!U?(O.caseViewMode=W.PERFORM_MODE,v=os(T),O.flowName=" ",O.deleteAssignmentSpecificResources=!1,x=!1):(O.caseViewMode=W.REVIEW_MODE,v="",x=!1);const F=os(T);us(O,T,{skipFlowNameUpdate:O?.caseViewMode===W.REVIEW_MODE||L});const j=Qh("createWork",{caseClassName:N}).replace(/{.+?}/,String(rs(F)));if(T.semanticURL=j,O.semanticURL=j,E?(await bm(f,O,x,v,T,d,c,m),R&&(p=(c=>{if(!Sm(c.context)){let l;const u=c?.caseTypeID,d=c?.caseTypeName;return l=c.businessID?c.businessID:c.workID,{caseID:l,caseTypeID:u,caseTypeName:d}}return{}})(f))):A&&g&&!b?(kd.setDefaultCasePage("pyDetails"),await(async(c,l,u)=>{const d={assignmentID:c?.data?.caseInfo?.assignments[0]?.ID,className:c?.data?.caseInfo?.content?.classID,containerName:Ou.PRIMARY,targetContainerName:Ou.PRIMARY,viewType:fc.PAGE,isLastStepInCreateStage:!0,context:u},p={type:Ee,payload:{...d}};l.push(p)})(m,d,K(I))):await Dm(O,f,T,S,d),fs(c,d),cu.handleDeferredActionCompletion(h),((c,l,u)=>{const{isModalAction:d,isCaseWideAction:p,caseID:h}=l,g=Nm(l.context,u),f=c?.data?.caseInfo?.stages||[],m=c?.data?.caseInfo?.stageID;Yr({caseID:h,isModalAction:d,isModalLaunchedFromPrimaryValue:g,isCaseWideAction:p,stages:f,stageID:m})})(O,f,D),!T?.data?.nextAssignmentInfo){const c=((c,l)=>{const{isCaseWideAction:u,assignmentID:d,actionID:p}=l;return{isCaseWideAction:u,caseID:os(c),assignmentID:u?null:d,actionID:u?p:null}})(T,f);(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.END_OF_ASSIGNMENT_PROCESSING,c)})({...c,containerItemID:y})}return((c,{isModalAction:l,target:u,transientItemID:d})=>{if(l){const l=c.find((({type:c})=>c===Ve));l?.payload&&(u=l.payload.target,d=l.payload.containerItemID)}const p=Rh({target:u,containerItemID:d});p.payload.transientItems.length&&c.push(p)})(d,{transientItemID:y,target:_,isModalAction:E}),d})),Rl((()=>{const c=d.find((c=>c.type===Te));return c?(cu.handleDeferredActionCompletion(h),(c=>{const l=c?.payload?.err?.errorDetails,u=c?.payload?.context;l?.forEach((c=>{c[W.ERROR_FIELD_IN_PAGE]=c[W.ERROR_FIELD_IN_PAGE].replace(/(\(\d\))/g,(c=>`[${parseInt(c.substring(1,c.length-1),10)-1}]`));const l=c[W.ERROR_FIELD_IN_PAGE].slice(1),d=c[W.ERROR_IN_PAGE_IDENTIFIER].slice(1);if(d){let p=l?`caseInfo.content.${l}`:"caseInfo.content";p=p.replace(/\(/g,"[").replace(/\)/g,"]");const h=Kn(d,p,W.PROPERTY),g={type:G.MESSAGES.MESSAGES_TYPE_ERROR,message:c.localizedValue};Rn.mutateField(u,p,h[h.length-1],{messages:[g],type:G.MESSAGES.MESSAGES_TYPE_ERROR,fieldName:h[h.length-1]})}}))})(c),gn.rejectActionByID(u)):gn.resolveActionByID(u,p),Mc(d),d=[],p={},d})))})))},(c,l)=>{let u=0,d=[];return c.pipe(Dl("NAVIGATE_TO_STEP"),bl((c=>(({actionMgrID:u}=c.payload),Ml(c.payload).pipe(Ol((c=>(rr(c.context),((c,l)=>{const{ID:u,stepID:d,containerItemID:p,context:h=Hu(p),isInCreateStage:g}=c,{state$:f}=l,m={ID:u,stepID:d,viewType:g?fc.PAGE:fc.FORM},{restApi:y,reqType:I}=eg("navigateToStep",m),{content:E}=Ic(h),A=f.value.data[h].caseInfo.headers;return Li(rc(`${y}`,{method:I,body:E,headers:{"if-match":A&&A.etag}},h)).pipe(Rl((l=>({response:l.data,actionInPayload:c,headers:yc({...A,...l.headers})}))),jl("Error occurred during ajax call at navigateToStep Epic : ",h))})(c,{state$:l})))),Ol((async c=>{if(c&&es(c.type))return d.push(Sc(c)),d;const{actionInPayload:l,response:u,headers:p}=c,{containerItemID:h,context:g=Hu(h),isModalAction:f}=l;au.clearContextedCache(l.context);const m=ld(h),y=Jr(h),I=Object.freeze({target:m,containerItemID:h,context:g,containerName:y}),E=u?.data?.caseInfo?.content,A=u?.uiResources?.root?.config?.name;E&&!E.pyViewName&&A&&"page"!==l.viewType&&Xp.setIn(E,"pyViewName",A);const _=zf(u),C={acName:m,...I};await Ac(_,l,C);const S=Ec(_,{...I,headers:p});S.doDeleteCaseSummary=l.doDeleteCaseSummary,S.resourceType=vm.ASSIGNMENT,us(S,_),ds(S.data,l);const T=_.data?.caseInfo?.stages,N=_.data?.caseInfo?.stageID;return Yr({caseID:os(_),isModalAction:f,stages:T,stageID:N}),ls(h)&&wc(S,d),d.push(Lh(Ah,S)),vc(d),d})),Rl((()=>(Up(d),ps(d,u),d=[],d))))))))},c=>{let l=0,u=[];return c.pipe(Dl("CANCEL_ASSIGNMENT"),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>{const{isModalAction:u}=c;c.context||(c.context=Hu(c.containerItemID));const{context:d}=c,p=(c=>{const{isModalAction:l,containerItemID:u}=c;return l?Ou.MODAL:Jr(u)})(c),h=Ct(p,d),{continueExecution:g}=bc(h);return g?(c.RemoteSystemID=q.getRemoteHeaderByContext(c.context)??void 0,((c,l)=>{const{isModalAction:u}=l;return Om({routeKey:"cancelAssignment",isModalAction:u,...c})})(c,{isModalAction:u})):(gn.rejectActionByID(l),Fl())})),Ol((async c=>{if(c&&c.type===Te)return u.push(Sc(c)),u;const{actionInPayload:d,response:p}=c,{containerItemID:h,isModalAction:g,isInCreateStage:f}=d;p&&(p.data.caseInfo.availableProcesses=p.data.caseInfo.availableProcesses??[]);const m=ld(h),y=Hu(h),I={target:g?`${W.APP.APP}/${W.MODAL}`:m,containerItemID:h,caseViewMode:g?W.PERFORM_MODE:W.REVIEW_MODE,context:y,actionMgrID:l,key:os(p),skipReleaseLockRequest:!1};return f&&u.push(Lh(Ah,I)),!g&&ls(h)&&(async(c,l)=>{const{childContainerItemID:u,caseViewMode:d,referencedUsers:p}=l,h=K(u),g={context:Hu(h),data:{referencedUsers:p,context_data:{caseViewMode:d}}};g.data={...l.response.data,...g.data},c.push(Lh(oh,g))})(u,{childContainerItemID:h,caseViewMode:W.REVIEW_MODE,referencedUsers:p?.data.referencedUsers,response:p}),I.skipReleaseLockRequest=!0,u.push(Lh(bh,I)),u})),Rl((()=>(Up(u),ps(u,l),u=[],u))))},c=>{let l=0,u=[];return c.pipe(Dl(be,Ve),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>{const{containerItemID:l,caseID:u,context:d,caseDeleted:p,skipReleaseLockRequest:h,currentCaseViewMode:g,isProcessAction:f,isInCreateStage:m}=c,y=g===W.PERFORM_MODE,I=u&&y;return f&&m?Om(c):l!==d||p||h||!I?l?.includes(W.MODAL)&&ms(Rd(l))===W.REVIEW_MODE?Om(c):Ml([]):Om(c)})),Ol((c=>(c&&es(c.type)&&u.push(Sc(c)),u))),Rl((()=>(Up(u),ps(u,l),u=[],u))))},(c,l)=>{let u,d=0;return c.pipe(Dl(Cl),bl((c=>{const{saveOnly:p}=c.payload;return({actionMgrID:d,caseType:u}=c.payload),xm({action:c,state$:l,actionMgrID:d,caseType:u},p)})))},(c,l)=>{let u,d=0,p=[];return c.pipe(Dl(_l),Rl((c=>(({actionMgrID:d,caseType:u}=c.payload),c.payload))),Ol((c=>c.ignoreCaseDeletion?Ml({actionInPayload:c}):(c=>{const{caseID:l,context:u}=c,{restApi:d,reqType:p}=eg("deleteCaseInCreateStage",{ID:l});return Li(rc(d,{method:p},u)).pipe(Rl((l=>({response:l.data,actionInPayload:c,headers:yc(l.headers)}))),jl(": Error occurred during ajax call at deleteCaseInCreateStage Epic : ",u))})(c))),Ol((async c=>{if(c&&es(c.type)){const{payload:l}=c,u=Sc({...c,...l,actionMgrID:d});return p.push(u),p}const{actionInPayload:u}=c,{context:h,isModalAction:g}=u,f=g?Ou.MODAL:Ou.PRIMARY,m=Ct(f,h);if(!g&&m){const c={acName:m,target:m,context:h},d=l.value.containers[m],{semanticURL:p}=(c=>{const{accessedOrder:l,items:u}=c;if(l&&l.length>1){const c=u[l[l.length-2]],{semanticURL:d}=c;if(d)return c}return{semanticURL:""}})(d);await Ac({directUrlUpdation:!0,semanticURL:p},u,c)}if(u.isProcessAction&&u.parentCaseInfo){const c={insKey:u.parentCaseInfo.ID,className:u.parentCaseInfo.content.classID,context:u.parentContext,acTargetName:W.PRIMARY,isChild:!0},l={type:fe,payload:{...c}};p.push(l)}const y={target:m,containerItemID:h,context:h,caseDeleted:!0};return p.push(Lh(bh,y)),p})),Rl((()=>(Up(p),ps(p,d)===W.PROMISE_VALUE.RESOLVE&&(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CREATE_STAGE_DELETED,c)})({caseType:u}),p=[],p))))},c=>c.pipe(Dl(Xe),Ym((()=>zm(100))),Rl((c=>{const{actionMgrID:l,isChildCase:u,isModalAction:d,isProcessAction:p,isDataObject:h,skipReleaseLockRequest:g,isInCreateStage:f}=c.payload;return gn.resolveActionByID(l),zr.publish(W.PUB_SUB_EVENTS.EVENT_SHOW_CANCEL_ALERT,{isModalAction:d,hideDelete:!p&&u,isDataObject:h,skipReleaseLockRequest:g,isInCreateStage:f}),[]}))),c=>c.pipe(Dl(ke),Ym((()=>zm(100))),Rl((c=>{const{actionMgrID:l,context:u,containerName:d,containerItemID:p}=c.payload,h=Ct(d,u);return gn.resolveActionByID(l),Up(Lh(Nh,{containerItemID:p,target:h,doDeleteCaseSummary:!1})),[]}))),c=>{let l=0,u=[],d="";return c.pipe(Dl(yt),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>Km(c))),Ol((async c=>{if(c&&c.type===Te)return u.push(Sc(c)),{actionsOut:u,actionInPayload:{skipPageInstructions:!0}};const{actionInPayload:l,response:p}=c,h=l.containerName,g=Ct(h,l.context);let f=Nc(g,h,l.context);f=ee(l.context,f);const m=zf(p);m.key=l.ID,m.data?.caseInfo&&(m.data.caseInfo.ID=l.ID);const y={isMultiRecordData:!0,viewName:l.viewID,parentContext:l.context,interestPage:l.interestPage};m.uiResources.context_data.modalView=y;const I=Fp(l.context)?.context_data?.caseInfo,E=`${l.pageReference}${l.targetProperty}`,A=Xn(I,E.replace(G.CASE_INFO.CASE_INFO_CONTENT,"").slice(1),l.index);m.uiResources.context_data.caseInfo={...m.uiResources.context_data.caseInfo,content:Xp.mergeDeep(m.uiResources.context_data.caseInfo?.content,A?.content)};const _={acName:g,context:f};await Ac(m,l,_);const C=Ec(m,{target:g,context:f,containerItemID:f});C.resourceStatus=l.actionType,C.isMultiRecordData=!0,C.parentContext=l.context,C.heading=l.heading;const S=Tc(g,C);return d=f,u.push(S),vc(u),{actionsOut:u,actionInPayload:l}})),Rl((({actionInPayload:c})=>(ts(u)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],c.skipPageInstructions||((c,l,u,d,p)=>{p===W.RESOURCE_STATUS.CREATE&&(jc.isStateMachineExist(c,l,u)||jc.setStateMachine(c,u,l,new gr(u,l,c)),jc.getStateMachine(c,l,u).insert({},d+1,!0,{isDefault:!0}))})(d,c.pageReference,c.targetProperty,c.index,c.actionType),u))))},c=>{let l,u="",d=[];return c.pipe(Dl(It),bl((c=>{l=c.payload;const{isFormValid:p}=c.payload;if(({actionMgrID:u}=c.payload),!p){const l={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,l),cu.handleDeferredActionCompletion(c.payload.context),Ml([])}return Ml(c.payload).pipe(Ol((c=>(l=c,Km(l)))),Ol((async c=>{if(c&&c.type===Te){const l=Sc(c);return d.push(l),d}const{containerItemID:u,context:p}=l;var h,g,f,m;return h=p,g=l.parentContext,f=G.CASE_INFO.CASE_INFO_CONTENT,m=!1,Cr(h).forEach((c=>{const l=Xp.convertClipboardPageToPageRefNotation(c.target);jc.isStateMachineExist(g,f,l)||jc.setStateMachine(g,l,f,new gr(l,f,g));const u=jc.getStateMachine(g,f,l);switch(c.instruction.toLowerCase()){case"insert":u.insert(c.content,c.listIndex,m,{});break;case"update":u.update(c.content,c.listIndex,m,{});break;case"delete":c.listIndex?u.delete(c.listIndex,m):u.deletePage();break;case"replace":u.replacePage(c.content);break;case"move":u.move(c.listIndex,c.listMoveToIndex);break;case"delete all":u.deleteAll()}})),d.push(Lh(bh,{containerItemID:u,context:p,target:l.target,skipReleaseLockRequest:!0})),d})),Rl((()=>{if(ts(d))gn.rejectActionByID(u),cu.handleDeferredActionCompletion(l.context);else{gn.resolveActionByID(u),cu.handleDeferredActionCompletion(l.context);const{pageReference:d}=c.payload;if(Zp.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.IS_MULTI_RECORD_DATA,d,l.parentContext)){const c=Zp.getPropertyValue(G.CASE_INFO.CASE_INFO_ID,d,l.parentContext),u=Zp.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.VIEW_NAME,d,l.parentContext),p=l.pageReference?.substring(0,l.pageReference?.lastIndexOf(".")),h=p.replace(W.CASE_INFO.CASE_INFO_CONTENT,"");kn(c,u,l.parentContext,h,{})}else Gn(l.parentContext,W.CASE_INFO.CASE_INFO_CONTENT,{})}return Up(d),d=[],d})))})))},c=>{let l=0,u=[];return c.pipe(Dl(iu),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>(c=>{const{caseID:l,headers:u,debugInfo:d,context:p}=c,h=eg("getDescendants",{caseID:l}),{restApi:g}=h,{reqType:f}=h;let m={};return kd.getPerformanceDashboardVisibility()&&(m=am(W.TOP_ACTION_LABEL.GETDESCENDANTS)),Li(rc(g,{method:f,headers:{...u,...d&&{...Yi.addDebugHeaders(d)}}},p,m)).pipe(Rl((l=>({actionInPayload:c,response:l.data,headers:yc({...u,...l.headers})}))),jl("Error ocurred during ajax call at getDescendants Epic : ",p))})(c))),Ol((async c=>{if(c&&es(c.type))return u.push(Sc(c)),u;const{actionInPayload:l,response:d}=c,p={};Xp.setIn(p,"caseInfo.childCases",d?.childCases);const h={data:p,context:l?.context};return u.push(Lh(oh,h)),u})),Rl((()=>(Up(u),ps(u,l),u=[],u))))}],Jm=Xm;function Qm(){return Ri((function(c,l){c.subscribe(Oi(l,ni))}))}const{RESOURCE_TYPES:Zm}=G,ey=[c=>c.pipe(Dl(oe),Rl((c=>c.payload)),Ol((c=>{const l={caseID:c.caseId,viewID:c.viewName,caseClassName:c.caseClassName,RemoteSystemID:c.RemoteSystemID};if(c.containerName===Ou.PREVIEW&&c.context&&c.caseId&&!c.updateData){const l=Ct(Ou.PREVIEW,c.context),u=Nc(l,Ou.PREVIEW,c.context,{buildNew:!0}),d=decodeURI(c.caseId);Up(gh({...c,context:u,target:l,containerItemID:u,key:d,caseViewMode:W.REVIEW_MODE,root:{type:"reference",config:{context:W.CASE_INFO.CASE_INFO_CONTENT,name:c.viewName,type:"view"}},data:{key:d,caseInfo:{ID:d,progress:!0,error:!1,caseTypeID:c.caseClassName,content:{classID:c.caseClassName}}}})),c.viewLoadingContainer={target:l,context:u}}const u={};if(l.RemoteSystemID)u.RemoteSystemID=l.RemoteSystemID;else if(q.isRemoteCase(l.caseClassName)){const{RemoteSystemID:c}=q.getRemoteCase(l.caseClassName);u.RemoteSystemID=c}let{restApi:d,reqType:p}=eg("loadView",l);return c.viewContext===Zm.PAGE&&({restApi:d,reqType:p}=eg(Ge,{page:c.viewName,pageClass:c.pageClass})),Li(rc(d,{method:p,headers:u},c.context)).pipe(Rl((l=>{const u=decodeURI(c.caseId);let d="";return"string"==typeof l.data?l.data?d=JSON.parse(l.data):(console.error("response data is empty!!"),d={}):d=l.data,{response:{...d,key:u},actionConfig:c,headers:yc(l.headers),rootView:Xp.getIn(d,W.ROOT)}})),jl(": Error ocurred during ajax call at loadView Epic : ",c.viewLoadingContainer?.context??c.context))})),Ol((async c=>{const l={};if(c?.type===Te){if(l.actionsOut=Sc(c),c?.payload?.context?.includes(Ou.PREVIEW)){const u={...Fp(c.payload.context),caseInfo:{progress:!1,error:!0}},d=Ct(Ou.PREVIEW,c.payload.context);l.actionsOut=Lh(Ah,{key:u.key,target:d,containerName:Ou.PREVIEW,context:c.payload.context,containerItemID:c.payload.context,data:u})}return l}try{l.actionMgrID=c?.actionConfig?.actionMgrID,l.rootView=c?.rootView;const{actionConfig:u,response:d,headers:p}=c;c?.actionConfig?.skipAssignmentsUpdate&&(delete d?.data?.caseInfo?.assignments,delete d?.data?.caseInfo?.availableActions,delete d?.data?.caseInfo?.availableProcesses);const{containerItemID:h,containerName:g}=u,{target:f,context:m}=(c=>{const{containerName:l,updateData:u,viewLoadingContainer:d}=c,p=l||Wr.getTargetViewContainerName(Ge),h=d?.target??Ct(p,c.context);return{target:h,context:d?.context??(l===Ou.PREVIEW&&u?c.context:Nc(h,p,c.context,{buildNew:!!l}))}})(u);u.context=m;const y={acName:f,context:m};let I={};I=zf(d),I.directUrlUpdation=!1,await Ac(I,u,y);const E={...u,target:f,context:m,containerItemID:h||m,headers:p},A=Ec(I,E);if(A.resourceType=Zm.CASE,g&&!A.updateData){A.caseViewMode=W.REVIEW_MODE;const c=ld(A?.context);((c,l,u,d,p)=>{c&&p===Ou.PREVIEW?(u.data.caseInfo.progress=!1,delete u.root,d.actionsOut=Lh(Ah,{...u,containerName:p})):c?(d.actionsOut=[],d.actionsOut.push(Lh(Nh,{target:l,containerItemID:c}))):d.actionsOut=Lh(gh,{...u,containerName:p})})(ju(c,A.key),c,A,l,g)}else A.preserveClientChanges=!0,l.actionsOut=[],g===Ou.PREVIEW&&l.actionsOut.push({type:lt,payload:{context:m}}),l.actionsOut.push(Lh(oh,A))}catch(c){console.error(c),l.rootView={type:"error",payload:c}}const{caseId:u,context:d,viewName:p}=c.actionConfig;return"pyCasePreview"===p&&(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CASE_PREVIEW,c)})({caseId:u,context:d}),l})),Rl((({rootView:c,actionsOut:l,actionMgrID:u=0})=>(gn.resolveActionByID(u,c),l)))),c=>{let l=0,u=[];return c.pipe(Dl(ie),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>{zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_STARTED);const{debugInfo:u,context:d,viewName:p,className:h,skipSemanticUrl:g=!1,containerName:f=Wr.getTargetViewContainerName(Ge)}=c,m=u&&{...Yi.addDebugHeaders(u)},y=Ct(f,d);let I="",E={},A=!0;if(!g){if(I=Qh(Ge,{page:p}),y&&I){const{activate:l,activateContainerActionPayload:u}=Oc(Zm.PAGE,y,{semanticURL:I});if(l)return Ml({type:Ue,activateContainerActionPayload:u,actionConfig:c})}if($u(y)&&({continueExecution:A,removeActionPayload:E}=bc(y)),!A)return gn.rejectActionByID(l),Fl()}const{restApi:_,reqType:C}=eg(Ge,{page:p,pageClass:h});return Li(rc(_,{method:C,headers:m},d)).pipe(Rl((l=>{let u={};return u="string"==typeof l.data?JSON.parse(l.data):l.data,{response:{...u,key:I,semanticURL:I},actionConfig:c,headers:yc(l.headers),removeActionPayload:E,skipSemanticUrl:g}})),jl(": Error ocurred during ajax call at showPage Epic : ",c.context))})),Ol((async c=>{if(c&&c.type===Te)return u.push(Sc(c)),u;let{type:l}=c;const{actionConfig:d,skipSemanticUrl:p}=c,h=d.containerName||Wr.getTargetViewContainerName(ie),g=Ct(h,d.context);zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_INIT,{pageName:c.actionConfig.viewName,pageClass:c.actionConfig.className});const{remoteCasePayload:f,updatedType:m}=((c,l,u,d)=>{let p={},h=c;if(u.isTraditionalRemoteCase){p={...u};const c=ju(d,p.insKey);c&&(l.activateContainerActionPayload={containerItemID:c},h=Ue)}return{remoteCasePayload:p,updatedType:h}})(l,c,d,g);if(l=m??l,l===Ue){const{activateContainerActionPayload:{semanticURL:l,containerItemID:p}}=c,h={acName:g,context:Hu(p)};d.isTraditionalRemoteCase||await Ac({directUrlUpdation:!0,semanticURL:l},d,h,!0),u.push(Lh(Nh,{target:g,containerItemID:p}))}else{const l=Nc(g,h,d.context),{response:m,headers:y={},removeActionPayload:I}=c,E=zf(m,{isCreateDataObject:d.isCreateDataObject});E.directUrlUpdation=!p;const A={acName:g,context:l},_=ms(l);await Ac(E,d,A);const C={target:g,context:l,containerItemID:l,headers:y,debugInfo:d.debugInfo,currentCaseViewMode:_},S=Ec(E,C);S.resourceType=G.PAGE,d.isCreateDataObject&&(S.resourceType=G.RESOURCE_TYPES.DATA,S.resourceStatus=G.RESOURCE_STATUS.CREATE,delete S.data.caseInfo),((c,l,u)=>{c.isTraditionalRemoteCase&&(u.resourceType=G.CASE,u.key=hc.getRemoteCaseKey(l.assignmentID,l.insKey),u.data.caseInfo={...u.data.caseInfo,...l,classID:l.className,target:u.target,containerItemID:u.containerItemID,caseTypeID:l.className,content:{pyLabel:l.name,pyID:rs(hc.getRemoteCaseKey(l.assignmentID,l.insKey))}},u.isTraditionalRemoteCase=!0,u.className=l.className)})(d,f,S),S.data??={},S.data.traditionalGadgetId=hc.getUniqueGadgetId();const T=Tc(g,S);I.containerItemID&&Pc(T)&&u.push(Lh(bh,{containerItemID:I.containerItemID,target:g})),u.push(T),vc(u)}return zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_DONE,{target:g,pageName:c.actionConfig.viewName,pageClass:c.actionConfig.className}),u})),Rl((()=>{gn.resolveActionByID(l),Up(u),u=[]})),Qm())}],ty=ey,{RESOURCE_TYPES:ny}=G,ry=[c=>{let l,u=0,d=[];return c.pipe(Dl(ce),(p=c=>(({actionMgrID:u}=c.payload),Ml(c.payload).pipe(Ol((c=>((c,l)=>{const{context:u,pageName:d,dataContext:p,dataContextParameters:h,skipSemanticUrl:g=!1,isDeferLoaded:f=!1,parentAction:m="",resourceType:y}=c;let{containerName:I}=c;I||(I=Wr.getTargetViewContainerName(ie));const E=Ct(I,u);let A="",_={},C=!1;if(!g){A=Qh(We,{pageName:d,dataViewName:p},h);const{activate:u,activateContainerActionPayload:g}=Oc(ny.PAGE,E,{semanticURL:A});if(u)return Ml({type:Ue,activateContainerActionPayload:g,actionConfig:c});if(({continueExecution:C,removeActionPayload:_}=bc(E)),!C)return gn.rejectActionByID(l),Fl()}return((c,l)=>{const{context:u,pageName:d,dataContext:p,dataContextParameters:h,semanticURL:g,skipSemanticUrl:f}=c,{removeActionPayload:m}=l,{restApi:y,reqType:I,body:E}=eg(We,{pageName:d,dataContext:p,dataContextParameters:h});let A={};return kd.getPerformanceDashboardVisibility()&&(A=am(W.TOP_ACTION_LABEL.SHOWDATA)),Li(rc(y,{method:I,body:E},u,A)).pipe(Rl((l=>({response:{...l.data,key:g,semanticURL:g},actionConfig:c,headers:yc(l.headers),removeActionPayload:m,skipSemanticUrl:f}))),jl("Error occurred during ajax call at showData Epic : ",c.context))})({context:u,pageName:d,dataContext:p,dataContextParameters:h,semanticURL:A,skipSemanticUrl:g,containerName:I,isDeferLoaded:f,parentAction:m,resourceType:y},{removeActionPayload:_})})(c,u))),Ol((async c=>{if(c&&c.type===Te)return d.push(Sc(c)),d;const{type:u,actionConfig:p,headers:h,response:g,skipSemanticUrl:f}=c;l=Xp.getIn(g,W.ROOT);const{containerName:m,parentAction:y,resourceType:I}=p,E=Ct(m,p.context);let A;const _=ms(p?.context);if(p.isDeferLoaded){A=zf(g),A.directUrlUpdation=!f;const l={acName:E,context:p.context};await Ac(A,p,l);const u={target:E,headers:h,context:p.context,containerItemID:c.containerItemID},m=Ec(A,u);return d=Lh(oh,m),d}if(u===Ue){const{activateContainerActionPayload:{semanticURL:l,containerItemID:u}}=c,h={acName:E,context:Hu(u)};await Ac({directUrlUpdation:!0,semanticURL:l},p,h,!0),d.push(Lh(Nh,{target:E,containerItemID:u,resourceType:ny.DATA}))}else if("DATA"===I&&y===mt){const{context:c}=p,l=g?.data,u={context:c,data:l};d.push(Lh(oh,u))}else{const l=Nc(E,m,p.context),{removeActionPayload:u}=c;A=zf(g),A.directUrlUpdation=!f;const y={acName:E,context:l};await Ac(A,p,y);const I=Ec(A,{target:E,context:l,containerItemID:l,headers:h,currentCaseViewMode:_});I.resourceType=ny.DATA;const C=Tc(E,I);u.containerItemID&&Pc(C)&&d.push(Lh(bh,{containerItemID:u.containerItemID,target:E})),vc(d),d.push(C)}return d})),Rl((()=>(gn.resolveActionByID(u,l),Up(d),d=[],d))))),Ho(h)?Ol(p,h,1):Ol(p,1)));var p,h},c=>{let l=0,u=[];return c.pipe(Dl(dt),Vl(100),bl((c=>{const{isFormValid:d}=c.payload;if(({actionMgrID:l}=c.payload),!d){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(l,!0,c),Ml([])}return Ml(c.payload).pipe(Ol((c=>(c=>{const{dataPageID:l,context:u,headers:d,containerItemID:p}=c,h={data_view_ID:l},{restApi:g,reqType:f}=eg("createDataObject",h),{content:m}=Ic(p);return Li(rc(g,{method:f,headers:d,body:{data:m.content}},p)).pipe(Rl((l=>({response:l.data,actionInPayload:c}))),jl("Error occurred during ajax call at createDataObject Epic",u))})(c))),Ol((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=Sc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d}=c,{containerItemID:p,isModalAction:h}=d,g=h?Ou.MODAL:Ou.PRIMARY,f={target:Ct(g,p),containerItemID:p,context:p};return u.push(Lh(bh,f)),u})),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],u))))})))},c=>{let l=0,u=[];return c.pipe(Dl(ht),Vl(100),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>(c=>{const{dataLookUp:l,context:u,headers:d,viewName:p,requestPayload:h}=c,g={data_view_ID:l,view_ID:p},{restApi:f,reqType:m}=eg("readDataObject",g);return Li(rc(f,{method:m,headers:d,body:{dataViewParameters:h}},u)).pipe(Rl((l=>({response:l.data,actionInPayload:c}))),jl("Error occurred during ajax call at getDataObjectView Epic",u))})(c))),Ol((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=Sc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d,response:p,headers:h={}}=c,{containerName:g}=d,f=Ct(g,d.context),m=Nc(f,g,d.context),y={acName:f,context:m};await Ac(p,d,y);const I=Ec(p,{target:f,context:m,containerItemID:m,headers:h});return I.resourceType=G.RESOURCE_TYPES.DATA,I.resourceStatus=G.RESOURCE_STATUS.UPDATE,I.key=JSON.stringify(d.requestPayload),u.push(Lh(gh,I)),u})),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],u))))},c=>{let l=0,u=[];return c.pipe(Dl(gt),Vl(100),bl((c=>{const{isFormValid:d}=c.payload;if(({actionMgrID:l}=c.payload),!d){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(l,!0,c),Ml([])}return Ml(c.payload).pipe(Ol((c=>(c=>{const{dataPageID:l,context:u,headers:d,containerItemID:p,key:h}=c,g={data_view_ID:l},{restApi:f,reqType:m}=eg("updateDataObject",g),{content:y}=Ic(p);return Li(rc(f,{method:m,headers:d,body:{data:{...y.content,...h},pageInstructions:y.pageInstructions||[]}},p)).pipe(Rl((l=>({response:l.data,actionInPayload:c}))),jl("Error occurred during ajax call at updateDataObject Epic",u))})(c))),Ol((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=Sc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d}=c,{containerItemID:p,isModalAction:h}=d,g=h?Ou.MODAL:Ou.PRIMARY,f={target:Ct(g,p),containerItemID:p,context:p};return u.push(Lh(bh,f)),u})),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],u))))})))},c=>{let l=0,u=[];return c.pipe(Dl(pt),Vl(100),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>(c=>{const{dataViewName:l,context:u,dataViewParameters:d}=c,p={data_view_ID:l,dataViewParameters:encodeURIComponent(JSON.stringify(d))},{restApi:h,reqType:g}=eg("deleteDataObject",p);return Li(rc(h,{method:g},u)).pipe(Rl((l=>({response:l.data,actionInPayload:c}))),jl("Error occurred during ajax call at deleteDataObject Epic",u))})(c))),Ol((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=Sc({...c,...d,actionMgrID:l});return u.push(p),u}return[]})),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],u))))},c=>{let l=0,u=[],d={};return c.pipe(Dl(Ce),Vl(100),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>(c=>{const{dataViewID:l,dataViewParameters:u,context:d}=c,p={data_view_ID:l},{restApi:h,reqType:g}=eg("getDataObjectActions",p);return Li(rc(h,{method:g,body:{dataViewParameters:u}},d)).pipe(Rl((c=>({...c.data}))),jl("Error occurred during ajax call at GET data object actions : ",c.context))})(c))),Ol((async c=>c&&c.type===Te?(u.push(Sc(c)),u):(d=c,[]))),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l,d),Up(u),u=[],u))))},c=>{let l=0,u=[];return c.pipe(Dl(ft),Vl(100),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>(c=>{const{lookupDatapage:l,context:u,headers:d,actionID:p,dataViewParameters:h}=c,g={data_view_ID:l,action_ID:p},{restApi:f,reqType:m}=eg("openDataObjectAction",g);return Li(rc(f,{method:m,headers:d,body:{dataViewParameters:h}},u)).pipe(Rl((l=>({response:l.data,actionInPayload:c}))),jl("Error occurred during ajax call at getDataObjectView Epic",u))})(c))),Ol((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=Sc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d,response:p,headers:h={}}=c,{containerName:g,actionID:f,context:m,actionName:y}=d,I=Ct(g,d.context);let E=X(g,m);E=ee(m,E);const A={target:I,context:E,containerItemID:E,headers:h,resourceType:G.RESOURCE_TYPES.DATA,resourceStatus:G.RESOURCE_STATUS.OPEN_FLOW_ACTION,key:JSON.stringify(d.dataViewParameters),actionID:f,actionName:y},_={acName:I,context:m};await Ac(p,d,_);const C=Ec(p,A);return u.push(Lh(gh,C)),u})),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],u))))},c=>{let l=0,u=[];return c.pipe(Dl(mt),Vl(100),bl((c=>{const{isFormValid:d}=c.payload;({actionMgrID:l}=c.payload);const p=c.payload.context;if(!d){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(l,!0,c),Ml([])}return Zn({context:p,stateObj:Fp(p),clearContextMessages:!0}),Ml(c.payload).pipe(Ol((c=>(c=>{const{savableDatapage:l,context:u,headers:d,actionID:p,keys:h,containerItemID:g}=c,f={data_view_ID:l,action_ID:p},{restApi:m,reqType:y}=eg("submitDataObjectAction",f),{content:I}=Ic(g);return Li(rc(m,{method:y,headers:d,body:{data:{...I?.content,...h},pageInstructions:I?.pageInstructions||[]}},u)).pipe(Rl((l=>({response:l.data,actionInPayload:c}))),jl("Error occurred during ajax call at getDataObjectView Epic",u))})(c))),Ol((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=Sc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d,response:p,headers:h={}}=c,{containerName:g,containerItemID:f,resourceType:m,key:y}=d,I=Ct(g,d.context),E={acName:I,context:d.context};await Ac(p,d,E);const A={key:y,target:I,resourceType:m,containerItemID:f,headers:h,context:d.context};return u=((c,l,u,d)=>{const{resourceType:p,key:h,containerItemID:g}=d,f=Ec(u,l);f.resourceType=p||G.RESOURCE_TYPES.DATA;const m=te(g);c.push(Lh(bh,f));const y=kp(".dataContext","dataInfo",m),I=kp(".dataContextParameters","dataInfo",m),E={context:m,skipSemanticUrl:!0,resourceType:p,parentAction:mt,dataContext:y,dataContextParameters:I},A=y&&I&&Qh(We,{pageName:W.PY_DETAILS,dataViewName:y},I)||"";if(g?.includes(W.PREVIEW)){const l={type:ce,payload:{pageName:W.VIEW_NAMES.PY_DATA_PREVIEW,container:W.PREVIEW,containerName:W.PREVIEW,...E}};c.push(l)}else if(p!==W.PAGE&&h===A&&g?.includes(W.PRIMARY)){const l={type:ce,payload:{pageName:W.VIEW_NAMES.PY_DETAILS,containerName:"",...E}};c.push(l)}return c})(u,A,p,{key:y,resourceType:m,containerItemID:f}),u})),Rl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),Up(u),u=[],u))))})))}],sy=ry;function ay(c,l){return void 0===l&&(l=Hm),Ri((function(u,d){var p=null,h=null,g=null,f=function(){if(p){p.unsubscribe(),p=null;var c=h;h=null,d.next(c)}};function m(){var u=g+c,h=l.now();if(h<u)return p=this.schedule(void 0,u-h),void d.add(p);f()}u.subscribe(Oi(d,(function(u){h=u,g=l.now(),p||(p=l.schedule(m,c),d.add(p))}),(function(){f(),d.complete()}),void 0,(function(){h=p=null})))}))}const{RESOURCE_TYPES:{CASE:oy,DATA:iy}}=G;let cy=[],ly=!1;const uy={},dy=[c=>c.pipe(Dl(Se),ay(200),Rl((c=>c.payload)),Ol((c=>{ly=!1,zr.subscribe(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_STARTED,(()=>{ly=!0}));const l=Hi.getPreviewMode()&&Yi.addDebugHeaders({debugId:Xp.generateUniqueID()});uy.dataContext=c.payload.dataViewName,uy.dataContextParameters=c.payload.dataViewKeys;const{context:u,requestType:d,routeKey:p}=c;let{routeEndpoint:h}=c;h=h&&h.indexOf("viewType={viewType}")>0?h.replace("{viewType}","page"):h&&h.indexOf('viewType=""')>0?h.replace('viewType=""','viewType="page"'):h;const g=P()+h,f=c.options.context;let m;const y={},I=c?.payload?.caseClassName;if(q.isRemoteCase(I)){const{RemoteSystemID:c}=q.getRemoteCase(I);y.RemoteSystemID=c}if("POST"===d){let f;switch(m=c.payload,h.indexOf("viewType=")<0&&(h=`${h}?viewType=page`),xc(p)){case oy:f={caseTypeID:m.caseTypeID,processID:m.processID,content:{}};break;case iy:f=uy;break;default:f=m}return Li(rc(g,{method:d,body:f,headers:{...y,...l}},u)).pipe(Rl((l=>({response:{...l.data},payload:c,headers:yc(l.headers)}))),jl(": Error occurred during ajax call at historyEpic : ",c))}return Li(rc(g,{method:"GET",headers:{...y,...l}},f.substring(0,f.lastIndexOf("/")))).pipe(Rl((u=>({response:u.data,payload:c,headers:{...yc(u.headers),...l}}))))})),Ol((async c=>{if(ly)return cy;if(zr.subscribe(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_STARTED,(()=>{ly=!0})),c&&c.type===Te)return Sc(c);const{headers:l={},response:u,payload:d}=c,p=zf(u,{[G.STOPMERGEACTIONS]:!u.nextAssignmentInfo}),h=d.options.acName,g=ed(h)&&nd(h)?$u(h):c.payload.options.context,f=g;l.RemoteSystemID=d?.payload?.RemoteSystemID;const m={target:h,context:g,containerItemID:f,headers:l,debugInfo:{debugId:l[W.COREHEADER_APP_DEBUG_ID]}};let y="";const I=d?.payload?.page;let E=d?.payload?.pageClass;d.payload&&d.payload.caseName&&d.payload.workID&&(y=Qh(ze,{caseName:c.payload.payload.caseName}),y=y&&y.replace("{workID}",c.payload.payload.workID)||"",E=d?.payload?.caseClassName),zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_INIT,{pageName:I,pageClass:E});const A=Xp.getIn(p,W.LOCALE_REFERENCES);await Bd.loadLocaleResources(A);const _=Xp.getIn(p,W.COMPONENTS);_&&await Gr(_),Fr(p,d.options.actionConfig,!0),zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_DONE,{target:h,pageName:I,pageClass:E});let C=Ec(p,m);return C=((c,l,u)=>{if(c===gc.CASE){if(l?.caseInfo?.assignments&&l?.caseInfo?.assignments.length>0){const{key:c,flowName:d}=Cc(l.caseInfo.assignments[0].ID);u.key=c||l.caseInfo.ID,u.flowName=d}else u.flowName="",u.key=l?.caseInfo?.ID||l.semanticURL;u.resourceType=c,u.semanticURL=l.semanticURL,u.caseViewMode=W.REVIEW_MODE}else u.resourceType=c,u.semanticURL=l.semanticURL;return u})(xc(c.payload.routeKey),{...u.data,semanticURL:y,caseViewMode:W.REVIEW_MODE},C),cy.push(Tc(h,C)),vc(cy),cy})),Rl((()=>(ly||Up(cy),cy=[],ly=!1,cy))),jl("Error occurred"))],py=[c=>{let l=0,u=[];return c.pipe(Dl(le),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>{const{context:l,skipSemanticUrl:u=!1,insightID:d}=c;let p,h="";u||(h=Qh(He,{insightID:"{insightID}"}),h=h.replace("{insightID}",d),p=Vd.getEndPointInfo(h));const{restApi:g,reqType:f}=eg(He,{...p?.payload||[],insightID:d});return Li(rc(g,{method:f},l)).pipe(Rl((l=>{let d={};return d="string"==typeof l.data?JSON.parse(l.data):l.data,{response:{...d,key:h,semanticURL:h},actionConfig:c,skipSemanticUrl:u}})),jl(": Error occurred during ajax call at showPage Epic : ",c.context))})),Ol((async c=>{if(c&&c.type===Te)return u.push(Sc(c)),u;const{actionConfig:l,skipSemanticUrl:d}=c,p=Wr.getTargetViewContainerName(ie),h=Ct(p,l.context),g=Nc(h,p,l.context),{response:f}=c,m=zf(f);m.directUrlUpdation=!d;const y={acName:h,context:g},I=!d,E=d;await Ac(m,l,y,I,E);const A=Ec(m,{target:h,context:g,containerItemID:g});A.resourceType=G.PAGE;const _=Tc(h,A);return u.push(_),vc(u),u})),Rl((()=>{gn.resolveActionByID(l),Up(u),u=[]})),Qm())}],hy=[c=>{let l=0,u=[];return c.pipe(Dl(ue),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ol((c=>{const{context:l,skipSemanticUrl:u=!1,dashboardID:d}=c;let p="";u||(p=Qh(qe,{dashboardID:d}),p=p.replace("{dashboardID}",d));const{restApi:h,reqType:g}=eg(qe,{dashboardID:d});return Li(rc(h,{method:g},l)).pipe(Rl((l=>{let d={};return d="string"==typeof l.data?JSON.parse(l.data):l.data,{response:{...d,key:p,semanticURL:p},actionConfig:c,skipSemanticUrl:u}})),jl(": Error occurred during ajax call at showPage Epic : ",c.context))})),Ol((async c=>{if(c&&c.type===Te)return u.push(Sc(c)),u;const{actionConfig:l,skipSemanticUrl:d}=c,p=Wr.getTargetViewContainerName(ie),h=Ct(p,l.context),g=Nc(h,p,l.context),{response:f}=c,m=zf(f);m.directUrlUpdation=!d;const y={acName:h,context:g},I=!d,E=d;await Ac(m,l,y,I,E);const A=Ec(m,{target:h,context:g,containerItemID:g});A.resourceType=G.PAGE;const _=Tc(h,A);return u.push(_)})),Rl((()=>{gn.resolveActionByID(l),Up(u),u=[]})),Qm())}],gy=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return Hf.apply(void 0,c.map((function(c){var u=c.apply(void 0,l);if(!u)throw new TypeError('combineEpics: one of the provided Epics "'+(c.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return u})))};try{Object.defineProperty(u,"name",{value:"combineEpics("+c.map((function(c){return c.name||"<anonymous>"})).join(", ")+")"})}catch(c){}return u}(...Qf,...Jm,...ty,...dy,...sy,...em,(c=>{let l=0;return c.pipe(Dl(st),Rl((c=>(({actionMgrID:l}=c.payload),c.payload))),Rl((()=>{const c=Lp()?.getState(),u=Gf();return A()(c,u)&&l>0?gn.resolveActionByID(l,{}):gn.rejectActionByID(l),[]})),Qm())}),...py,...hy),fy=()=>c=>l=>{const{type:u="",payload:d={}}=l||{},{category:p,context:h,transientItemID:g}=d;"HTTP"!==p&&[De,Fe,be,Ve,Oe,Le].includes(u)&&($c(h||g),Rn.removeContextTreeNode(h||g)),c(l)},my={},yy=c=>{const l=Xp.getIn(my,[W.CONTEXT,c],[]),u=[];l.forEach((l=>{const d=l.substr(0,l.lastIndexOf("_")),p=Xp.getIn(my,[d,l],[]),h=p&&p.length>0&&p.indexOf(c);if(h>-1&&p.splice(h,1),!p||p&&0===p.length){Xp.deleteIn(my,[d,l]);const c=Xp.getIn(my,[d]);c&&0===Object.keys(c).length&&Xp.deleteIn(my,[d]),u.push({dataPageName:d,dataPageNameWithHash:l})}})),Xp.deleteIn(my,[W.CONTEXT,c]);const d=Xp.getIn(my,[W.CONTEXT]);(!d||d&&0===Object.keys(d).length)&&Xp.deleteIn(my,[W.CONTEXT]),u.length>0&&Up(jh({dataPagesToBeRemoved:u}))},Iy=(c={},l)=>{Object.keys(c).forEach((u=>{const d=Xp.getIn(c,[u],{});Object.keys(d).forEach((c=>{((c,l,u)=>{const d=Xp.getIn(my,[W.CONTEXT,u]);if(Xp.getIn(my,[c])){const d=Xp.getIn(my,[c,l],[]);Xp.setIn(my,[c,l],[...new Set([...d,u])])}else Xp.setIn(my,[c,l],[u]);d?Xp.setIn(my,[W.CONTEXT,u],[...new Set([...d,l])]):Xp.setIn(my,[W.CONTEXT,u],[l])})(u,c,l)}))}))},Ey=()=>c=>l=>{const{payload:{data:u={},context:d=null,childContainersContexts:p=[]}={},type:h}=l;if(p&&p.length>0&&(h===Ve||h===be)&&p.forEach((c=>{yy(c)})),h===De||h===Ae||h===ot){const c=h===ot?u:u.shared;Iy(c,d)}else h===Ve?(yy(d),Iy(u.shared,d)):h===be&&yy(d);c(l)},Ay=c=>l=>u=>{const{type:d,payload:{target:p,containerItemID:h,context:g,childContainersContexts:f=[],containerInfo:{newAccessedOrder:m,containerType:y}={}}={}}=u,{PUB_SUB_EVENTS:I}=G;if(d===be){const{resourceType:l,key:u,context:d}=Xp.getIn(c.getState(),["containers",p,"items",h])||{},g={resourceType:l,key:u,context:d,containerItemID:h};zr.publish(I.CONTAINER_EVENTS.CLOSE_CONTAINER_ITEM,g),p===`${G.APP.APP}/${W.PRIMARY}`&&y===W.CONTAINER_TYPE.MULTIPLE&&zr.publish(I.CONTAINER_EVENTS.CLOSE_MULTI_TYPE_PRIMARY_CONTAINER_ITEM,{key:u,newAccessedOrder:m})}f&&f.length>0&&(d===Ve||d===be)&&f.forEach((c=>{ou.cleanCaches(c)})),d!==Ve&&d!==be||ou.cleanCaches(g),l(u)},_y=()=>c=>l=>{const{payload:{context:u=null,transientItemID:d=null}={},type:p}=l;!u||p!==De&&p!==Fe&&p!==Ve&&p!==be||(Tr(u),_r(u)),d&&p===we&&(Tr(d),_r(d)),c(l)},Cy=function(c){void 0===c&&(c={});var l,u=new(0,Dg.constructor)(Dg.schedulerActionCtor),d=new Rg,p=function(p){l=p;var h=new Rg,g=new Rg,f=h.asObservable().pipe(xi(u)),m=new xg(g.pipe(xi(u)),l.getState());return d.pipe(Rl((function(l){var u=l(f,m,c.dependencies);if(!u)throw new TypeError('Your root Epic "'+(l.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return u})),Ol((function(c){return Li(c).pipe(wi(u),xi(u))}))).subscribe(l.dispatch),function(c){return function(u){var d=c(u);return g.next(l.getState()),h.next(u),d}}};return p.run=function(c){d.next(c)},p}(),Sy=c=>{const l=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Eg;if(null!==Lp())Kp();else{const u=Ig(Wf(c),l(wg.reduxBatch,function(...c){return l=>(u,d)=>{const p=l(u,d);let h=()=>{throw new Error(gg(15))};const g={getState:p.getState,dispatch:(c,...l)=>h(c,...l)},f=c.map((c=>c(g)));return h=Eg(...f)(p.dispatch),{...p,dispatch:h}}}(fl,fy,Ey,_y,Cy,Ay),wg.reduxBatch));Cy.run(gy),Mp(u)}},Ty=new class{#_;constructor(){this.userSettings={},this.componentCache={},this.contextMapToClearOnCancel={},this.#_=!1}getNormalizedKey(c){return c?.toString().trim().replace(/\s/g,"-").toLowerCase()}setComponentState=(c,l)=>{sessionStorage?sessionStorage.setItem(this.getNormalizedKey(c),JSON.stringify(l)):console.error("Session Storage not found")};getComponentState=c=>{const l=sessionStorage.getItem(this.getNormalizedKey(c));return(l?Xp.isValidJson(l):void 0)||l};removeComponentState=c=>{sessionStorage.removeItem(this.getNormalizedKey(c))};fetchUserSettings=async()=>{if(lm("getUserSettings")){const{restApi:c,reqType:l}=eg("getUserSettings");rc(c,{method:l,headers:{}}).then((c=>{if(200!==c.status||!c.data)throw new Error("something went wrong while fetching getUserSettings");this.userSettings=c.data})).catch((c=>console.error(c)))}};init=()=>{kd.getUserSettings()?this.userSettings=kd.getUserSettings():this.fetchUserSettings()};getUserSettings=c=>{if(!c)throw new Error("path is required parameter");if("string"!=typeof c)throw new TypeError("path must be string");return Xp.getIn(this.userSettings,c,{})};setUserSettings=async(c,l)=>{if(!c)return Promise.reject(new Error("path is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("path must be string"));if(null==l||""===l)return Promise.reject(new Error("value is required parameter"));let u;if(!lm("updateUserSettings"))return Promise.resolve("updateUserSettings route is not available");u=eg("updateUserSettings");const{restApi:d,reqType:p}=u;return rc(d,{method:p,body:Xp.setIn({},c,l)}).then((c=>{if(200!==c.status||!c.data)throw new Error("something went wrong");this.userSettings=c.data})).catch((c=>{console.error(c)}))};setComponentCache(c,l,u={}){if("string"!=typeof c||!c?.trim())return;const d=u.clearOnCancelForContext;if(d&&(Object.hasOwn(this.contextMapToClearOnCancel,d)?this.contextMapToClearOnCancel[d].add(this.getNormalizedKey(c)):this.contextMapToClearOnCancel[d]=new Set([this.getNormalizedKey(c)])),this.componentCache[this.getNormalizedKey(c)]=l,!this.#_){this.#_=!0;const c=c=>{const{context:l}=c||{};(this.contextMapToClearOnCancel[l]||new Set).forEach((c=>{this.resetComponentCache(c)})),delete this.contextMapToClearOnCancel[l]};zr.subscribe(W.PUB_SUB_EVENTS.EVENT_CANCEL,c,"RESET_COMPONENT_CACHE")}}getComponentCache(c){return"string"==typeof c&&c?.trim()?Object.hasOwn(this.componentCache,this.getNormalizedKey(c))?this.componentCache[this.getNormalizedKey(c)]:void 0:null}resetComponentCache(c){return!("string"!=typeof c||!c?.trim()||!Object.hasOwn(this.componentCache,this.getNormalizedKey(c))||(delete this.componentCache[this.getNormalizedKey(c)],0))}},Ny={publishConstellationLoadedEvent:()=>{zr.publish(W.PUB_SUB_EVENTS.BOOTSTRAP_SHELL_EVENTS.CONSTELLATION_LOADED,{})}},Py=new class{activateContainerItemOnSwitch(c){const l=`${W.APP.APP}/${W.PRIMARY}`,u={target:l,containerItemID:ju(l,c)};Nu({}).getPConnect().getContainerManager().activateContainerItem(u)}removeContainerItemOnClose(c){const l=`${W.APP.APP}/${W.PRIMARY}`,u={target:l,containerItemID:ju(l,c)};Nu({}).getPConnect().getContainerManager().removeContainerItem(u)}showCasePreview(c,l){const u=Nu({meta:{type:"PreviewViewContainer",config:{name:W.PREVIEW}},options:{context:W.APP.APP,target:"root/hybrid_preview"}}),d=u.getPConnect().getContainerManager();d.resetContainers({name:W.PRIMARY,context:W.APP.APP}),Vu(W.APP.APP,W.PREVIEW)||d.initializeContainers({type:"multiple",name:W.PREVIEW}),u.getPConnect().getActionsApi().showCasePreview(c,{caseClassName:l})}closeCasePreview(){Nu({}).getPConnect().getContainerManager().resetContainers({name:W.PREVIEW,context:W.APP.APP})}isFormDirty(c){const l=`${W.APP.APP}/${W.PRIMARY}`,u=Pd(l,c);return Fc.isStateModified(u)}getEventUtils(){return Ny}getBroadcastUtils(){return tm}isTraditionalUICase(c){return hs(c)}},Dy=class{static openCase(c,l=G.APP.APP,u={}){return u.renderInline=!0,u.pageName?kd.setDefaultCasePage(u.pageName):(kd.setDefaultCasePage(W.PY_DETAILS),u.pageName=W.PY_DETAILS),u?.disableAssignmentHeader?kd.disableAssignmentHeader(u.disableAssignmentHeader):kd.disableAssignmentHeader(!1),yu.openCase(c,l,W.PRIMARY,u)}static createCase(c,l=G.APP.APP,u={}){return u.renderInline=!0,u.pageName?kd.setDefaultCasePage(u.pageName):(kd.setDefaultCasePage(W.PY_DETAILS),u.pageName=W.PY_DETAILS),u?.disableAssignmentHeader?kd.disableAssignmentHeader(u.disableAssignmentHeader):kd.disableAssignmentHeader(!1),yu.createCase(c,l,W.PRIMARY,u)}static getNextWork(c=G.APP.APP,l={}){return l.renderInline=!0,l.pageName?kd.setDefaultCasePage(l.pageName):(kd.setDefaultCasePage(W.PY_DETAILS),l.pageName=W.PY_DETAILS),l?.disableAssignmentHeader?kd.disableAssignmentHeader(l.disableAssignmentHeader):kd.disableAssignmentHeader(!1),yu.getNextWork(c,W.PRIMARY,l)}static openAssignment(c,l=G.APP.APP,u={}){return u.renderInline=!0,u.pageName?kd.setDefaultCasePage(u.pageName):(kd.setDefaultCasePage(W.PY_DETAILS),u.pageName=W.PY_DETAILS),u?.disableAssignmentHeader?kd.disableAssignmentHeader(u.disableAssignmentHeader):kd.disableAssignmentHeader(!1),yu.openAssignment(c,l,W.PRIMARY,u)}static openPage(c,l,u=G.APP.APP,d={}){const p=ie;d?.defaultCasePage?kd.setDefaultCasePage(d.defaultCasePage):kd.setDefaultCasePage(W.PY_DETAILS),d?.disableAssignmentHeader?kd.disableAssignmentHeader(d.disableAssignmentHeader):kd.disableAssignmentHeader(!1);const h={viewName:c,className:l,acTargetName:W.PRIMARY,actionMgrID:gn.getNextActionMgrId(),context:u},{promise:g}=gn.actionManagerPromise(p,h.actionMgrID);return Up({type:p,payload:{...h}}),g}static getCurrentContextAPI(c,l=G.APP.APP){return Nu({meta:{config:{}},options:{context:l,pageReference:c,containerName:W.PRIMARY}}).getPConnect()}},by=new class{createC11nEnv=c=>Nu(c);getContextUtils=()=>c;getRoutingManager=()=>l;getComponentsRegistry=()=>tn;getStateManager=()=>f;getActionCreators=()=>m;getStreamObservable=()=>d;getActionProcessor=()=>th;getActionHandler=()=>eh;renderApp=(c,l)=>{const u={context:W.APP.APP},d={...Xp.getIn(c,W.ROOT),options:u};Sy(c),Fr(c,u,!0);const p=this.createC11nEnv({meta:d,isRoot:!0});zr.publish(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,{props:p,domContainerID:l})};updateStoreWithUiRoot=async(c,l,u)=>{const d=zf(c),{data:p,uiResources:h={}}=c,g=Xp.getIn(h,W.CONTEXT_DATA);await Ac(d,{},{},!1,!0);const f={...p,[W.CONTEXT_DATA]:g},{root:m}=h;dd(m,l,f,u)};fetchEndPointResource=(c,l,u)=>{rc(c,{method:"GET"},W.APP.ROOT).then((async c=>{const{data:d,status:p}=c;200===p&&this.updateStoreWithUiRoot(d,l,u)}))};loadComponent=async(c,l,u)=>Gr(u).then((()=>{const u=this.createC11nEnv({meta:c,isRoot:!0});Lp()||Sy({}),zr.publish(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,{props:u,domContainerID:l})}));setStaticServerUrl=(c,l,u)=>{Vr.initServer(c,l,u)};loadView=async(c,l,u=[])=>{T();const d=zf(c),p=Xp.getIn(d,W.VIEWS),h=Xp.getIn(d,W.NAVIGATIONS),g=Xp.getIn(d,W.COMPONENTS)||[];g.push(...u);const f=Xp.getIn(d,W.STATIC_SERVER_URL),m=Xp.getIn(d,W.APPLICATION_DATA);p&&pp(p),h&&hp(h),(c=>{c&&(Yh=c.pyLabel)})(m),f&&Vr.initServer(f),await Gr(g,f).then((()=>this.renderApp(d,l)))};initAppShell=(c,l,u)=>{pg(c),Wr.buildActionTargetMap(l),T(u)};initRoutingTable=(c,l)=>{pg(c,!0),T(l)};setAppAlias=c=>{Vr.setAppAlias(c)};getHomeRestApi=c=>{const{restApi:l}=Zh("home",{portalName:c});return P()+l};getViewRestApi=(c,l)=>{const{restApi:u}=((c,l)=>{let u={restApi:""};try{if(dg()&&!l){const l=Ud(),d=Vd.processUrl(l,!0),p=Vd._getMatchedRouteInRoutingTable(d)||"",h=Vd.getRoutingInfo(),g=Vd.processUrl(l,!1).split("/"),f=g[g.length-1];let{caseID:m}=h&&h.routes[p].payload;m=m.replace("{workID}",f),u=Vd.getRestEndPoint("loadView",{caseID:m,viewID:c})||{}}else u=Vd.getRestEndPoint("showView",{page:c,pageClass:l})||{}}catch(c){}return u})(c,l);return P()+u};loadRootComponent=async(c,l,u=[],d,p,h)=>{const{config:{name:g}={}}=l;Lp()||Sy({}),h&&(Ad(`${W.APP.ROOT}/${g}`),Ed().deleteContainerItem(`${W.APP.ROOT}/${g}`)),Ed().getContainerItems()?.length>1&&!g?.startsWith("hybrid_")&&"authoring-preview"!==g&&Kp(),Up(oh({data:{},context:W.APP.ROOT}));const f=this.createC11nEnv({meta:l,options:{context:W.APP.ROOT,pageReference:"",target:`${W.APP.ROOT}/${g}`}}),m=f.getPConnect(),y=m.getContextName(),I=m.getContainerName(),E=m.getContainerManager();$u(`${y}/${I}`)||"noPortal"===l.config?.renderingMode||E.initializeContainers({type:"single"});const A=["RootContainer","Region","ModalViewContainer","PreviewViewContainer","reference",...u];return Gr(A).then((()=>{zr.publish(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,{props:f,domContainerID:c,componentName:"RootContainer",portalTarget:d,styleSheetTarget:p})}))};loadViewByName=(c,l,u,d)=>{let p=this.getViewRestApi(c,u);p===P()&&(p=this.getHomeRestApi(l)),this.fetchEndPointResource(p,d)};loadPortalView=(c,l)=>{const u=this.getHomeRestApi(c);this.fetchEndPointResource(u,l,!0)};configureForBrowserBookmark=c=>{(c=>{const{acName:l,context:u,defaultViewLabel:d}=c,p=(c=>{const l=Vd.getRoutingInfo(),u=c.split(" ").join(""),d=c.split(" ").join("-").toLowerCase(),p=(c=>{const l=c.replace(/(?=[A-Z][a-z])/g,"-").toLowerCase();return l.startsWith("-")?l.substring(1):l})(c);return l?.routes[u]?u:l?.routes[d]?d:l?.routes[p]?p:c})(d);(c=>{zh=c})(p),Vd.setDefaultRoute(p);const h=X(l,u),g=Ct(l,u),f="true"===kd.getIsExtraCallRequiredForDefaultHome(),y={historyAction:Wh,pxURLPath:""};let I;const E={acName:g,context:h,actionConfig:{context:h}};if(f||!f&&dg()){const l=(c=>{if(c.indexOf("?")>0){const[l,u]=c.split("?"),d=new URLSearchParams(u),p=new Map;for(const[c,g]of d)"portal"!==c&&"noPortal"!==c&&"debug"!==c&&p.set(c,g);const h=new URLSearchParams(p).toString();return h?`${l}?${h}`:l}return c})(Md(window.location.pathname+window.location.search));I=Vd.getEndPointInfo(l),y.pxURLPath=I.urlPath,void 0!==I.payload?.pageClass&&(I.payload.pageClass=Lp()?.getState()?.data?.app?.pyPortal?.classID);const u="showHistory",d={routeEndpoint:I.routeEndpoint,requestType:I.requestType,payload:I.payload,options:E,routeKey:I.routeKey};q.isTraditionalRemoteCase(I?.payload?.caseClassName)?lg(d,c,E.context):Up(m[u](cg(d)))}else I=Vd.getEndPointInfo(zh),y.pxURLPath="";rg(null,{urlPathObjParam:y,infoParam:I,optionsParam:E},!0)})(c)};checkIfSemanticURL=()=>dg();onPCoreReady=c=>{zr.subscribe(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,c,"renderAppCallback")};onPCoreCleanup=c=>{zr.subscribe(G.PUB_SUB_EVENTS.EVENT_UNMOUNT_APP,c,"unmountAppCallback")};setFieldsDefaultConfigs=c=>{Mr.updateFieldDefaults(c)};setGoogleMapsAPIKey=c=>{D(c)};setFetchDefaultHeaders=c=>{cc(c)};setFetchAuthInfo=c=>{lc(c)};getCaseApi=()=>yu;getMashupApi=()=>Dy;enableAppRouting=c=>{Xh(c)};initStore=()=>Sy({});getBootstrapConfig=async(c,l)=>{const u=`${l.token_type} ${l.access_token}`;return fetch(`${c}/api/application/v2/data_views/D_pxBootstrapConfig`,{method:"GET",headers:new Headers({Authorization:u})}).then((c=>c.json()))};initCoreContainers=(c={})=>{const{containerType:l="single"}=c,u=Nu({meta:{type:"RootContainer",config:{renderingMode:"noPortal"},children:[{type:"ViewContainer",config:{routingInfo:"@ROUTING_INFO",name:"primary"}}]},options:{context:"root",pageReference:"",target:"root"}});return u.getPConnect().getContainerManager().initializeContainers({type:l,name:"primary",context:"app"}),{props:{getPConnect:u.getPConnect}}}},Ry=new class{constructor(){this.runtimeParams={},this.runtimeParamsMap={}}setRuntimeParams(c){this.runtimeParams=c}getRuntimeParams(){return this.runtimeParams}setRuntimeParam(c,l){this.runtimeParamsMap[c]=l}getRuntimeParam(c){return this.runtimeParamsMap[c]}},Oy=class{constructor(c){this.appAlias=c.appAlias,this.appAliasWithoutServlet=c.appAliasWithoutServlet,this.googleMapKey=c.googleMapKey,this.staticContentServer=c.staticContentServer,this.appStaticContentServer=c.appStaticContentServer||null,this.contextPath=c.contextPath,this.messagingService=c.messagingService||null,this.reAuthUrl=c.reAuthUrl||null}},vy=class{constructor(c){this.routingInfo=c.routingInfo,this.actionModel=c.actionModel,this.additionalHeaders=c.additionalHeaders,this.tokens=c.tokens,this.semanticUrl=c.semanticUrl,this.queryParams=c.queryParams,this.noPortal=c.noPortal,this.timezone=c.timezone,this.noHistory=c.noHistory,this.viewName=c.viewName,this.theme=c.theme,this.fieldDefaults=c.fieldDefaults,this.restServerConfig=c.restServerConfig,this.dynamicLoadComponents=void 0===c.dynamicLoadComponents||c.dynamicLoadComponents,this.dynamicSemanticUrl=void 0===c.dynamicSemanticUrl||c.dynamicSemanticUrl,this.enableRouting=void 0===c.enableRouting||c.enableRouting,this.locale=c.locale,this.environmentInfo=c.environmentInfo,this.renderingMode=c.renderingMode||"FULL_PORTAL",this.remoteCaseMapping=c.remoteCaseMapping||{},this.envType=c.envType,this.serviceConfig=new Oy(c.serviceConfig),this.behaviorOverrides=c.behaviorOverrides,this.initBroadcast=!!c.initBroadcast,this.cookieComplianceMethod=c.cookieComplianceMethod??"none",this.isExtraCallRequiredForDefaultHome=c.isExtraCallRequiredForDefaultHome??"false"}},xy="@P .viewConfig";let wy=0;const My=new class{#C(c,l,u){pg(c),Wr.buildActionTargetMap(l),T(u)}init(c){const l=new vy(c),u={...l.environmentInfo,renderingMode:l.renderingMode};Xh(l.enableRouting),Sy({}),kd.setTheme(l.theme),kd.setCookieComplianceMethod(l.cookieComplianceMethod),kd.setIsExtraCallRequiredForDefaultHome(l.isExtraCallRequiredForDefaultHome),Mr.updateFieldDefaults(l.fieldDefaults),Yi.setDefaultHeaders(l.additionalHeaders),this.#C(l.routingInfo,l.actionModel,{server:l.restServerConfig,reAuthUrl:l.serviceConfig.reAuthUrl}),Vr.setAppAlias(l.serviceConfig.appAliasWithoutServlet||l.serviceConfig.appAlias),D(l.serviceConfig.googleMapKey),Vr.initServer(l.serviceConfig.staticContentServer,l.serviceConfig.appStaticContentServer,l.tokens.C11NB2S),Bd.setTimezone(l.timezone),kd.setEnvironmentInfo(u),kd.setLocale(l.locale),q.setRemoteCaseMapping(l.remoteCaseMapping),Kl.setConnectionConfig({messagingService:l.serviceConfig.messagingService}),Ty.init(),l.initBroadcast&&Py.getBroadcastUtils().init()}getBootstrapConfig=async(c,l)=>{const u=`${l.token_type} ${l.access_token}`;return fetch(`${c}/api/application/v2/data_views/D_pxBootstrapConfig`,{method:"GET",headers:new Headers({Authorization:u})}).then((c=>c.json()))};initCoreContainers=(c={})=>{const{containerType:l="single"}=c,u=Nu({meta:{type:"RootContainer",config:{renderingMode:"noPortal"},children:[{type:"ViewContainer",config:{routingInfo:"@ROUTING_INFO",name:"primary"}}]},options:{context:"root",pageReference:"",target:"root"}});return u.getPConnect().getContainerManager().initializeContainers({type:l,name:"primary",context:"app"}),{props:{getPConnect:u.getPConnect}}};importReactRoot=async()=>{const c=[];return by.getComponentsRegistry().getComponent("ReactRoot").modules.forEach((l=>{c.push(l())})),Promise.allSettled(c)};importDesignSystemComponentMap=async(c,l,u)=>{try{await function(c,l="true"){return new Promise(((u,d)=>{const p=document.createElement("script");p.setAttribute("type","text/javascript"),p.setAttribute("src",c),p.setAttribute("async",l),p.onload=u(),p.onerror=()=>d(new Error("Failed to load resource from Design System")),document.body.appendChild(p)}))}(`${c}component/project/${l}/designsystems/${u}/componentsmap.js?v=${Date.now()}`)}catch(c){console.log(c)}};buildSemanticUrl=(c,l,u,d,p)=>{const h=new URLSearchParams(l);let g=!1;"true"===u&&(g=!0);let f=null,m=null;if(c){c.startsWith("/")&&(c=c.substring(1));const l=c.split("/");f=l[0],l.length>1&&l[1]&&(m=l[1])}else g=!1;let y=d;f&&(y=`${y}/${f}`),m&&(y=`${y}/${m}`),g&&(h.has("noPortal")||h.append("noPortal","true"),m&&p&&h.append("view",p));const I=h.toString();return y+=I?`?${I}`:"",y};initCoreConfig=c=>{const{routingInfo:l,serviceConfig:u,semanticUrl:d,queryParams:p,noPortal:h,noHistory:g,viewName:f,theme:m,restServerConfig:y,dynamicLoadComponents:I=!0,dynamicSemanticUrl:E=!0,renderingMode:A="FULL_PORTAL",envType:_,extras:C}=c,{appAlias:S,contextPath:T}=u;let N=window.location.origin;const P={};if(void 0!==y&&(N=y),T&&(N=`${N}${T}`),S&&"LAUNCHPAD"!==_&&(N=`${N}/${S}`),c.restServerConfig=N,!0===E){const c=this.buildSemanticUrl(d,p,h,N,f);!g&&c&&window.history.pushState({},"home",c)}else if("HYBRID"!==A){let c=window.location.href;c.indexOf("?")>0&&(c=c.substring(0,c.indexOf("?")),window.history.pushState({},"home",c)),P.dynamicSemanticUrl=!1}else console.log(`renderingMode :${A}`);!0!==I&&(P.dynamicLoadComponents=!1);let D=null;if(S){const c=S.indexOf("/app/");D=c>=0?S.substring(c+1):S}if(Object.keys(P).length>0&&window.PCore.setBehaviorOverrides(P),c.appAlias=D,m){let l="object"==typeof m?m:null;if(null===l)try{l=JSON.parse(m)}catch{l={}}c.theme=l}const b={...l,domain:`${window.location.protocol}//${window.location.host}`,searchParams:window.location.search};c.routingInfo=b,c.initBroadcast="true"===kd.environmentInfoObject?.pxMashupDetails?.pyIsTraditionalCoexistence,!c.noPortal||"true"!==c.noPortal&&!0!==c.noPortal||(c.renderingMode="EMBED"),C?.cspNonce&&(window.__webpack_nonce__=C.cspNonce),this.init(c)};launchViewByName=(c,l,u,d,p,h,g,f)=>{wy+=1;const m=f||`mashup${wy}`,y={type:"RootContainer",config:{viewConfig:xy,renderingMode:"view",name:m}};by.loadRootComponent(c,y,p,h,g).then((()=>by.loadViewByName(l,u,d,m)))};launchView=(c,l,u=[],d,p,h,g)=>{wy+=1;const f="hybrid"===g?`hybrid_${wy}`:g;wy+=1;const m=f||`mashup${wy}`,y={type:"RootContainer",config:{viewConfig:xy,renderingMode:"portal",name:m}};Ry.setRuntimeParams(d),by.loadRootComponent(c,y,u,p,h).then((()=>by.updateStoreWithUiRoot(l,m)))};launchPortal=(c,l,u,d=[])=>{wy+=1;const p=u||`portal${wy}`,h={type:"RootContainer",config:{viewConfig:xy,renderingMode:"portal",skeleton:"LoadingComponent",name:p}};d.push(h.config.skeleton),kd.isPortalLoaded=!0,by.loadRootComponent(c,h,d).then((()=>by.loadPortalView(l,p)))};launchMashup=(c,l=!0)=>{if(l){const l=document.getElementsByTagName(c)[0]?.parentNode;if(l){const c=document.createElement("style");c.setAttribute("id","portal-less-styles"),c.innerHTML="app-root.mashup > .case-view, app-root.mashup > .page-view { min-height: 0px !important; }",l.appendChild(c)}}by.loadRootComponent(c,{type:"RootContainer",config:{renderingMode:"noPortal"},children:[{type:"ViewContainer",config:{routingInfoAnnotation:"@ROUTING_INFO",name:"primary"}}]},[PCore.getConstants().LOAD_VIEW_STRING,"ViewContainer"]),window.parent!==window&&s(849)(`${window.PCore.getAssetLoader().getStaticServerUrl()}constellation-mashup-bridge.js`).then((c=>{c.mashup.init({resizing:"stretch"})}))};start=async(c,l)=>{const{appStaticContentServer:u}=c.serviceConfig,{ccV2LibId:d,environmentId:p,isAlternateDesignSystemEnabled:h,alternateDesignSystemName:g}=c;this.initCoreConfig(c);const f=async()=>(await this.importReactRoot(),d&&await Vr.importCustomComponentMap(d),"true"===h&&"other"!==g&&await this.importDesignSystemComponentMap(u,p,g),l&&l(),!0);return new Promise(((c,l)=>{(async()=>{const c=kd.getLocale(),l=kd.getFeatureMap().localizationVersion||1;let u;if("en-US"!==c)try{let d;2===l?d=[c]:(d=[Bd.GENERIC_BUNDLE_KEY,Bd.MESSAGE_BUNDLE_KEY,Bd.FIELD_LABELS_BUNDLE_KEY],u=await Bd.isCurrentLocalePackAvailable());const p=d.map((async d=>{2===l?await(async c=>{const l=kd.getFeatureMap().availableLanguagePacks||[];if(!c||!l.includes(c))return void console.warn(`current locale ${c} is not supported by application.`);const u={locale:c},d=await im("getLocalizationPack",{queryPayload:u});if((201===d.status||200===d.status)&&d.data){const c=d.data;Object.keys(c).forEach((l=>{Bd.setLocaleForRule(c[l],l)}))}})(d):u&&await(async(c,l)=>{const u=await Vr.getSvcLocale(l,`${c}.json`);if(u.ok&&c){const l=await u.json();Bd.setLocaleForRule(l,c)}})(d,c)}));await Promise.allSettled(p)}catch(c){console.warn(c)}})().then((async()=>{const l=by.getComponentsRegistry();"ReactRoot"in l.getLazyMap()?c(!0):l.getComponent("ReactRoot")?c(await f()):zr.subscribe("component-map-loaded",(async()=>{c(await f())}))})).catch((c=>{l(c)}))}))};registerForDebugInfo=c=>{PCore.getEnvironmentInfo().setPreviewMode(),c&&PCore.getPubSubUtils().subscribe("fetchSuccess",(({debugInfo:l})=>{const u=l?.["X-Pega-App-Debug-ID"];c.postMessage({appDebugID:u})}),"fetchSuccess")};toggleTracerHeaders=c=>{c.addEventListener("message",(async c=>{const l=c?.data?.enableTracer;l?PCore.getDebugger().enableTracer():PCore.getDebugger().disableTracer()}))};loadEnvironmentInfo=async c=>{if(c.theme&&(!window.pms||"Android"!==window.pms.device.systemName))try{const l=JSON.parse(c.theme.definition);PCore.getEnvironmentInfo().setBrandingInfo(l.Branding),PCore.getEnvironmentInfo().setTheme(l.Theme)}catch{PCore.getEnvironmentInfo().setBrandingInfo({}),PCore.getEnvironmentInfo().setTheme({})}c.keyMapping&&PCore.getEnvironmentInfo().setKeyMapping(c.keyMapping),PCore.getEnvironmentInfo().setCookieComplianceMethod(c.cookieComplianceMethod??"none")}},Ly={createViewRule:(c,l)=>{const{restApi:u,reqType:d}=eg("createViewRuleByID");return rc(u,{method:d,body:c},l).then((c=>c.data))},getViewRule:(c,l)=>{const{restApi:u,reqType:d}=eg("getViewRuleByID",{ID:c});return rc(u,{method:d},l).then((c=>c.data))},updateViewRule:(c,l,u)=>{const{restApi:d,reqType:p}=eg("updateViewRuleByID",{ID:c});return rc(d,{method:p,body:l},u).then((c=>c.data))},deleteViewRule:(c,l)=>{const{restApi:u,reqType:d}=eg("deleteViewRuleByID",{ID:c});return rc(u,{method:d},l).then((c=>c.data))}},Uy={"Content-Type":"application/json"},Fy={addCaseFollower:(c,l,u)=>{const d={caseID:c},p=JSON.stringify({users:l.map((c=>({ID:c})))});return im("addCaseFollower",{body:p,queryPayload:d,headers:Uy},u)},deleteCaseFollower:(c,l,u)=>im("deleteCaseFollower",{queryPayload:{caseID:c,followerID:l}},u),getCaseFollowers:(c,l)=>im("getCaseFollowers",{queryPayload:{caseID:c}},l).then((c=>c.data.followers))},jy={addRelatedCases:(c,l,u)=>{const d={caseID:c},p=JSON.stringify({cases:l});return im("addRelatedCases",{body:p,queryPayload:d},u)},removeRelatedCase:(c,l,u)=>im("removeRelatedCase",{queryPayload:{caseID:c,relatedCaseID:l}},u),getRelatedCases:(c,l)=>im("getRelatedCases",{queryPayload:{caseID:c}},l).then((c=>c.data.relatedCases))},Vy="operatorDetails",ky={getOperatorDetails:(c,l=!1)=>{const{reqType:u}=eg(Vy,{});if("GET"===u){const l={encodedOperatorId:encodeURIComponent(`{"opname":"${c}"}`)};return im(Vy,{queryPayload:l})}return l?im("operatorDetailsByBusinessID",{body:{dataViewParameters:{BusinessID:c}}}):im(Vy,{body:{dataViewParameters:{ID:c}}})}},$y=async c=>{const l=zf(c),u=Xp.getIn(l,W.COMPONENTS);Fr(l,{},!0);const d=Xp.getIn(l,W.LOCALE_REFERENCES);await Bd.loadLocaleResources(d||[]),await Gr(u)},By=(c,l,u)=>Zp.resolveView(c,l,u),Gy={"Content-Type":"application/json"},Wy=new class{constructor(){this.mentionsTagsCancelTokenSource=[],this.mentions=[]}getFeeds=(c,l,u,d,p,h,g)=>{const{getLocaleValue:f}=Bd;g||(this.mentions=[]);let m="";d&&Array.isArray(d)&&d?.length>0&&(d.forEach((c=>{c.on&&(m=`${m}${c.id},`)})),""===m&&(m="ClearFilters"));let y="";g&&(y=h.getValue("pulse.pageLastEntry"));const I={filterForContext:c,feedID:l,feedClass:u,filterBy:m,pageSize:10,olderThan:y};for(let A=0;A<p.length;A+=1)p[A].cancel();const E=um();return p.push(E),im("getFeedMessages",{queryPayload:I,cancelTokenSource:E},h.getContextName()).then((async c=>{if(200===c.status&&c.data){p.pop();const l=[],u={};let m=!1;if(c?.data){if(c?.data?.data?.FeedList){const d=c.data.data.FeedList?.pxResults;Array.isArray(d)&&d?.length>0&&d.forEach(((c,d)=>{c.ID=""!==c.pzInsKey?c.pzInsKey:`message${d}`,l.push(c.ID),u[c.ID]=c,c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions),c?.pxResults&&Array.isArray(c?.pxResults)&&c.pxResults?.length>0&&c.pxResults.forEach((c=>{c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions)})),m||"pzPostDetails"===c.pyMessageViewReference||"pzPrivatePostDetails"===c.pyMessageViewReference||(m=!0)}))}if(m&&await $y({uiResources:c.data.uiResources}),!d&&(d=[{id:"All",label:f("All","Pulse"),on:!0,disabled:!1}],c?.data?.data?.FeedFilters)){const l=c.data.data.FeedFilters?.pxResults;let u=!0;l&&Array.isArray(l)&&l?.length>0&&(l.forEach((c=>{const l={id:c.pyFeedSourceReference,label:f(c.pyLabel,"Pulse"),disabled:!1,on:"true"===c.pySelected};l.on||(u=!1),d.push(l)})),d.find((c=>"All"===c.id)).on=u)}}if(g&&h.getValue("pulse.messageIDs")){let d=h.getValue("pulse.messageIDs"),p=h.getValue("pulse.messages");d=[...d,...l],p={...p,...u},Object.values(p).forEach((c=>{c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions),c?.pxResults&&Array.isArray(c?.pxResults)&&c.pxResults?.length>0&&c.pxResults.forEach((c=>{c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions)}))})),h.updateState({pulse:{messages:p,messageIDs:d,nextPageFirstEntry:c?.data?.nextPageFirstEntry||"",pageLastEntry:c?.data?.pageLastEntry||"",hideAttachment:c?.data?.hideAttachment||!1}})}else h.updateState({pulse:{messages:u,messageIDs:l,nextPageFirstEntry:c?.data?.nextPageFirstEntry||"",pageLastEntry:c?.data?.pageLastEntry||"",hideAttachment:c?.data?.hideAttachment||!1}});const y=[...new Map(this.mentions.flat()?.map((c=>[c.mentionsID,c]))).values()]?.filter((c=>Object.prototype.hasOwnProperty.call(c,"mentionsType")))?.filter((c=>!c?.mentionsType?.toLowerCase().includes("user")))||[];return{feedFilters:d,caseMentions:y}}return h.reportError(`getFeeds call failed ${c.status}`,c.data),""})).catch((c=>{dm(c)||h.reportError(": Error occurred during ajax call at getFeeds API : ",c.response)}))};postMessage=(c,l,u=[],d=!1,p)=>{const h=JSON.stringify({context:c,parentMessageId:d?c:"",message:l,attachments:u});return im("postFeedMessages",{body:h,headers:Gy},p.getContextName()).then((l=>{if((201===l.status||200===l.status)&&l.data){const h=l?.data;if(d){h.parentMessageID=c;const{pxResults:l,caseMentions:g}=this.buildMessageObject(h,d,p,u.length>0);return p.updateState({pulse:{messages:{[c]:{pxResults:l}}}}),g}const{messages:g,messageIDs:f,caseMentions:m}=this.buildMessageObject(h,d,p,u.length>0);return p.updateState({pulse:{messages:g,messageIDs:f}}),m}return p.reportError(`postMessage call failed with status ${l.status}`,l),""})).catch((c=>{p.reportError(": Error occurred during ajax call at postMessage API : ",c.response)}))};editMessage=({messageID:c,parentMessageID:l,message:u,c11nEnv:d,isReply:p=!1})=>{const h=JSON.stringify({message:u});return im("editFeedMessage",{queryPayload:{messageID:c},body:h,headers:Gy},d.getContextName()).then((c=>{if(200===c?.status&&c?.data){const u=c?.data;if(p){u.parentMessageID=l;const{pxResults:c,caseMentions:h}=this.buildMessageObject(u,p,d,!1);return d.updateState({pulse:{messages:{[l]:{pxResults:c}}}}),h}const{messages:h,caseMentions:g}=this.buildMessageObject(u,p,d,!1);return d.updateState({pulse:{messages:h}}),g}return d.reportError(`editMessage call failed with status ${c.status}`,c),""})).catch((c=>{d.reportError(": Error occurred during ajax call at editMessage API : ",c.response)}))};buildMessageObject=(c,l,u,d=!1)=>{const p={ID:c?.ID||"",tags:c?.tags||[],pyHasAttachment:d,pzInsKey:c?.ID||"",pyMessage:c?.message||"",mentions:c?.mentions||[],postedByUser:c?.postedByUser,pxCreateDateTime:c?.postedTime||"",pxUpdateDateTime:c?.updatedTime||"",parentMessageID:c?.parentMessageID||"",pyIsEdited:"string"==typeof c?.isEdited?"true"===c?.isEdited:c?.isEdited||!1,pyFeed:{pyPostedOn:c?.postedTime||"",pyFeedTitle:c?.postedByUser?.name||"",pyIconType:"user",pyCommentContext:"pzInsKey",pyIconReference:"pi pi-case"},pyContext:"",pxIcon:"globe",pyMessageViewReference:"pzPostDetails"},h=u.getValue("pulse.messages");if(l){let{pxResults:c=[]}=Object.values(h)?.find((c=>c?.ID===p?.parentMessageID))||{};const l=c?.findIndex((c=>c?.pzInsKey===p?.ID));if(-1!==l){const u=[...c];u[l]={...u[l],...p},c=u}else c=[...c,p];return{pxResults:c,messages:{},messageIDs:[],caseMentions:this.getCaseMentions(c)}}const g=u.getValue("pulse.messageIDs");if(g){const c=g.includes(p.ID)?{...h[p.ID],...p}:p,l={...h,[p.ID]:c};return{messages:l,messageIDs:g.includes(p.ID)?g:[p.ID,...g],caseMentions:this.getCaseMentions(Object.values(l))}}};getCaseMentions=c=>{const l=c?.filter((c=>c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0))?.map((c=>c.mentions))?.concat(this.mentions);return[...new Map(l.flat()?.map((c=>[c.mentionsID,c]))).values()]?.filter((c=>Object.prototype.hasOwnProperty.call(c,"mentionsType")))?.filter((c=>!c?.mentionsType?.toLowerCase().includes("user")))||[]};likeMessage=({pulseContext:c,likedBy:l,messageID:u,isReply:d,c11nEnv:p})=>{const h=l?"unlikeFeedMessages":"likeFeedMessages",g=JSON.stringify({ContextClass:c});im(h,{body:g,queryPayload:{pulseContext:c},headers:Gy},p.getContextName()).then((h=>{if(200===h.status)if(d){const d=p.getValue(`pulse.messages.${u}`),h=d?.pxResults&&Array.isArray(d?.pxResults)&&d.pxResults?.length>0&&d.pxResults?.map((u=>{if((u={...u}).pzInsKey===c){let c=0,d=!1;const p=u.pyLikes?u?.pyLikes?.pxLikeCount:0;l?(c=p-1,d=!1):(c=p+1,d=!0),u.pyLikes={pxLikeCount:c,pxIsLiked:d}}return u}));p.updateState({pulse:{messages:{[u]:{pxResults:h}}}})}else{const d={...p.getValue(`pulse.messages.${u}`)},h=d.pyLikes?d.pyLikes.pxLikeCount:0;let g=0,f=!1;l?(g=h-1,f=!1):(g=h+1,f=!0),d.pyLikes={pxLikeCount:g,pxIsLiked:f},p.updateState({pulse:{messages:{[c]:d}}})}else p.reportError(`likeMessage call failed with status ${h.status}`,h)})).catch((c=>{p.reportError(": Error occurred during ajax call at likeMessage API : ",c.response.data)}))};deleteMessage=(c,l,u,d)=>{let p=c;l&&(p=u),im("deleteFeedMessage",{queryPayload:{messageID:p}},d.getContextName()).then((p=>{if(200===p.status)if(l){const l=d.getValue(`pulse.messages.${c}`),p=l?.pxResults&&Array.isArray(l?.pxResults)&&l.pxResults?.length>0&&l.pxResults?.filter((c=>c.pzInsKey!==u));d.updateState({pulse:{messages:{[c]:{pxResults:p}}}})}else{const l=d.getValue("pulse.messageIDs"),u=l&&Array.isArray(l)&&l?.length>0&&l?.filter((l=>l!==c)),p={...d.getValue("pulse.messages")};delete p[c],d.updateState({pulse:{messageIDs:u,messages:p}})}else d.reportError(`deleteMessage call failed with status ${p.status}`,p)})).catch((c=>{d.reportError(": Error occurred during ajax call at deleteMessage API : ",c.response)}))};getLikedUsers=(c,l)=>im("getFeedMessageLikes",{queryPayload:{messageID:c}},l.getContextName()).then((c=>c?.data?.users)).catch((c=>{l.reportError(": Error occurred during ajax call at getLikedUsers API : ",c.response)}));getMentionSuggestions=(c,l)=>{const{pulseContext:u,searchFor:d,mentionsType:p,listSize:h=5}=c,g={pulseContext:u,searchFor:d,mentionsType:p,listSize:h};for(let m=0;m<this.mentionsTagsCancelTokenSource.length;m+=1)this.mentionsTagsCancelTokenSource[m].cancel();const f=um();return this.mentionsTagsCancelTokenSource.push(f),im("getMentionSuggestions",{queryPayload:g,cancelTokenSource:f},l.getContextName()).then((c=>(this.mentionsTagsCancelTokenSource=[],200===c.status&&c.data?c?.data:(l.reportError(`Get mention suggestions call failed ${c.status}`,c.data),[])))).catch((c=>{dm(c)||l.reportError(": Error occurred during ajax call at getMentionSuggestions API : ",c.response.data)}))};getMentionTypes=c=>im("getMentionTypes",{},c.getContextName()).then((c=>c?.data)).catch((l=>{c.reportError(": Error occurred during ajax call at getMentionTypes API : ",l.response.data)}));getTagSuggestions=(c,l)=>{const{searchFor:u,listSize:d=5}=c,p={searchFor:u,listSize:d};for(let g=0;g<this.mentionsTagsCancelTokenSource.length;g+=1)this.mentionsTagsCancelTokenSource[g].cancel();const h=um();return this.mentionsTagsCancelTokenSource.push(h),im("getTagSuggestions",{queryPayload:p,cancelTokenSource:h},l.getContextName()).then((c=>{this.mentionsTagsCancelTokenSource=[];let u=[];return 200===c.status&&c?.data?u=c?.data?.tags&&Array.isArray(c?.data?.tags)&&c.data.tags.length>0&&c.data.tags?.map((c=>`#${c}`)):l.reportError(`Get tag suggestions call failed ${c.status}`,c.data),u})).catch((c=>{dm(c)||l.reportError(": Error occurred during ajax call at getTagSuggestions API : ",c.response.data)}))}},Hy={getTaggedCases:(c,l)=>im("loadView",{queryPayload:{caseID:c,viewID:"pyTaggedCases"}},l.getContextName()).then((c=>c?.data)).catch((c=>{l.reportError(": Error occurred during ajax call at fetchTaggedcases API : ",c.response)})),getTags:(c,l)=>im("getCaseTags",{queryPayload:{caseID:c}},l.getContextName()).then((c=>c?.data?.tagsList)).catch((c=>{l.reportError(": Error occurred during ajax call at fetchTags API : ",c.response)})),postTags:(c,l,u)=>{const d={caseID:c},p=JSON.stringify({tags:l});return im("addTagsToCase",{body:p,queryPayload:d},u.getContextName()).then((c=>c?.data?.results)).catch((c=>{u.reportError(": Error occurred during ajax call at postTags API : ",c.response)}))},removeTag:(c,l,u)=>im("deleteCaseTag",{queryPayload:{caseID:c,tagID:l}},u.getContextName()).catch((c=>{u.reportError(": Error occurred during ajax call at removeTag API : ",c.response)})),getTagsLandingPageURL:c=>Jl.getPageDataAsync("D_pxGetTagsLandingPageURL",c.getContextName(),{},{invalidateCache:!0}).catch((l=>{c.reportError(": Error occurred during ajax call getTagsLandingPageURL API : ",l.response)}))},qy=(c,l)=>{_d(l.getContextName(),c.etag),Cd(l.getContextName(),c.etag)},zy={getParticipants:(c,l)=>im("getAllParticipants",{queryPayload:{caseID:c}},l.getContextName()).then((c=>c?.data?.data.content.pyParticipants)).catch((c=>{l.reportError(": Error occurred during ajax call at getParticipants API : ",c.response)})),getRoleView:(c,l,u)=>im("getParticipantRoleView",{queryPayload:{caseID:c,participant_roleID:l}},u.getContextName()).then((c=>c?.data)).catch((c=>{u.reportError(": Error occurred during ajax call at fetchTaggedcases API : ",c.response)})),getParticipantRoles:(c,l)=>im("getParticipantRoles",{queryPayload:{caseID:c}},l.getContextName()).then((c=>c?.data?.participant_roles)).catch((c=>{l.reportError(": Error occurred during ajax call at getParticipantRoles API : ",c.response)})),getParticipant:(c,l,u)=>im("getParticipant",{queryPayload:{caseID:c,participantID:l}},u.getContextName()).then((c=>c?.data)).catch((c=>{u.reportError(": Error occurred during ajax call at getParticipant API : ",c.response)})),createParticipant:async(c,l,u,d)=>{const p={caseID:c},h={...u,participantRoleID:l},g={"if-match":d.getCaseSummary().headers.etag};return new Promise(((c,l)=>{im("createParticipant",{body:h,queryPayload:p,headers:g},d.getContextName()).then((l=>{qy(l.headers,d),c()})).catch((c=>{d.reportError(": Error occurred during ajax call at createParticipant API : ",c.response),l(c.response)}))}))},updateParticipant:async(c,l,u,d)=>{const p={caseID:c,participantID:l},h={"if-match":d.getCaseSummary().headers.etag};return new Promise(((c,l)=>{im("updateParticipant",{body:u,queryPayload:p,headers:h},d.getContextName()).then((l=>{qy(l.headers,d),c()})).catch((c=>{d.reportError(": Error occurred during ajax call at updateParticipant API : ",c.response),l(c.response)}))}))},deleteParticipant:(c,l,u)=>{const d={caseID:c,participantID:l},p={"if-match":u.getCaseSummary().headers.etag};return new Promise(((c,l)=>{im("deleteParticipant",{queryPayload:d,headers:p},u.getContextName()).then((l=>{qy(l.headers,u),c()})).catch((c=>{u.reportError(": Error occurred during ajax call at deleteParticipant API : ",c.response),l(c.response)}))}))}};function Yy(c=[]){return c.reduce(((c,l)=>(c[l.personalizationID]={name:l.name,personalizationState:JSON.parse(l.personalizationState||"{}")},c)),{})}const Ky="create",Xy="update",Jy="delete";function Qy(c,l,u,d){const p=Ep(l);if(p){switch(c){case Ky:case Xy:{const{markAsDefault:c,...l}=d;Object.entries(l).length>0&&(p.allPersonalizations[u]=l),c&&(p.defaultPersonalization=u);break}case Jy:delete p.allPersonalizations[u],p.defaultPersonalization===u&&(p.defaultPersonalization="");break;default:return null}return p}return null}const Zy={},eI=c=>{const l=Ep(c);if(l)return Array.isArray(l.allPersonalizations)&&(l.allPersonalizations=Yy(l.allPersonalizations)),Promise.resolve(l);const{restApi:u,reqType:d}=eg("getUIListPersonalizations",{listID:c});return rc(u,{method:d,body:{}}).then((c=>{const{data:l}=c;return{allPersonalizations:Yy(l.allPersonalizations),defaultPersonalization:l.defaultPersonalization}}))},tI=(c,l,u)=>{const{restApi:d,reqType:p}=eg("createListPersonalization",{listID:c});return Qy(Ky,c,l,u),rc(d,{method:p,body:{...u,personalizationState:JSON.stringify(u.personalizationState)}}).then((c=>{const u=c.data;return Zy[l]=u,c}))},nI=(c,l,u)=>{const d=Zy[l]||l;Qy(Xy,c,l,u);const{restApi:p,reqType:h}=eg("updateListPersonalization",{listID:c,personalizationID:d})||{};return rc(p,{method:h,body:{...u,personalizationState:JSON.stringify(u.personalizationState)}})},rI=(c,l)=>{const u=Zy[l]||l;Qy(Jy,c,l);const{restApi:d,reqType:p}=eg("deleteListPersonalization",{listID:c,personalizationID:u});return rc(d,{method:p,body:{}}).then((c=>(Zy[l]&&delete Zy[l],c)))},sI=function(c){return c?{createPersonalization:tI.bind(null,c),updatePersonalization:nI.bind(null,c),deletePersonalization:rI.bind(null,c),fetchPersonalizations:eI.bind(null,c)}:{createPersonalization:()=>Promise.resolve(""),updatePersonalization:()=>Promise.resolve(),deletePersonalization:()=>Promise.resolve(),fetchPersonalizations:()=>Promise.resolve({})}},aI="getDataObjects",oI="getInsightByID",iI=["LocalList","RemoteList","PromptList","DataPage"];let cI=null;const lI={},uI=c=>Bl.getAppCacheKey(`PrimaryFields-${c}`);function dI(c){let l;return c[1].category?l=c[1].category:c[0].indexOf(":")>0&&(l=c[0].substring(0,c[0].indexOf(":"))),l}const pI={getDataObjects:function(){const c=Bl.getAppCacheKey(aI);if(window.sessionStorage.getItem(c))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(c)));const{restApi:l,reqType:u}=eg(aI,{}),d=rc(l,{method:u});return d.then((l=>{window.sessionStorage.setItem(c,JSON.stringify(l))})),d},getDataPageObjects:function(c=!0){if(cI)return cI;const l=Bl.getAppCacheKey("getDataPageObjects");if(c&&window.sessionStorage.getItem(l))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(l)));const{restApi:u,reqType:d}=eg("getDataPages",{datapageRequestType:"explorable"});return cI=rc(u,{method:d,datapageRequestType:"explorable"}),cI.then((c=>{cI=null,window.sessionStorage.setItem(l,JSON.stringify(c))})),cI},getDataViewMetadata:function(c,l,u){if(!l){const{sourceMetadata:l,sourceFields:u}=function(c){const l=Ip(c);if(l&&l.classID){let c=_p(l.classID);const u=new Set(l.primaryFields),d=l.rdFields?.fields?.filter((c=>c.indexOf(".")>0));if(d&&!Xp.isEmpty(d)){const u=d.reduce(((c,u)=>{const d=dp(u,l.classID);return c[u]=d,c}),{});c={...c,...u}}if(c&&Object.keys(c).length>0){const d=new Set(Array.isArray(l?.rdFields)?l?.rdFields:l?.rdFields?.fields),p=d.size>0||u.size>0;for(const l in c)c[l].type.startsWith("Page")||p&&!(d.size>0&&d.has(l)||u.size>0&&u.has(l))?delete c[l]:c[l]?.datasource&&iI.includes(c[l].datasource.tableType)&&(c[l].fieldType="Picklist");return{sourceFields:c,sourceMetadata:l}}}return{}}(c);if(l&&u&&Object.keys(u).length>0){const c={data:{...l,fields:Object.entries(u).map((c=>({...c[1],fieldID:c[0],fieldType:c[1].fieldType?c[1].fieldType:c[1].isUserReference?"User reference":void 0,category:dI(c),classID:c[1].associationClassID?c[1].associationClassID:c[1].classID})))}};return Promise.resolve(c)}}const d={dataSource:c,columns:[],parameters:{},associationFilter:u,matchPosition:"",ignoreCase:!1};return au.init(d).then((({dataSourceMetaData:c})=>Promise.resolve({data:c})))},getDefaultColumns:function(c){const l=Bl.getAppCacheKey(`DefaultColumns_${Object.values(c).join("_")}`);if(window.sessionStorage.getItem(l))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(l)));const{restApi:u,reqType:d}=eg("getListData",{dataViewName:"D_pzGetDefaultColumns"}),p=rc(u,{method:d,body:{dataViewParameters:c}});return p.then((c=>{window.sessionStorage.setItem(l,JSON.stringify(c))})),p},getFieldsForDataSource:function(c,l,u){if(!l){const l=Ip(c),u=Array.isArray(l?.rdFields)?l?.rdFields:l?.rdFields?.fields;return u?Promise.resolve({data:{data:u.map((c=>({pyFieldName:c})))}}):Promise.resolve({data:{data:[]}})}const d=Bl.getAppCacheKey(`RDColumns-${c}`);if(window.sessionStorage.getItem(d))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(d)));const p=Bl.getData("D_pxFieldsForDataSource",{dataViewParameters:{DataPageName:c}},u);return p.then((c=>{window.sessionStorage.setItem(d,JSON.stringify(c))})),p},getPrimaryFieldsForDataSource:function(c="",l=""){const u=Bl.getAppCacheKey(`PFColumns-${c}${l}`);if(window.sessionStorage.getItem(u))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(u)));const d=Bl.getData("D_pxGetInitialFieldsForDataSource",{dataViewParameters:{DataPageName:c,ClassName:l}});return d.then((c=>{window.sessionStorage.setItem(u,JSON.stringify(c))})),d},getPrimaryFieldsForInsights:async function(c,l,u){const{allClasses:d,promisesToAwait:p,classesToFetch:h,isTopLevelClassPresent:g,joinedClassesToFetch:f}=function(c,l){const u=[],d=[];let p=!1;const h=[],g=[];return c&&g.push(c),l&&l.length>0&&g.push(...l),g.forEach((l=>{const g=uI(l);window.sessionStorage.getItem(g)||(lI[l]?d.push(lI[l]):(u.push(l),l===c?p=!0:h.push(l)))})),{allClasses:g,promisesToAwait:d,classesToFetch:u,isTopLevelClassPresent:p,joinedClassesToFetch:h}}(c,u);return h.length&&p.push((async(c,l,u,d)=>{const p=Bl.getData("D_pxGetPrimaryFieldsForInsights",{dataViewParameters:{...l&&{topLevelClassID:l},...d&&{joinedClassIDs:d.join(",")},...u&&{topLevelDataPageID:u}}}).then((l=>{const u=l.data?.data||[],d={};c.forEach((c=>{d[c]=[]})),u.forEach((({classID:c,pyFieldName:l})=>{d[c].push(l)})),Object.entries(d).forEach((([c,l])=>{const u=uI(c);window.sessionStorage.setItem(u,JSON.stringify(l))}))})).finally((()=>{c.forEach((c=>{delete lI[c]}))}));return c.forEach((c=>{lI[c]=p})),p})(h,g?c:void 0,g?l:void 0,f.length>0?f:void 0)),Promise.allSettled(p).then((()=>{const c={};return d.forEach((l=>{const u=uI(l);if(window.sessionStorage.getItem(u))try{c[l]=JSON.parse(window.sessionStorage.getItem(u))}catch{}})),{data:c}}))},getInsightIDs:function(){const{restApi:c,reqType:l}=eg("getInsightIDs");return rc(c,{method:l})},getInsightByID:function(c){const l=Ap(c);if(l)return Promise.resolve({data:{pyInsights:[l]}});const u={insightID:c},{restApi:d,reqType:p}=eg(oI,u);return rc(d,{method:p})},getInsightsByID:function(c){const l={insightID:c.join(",")},{restApi:u,reqType:d}=eg(oI,l);return rc(u,{method:d})},createInsight:function(c){const{restApi:l,reqType:u}=eg("createInsight");return rc(l,{method:u,body:JSON.stringify(c),headers:{"Content-Type":"application/json"}})},updateInsight:function(c,l){const u={insightID:c},{restApi:d,reqType:p}=eg("updateInsight",u),h=l.UpdateDateTime;return rc(d,{method:p,body:JSON.stringify(l),headers:{"if-match":h,"Content-Type":"application/json"}})},deleteInsight:function(c){const l={insightID:c},{restApi:u,reqType:d}=eg("deleteInsight",l);return rc(u,{method:d})},exportToExcel:function(c){const{restApi:l,reqType:u}=eg("exportToExcel");return rc(l,{method:u,body:JSON.stringify(c)})},exportToCSV:function(c){const{restApi:l,reqType:u}=eg("exportToCSV");return rc(l,{method:u,body:JSON.stringify(c)})},scheduleInsight:(c,l)=>{const u={insightID:c},{restApi:d,reqType:p}=eg("scheduleInsight",u);return rc(d,{method:p,body:JSON.stringify(l)})},updateScheduledInsight:(c,l,u)=>{const d={insightID:c,scheduleID:l},{restApi:p,reqType:h}=eg("updateScheduledInsight",d);return rc(p,{method:h,body:JSON.stringify(u)})},deleteScheduledInsight:(c,l)=>{const u={insightID:c,scheduleID:l},{restApi:d,reqType:p}=eg("deleteScheduledInsight",u);return rc(d,{method:p})},translateStrings:function(c){const{restApi:l,reqType:u}=eg("translateStrings");return rc(l,{method:u,body:JSON.stringify(c)})}},hI=new class{addRoutes=c=>{return l=c,void Vd.addRoutes(l);var l}},gI=class{static registerModule(c,l,u){u[c]=()=>l}},fI=class{static getCaseEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.CASE_EVENTS);static getDataEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.DATA_EVENTS);static getTransientEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.EVENT_TRANSIENT_ITEMS);static getBootstrapShellEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.BOOTSTRAP_SHELL_EVENTS)},mI={getResolvedSemanticURL:(c,l,u)=>Vd.getResolvedSemanticURL(c,l,u),getActions:()=>({ACTION_OPENWORKBYHANDLE:ze,ACTION_SHOWDATA:We,ACTION_SHOWVIEW:Ge}),updateSemanticURLAndDocumentTitle:c=>Vd.updateSemanticURLAndDocumentTitle(c)},yI=new class{constructor(){this.genericFailedMessage="Failed to display content. Contact the application administrator."}getGenericFailedMessage(){return this.genericFailedMessage}setGenericFailedMessage(c){this.genericFailedMessage=c}},II={setTokens:c=>{lc({tokenInfo:c}),cc(c?.csrf&&!c?.access_token?{pzCTkn:c?.csrf}:{Authorization:`${c?.token_type} ${c?.access_token}`}),setTimeout((()=>zr.publish("updateSession",{updateStatus:"success"})),0)},revokeTokens:async()=>(async()=>new Promise((async(c,l)=>{const u=pc();if(!u?.tokenInfo)return void l(new Error("Missing token information."));const{access_token:d,refresh_token:p=null}=u.tokenInfo,{revoke:h}=u.endPoints,{client_id:g,client_secret:f,secureCookie:m}=u,y={"content-type":"application/x-www-form-urlencoded"};f&&(y.authorization=`Basic ${window.btoa(`${g}:${f}`)}`);const I=new URLSearchParams;f||I.append("client_id",g),m&&I.append("send_token_as_cookie","true");const E=p?"refresh_token":"access_token",A="access_token"===E?d:p;!m&&A&&I.append("token",A),I.append("token_type_hint",E),await rc(h,{method:"POST",headers:new Headers(y),credentials:m?"include":"omit",body:I.toString(),withoutDefaultHeaders:!0}),cc({Authorization:null}),lc({tokenInfo:null}),c()})))(),getAuthInstance:c=>ji.init(c),setAuthorizationHeader:c=>{cc({Authorization:c}),setTimeout((()=>zr.publish("updateSession",{updateStatus:"success"})),0)}},EI=new class{getDebouncedSubject(c){return(new Rg).pipe(ay(c))}};Lr.register("email",(c=>{let l=null;return c&&!function(c){const l="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+",u="\\x5c[\\x00-\\x7f]",d=`(${l}|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|${u})*\\x5d)`,p=`(${l}|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|${u})*\\x22)`;return new RegExp(`^${p}(\\x2e${p})*\\x40${d}(\\x2e${d})*$`).test(c)}(c)&&(l=Bd.getLocaleValue("Enter a valid email address","Messages")),l})),Lr.register("integer",(c=>{let l=null;return c&&!/^(-)?\d+$/.test(c)&&(l=Bd.getLocaleValue("Invalid number","Messages")),l})),Lr.register("required",(c=>Array.isArray(c)&&0===c.length||null==c||""===c?Bd.getLocaleValue("Cannot be blank","Messages"):null)),Lr.register("url",(c=>{let l=null;return c&&!function(c){let l;try{l=new URL(c)}catch{return!1}return"http:"===l.protocol||"https:"===l.protocol||"ftp:"===l.protocol}(c)&&(l=Bd.getLocaleValue("Enter a valid url","Messages")),l})),setTimeout((()=>{s.e(531).then(s.bind(s,531)).then((({isPossiblePhoneNumber:c})=>{Lr.register("phone",(l=>{let u=null;l&&!/^\+?\d+$/.test(l)&&(u=Bd.getLocaleValue("Enter a valid phone number","Messages"));const d=l?.startsWith("+");return l&&d&&(c(l)||(u=Bd.getLocaleValue("Enter a valid phone number","Messages"))),u}))}))}),W.PRIORITY.TRIVIAL);const AI=(c,l)=>{switch(l){case"invalid":return Bd.getLocaleValue(`Incorrect ${c}`,"Messages");case"incomplete":return Bd.getLocaleValue(`Incomplete ${c}`,"Messages");default:return null}};Lr.register("datetime",(c=>AI("DateTime",c))),Lr.register("date",(c=>AI("Date",c))),Lr.register("time",(c=>AI("Time",c))),Lr.register("attachment",((c,l)=>(kp(`.attachmentsList${l.pageReference?.replace("caseInfo.content","")}${l.property}`,"context_data",l.context)||[]).some((c=>c.props?.error))?Bd.getLocaleValue("Error with one or more files"):null));const _I={createConversation:(c,l,u,d=[])=>{for(const f of d)f?.cancel&&"function"==typeof f.cancel&&f.cancel();const p=um();d.push(p);const h={assistantID:l},g=JSON.stringify({contextID:c});return im("createConversation",{body:g,cancelTokenSource:p,queryPayload:h},u).then((c=>(d.pop(),c)))},sendMessage:(c,l,u,d)=>{const p={assistantID:c,conversationID:l},h=JSON.stringify({request:u});return im("sendMessage",{body:h,queryPayload:p},d)}},CI=class{caseTypeAccessMap=new Map;constructor(){this.caseTypeAccessMap=kd.getCaseTypeList().reduce(((c,l)=>(c.set(l.pyWorkTypeImplementationClassName,l.hasCreateAccess??!0),c)),new Map)}hasCreateAccess(c){return this.caseTypeAccessMap.get(c)}static getInstance(){return this.instance||(this.instance=new this),this.instance}};class pA{constructor(){pA.behaviorOverrides={}}static behaviorOverrides={};getPCoreVersion=()=>"24.2.1";onPCoreReady=c=>by.onPCoreReady(c);onPCoreCleanup=c=>by.onPCoreCleanup(c);getComponentsRegistry=()=>by.getComponentsRegistry();checkIfSemanticURL=()=>by.checkIfSemanticURL();isValidSemanticURL=()=>(()=>{if(dg()){const c=Vd.processUrl(Ud(),!0);return!!Vd._getMatchedRouteInRoutingTable(c)}return!1})();getRoutingUtils=()=>hI;getViewResources=()=>I;configureForBrowserBookmark=c=>by.configureForBrowserBookmark(c);getStore=()=>Lp();resetStore=()=>Kp();getMessageManager=()=>ar;getCoexistenceManager=()=>Py;getStoreValue=(c,l,u)=>kp(c,l,u);getContainerUtils=()=>h;getAnnotationUtils=()=>el;getFieldUtils=()=>zn;getFieldDefaultUtils=()=>Mr;getAssetLoader=()=>Vr;getAttachmentUtils=()=>Qd;getViewRuleApi=()=>Ly;getFeedUtils=()=>Wy;getTagUtils=()=>Hy;getGenAIAssistantUtils=()=>_I;getStakeholderUtils=()=>zy;getUserApi=()=>ky;getCaseFollowerApi=()=>Fy;getCaseUtils=()=>hc;getStateUtils=()=>Eu;getRelatedCasesApi=()=>jy;getPersonalizationUtils=sI;getDataApi=()=>au;getDataApiUtils=()=>Bl;getAnalyticsUtils=()=>pI;getLocaleUtils=()=>Bd;registerLocaleManager=c=>{const l=this.getLocaleUtils();Object.keys(c).forEach((u=>{l[u]=c[u]}))};setBehaviorOverrides=c=>{pA.behaviorOverrides=c};setBehaviorOverride=(c,l)=>{pA.behaviorOverrides[c]=l};getBehaviorOverrides=()=>pA.behaviorOverrides;getBehaviorOverride=c=>pA.behaviorOverrides[c];getAsynchronousUtils=()=>EI;createPConnect=c=>Nu(c);getPubSubUtils=()=>zr;registerComponentCreator=c=>{!function(c){Cu=c}(c)};getConstants=()=>Object.freeze(G);getEvents=()=>fI;getRestClient=()=>y;getMashupApi=()=>Dy;getEnvironmentInfo=()=>kd;getRuntimeParamsAPI=()=>Ry;getSemanticUrlUtils=()=>mI;getRemoteCaseUtils=()=>q;getNavigationUtils=()=>Ty;registerModule=(c,l)=>gI.registerModule(c,l,this);getErrorHandler=()=>yI;getFormUtils=()=>Fc;getMessagingServiceManager=()=>Kl;getMetadataUtils=()=>g;getDataPageUtils=()=>Jl;getDataTypeUtils=()=>Tl;getCascadeManager=()=>vp;isDeepEqual=(c,l)=>A()(c,l);getAuthUtils=()=>II;getDebugger=()=>Hi;getDeferLoadManager=()=>kl;getExpressionEngine=()=>u;getActionsSequencer=()=>cu;getRefreshManager=()=>nl;getInitialiser=()=>My;getAllStateMachines=(c,l,u)=>l&&u?jc.getAllStateMachines(c,l,u):jc.getAllStateMachinesByContext(c);getBootstrapUtils=()=>by;getContextTreeManager=()=>Rn;getPerformanceManager=()=>Fi;getAccessPrivilege=()=>CI.getInstance()}const SI=new pA;s.g.PCore=SI;const TI=SI})();var o=a.Z;export{o as default};