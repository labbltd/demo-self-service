"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[725],{8725:(e,a,n)=>{n.r(a),n.d(a,{default:()=>t});var l=n(4041),i=n(1085);function t(e){var a;const[n,t]=(0,l.useState)(!1),[c,s]=(0,l.useState)([]),[d,r]=(0,l.useState)("");var o;if(e.container.config.readOnly)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("dt",{children:e.container.config.label}),(0,i.jsx)("dd",{children:null!=(o=e.container.config.value)?o:"--"})]});return(0,i.jsxs)("fieldset",{children:[(0,i.jsxs)("div",{className:"selectize-control single",children:[(0,i.jsx)("label",{children:e.container.config.label}),(0,i.jsx)("div",{className:"selectize-input",onClick:async()=>{!async function(){if(0===c.length){var a;const t=(null==(a=e.container.config.fieldMetadata)||null==(a=a.datasource)?void 0:a.name)||e.container.config.datasource;if(t){var n,l;console.log(e.container.config.fieldMetadata);const a=((null==(n=e.container.config.fieldMetadata)||null==(n=n.datasource)?void 0:n.parameters)||[]).reduce(((e,a)=>Object.assign({},e,{[a.name]:a.value})),{}),o=await window.PCore.getDataApiUtils().getData(t,{dataViewParameters:a});if(null!=(l=o.data)&&l.data){var i;const a=e.container.config.columns;if(a){const e=o.data.data.map((e=>({label:e[a.find((e=>"true"===e.display)).value.replace(".","")],value:e[a.find((e=>"true"===e.key)).value.replace(".","")]})));s(e)}else{const e=o.data.data.map((e=>({label:e.pyLocalizedValue,value:e.pyFieldValue})));s(e)}const n=null==(i=c.find((e=>e.value===d)))?void 0:i.label;n&&r(n)}}}}(),t(!n)},children:(0,i.jsx)("div",{children:null==(a=c.find((a=>a.value===e.container.config.value)))?void 0:a.label})}),n&&(0,i.jsx)("div",{className:"selectize-dropdown",children:(0,i.jsx)("div",{className:"selectize-dropdown-content",children:c.map((a=>(0,i.jsx)("div",{"data-selectable":!0,onClick:()=>{e.container.updateFieldValue(a.value),e.container.triggerFieldChange(a.value),t(!1)},children:a.label},a.value)))})})]}),e.container.config.validatemessage&&(0,i.jsx)("span",{"data-errorfield-id":"phonenumber",className:"error-message",children:e.container.config.validatemessage})]})}}}]);