var e,t,n={933:(c,l,u)=>{var d=u(515);Object.defineProperty(l,"reduxBatch",{enumerable:!0,get:function(){return d.reduxBatch}})},515:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.reduxBatch=function(c){var l=[],u=void 0;function d(){l===u&&(l=l.slice())}function p(c){if("function"!=typeof c)throw new Error("Invalid listener, expected a function");var u=!0;return d(),l.push(c),function(){u&&(d(),l.splice(l.indexOf(c),1),u=!1)}}function h(){for(var c=l,d=0;d<c.length;++d)u=c,c[d]()}return function(){var l=c.apply(void 0,arguments),u=!1,d=!1;function g(c){return Array.isArray(c)?c.map((function(c){return g(c)})):l.dispatch(c)}return l.subscribe((function(){d?u=!0:h()})),Object.assign({},l,{dispatch:function(c){var l=d;l||(u=!1,d=!0);var p=g(c),f=u&&!l;return l||(u=!1,d=!1),f&&h(),p},subscribe:p})}}},923:(c,l,u)=>{c.exports=u(933)},924:(c,l,u)=>{var d="__lodash_hash_undefined__",p=/^\[object .+?Constructor\]$/,h="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,g="object"==typeof self&&self&&self.Object===Object&&self,f=h||g||Function("return this")();function m(c,l){return!(!c||!c.length)&&function(c,l){if(l!=l)return function(c,l){for(var u=c.length,d=-1;++d<u;)if(l(c[d],d,c))return d;return-1}(c,E);for(var u=-1,d=c.length;++u<d;)if(c[u]===l)return u;return-1}(c,l)>-1}function y(c,l,u){for(var d=-1,p=c?c.length:0;++d<p;)if(u(l,c[d]))return!0;return!1}function I(c,l){for(var u=-1,d=l.length,p=c.length;++u<d;)c[p+u]=l[u];return c}function E(c){return c!=c}function A(c,l){return c.has(l)}var _,C=Array.prototype,S=Function.prototype,T=Object.prototype,N=f["__core-js_shared__"],P=(_=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",b=S.toString,D=T.hasOwnProperty,R=T.toString,O=RegExp("^"+b.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=f.Symbol,x=T.propertyIsEnumerable,w=C.splice,M=v?v.isConcatSpreadable:void 0,L=Math.max,U=q(f,"Map"),F=q(Object,"create");function j(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function V(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function k(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function B(c){var l=-1,u=c?c.length:0;for(this.__data__=new k;++l<u;)this.add(c[l])}function G(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function W(c,l,u,d,p){var h=-1,g=c.length;for(u||(u=z),p||(p=[]);++h<g;){var f=c[h];l>0&&u(f)?l>1?W(f,l-1,u,d,p):I(p,f):d||(p[p.length]=f)}return p}function H(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function q(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!ee(c)||P&&P in c)return!1;var l=Z(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?O:p;return l.test(function(c){if(null!=c){try{return b.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function z(c){return J(c)||function(c){return Q(c)&&D.call(c,"callee")&&(!x.call(c,"callee")||"[object Arguments]"==R.call(c))}(c)||!!(M&&c&&c[M])}j.prototype.clear=function(){this.__data__=F?F(null):{}},j.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},j.prototype.get=function(c){var l=this.__data__;if(F){var u=l[c];return u===d?void 0:u}return D.call(l,c)?l[c]:void 0},j.prototype.has=function(c){var l=this.__data__;return F?void 0!==l[c]:D.call(l,c)},j.prototype.set=function(c,l){return this.__data__[c]=F&&void 0===l?d:l,this},V.prototype.clear=function(){this.__data__=[]},V.prototype.delete=function(c){var l=this.__data__,u=G(l,c);return!(u<0||(u==l.length-1?l.pop():w.call(l,u,1),0))},V.prototype.get=function(c){var l=this.__data__,u=G(l,c);return u<0?void 0:l[u][1]},V.prototype.has=function(c){return G(this.__data__,c)>-1},V.prototype.set=function(c,l){var u=this.__data__,d=G(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},k.prototype.clear=function(){this.__data__={hash:new j,map:new(U||V),string:new j}},k.prototype.delete=function(c){return H(this,c).delete(c)},k.prototype.get=function(c){return H(this,c).get(c)},k.prototype.has=function(c){return H(this,c).has(c)},k.prototype.set=function(c,l){return H(this,c).set(c,l),this},B.prototype.add=B.prototype.push=function(c){return this.__data__.set(c,d),this},B.prototype.has=function(c){return this.__data__.has(c)};var Y,K,X=(Y=function(c,l){return Q(c)?function(c,l,u,d){var p,h=-1,g=m,f=!0,I=c.length,E=[],_=l.length;if(!I)return E;u&&(l=function(c,l){for(var u=-1,d=c?c.length:0,p=Array(d);++u<d;)p[u]=l(c[u],u,c);return p}(l,(p=u,function(c){return p(c)}))),d?(g=y,f=!1):l.length>=200&&(g=A,f=!1,l=new B(l));e:for(;++h<I;){var C=c[h],S=u?u(C):C;if(C=d||0!==C?C:0,f&&S==S){for(var T=_;T--;)if(l[T]===S)continue e;E.push(C)}else g(l,S,d)||E.push(C)}return E}(c,W(l,1,Q,!0)):[]},K=L(void 0===K?Y.length-1:K,0),function(){for(var c=arguments,l=-1,u=L(c.length-K,0),d=Array(u);++l<u;)d[l]=c[K+l];l=-1;for(var p=Array(K+1);++l<K;)p[l]=c[l];return p[K]=d,function(c,l,u){switch(u.length){case 0:return c.call(l);case 1:return c.call(l,u[0]);case 2:return c.call(l,u[0],u[1]);case 3:return c.call(l,u[0],u[1],u[2])}return c.apply(l,u)}(Y,this,p)}),J=Array.isArray;function Q(c){return function(c){return!!c&&"object"==typeof c}(c)&&function(c){return null!=c&&function(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991}(c.length)&&!Z(c)}(c)}function Z(c){var l=ee(c)?R.call(c):"";return"[object Function]"==l||"[object GeneratorFunction]"==l}function ee(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}c.exports=X},174:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,m=/^\./,y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,A="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,_="object"==typeof self&&self&&self.Object===Object&&self,C=A||_||Function("return this")(),S=Array.prototype,T=Function.prototype,N=Object.prototype,P=C["__core-js_shared__"],b=(d=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",D=T.toString,R=N.hasOwnProperty,O=N.toString,v=RegExp("^"+D.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=C.Symbol,w=S.splice,M=W(C,"Map"),L=W(Object,"create"),U=x?x.prototype:void 0,F=U?U.toString:void 0;function j(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function V(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function k(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function B(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function G(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function W(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!K(c)||b&&b in c)return!1;var l=function(c){var l=K(c)?O.call(c):"";return"[object Function]"==l||"[object GeneratorFunction]"==l}(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?v:E;return l.test(function(c){if(null!=c){try{return D.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}j.prototype.clear=function(){this.__data__=L?L(null):{}},j.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},j.prototype.get=function(c){var l=this.__data__;if(L){var u=l[c];return u===p?void 0:u}return R.call(l,c)?l[c]:void 0},j.prototype.has=function(c){var l=this.__data__;return L?void 0!==l[c]:R.call(l,c)},j.prototype.set=function(c,l){return this.__data__[c]=L&&void 0===l?p:l,this},V.prototype.clear=function(){this.__data__=[]},V.prototype.delete=function(c){var l=this.__data__,u=B(l,c);return!(u<0||(u==l.length-1?l.pop():w.call(l,u,1),0))},V.prototype.get=function(c){var l=this.__data__,u=B(l,c);return u<0?void 0:l[u][1]},V.prototype.has=function(c){return B(this.__data__,c)>-1},V.prototype.set=function(c,l){var u=this.__data__,d=B(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},k.prototype.clear=function(){this.__data__={hash:new j,map:new(M||V),string:new j}},k.prototype.delete=function(c){return G(this,c).delete(c)},k.prototype.get=function(c){return G(this,c).get(c)},k.prototype.has=function(c){return G(this,c).has(c)},k.prototype.set=function(c,l){return G(this,c).set(c,l),this};var H=z((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(X(c))return F?F.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return m.test(c)&&u.push(""),c.replace(y,(function(c,l,d,p){u.push(d?p.replace(I,"$1"):l||c)})),u}));function q(c){if("string"==typeof c||X(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function z(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(z.Cache||k),u}z.Cache=k;var Y=Array.isArray;function K(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function X(c){return"symbol"==typeof c||function(c){return!!c&&"object"==typeof c}(c)&&"[object Symbol]"==O.call(c)}c.exports=function(c,l,u){var d=null==c?void 0:function(c,l){var u;l=function(c,l){if(Y(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!X(c))||f.test(c)||!g.test(c)||null!=l&&c in Object(l)}(l,c)?[l]:Y(u=l)?u:H(u);for(var d=0,p=l.length;null!=c&&d<p;)c=c[q(l[d++])];return d&&d==p?c:void 0}(c,l);return void 0===d?u:d}},207:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g=9007199254740991,f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/,y=/^\./,I=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/\\(\\)?/g,A=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,C="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,S="object"==typeof self&&self&&self.Object===Object&&self,T=C||S||Function("return this")(),N=Array.prototype,P=Function.prototype,b=Object.prototype,D=T["__core-js_shared__"],R=(d=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",O=P.toString,v=b.hasOwnProperty,x=b.toString,w=RegExp("^"+O.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=T.Symbol,L=b.propertyIsEnumerable,U=N.splice,F=Y(T,"Map"),j=Y(Object,"create"),V=M?M.prototype:void 0,k=V?V.toString:void 0;function B(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function G(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function W(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function H(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function q(c,l){return null!=c&&v.call(c,l)}function z(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function Y(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!te(c)||R&&R in c)return!1;var l=Z(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?w:A;return l.test(function(c){if(null!=c){try{return O.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}B.prototype.clear=function(){this.__data__=j?j(null):{}},B.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},B.prototype.get=function(c){var l=this.__data__;if(j){var u=l[c];return u===p?void 0:u}return v.call(l,c)?l[c]:void 0},B.prototype.has=function(c){var l=this.__data__;return j?void 0!==l[c]:v.call(l,c)},B.prototype.set=function(c,l){return this.__data__[c]=j&&void 0===l?p:l,this},G.prototype.clear=function(){this.__data__=[]},G.prototype.delete=function(c){var l=this.__data__,u=H(l,c);return!(u<0||(u==l.length-1?l.pop():U.call(l,u,1),0))},G.prototype.get=function(c){var l=this.__data__,u=H(l,c);return u<0?void 0:l[u][1]},G.prototype.has=function(c){return H(this.__data__,c)>-1},G.prototype.set=function(c,l){var u=this.__data__,d=H(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},W.prototype.clear=function(){this.__data__={hash:new B,map:new(F||G),string:new B}},W.prototype.delete=function(c){return z(this,c).delete(c)},W.prototype.get=function(c){return z(this,c).get(c)},W.prototype.has=function(c){return z(this,c).has(c)},W.prototype.set=function(c,l){return z(this,c).set(c,l),this};var K=J((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(re(c))return k?k.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return y.test(c)&&u.push(""),c.replace(I,(function(c,l,d,p){u.push(d?p.replace(E,"$1"):l||c)})),u}));function X(c){if("string"==typeof c||re(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function J(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(J.Cache||W),u}J.Cache=W;var Q=Array.isArray;function Z(c){var l=te(c)?x.call(c):"";return"[object Function]"==l||"[object GeneratorFunction]"==l}function ee(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=g}function te(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function ne(c){return!!c&&"object"==typeof c}function re(c){return"symbol"==typeof c||ne(c)&&"[object Symbol]"==x.call(c)}c.exports=function(c,l){return null!=c&&function(c,l,u){var d;l=function(c,l){if(Q(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!re(c))||m.test(c)||!f.test(c)||null!=l&&c in Object(l)}(l,c)?[l]:Q(d=l)?d:K(d);for(var p,h=-1,y=l.length;++h<y;){var I=X(l[h]);if(!(p=null!=c&&u(c,I)))break;c=c[I]}return p||!!(y=c?c.length:0)&&ee(y)&&function(c,l){return!!(l=l??g)&&("number"==typeof c||_.test(c))&&c>-1&&c%1==0&&c<l}(I,y)&&(Q(c)||function(c){return function(c){return ne(c)&&function(c){return null!=c&&ee(c.length)&&!Z(c)}(c)}(c)&&v.call(c,"callee")&&(!L.call(c,"callee")||"[object Arguments]"==x.call(c))}(c))}(c,l,q)}},828:(c,l,u)=>{c=u.nmd(c);var d,p,h,g="[object Map]",f="[object Promise]",m="[object Set]",y="[object WeakMap]",I="[object DataView]",E=/^\[object .+?Constructor\]$/,A="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,_="object"==typeof self&&self&&self.Object===Object&&self,C=A||_||Function("return this")(),S=l&&!l.nodeType&&l,T=S&&c&&!c.nodeType&&c,N=T&&T.exports===S,P=Function.prototype,b=Object.prototype,D=C["__core-js_shared__"],R=(d=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",O=P.toString,v=b.hasOwnProperty,x=b.toString,w=RegExp("^"+O.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=N?C.Buffer:void 0,L=b.propertyIsEnumerable,U=M?M.isBuffer:void 0,F=(p=Object.keys,h=Object,function(c){return p(h(c))}),j=X(C,"DataView"),V=X(C,"Map"),k=X(C,"Promise"),B=X(C,"Set"),G=X(C,"WeakMap"),W=!L.call({valueOf:1},"valueOf"),H=Q(j),q=Q(V),z=Q(k),Y=Q(B),K=Q(G);function X(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!re(c)||function(c){return!!R&&R in c}(c))return!1;var l=ne(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?w:E;return l.test(Q(c))}(u)?u:void 0}var J=function(c){return x.call(c)};function Q(c){if(null!=c){try{return O.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(j&&J(new j(new ArrayBuffer(1)))!=I||V&&J(new V)!=g||k&&J(k.resolve())!=f||B&&J(new B)!=m||G&&J(new G)!=y)&&(J=function(c){var l=x.call(c),u="[object Object]"==l?c.constructor:void 0,d=u?Q(u):void 0;if(d)switch(d){case H:return I;case q:return g;case z:return f;case Y:return m;case K:return y}return l});var Z=Array.isArray;function ee(c){return null!=c&&function(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=9007199254740991}(c.length)&&!ne(c)}var te=U||function(){return!1};function ne(c){var l=re(c)?x.call(c):"";return"[object Function]"==l||"[object GeneratorFunction]"==l}function re(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}c.exports=function(c){if(ee(c)&&(Z(c)||"string"==typeof c||"function"==typeof c.splice||te(c)||function(c){return function(c){return function(c){return!!c&&"object"==typeof c}(c)&&ee(c)}(c)&&v.call(c,"callee")&&(!L.call(c,"callee")||"[object Arguments]"==x.call(c))}(c)))return!c.length;var l=J(c);if(l==g||l==m)return!c.size;if(W||function(c){var l=c&&c.constructor;return c===("function"==typeof l&&l.prototype||b)}(c))return!F(c).length;for(var u in c)if(v.call(c,u))return!1;return!0}},722:(c,l,u)=>{c=u.nmd(c);var d="__lodash_hash_undefined__",p=9007199254740991,h="[object Arguments]",g="[object Array]",f="[object Boolean]",m="[object Date]",y="[object Error]",I="[object Function]",E="[object Map]",A="[object Number]",_="[object Object]",C="[object Promise]",S="[object RegExp]",T="[object Set]",N="[object String]",P="[object WeakMap]",b="[object ArrayBuffer]",D="[object DataView]",R=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[h]=v[g]=v[b]=v[f]=v[D]=v[m]=v[y]=v[I]=v[E]=v[A]=v[_]=v[S]=v[T]=v[N]=v[P]=!1;var x="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,w="object"==typeof self&&self&&self.Object===Object&&self,M=x||w||Function("return this")(),L=l&&!l.nodeType&&l,U=L&&c&&!c.nodeType&&c,F=U&&U.exports===L,j=F&&x.process,V=function(){try{return j&&j.binding&&j.binding("util")}catch(c){}}(),k=V&&V.isTypedArray;function B(c,l){for(var u=-1,d=null==c?0:c.length;++u<d;)if(l(c[u],u,c))return!0;return!1}function G(c){var l=-1,u=Array(c.size);return c.forEach((function(c,d){u[++l]=[d,c]})),u}function W(c){var l=-1,u=Array(c.size);return c.forEach((function(c){u[++l]=c})),u}var H,q,z,Y=Array.prototype,K=Function.prototype,X=Object.prototype,J=M["__core-js_shared__"],Q=K.toString,Z=X.hasOwnProperty,ee=(H=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",te=X.toString,ne=RegExp("^"+Q.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=F?M.Buffer:void 0,se=M.Symbol,ae=M.Uint8Array,oe=X.propertyIsEnumerable,ie=Y.splice,ce=se?se.toStringTag:void 0,le=Object.getOwnPropertySymbols,ue=re?re.isBuffer:void 0,de=(q=Object.keys,z=Object,function(c){return q(z(c))}),pe=Fe(M,"DataView"),he=Fe(M,"Map"),ge=Fe(M,"Promise"),fe=Fe(M,"Set"),me=Fe(M,"WeakMap"),ye=Fe(Object,"create"),Ie=$e(pe),Ee=$e(he),Ae=$e(ge),_e=$e(fe),Ce=$e(me),Se=se?se.prototype:void 0,Te=Se?Se.valueOf:void 0;function Ne(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function Pe(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function be(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function De(c){var l=-1,u=null==c?0:c.length;for(this.__data__=new be;++l<u;)this.add(c[l])}function Re(c){var l=this.__data__=new Pe(c);this.size=l.size}function Oe(c,l){for(var u=c.length;u--;)if(Be(c[u][0],l))return u;return-1}function ve(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":ce&&ce in Object(c)?function(c){var l=Z.call(c,ce),u=c[ce];try{c[ce]=void 0;var d=!0}catch(c){}var p=te.call(c);return d&&(l?c[ce]=u:delete c[ce]),p}(c):function(c){return te.call(c)}(c)}function xe(c){return Ke(c)&&ve(c)==h}function we(c,l,u,d,p){return c===l||(null==c||null==l||!Ke(c)&&!Ke(l)?c!=c&&l!=l:function(c,l,u,d,p,I){var C=We(c),P=We(l),R=C?g:Ve(c),O=P?g:Ve(l),v=(R=R==h?_:R)==_,x=(O=O==h?_:O)==_,w=R==O;if(w&&He(c)){if(!He(l))return!1;C=!0,v=!1}if(w&&!v)return I||(I=new Re),C||Xe(c)?Me(c,l,u,d,p,I):function(c,l,u,d,p,h,g){switch(u){case D:if(c.byteLength!=l.byteLength||c.byteOffset!=l.byteOffset)return!1;c=c.buffer,l=l.buffer;case b:return!(c.byteLength!=l.byteLength||!h(new ae(c),new ae(l)));case f:case m:case A:return Be(+c,+l);case y:return c.name==l.name&&c.message==l.message;case S:case N:return c==l+"";case E:var I=G;case T:var _=1&d;if(I||(I=W),c.size!=l.size&&!_)return!1;var C=g.get(c);if(C)return C==l;d|=2,g.set(c,l);var P=Me(I(c),I(l),d,p,h,g);return g.delete(c),P;case"[object Symbol]":if(Te)return Te.call(c)==Te.call(l)}return!1}(c,l,R,u,d,p,I);if(!(1&u)){var M=v&&Z.call(c,"__wrapped__"),L=x&&Z.call(l,"__wrapped__");if(M||L){var U=M?c.value():c,F=L?l.value():l;return I||(I=new Re),p(U,F,u,d,I)}}return!!w&&(I||(I=new Re),function(c,l,u,d,p,h){var g=1&u,f=Le(c),m=f.length;if(m!=Le(l).length&&!g)return!1;for(var y=m;y--;){var I=f[y];if(!(g?I in l:Z.call(l,I)))return!1}var E=h.get(c);if(E&&h.get(l))return E==l;var A=!0;h.set(c,l),h.set(l,c);for(var _=g;++y<m;){var C=c[I=f[y]],S=l[I];if(d)var T=g?d(S,C,I,l,c,h):d(C,S,I,c,l,h);if(!(void 0===T?C===S||p(C,S,u,d,h):T)){A=!1;break}_||(_="constructor"==I)}if(A&&!_){var N=c.constructor,P=l.constructor;N==P||!("constructor"in c)||!("constructor"in l)||"function"==typeof N&&N instanceof N&&"function"==typeof P&&P instanceof P||(A=!1)}return h.delete(c),h.delete(l),A}(c,l,u,d,p,I))}(c,l,u,d,we,p))}function Me(c,l,u,d,p,h){var g=1&u,f=c.length,m=l.length;if(f!=m&&!(g&&m>f))return!1;var y=h.get(c);if(y&&h.get(l))return y==l;var I=-1,E=!0,A=2&u?new De:void 0;for(h.set(c,l),h.set(l,c);++I<f;){var _=c[I],C=l[I];if(d)var S=g?d(C,_,I,l,c,h):d(_,C,I,c,l,h);if(void 0!==S){if(S)continue;E=!1;break}if(A){if(!B(l,(function(c,l){if(g=l,!A.has(g)&&(_===c||p(_,c,u,d,h)))return A.push(l);var g}))){E=!1;break}}else if(_!==C&&!p(_,C,u,d,h)){E=!1;break}}return h.delete(c),h.delete(l),E}function Le(c){return function(c,l,u){var d=l(c);return We(c)?d:function(c,l){for(var u=-1,d=l.length,p=c.length;++u<d;)c[p+u]=l[u];return c}(d,u(c))}(c,Je,je)}function Ue(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function Fe(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){return!(!Ye(c)||function(c){return!!ee&&ee in c}(c))&&(qe(c)?ne:R).test($e(c))}(u)?u:void 0}Ne.prototype.clear=function(){this.__data__=ye?ye(null):{},this.size=0},Ne.prototype.delete=function(c){var l=this.has(c)&&delete this.__data__[c];return this.size-=l?1:0,l},Ne.prototype.get=function(c){var l=this.__data__;if(ye){var u=l[c];return u===d?void 0:u}return Z.call(l,c)?l[c]:void 0},Ne.prototype.has=function(c){var l=this.__data__;return ye?void 0!==l[c]:Z.call(l,c)},Ne.prototype.set=function(c,l){var u=this.__data__;return this.size+=this.has(c)?0:1,u[c]=ye&&void 0===l?d:l,this},Pe.prototype.clear=function(){this.__data__=[],this.size=0},Pe.prototype.delete=function(c){var l=this.__data__,u=Oe(l,c);return!(u<0||(u==l.length-1?l.pop():ie.call(l,u,1),--this.size,0))},Pe.prototype.get=function(c){var l=this.__data__,u=Oe(l,c);return u<0?void 0:l[u][1]},Pe.prototype.has=function(c){return Oe(this.__data__,c)>-1},Pe.prototype.set=function(c,l){var u=this.__data__,d=Oe(u,c);return d<0?(++this.size,u.push([c,l])):u[d][1]=l,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new Ne,map:new(he||Pe),string:new Ne}},be.prototype.delete=function(c){var l=Ue(this,c).delete(c);return this.size-=l?1:0,l},be.prototype.get=function(c){return Ue(this,c).get(c)},be.prototype.has=function(c){return Ue(this,c).has(c)},be.prototype.set=function(c,l){var u=Ue(this,c),d=u.size;return u.set(c,l),this.size+=u.size==d?0:1,this},De.prototype.add=De.prototype.push=function(c){return this.__data__.set(c,d),this},De.prototype.has=function(c){return this.__data__.has(c)},Re.prototype.clear=function(){this.__data__=new Pe,this.size=0},Re.prototype.delete=function(c){var l=this.__data__,u=l.delete(c);return this.size=l.size,u},Re.prototype.get=function(c){return this.__data__.get(c)},Re.prototype.has=function(c){return this.__data__.has(c)},Re.prototype.set=function(c,l){var u=this.__data__;if(u instanceof Pe){var d=u.__data__;if(!he||d.length<199)return d.push([c,l]),this.size=++u.size,this;u=this.__data__=new be(d)}return u.set(c,l),this.size=u.size,this};var je=le?function(c){return null==c?[]:(c=Object(c),function(c,l){for(var u=-1,d=null==c?0:c.length,p=0,h=[];++u<d;){var g=c[u];l(g)&&(h[p++]=g)}return h}(le(c),(function(l){return oe.call(c,l)})))}:function(){return[]},Ve=ve;function ke(c,l){return!!(l=l??p)&&("number"==typeof c||O.test(c))&&c>-1&&c%1==0&&c<l}function $e(c){if(null!=c){try{return Q.call(c)}catch(c){}try{return c+""}catch(c){}}return""}function Be(c,l){return c===l||c!=c&&l!=l}(pe&&Ve(new pe(new ArrayBuffer(1)))!=D||he&&Ve(new he)!=E||ge&&Ve(ge.resolve())!=C||fe&&Ve(new fe)!=T||me&&Ve(new me)!=P)&&(Ve=function(c){var l=ve(c),u=l==_?c.constructor:void 0,d=u?$e(u):"";if(d)switch(d){case Ie:return D;case Ee:return E;case Ae:return C;case _e:return T;case Ce:return P}return l});var Ge=xe(function(){return arguments}())?xe:function(c){return Ke(c)&&Z.call(c,"callee")&&!oe.call(c,"callee")},We=Array.isArray,He=ue||function(){return!1};function qe(c){if(!Ye(c))return!1;var l=ve(c);return l==I||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}function ze(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=p}function Ye(c){var l=typeof c;return null!=c&&("object"==l||"function"==l)}function Ke(c){return null!=c&&"object"==typeof c}var Xe=k?function(c){return function(l){return c(l)}}(k):function(c){return Ke(c)&&ze(c.length)&&!!v[ve(c)]};function Je(c){return null!=(l=c)&&ze(l.length)&&!qe(l)?function(c,l){var u=We(c),d=!u&&Ge(c),p=!u&&!d&&He(c),h=!u&&!d&&!p&&Xe(c),g=u||d||p||h,f=g?function(c,l){for(var u=-1,d=Array(c);++u<c;)d[u]=l(u);return d}(c.length,String):[],m=f.length;for(var y in c)!l&&!Z.call(c,y)||g&&("length"==y||p&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||ke(y,m))||f.push(y);return f}(c):function(c){if(u=(l=c)&&l.constructor,l!==("function"==typeof u&&u.prototype||X))return de(c);var l,u,d=[];for(var p in Object(c))Z.call(c,p)&&"constructor"!=p&&d.push(p);return d}(c);var l}c.exports=function(c,l){return we(c,l)}},431:(c,l,u)=>{c=u.nmd(c);var d="__lodash_hash_undefined__",p=9007199254740991,h="[object Arguments]",g="[object Function]",f="[object Object]",m=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[h]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I["[object Error]"]=I[g]=I["[object Map]"]=I["[object Number]"]=I[f]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1;var E,A,_,C="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,S="object"==typeof self&&self&&self.Object===Object&&self,T=C||S||Function("return this")(),N=l&&!l.nodeType&&l,P=N&&c&&!c.nodeType&&c,b=P&&P.exports===N,D=b&&C.process,R=function(){try{return P&&P.require&&P.require("util").types||D&&D.binding&&D.binding("util")}catch(c){}}(),O=R&&R.isTypedArray,v=Array.prototype,x=Function.prototype,w=Object.prototype,M=T["__core-js_shared__"],L=x.toString,U=w.hasOwnProperty,F=(E=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",j=w.toString,V=L.call(Object),k=RegExp("^"+L.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=b?T.Buffer:void 0,G=T.Symbol,W=T.Uint8Array,H=(B&&B.allocUnsafe,A=Object.getPrototypeOf,_=Object,function(c){return A(_(c))}),q=Object.create,z=w.propertyIsEnumerable,Y=v.splice,K=G?G.toStringTag:void 0,X=function(){try{var c=me(Object,"defineProperty");return c({},"",{}),c}catch(c){}}(),J=B?B.isBuffer:void 0,Q=Math.max,Z=Date.now,ee=me(T,"Map"),te=me(Object,"create"),ne=function(){function c(){}return function(l){if(!De(l))return{};if(q)return q(l);c.prototype=l;var u=new c;return c.prototype=void 0,u}}();function re(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function se(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function ae(c){var l=-1,u=null==c?0:c.length;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function oe(c){var l=this.__data__=new se(c);this.size=l.size}function ie(c,l,u){(void 0!==u&&!_e(c[l],u)||void 0===u&&!(l in c))&&ue(c,l,u)}function ce(c,l,u){var d=c[l];U.call(c,l)&&_e(d,u)&&(void 0!==u||l in c)||ue(c,l,u)}function le(c,l){for(var u=c.length;u--;)if(_e(c[u][0],l))return u;return-1}function ue(c,l,u){"__proto__"==l&&X?X(c,l,{configurable:!0,enumerable:!0,value:u,writable:!0}):c[l]=u}re.prototype.clear=function(){this.__data__=te?te(null):{},this.size=0},re.prototype.delete=function(c){var l=this.has(c)&&delete this.__data__[c];return this.size-=l?1:0,l},re.prototype.get=function(c){var l=this.__data__;if(te){var u=l[c];return u===d?void 0:u}return U.call(l,c)?l[c]:void 0},re.prototype.has=function(c){var l=this.__data__;return te?void 0!==l[c]:U.call(l,c)},re.prototype.set=function(c,l){var u=this.__data__;return this.size+=this.has(c)?0:1,u[c]=te&&void 0===l?d:l,this},se.prototype.clear=function(){this.__data__=[],this.size=0},se.prototype.delete=function(c){var l=this.__data__,u=le(l,c);return!(u<0||(u==l.length-1?l.pop():Y.call(l,u,1),--this.size,0))},se.prototype.get=function(c){var l=this.__data__,u=le(l,c);return u<0?void 0:l[u][1]},se.prototype.has=function(c){return le(this.__data__,c)>-1},se.prototype.set=function(c,l){var u=this.__data__,d=le(u,c);return d<0?(++this.size,u.push([c,l])):u[d][1]=l,this},ae.prototype.clear=function(){this.size=0,this.__data__={hash:new re,map:new(ee||se),string:new re}},ae.prototype.delete=function(c){var l=fe(this,c).delete(c);return this.size-=l?1:0,l},ae.prototype.get=function(c){return fe(this,c).get(c)},ae.prototype.has=function(c){return fe(this,c).has(c)},ae.prototype.set=function(c,l){var u=fe(this,c),d=u.size;return u.set(c,l),this.size+=u.size==d?0:1,this},oe.prototype.clear=function(){this.__data__=new se,this.size=0},oe.prototype.delete=function(c){var l=this.__data__,u=l.delete(c);return this.size=l.size,u},oe.prototype.get=function(c){return this.__data__.get(c)},oe.prototype.has=function(c){return this.__data__.has(c)},oe.prototype.set=function(c,l){var u=this.__data__;if(u instanceof se){var d=u.__data__;if(!ee||d.length<199)return d.push([c,l]),this.size=++u.size,this;u=this.__data__=new ae(d)}return u.set(c,l),this.size=u.size,this};function de(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":K&&K in Object(c)?function(c){var l=U.call(c,K),u=c[K];try{c[K]=void 0;var d=!0}catch(c){}var p=j.call(c);return d&&(l?c[K]=u:delete c[K]),p}(c):function(c){return j.call(c)}(c)}function pe(c){return Re(c)&&de(c)==h}function he(c,l,u,d,p){c!==l&&function(c,l,u){for(var d=-1,p=Object(c),h=u(c),g=h.length;g--;){var f=h[++d];if(!1===l(p[f],f,p))break}}(l,(function(h,g){if(p||(p=new oe),De(h))!function(c,l,u,d,p,h,g){var m=Ee(c,u),y=Ee(l,u),I=g.get(y);if(I)ie(c,u,I);else{var E,A,_,C,S,T=h?h(m,y,u+"",c,l,g):void 0,N=void 0===T;if(N){var P=Se(y),b=!P&&Ne(y),D=!P&&!b&&Oe(y);T=y,P||b||D?Se(m)?T=m:Re(S=m)&&Te(S)?T=function(c,l){var u=-1,d=c.length;for(l||(l=Array(d));++u<d;)l[u]=c[u];return l}(m):b?(N=!1,T=function(c){return c.slice()}(y)):D?(N=!1,C=new(_=(E=y).buffer).constructor(_.byteLength),new W(C).set(new W(_)),A=C,T=new E.constructor(A,E.byteOffset,E.length)):T=[]:function(c){if(!Re(c)||de(c)!=f)return!1;var l=H(c);if(null===l)return!0;var u=U.call(l,"constructor")&&l.constructor;return"function"==typeof u&&u instanceof u&&L.call(u)==V}(y)||Ce(y)?(T=m,Ce(m)?T=function(c){return function(c,l,u){var d=!u;u||(u={});for(var p=-1,h=l.length;++p<h;){var g=l[p],f=void 0;void 0===f&&(f=c[g]),d?ue(u,g,f):ce(u,g,f)}return u}(c,ve(c))}(m):De(m)&&!Pe(m)||(T=function(c){return"function"!=typeof c.constructor||Ie(c)?{}:ne(H(c))}(y))):N=!1}N&&(g.set(y,T),p(T,y,d,h,g),g.delete(y)),ie(c,u,T)}}(c,l,g,u,he,d,p);else{var m=d?d(Ee(c,g),h,g+"",c,l,p):void 0;void 0===m&&(m=h),ie(c,g,m)}}),ve)}var ge=X?function(c,l){return X(c,"toString",{configurable:!0,enumerable:!1,value:(u=l,function(){return u}),writable:!0});var u}:Me;function fe(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function me(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){return!(!De(c)||function(c){return!!F&&F in c}(c))&&(Pe(c)?k:m).test(function(c){if(null!=c){try{return L.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function ye(c,l){var u=typeof c;return!!(l=l??p)&&("number"==u||"symbol"!=u&&y.test(c))&&c>-1&&c%1==0&&c<l}function Ie(c){var l=c&&c.constructor;return c===("function"==typeof l&&l.prototype||w)}function Ee(c,l){if(("constructor"!==l||"function"!=typeof c[l])&&"__proto__"!=l)return c[l]}var Ae=function(c){var l=0,u=0;return function(){var d=Z(),p=16-(d-u);if(u=d,p>0){if(++l>=800)return arguments[0]}else l=0;return c.apply(void 0,arguments)}}(ge);function _e(c,l){return c===l||c!=c&&l!=l}var Ce=pe(function(){return arguments}())?pe:function(c){return Re(c)&&U.call(c,"callee")&&!z.call(c,"callee")},Se=Array.isArray;function Te(c){return null!=c&&be(c.length)&&!Pe(c)}var Ne=J||function(){return!1};function Pe(c){if(!De(c))return!1;var l=de(c);return l==g||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}function be(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=p}function De(c){var l=typeof c;return null!=c&&("object"==l||"function"==l)}function Re(c){return null!=c&&"object"==typeof c}var Oe=O?function(c){return function(l){return c(l)}}(O):function(c){return Re(c)&&be(c.length)&&!!I[de(c)]};function ve(c){return Te(c)?function(c,l){var u=Se(c),d=!u&&Ce(c),p=!u&&!d&&Ne(c),h=!u&&!d&&!p&&Oe(c),g=u||d||p||h,f=g?function(c,l){for(var u=-1,d=Array(c);++u<c;)d[u]=l(u);return d}(c.length,String):[],m=f.length;for(var y in c)!l&&!U.call(c,y)||g&&("length"==y||p&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||ye(y,m))||f.push(y);return f}(c,!0):function(c){if(!De(c))return function(c){var l=[];if(null!=c)for(var u in Object(c))l.push(u);return l}(c);var l=Ie(c),u=[];for(var d in c)("constructor"!=d||!l&&U.call(c,d))&&u.push(d);return u}(c)}var xe,we=(xe=function(c,l,u,d){he(c,l,u,d)},function(c,l){return Ae(function(c,l,u){return l=Q(void 0===l?c.length-1:l,0),function(){for(var d=arguments,p=-1,h=Q(d.length-l,0),g=Array(h);++p<h;)g[p]=d[l+p];p=-1;for(var f=Array(l+1);++p<l;)f[p]=d[p];return f[l]=u(g),function(c,l,u){switch(u.length){case 0:return c.call(l);case 1:return c.call(l,u[0]);case 2:return c.call(l,u[0],u[1]);case 3:return c.call(l,u[0],u[1],u[2])}return c.apply(l,u)}(c,this,f)}}(c,l,Me),c+"")}((function(c,l){var u=-1,d=l.length,p=d>1?l[d-1]:void 0,h=d>2?l[2]:void 0;for(p=xe.length>3&&"function"==typeof p?(d--,p):void 0,h&&function(c,l,u){if(!De(u))return!1;var d=typeof l;return!!("number"==d?Te(u)&&ye(l,u.length):"string"==d&&l in u)&&_e(u[l],c)}(l[0],l[1],h)&&(p=d<3?void 0:p,d=1),c=Object(c);++u<d;){var g=l[u];g&&xe(c,g,u,p)}return c})));function Me(c){return c}c.exports=we},8:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,m=/^\./,y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,_="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,C="object"==typeof self&&self&&self.Object===Object&&self,S=_||C||Function("return this")(),T=Array.prototype,N=Function.prototype,P=Object.prototype,b=S["__core-js_shared__"],D=(d=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",R=N.toString,O=P.hasOwnProperty,v=P.toString,x=RegExp("^"+R.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=S.Symbol,M=T.splice,L=q(S,"Map"),U=q(Object,"create"),F=w?w.prototype:void 0,j=F?F.toString:void 0;function V(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function k(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function B(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function G(c,l,u){var d=c[l];O.call(c,l)&&J(d,u)&&(void 0!==u||l in c)||(c[l]=u)}function W(c,l){for(var u=c.length;u--;)if(J(c[u][0],l))return u;return-1}function H(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function q(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!Z(c)||D&&D in c)return!1;var l=function(c){var l=Z(c)?v.call(c):"";return"[object Function]"==l||"[object GeneratorFunction]"==l}(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?x:E;return l.test(function(c){if(null!=c){try{return R.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function z(c,l){return!!(l=l??9007199254740991)&&("number"==typeof c||A.test(c))&&c>-1&&c%1==0&&c<l}V.prototype.clear=function(){this.__data__=U?U(null):{}},V.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},V.prototype.get=function(c){var l=this.__data__;if(U){var u=l[c];return u===p?void 0:u}return O.call(l,c)?l[c]:void 0},V.prototype.has=function(c){var l=this.__data__;return U?void 0!==l[c]:O.call(l,c)},V.prototype.set=function(c,l){return this.__data__[c]=U&&void 0===l?p:l,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(c){var l=this.__data__,u=W(l,c);return!(u<0||(u==l.length-1?l.pop():M.call(l,u,1),0))},k.prototype.get=function(c){var l=this.__data__,u=W(l,c);return u<0?void 0:l[u][1]},k.prototype.has=function(c){return W(this.__data__,c)>-1},k.prototype.set=function(c,l){var u=this.__data__,d=W(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},B.prototype.clear=function(){this.__data__={hash:new V,map:new(L||k),string:new V}},B.prototype.delete=function(c){return H(this,c).delete(c)},B.prototype.get=function(c){return H(this,c).get(c)},B.prototype.has=function(c){return H(this,c).has(c)},B.prototype.set=function(c,l){return H(this,c).set(c,l),this};var Y=X((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(ee(c))return j?j.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return m.test(c)&&u.push(""),c.replace(y,(function(c,l,d,p){u.push(d?p.replace(I,"$1"):l||c)})),u}));function K(c){if("string"==typeof c||ee(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function X(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(X.Cache||B),u}function J(c,l){return c===l||c!=c&&l!=l}X.Cache=B;var Q=Array.isArray;function Z(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function ee(c){return"symbol"==typeof c||function(c){return!!c&&"object"==typeof c}(c)&&"[object Symbol]"==v.call(c)}c.exports=function(c,l,u){return null==c?c:function(c,l,u,d){if(!Z(c))return c;l=function(c,l){if(Q(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!ee(c))||f.test(c)||!g.test(c)||null!=l&&c in Object(l)}(l,c)?[l]:function(c){return Q(c)?c:Y(c)}(l);for(var p=-1,h=l.length,m=h-1,y=c;null!=y&&++p<h;){var I=K(l[p]),E=u;if(p!=m){var A=y[I];void 0===(E=d?d(A,I,y):void 0)&&(E=Z(A)?A:z(l[p+1])?[]:{})}G(y,I,E),y=y[I]}return c}(c,l,u)}},795:(c,l,u)=>{var d,p="__lodash_hash_undefined__",h=1/0,g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,m=/^\./,y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,A="object"==typeof u.g&&u.g&&u.g.Object===Object&&u.g,_="object"==typeof self&&self&&self.Object===Object&&self,C=A||_||Function("return this")(),S=Array.prototype,T=Function.prototype,N=Object.prototype,P=C["__core-js_shared__"],b=(d=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",D=T.toString,R=N.hasOwnProperty,O=N.toString,v=RegExp("^"+D.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=C.Symbol,w=S.splice,M=H(C,"Map"),L=H(Object,"create"),U=x?x.prototype:void 0,F=U?U.toString:void 0;function j(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function V(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function k(c){var l=-1,u=c?c.length:0;for(this.clear();++l<u;){var d=c[l];this.set(d[0],d[1])}}function B(c,l){for(var u,d,p=c.length;p--;)if((u=c[p][0])===(d=l)||u!=u&&d!=d)return p;return-1}function G(c){return X(c)?c:z(c)}function W(c,l){var u,d,p=c.__data__;return("string"==(d=typeof(u=l))||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==u:null===u)?p["string"==typeof l?"string":"hash"]:p.map}function H(c,l){var u=function(c,l){return null==c?void 0:c[l]}(c,l);return function(c){if(!J(c)||b&&b in c)return!1;var l=function(c){var l=J(c)?O.call(c):"";return"[object Function]"==l||"[object GeneratorFunction]"==l}(c)||function(c){var l=!1;if(null!=c&&"function"!=typeof c.toString)try{l=!!(c+"")}catch(c){}return l}(c)?v:E;return l.test(function(c){if(null!=c){try{return D.call(c)}catch(c){}try{return c+""}catch(c){}}return""}(c))}(u)?u:void 0}function q(c,l){if(X(c))return!1;var u=typeof c;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=c&&!Q(c))||f.test(c)||!g.test(c)||null!=l&&c in Object(l)}j.prototype.clear=function(){this.__data__=L?L(null):{}},j.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},j.prototype.get=function(c){var l=this.__data__;if(L){var u=l[c];return u===p?void 0:u}return R.call(l,c)?l[c]:void 0},j.prototype.has=function(c){var l=this.__data__;return L?void 0!==l[c]:R.call(l,c)},j.prototype.set=function(c,l){return this.__data__[c]=L&&void 0===l?p:l,this},V.prototype.clear=function(){this.__data__=[]},V.prototype.delete=function(c){var l=this.__data__,u=B(l,c);return!(u<0||(u==l.length-1?l.pop():w.call(l,u,1),0))},V.prototype.get=function(c){var l=this.__data__,u=B(l,c);return u<0?void 0:l[u][1]},V.prototype.has=function(c){return B(this.__data__,c)>-1},V.prototype.set=function(c,l){var u=this.__data__,d=B(u,c);return d<0?u.push([c,l]):u[d][1]=l,this},k.prototype.clear=function(){this.__data__={hash:new j,map:new(M||V),string:new j}},k.prototype.delete=function(c){return W(this,c).delete(c)},k.prototype.get=function(c){return W(this,c).get(c)},k.prototype.has=function(c){return W(this,c).has(c)},k.prototype.set=function(c,l){return W(this,c).set(c,l),this};var z=K((function(c){var l;c=null==(l=c)?"":function(c){if("string"==typeof c)return c;if(Q(c))return F?F.call(c):"";var l=c+"";return"0"==l&&1/c==-h?"-0":l}(l);var u=[];return m.test(c)&&u.push(""),c.replace(y,(function(c,l,d,p){u.push(d?p.replace(I,"$1"):l||c)})),u}));function Y(c){if("string"==typeof c||Q(c))return c;var l=c+"";return"0"==l&&1/c==-h?"-0":l}function K(c,l){if("function"!=typeof c||l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var d=arguments,p=l?l.apply(this,d):d[0],h=u.cache;if(h.has(p))return h.get(p);var g=c.apply(this,d);return u.cache=h.set(p,g),g};return u.cache=new(K.Cache||k),u}K.Cache=k;var X=Array.isArray;function J(c){var l=typeof c;return!!c&&("object"==l||"function"==l)}function Q(c){return"symbol"==typeof c||function(c){return!!c&&"object"==typeof c}(c)&&"[object Symbol]"==O.call(c)}c.exports=function(c,l){return null==c||function(c,l){c=function(c,l){return 1==l.length?c:function(c,l){for(var u=0,d=(l=q(l,c)?[l]:G(l)).length;null!=c&&u<d;)c=c[Y(l[u++])];return u&&u==d?c:void 0}(c,function(c,l,u){var d=-1,p=c.length;l<0&&(l=-l>p?0:p+l),(u=u>p?p:u)<0&&(u+=p),p=l>u?0:u-l>>>0,l>>>=0;for(var h=Array(p);++d<p;)h[d]=c[d+l];return h}(l,0,-1))}(c,l=q(l,c)?[l]:G(l));var u,d,p=Y((d=(u=l)?u.length:0)?u[d-1]:void 0);return!(null!=c&&R.call(c,p))||delete c[p]}(c,l)}},386:c=>{class t{constructor(c,l,u,d,g){this.converter=p(),this.width=c,this.poly=l,this.xor_in=u,this.reflected_xor_in=h(u,c),this.xor_out=d,this.reflect=g,this.msb_mask=1<<this.width-1,this.mask=this.msb_mask-1<<1|1,this.crc_shift=this.width<8?8-this.width:0,this.shifted_xor_in=this.xor_in<<this.crc_shift;let f=this.gen_table();this.table=f,8!==this.width||this.xor_in||this.xor_out||this.reflect||(this.calculate=function(c){c=this.converter.validate_buffer(c);let l=0;for(let u=0;u<c.length;u++)l=f[l^c[u]];return l})}calculate(c){let l;c=this.converter.validate_buffer(c);let{table:u,width:d,crc_shift:p,mask:h}=this;if(this.reflect){l=this.reflected_xor_in;for(let d=0;d<c.length;d++)l=(u[255&(l^c[d])]^l>>>8)&h}else{l=this.shifted_xor_in;for(let g=0;g<c.length;g++)l=u[255&(l>>d-8+p^c[g])]<<p^l<<8-p&h<<p;l>>=p}return l^=this.xor_out,l>>>0}calculate_no_table(c){c=this.converter.validate_buffer(c);let l=this.xor_in;for(let u=0;u<c.length;u++){let d=c[u];this.reflect&&(d=h(d,8));for(let c=0;c<8;c++){let u=l&this.msb_mask;d&128>>c&&(u^=this.msb_mask),l<<=1,u&&(l^=this.poly)}l&=this.mask}return this.reflect&&(l=h(l,this.width)),l^=this.xor_out,l>>>0}gen_table(){let c=[];for(let l=0;l<256;l++){let u=l;this.reflect&&(u=h(u,8)),u<<=this.width-8+this.crc_shift;for(let c=0;c<8;c++)u&this.msb_mask<<this.crc_shift?(u<<=1,u^=this.poly<<this.crc_shift):u<<=1;this.reflect&&(u=h(u>>this.crc_shift,this.width)<<this.crc_shift),u=u>>this.crc_shift&this.mask,c[l]=u>>>0}return new Int32Array(c)}print_table(){let c=this.table,l=Math.ceil(this.width/4),u=l<4?4:3,d=c.length>>u,p=1<<u,h="";for(let g=0;g<d;g++){let d="";for(let h=0;h<p;h++){let p=c[g<<u|h];p="000000000"+p.toString(16),p=p.substr(p.length-l),d+="0x"+p+", "}h+="  "+d+"\n"}return h="[\n"+h.slice(0,-3)+"\n]",h}}const l="undefined"!=typeof Buffer,u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,d=void 0!==typeof BigInt&&BigInt(256);class a{validate_buffer(c){switch(typeof c){case"number":{if(!Number.isSafeInteger(c)||c<0)throw Error(`number data must be a nonnegative safe integer, not ${c}`);if(this.fromUInt32&&c<=4294967295)return this.fromUInt32(c);const l=[];for(;c>0||l.length<4;)l.unshift(c%256),c=Math.floor(c/256);return this.fromByteArray(l)}case"string":return this.fromString(c);case"bigint":{if(c<0)throw Error(`bigint data must be nonnegative, not ${c}`);const l=[];for(;c>0||l.length<4;)l.unshift(Number(c%d)),c/=d;return this.fromByteArray(l)}default:if(l&&Buffer.isBuffer(c))return c;if(u){if(ArrayBuffer.isView(c))return new Uint8Array(c.buffer,c.byteOffset,c.byteLength);if(c instanceof ArrayBuffer)return new Uint8Array(c)}throw new Error(`Unrecognized data type ${typeof c}: ${c}`)}}}class o extends a{fromUInt32(c){const l=Buffer.alloc(4);return l.writeUInt32BE(c),l}fromByteArray=Buffer.from.bind(Buffer);fromString=Buffer.from.bind(Buffer)}class i extends a{fromByteArray=Uint8Array.from.bind(Uint8Array);fromString(c){return new TextEncoder("utf-8").encode(c)}}function p(c=!1){if(u&&(c||!l))return new i;if(l)return new o;throw Error("either need TypedArrays or Buffer")}function h(c,l){let u=0;for(let d=0;d<l;d++)u=u<<1|1&c,c>>=1;return u}const g={crc1:new t(1,1,0,0,!1),crc6:new t(6,47,0,0,!1),crc8:new t(8,7,0,0,!1),crc10:new t(10,563,0,0,!1),crc16:new t(16,32773,0,0,!0),crc24:new t(24,8801531,11994318,0,!1),crc32:new t(32,79764919,4294967295,4294967295,!0),crc32c:new t(32,517762881,4294967295,4294967295,!0)};function f(c){}c.exports={CRC:t,crc:function(c,l,u,d,p){let h=new t(c,l,u,d,p);return h.calculate.bind(h)},makeBufferConverter:p,models:g,crc1:f,crc6:f,crc8:f,crc10:f,crc16:f,crc24:f,crc32:f,crc32c:f};for(let m in g){let l=g[m];c.exports[m]=l.calculate.bind(l)}},849:c=>{function l(c){return Promise.resolve().then((()=>{var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}))}l.keys=()=>[],l.resolve=l,l.id=849,c.exports=l}},r={};function s(c){var l=r[c];if(void 0!==l)return l.exports;var u=r[c]={id:c,loaded:!1,exports:{}};return n[c](u,u.exports,s),u.loaded=!0,u.exports}s.m=n,s.n=c=>{var l=c&&c.__esModule?()=>c.default:()=>c;return s.d(l,{a:l}),l},s.d=(c,l)=>{for(var u in l)s.o(l,u)&&!s.o(c,u)&&Object.defineProperty(c,u,{enumerable:!0,get:l[u]})},s.f={},s.e=c=>Promise.all(Object.keys(s.f).reduce(((l,u)=>(s.f[u](c,l),l)),[])),s.u=c=>"js/"+c+".177c98ad.js",s.miniCssF=c=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(c,l)=>Object.prototype.hasOwnProperty.call(c,l),e={},t="constellation-corejs-library:",s.l=(c,l,u,d)=>{if(e[c])e[c].push(l);else{var p,h;if(void 0!==u)for(var g=document.getElementsByTagName("script"),f=0;f<g.length;f++){var m=g[f];if(m.getAttribute("src")==c||m.getAttribute("data-webpack")==t+u){p=m;break}}p||(h=!0,(p=document.createElement("script")).type="module",p.charset="utf-8",p.timeout=120,s.nc&&p.setAttribute("nonce",s.nc),p.setAttribute("data-webpack",t+u),p.src=c),e[c]=[l];var y=(l,u)=>{p.onerror=p.onload=null,clearTimeout(I);var d=e[c];if(delete e[c],p.parentNode&&p.parentNode.removeChild(p),d&&d.forEach((c=>c(u))),l)return l(u)},I=setTimeout(y.bind(null,void 0,{type:"timeout",target:p}),12e4);p.onerror=y.bind(null,p.onerror),p.onload=y.bind(null,p.onload),h&&document.head.appendChild(p)}},s.r=c=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},s.nmd=c=>(c.paths=[],c.children||(c.children=[]),c),(()=>{var c;if("string"==typeof import.meta.url&&(c=import.meta.url),!c)throw new Error("Automatic publicPath is not supported in this browser");c=c.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=c})(),(()=>{var c={290:0};s.f.j=(l,u)=>{var d=s.o(c,l)?c[l]:void 0;if(0!==d)if(d)u.push(d[2]);else{var p=new Promise(((u,p)=>d=c[l]=[u,p]));u.push(d[2]=p);var h=s.p+s.u(l),g=new Error;s.l(h,(u=>{if(s.o(c,l)&&(0!==(d=c[l])&&(c[l]=void 0),d)){var p=u&&("load"===u.type?"missing":u.type),h=u&&u.target&&u.target.src;g.message="Loading chunk "+l+" failed.\n("+p+": "+h+")",g.name="ChunkLoadError",g.type=p,g.request=h,d[1](g)}}),"chunk-"+l,l)}};var l=(l,u)=>{var d,p,[h,g,f]=u,m=0;if(h.some((l=>0!==c[l]))){for(d in g)s.o(g,d)&&(s.m[d]=g[d]);f&&f(s)}for(l&&l(u);m<h.length;m++)p=h[m],s.o(c,p)&&c[p]&&c[p][0](),c[p]=0},u=self.webpackChunkconstellation_corejs_library=self.webpackChunkconstellation_corejs_library||[];u.forEach(l.bind(null,0)),u.push=l.bind(null,u.push.bind(u))})();var a={};(()=>{s.d(a,{Z:()=>DI});var c={};s.r(c),s.d(c,{buildContextName:()=>X,buildModalContext:()=>ee,buildTransientContextName:()=>J,getContainerIdFromContext:()=>ne,getParentContext:()=>te,getParentContextName:()=>K,getTargetFromContext:()=>Z,getTransientContext:()=>Q});var l={};s.r(l),s.d(l,{getResolvedTargetName:()=>Ct,getRoutingInfo:()=>St,getSemanticURLFromRoutingInfo:()=>Tt});var u={};s.r(u),s.d(u,{evaluate:()=>Zt,handleChange:()=>Jt,hasDeclareExpression:()=>Xt,updateDeclareExpressions:()=>Qt});var d={};s.r(d),s.d(d,{publishExpressions:()=>Ur,publishResponse:()=>Fr});var p={};s.r(p),s.d(p,{hasBrowserEnv:()=>Pa,hasStandardBrowserEnv:()=>Da,hasStandardBrowserWebWorkerEnv:()=>Ra,navigator:()=>ba,origin:()=>Oa});var h={};s.r(h),s.d(h,{CONTAINER_NAMES:()=>Mu,CONTAINER_TYPES:()=>wu,addRootContainerItem:()=>fd,areContainerItemsPresent:()=>ku,clearTransientData:()=>_d,closeContainerItem:()=>gd,getActiveContainerItemContext:()=>Qu,getActiveContainerItemIDFromRoutingInfo:()=>xd,getActiveContainerItemName:()=>zu,getActiveContext:()=>Dd,getChildContainerItems:()=>ed,getChildContainers:()=>td,getChildContainersContexts:()=>nd,getContainerAPI:()=>Sd,getContainerAccessOrder:()=>Vu,getContainerData:()=>Uu,getContainerItemData:()=>Fu,getContainerItemName:()=>Gu,getContainerItems:()=>ju,getContainerLimit:()=>id,getContainerParentContext:()=>vd,getContainerType:()=>Hu,getContextByTargetAndKey:()=>Od,getDataContextName:()=>Ju,getFlowContainer:()=>Md,getLeastRecentlyUsedNonDirtyContainerItemID:()=>pd,getParentContainerItem:()=>wd,getRootContainerName:()=>bd,getSuggestionContexts:()=>rd,getTargetFromContainerItemID:()=>hd,getTransientItems:()=>Id,hasContainerItems:()=>od,isContainerDirty:()=>dd,isContainerInitialized:()=>Wu,isContainerItemActive:()=>Ku,isContainerItemContextBeingUsedInOtherContainers:()=>yd,isContainerItemExists:()=>$u,isContainerLimitReached:()=>ld,isContainerMultipleMode:()=>ad,isContainerSingleMode:()=>sd,purgeTransientData:()=>Cd,removeContainer:()=>Td,replaceTransientData:()=>Ad,resetContainersPayload:()=>ud,setContainerLimit:()=>cd,updateCaseContextEtag:()=>Pd,updateParentLastUpdateTime:()=>Rd,updateRelatedContextEtag:()=>Nd,updateTransientData:()=>Ed});var g={};s.r(g),s.d(g,{getAdditionalInfo:()=>wp,getDataPageKeys:()=>Op,getDataPageMetadata:()=>Cp,getEmbeddedPropertyMetadata:()=>fp,getFieldParameters:()=>Pp,getFieldsByClassName:()=>Np,getGenAICoach:()=>Dp,getInsight:()=>Tp,getLookUpDataPage:()=>vp,getLookUpDataPageInfo:()=>xp,getParagraph:()=>bp,getPersonalizationMetadata:()=>Sp,getPropertyMetadata:()=>gp,getResolvedFieldMetadata:()=>Mp,getSavableDataPage:()=>Rp,isViewExists:()=>Ap,mergeStore:()=>hp,resolveNavigation:()=>_p,resolveView:()=>Ep,updateNavigationStore:()=>yp,updateStores:()=>Ip,updateViewStore:()=>mp});var f={};s.r(f),s.d(f,{dispatch:()=>kp,getActionType:()=>zp,getContextValue:()=>Hp,getDataObject:()=>$p,getReferenceTokens:()=>Fp,getSharedDataObject:()=>Bp,getStore:()=>Vp,getValue:()=>Wp,isMergeable:()=>Kp,lookupContextValue:()=>qp,mergeDeep:()=>Xp,removeItem:()=>Yp,replaceValue:()=>Qp,resetStore:()=>Zp,setStore:()=>jp,updateValue:()=>Jp});var m={};s.r(m),s.d(m,{activateContainerItem:()=>Oh,addContainerItem:()=>Ih,addMessages:()=>vh,addSharedData:()=>$h,addTransientItem:()=>Eh,addWork:()=>gh,clearTransientData:()=>_h,createWork:()=>ch,error:()=>kh,finishAssignment:()=>Uh,initContainers:()=>mh,listAction:()=>Gh,loadView:()=>ph,mergeData:()=>uh,openAssignment:()=>Fh,openWorkByHandle:()=>fh,postProcess:()=>Vh,purgeTransientData:()=>Th,removeAllTransientItems:()=>wh,removeContainerItem:()=>xh,removeSharedData:()=>Bh,removeTransientItem:()=>Mh,replaceContainerItem:()=>Lh,replaceTransientData:()=>Sh,resetContainers:()=>yh,resetLoading:()=>Dh,setLoading:()=>bh,setSharedProperty:()=>Hh,setStateProperty:()=>qh,showCasePreview:()=>Wh,showHarness:()=>dh,showHistory:()=>jh,showPage:()=>hh,upMergeAndRemoveContainerItem:()=>Rh,updateContainerItem:()=>Nh,updateTransientData:()=>Ah});var y={};s.r(y),s.d(y,{doesRestApiExist:()=>hm,getCancelTokenSource:()=>gm,getCaseApi:()=>ym,getHeaderProcessor:()=>um,invokeCustomRestApi:()=>pm,invokeRestApi:()=>dm,isRequestCanceled:()=>fm,registerInterceptor:()=>mm});var I={};s.r(I),s.d(I,{fetchViewResources:()=>qy,updateViewResources:()=>Hy});var E=s(722),A=s.n(E);let _,C,S;const T=c=>{c&&(_=c=c||{"base-server":"http://localhost:1080/prweb/","data-end-point":"api/v1/stream/data","action-end-point":"api/v1/stream/action"},_.BASEURL=c.server,_.ACTIONURL=c["action-end-point"],_.DATAURL=c["data-end-point"],S=c.reAuthUrl)},N=()=>S,P=()=>_.BASEURL,b=c=>{C=c};var D=s(386),R=s(795),O=s.n(R),v=s(207),x=s.n(v),w=s(174),M=s.n(w),L=s(8),U=s.n(L),F=s(431),j=s.n(F),V=s(828),k=s.n(V);const B=new class{constructor(){this.needsMapping=!1}getNeedsMapping(){return this.needsMapping}setNeedsMapping(c){this.needsMapping=c}map(c){return this.needsMapping?this.replacer(c):c}analyseResponse(c){c?.data?.objectInfo&&window?.PCore?.getEnvironmentInfo()?.isUnifiedObject()?this.setNeedsMapping(!0):this.setNeedsMapping(!1)}replacer(c){return this.needsMapping&&(c=c.replace("caseInfo","objectInfo").replace("caseTypeName","objectTypeName").replace("caseTypeID","objectTypeID")),c}},G={APP:{APP:"app",ROOT:"root",PXREQUESTOR:"pxRequestor",PXUSERNAME:".pxUserName",OPERATORID:"OperatorID",USERNAME:"pxRequestor.pxUserName",PXUSERIDENTIFIER:".pxUserIdentifier",USERIDENTIFIER:"pxRequestor.pxUserIdentifier",PYIMAGEINSKEY:".pyImageInsKey",OPERATORID_IMG_INSKEY:"OperatorID.pyImageInsKey",OPERATORID_LOCALE:"OperatorID.pyUseLocale",APPLICATION_LABEL:"Application.pyLabel",APPLICATION_RULE_NAME:"Application.pyRuleName"},RESOURCE_TYPES:{ASSIGNMENT:"ASSIGNMENT",CASE:"CASE",DATA:"DATA",PAGE:"PAGE"},RESOURCE_STATUS:{CREATE:"CREATE",UPDATE:"UPDATE",OPEN_FLOW_ACTION:"OPEN_FLOW_ACTION"},VIEW_NAMES:{PY_CASE_TAB:"pyCaseTab",DATA_OBJECT_CREATE_VIEW:"Create",DATA_OBJECT_EDIT_VIEW:"pyEdit",PY_DATA_PREVIEW:"pyDataPreview",PY_DETAILS:"pyDetails"},CONTAINERS:{ROOT_CONTAINER:"RootContainer",VIEW_CONTAINER:"ViewContainer",FLOW_CONTAINER:"FlowContainer",MODAL_VIEW_CONTAINER:"ModalViewContainer",PREVIEW_VIEW_CONTAINER:"PreviewViewContainer",HYBRID_VIEW_CONTAINER:"HybridViewContainer"},WORK_BASKET:{MY_WORK_LIST:"myWorkList",REPORTEE:"reportee",WORK_QUEUE:"workQueue",DATA_PAGES:{D__PY_GET_USER_WORK_LIST_BY_USER_ID:"D_pyGetUserWorkListByUserId",D__WORK_BASKET:"D_WorkBasket",D__PY_MY_WORK_LIST:"D_pyMyWorkList"}},CONTEXT_TREE_NODE_TYPES:{VIEW:"VIEW",FIELD:"FIELD",DECLARATIVE_TARGET:"DECLARATIVE_TARGET",WHEN:"WHEN",CONTEXT:"CONTEXT",PAGELIST:"PAGELIST"},WORKLIST:"worklist",WAIT:"wait",TODO:"todo",STANDARD_FLOW:"Standard",CASE:"CASE",ASSIGNMENT:"ASSIGNMENT",FIX_BROKEN_ASSIGNMENTS:"FixBrokenAssignments",PAGE:"PAGE",PZINSKEY:".pzInsKey",CREATE_DETAILS_VIEW_NAME:"pzCreateDetails",PREVIEW_VIEW_NAME:"pyCasePreview",CASESUMMARY_VIEW_NAME:"pyCaseSummary",APPSHELL_ACTIVE_CASES:"appshell-activecases",TRACE_ID:"x-b3-traceid",LOAD_VIEW_STRING:"View",PRIMARY:"primary",DEFER_UPDATE_CASESUMMARY_VIEW:"deferUpdateCaseSummaryView",NEXT_ASSIGNMENT_INFO_ID:"nextAssignmentInfo.ID",WORKCLASS:"Work-",DATA_INFO:{DATA_INFO_CONTENT:"dataInfo.content"},CASE_INFO:{CASE_INFO:"caseInfo",CASE_INFO_CONTENT:"caseInfo.content",CASE_INFO_NAME:"caseInfo.name",CASE_INFO_ID:"caseInfo.ID",CASE_INFO_CLASSID:"caseInfo.content.classID",CASE_TYPE_ID:"caseInfo.caseTypeID",CASE_TYPE_NAME:"caseInfo.caseTypeName",CASE_INFO_PZINSKEY:"caseInfo.content.pzInsKey",CASE_INFO_ACTIONS:"caseInfo.availableActions",VIEW_NAME:"caseInfo.content.pyViewName",ACTION_BUTTONS:"caseInfo.actionButtons",ACTIVE_ACTION_ID:"caseInfo.activeActionID",ASSIGNMENT_LABEL:"caseInfo.assignments[0].name",ASSIGNMENT_ID:"caseInfo.assignments[0].ID",ASSIGNMENTS:"caseInfo.assignments",INSTRUCTIONS:"caseInfo.assignments[0].instructions",NAVIGATION:"caseInfo.navigation",STAGES:"caseInfo.stages",STAGEID:"caseInfo.stageID",CASECLASS:"caseInfo.caseClass",AVAILABLEACTIONS:"caseInfo.availableActions",AVAILABLEPROCESSES:"caseInfo.availableProcesses",D_CASE_ASSIGNMENTS_RESULTS:"caseInfo.assignments",CHILD_ASSIGNMENTS:"caseInfo.childCases",ASSIGNMENTACTION_ID:"caseInfo.assignments[0].actions[0].ID",ISINCREATESTAGE:"caseInfo.isInCreateStage",APPROVALFLAG:"caseInfo.content.pyApprovalResult",DUPLICATECASEFLAG:"caseInfo.content.pyDuplicateCaseActions",DUPLICATECASEID:"caseInfo.content.pyDuplicateID",DUPLICATECASEINSKEY:"caseInfo.content.pyDuplicateCaseReference.pzInsKey",HEADERS:"caseInfo.headers",PARENTCASEINFO:"caseInfo.parentCaseInfo",REMOTESYSTEMID:"caseInfo.headers.RemoteSystemID",CASE_RELATED_CASE_TYPES:"caseInfo.relatedCaseTypes",CASES:"caseInfo.cases",GETNEXTWORK:"caseInfo.confirmationLinks.getNextWork",ACTION_REFRESH_CONDITIONS:"caseInfo.assignments[0].actions[0].refreshConditions",IS_LOCAL_ACTION:"caseInfo.isLocalAction",BUSINESS_ID:"caseInfo.businessID",IS_FIRST_ASSIGNMENT:"caseInfo.isFirstAssignment"},ACTIONS:{ACTION_ID:"actionID",ACTIONS:"availableActions",DELETEAVIALACTIONS:"deleteAvailActions",FLOWACTION:"FlowAction",DATA_PAGES:{D_PY_ADDITIONAL_CASE_ACTIONS:"D_pyAdditionalCaseActions"}},PROCESS:{FLOWPROBLEMS:"FlowProblems"},PAGE_TYPES:{PAGE:"page",LANDINGPAGE:"landingpage",LISTPAGE:"listpage"},LOCAL_ACTION_TYPE:{CASE_WIDE:"case",EXPRESS:"express",ASSIGNMENT:"Assignment",LOCAL_ACTION:"LocalAction"},LOCAL_ACTIONS:{TRANSFER_ASSIGNMENT:"pyTransferAssignment"},CONTENT:"content",MODAL:"modal",STOPMERGEACTIONS:"stopMergeActions",IS_CREATE_DATA_OBJECT:"isCreateDataObject",SUMMARY_OF_ASSIGNMENT_LAST_SUBMIT_TIME:"context_data.caseInfo.content.summary_of_assignment__.lastSubmitTime",SUMMARY_OF_ATTACHMENTS_LAST_REFRESH_TIME:"context_data.caseInfo.content.summary_of_attachments__.lastRefreshTime",CONTEXT_DATA_ASSIGNMENTID:"context_data.assignmentID",BANNER_VARIANT_SUCCESS:"success",BANNER_VARIANT_WARNING:"warning",BANNER_VARIANT_URGENT:"urgent",BANNER_VARIANT_INFO:"info",MESSAGES:{MESSAGES_TYPE_SUCCESS:"success",MESSAGES_TYPE_INFO:"info",MESSAGES_TYPE_ERROR:"error"},PUB_SUB_EVENTS:{EVENT_RENDER_APP:"renderApp",EVENT_UNMOUNT_APP:"unmountApp",EVENT_REAUTH:"reAuth",EVENT_FULL_REAUTH:"fullReAuth",EVENT_CUSTOM_REAUTH:"customReAuth",EVENT_CANCEL:"cancel",EVENT_MINIMIZE:"minimize",EVENT_EXPRESS_LOCALACTION:"expressLocalActionSubmit",EVENT_BULKACTION:"bulkActionSubmit",EVENT_SHOW_CANCEL_ALERT:"showCancelAlert",EVENT_SHOW_DELETE_ALERT:"showDeleteAlert",EVENT_DASHBOARD_FILTER_CHANGE:"dashboardFilterChange",EVENT_DASHBOARD_FILTER_CLEAR_ALL:"dashboardFilterClearAll",EVENT_PROMOTED_FILTERS_CHANGE:"promotedFiltersChange",EVENT_LOGOFF:"Logoff",EVENT_TRANSIENT_ITEMS:{UPDATE_PROMOTED_FILTERS:"updatePromotedFilters"},UI_EVENTS:{SHOW_PAGE_INIT:"showPageInit",SHOW_PAGE_DONE:"showPageDone",SHOW_PAGE_STARTED:"showPageStarted"},CASE_EVENTS:{CASE_ATTACHMENTS_UPDATED_FROM_CASEVIEW:"caseAttachmentsUpdateFromCaseview",CASE_FOLLOWER_UPDATED_BY_OPERATOR_FROM_CASEVIEW:"caseFollowerUpdateByOperatorFromCaseview",CASE_FOLLOWER_UPDATE_BY_OPERATOR_FROM_WIDGET:"caseFollowerUpdateByOperatorFromWidget",CASE_CREATED:"caseCreated",CREATE_STAGE_DONE:"caseCreatedDone",CREATE_STAGE_CANCELLED:"caseCancelled",CREATE_STAGE_SAVED:"caseSaved",CREATE_STAGE_DELETED:"caseDeleted",ASSIGNMENT_SUBMISSION:"assignmentSubmission",END_OF_ASSIGNMENT_PROCESSING:"endOfAssignmentProcessing",CLOSE_CONFIRM_VIEW:"closeConfirmView",CASE_OPENED:"caseOpened",CASE_CLOSED:"caseClosed",ASSIGNMENT_OPENED:"assignmentOpened",CASE_PREVIEW:"casePreview",CURRENT_ASSIGNMENT_UPDATED:"currentAssignmentUpdated",CASE_LOCK_EVENT:"caseLockEvent"},BOOTSTRAP_SHELL_EVENTS:{CONSTELLATION_LOADED:"CONSTELLATION_LOADED"},CONTAINER_EVENTS:{CLOSE_CONTAINER_ITEM:"CLOSE_CONTAINER_ITEM",CLOSE_MULTI_TYPE_PRIMARY_CONTAINER_ITEM:"CLOSE_MULTI_TYPE_PRIMARY_CONTAINER_ITEM"},DISPLAY_CASE_CREATED_TOASTER:"displayCaseCreatedToaster",DATA_EVENTS:{DATA_OBJECT_CREATED:"dataObjectCreated",DATA_OBJECT_DELETED:"dataObjectDeleted",DATA_OBJECT_UPDATED:"dataObjectUpdated"},FETCH_SUCCESS:"fetchSuccess",REVERSE_COEXISTENCE_EVENTS:{HANDLE_DISCARD:"handleDiscard",CHECK_IS_FORM_DIRTY:"checkIsFormDirty"},TIMEOUT_REMINDER:"sessionAboutToTimeout",RESET_TIMER:"resetInactivityTimer"},CONTAINER_TYPE:{MULTIPLE:"multiple",SINGLE:"single",HYBRID:"HybridViewContainer"},REMOTE_SYSTEM_ID:"RemoteSystemID",LIST_SELECTION_MODE:{MULTI:"multi",SINGLE:"single",MULTI_ON_HOVER:"multi_on_hover"},SUBMISSION_FAILURE_TYPE:{FORM_VALIDATION_ERROR:"formValidationError"},USER_SETTINGS:{UTILITY_PANEL_USER_STATE_PATH:"presentation.templates.CaseView.utilityPanelExpanded",SUMMARY_PANEL_USER_STATE_PATH:"presentation.templates.CaseView.summaryPanelExpanded",ASSIGNMENT_COLLAPSED_STATE_PATH:"presentation.templates.CaseView.assignmentWidgetCollapsed",CASE_VIEW_PATH:"presentation.templates.CaseView"},PROMISE_VALUE:{RESOLVE:"resolve",REJECT:"reject"},APP_TYPE:{UIKIT:"uikit",THEME_COSMOS:"themecosmos"},VIEW_TYPE:{PY_EMBEDASSIGNMENT:"pyEmbedAssignment",PY_DETAILS:"pyDetails"},START_PERFORMANCE_LOG:"start-performance-log",STOP_PERFORMANCE_LOG:"stop-performance-log",TOP_ACTION_LABEL:{CREATEWORK:"Create-Work",OPENASSIGNMENT:"Open-Assignment",OPENWORKBYHANDLE:"Open-Work-By-Handle",SAVEANDCLOSE:"Save-And-Close",SHOWDATA:"Show-Data",FINISHASSIGNMENT:"Finish-Assignment",GETDESCENDANTS:"Get-Descendants"}},W={CONTEXT:"context",AJAXCONTAINER:"primary",VIEW_CONTAINER:"ViewContainer",APP_SHELL:"AppShell",ROOT_CONTAINER:"RootContainer",HYBRID_VIEW_CONTAINER:"HybridViewContainer",MODAL_VIEW_CONTAINER:"ModalViewContainer",FLOW_CONTAINER:"FlowContainer",PREVIEW_VIEW_CONTAINER:"PreviewViewContainer",OBJECT_PAGE:"ObjectPage",CASE_CREATE_STAGE:"CaseCreateStage",CASE_VIEW:"CaseView",VIEW:"view",CASE_PREVIEW:"CasePreview",CASE_STAGES:"Stages",CASEMESSAGES:"caseMessages",SUGGESTION:"suggestion",PREVIEW:"preview",TERTIARY:"tertiary",DEFAULT:"default",ACPRIMARY:"primary",ACTERTIARY:"tertiary",PERFORM_MODE:"perform",CASE_VIEW_MODE_PROP:".caseViewMode",REVIEW_MODE:"review",WORKAREA:"workarea",ACPRIMARY_NAME:"ACPRIMARY",ACTERTIARY_NAME:"ACTERTIARY",THREADNAMESEPARATOR:"/",JOINCHARACTER:"_",FORWARD_SLASH_STRING:"/",UNDERSCORE_STRING:"_",WORK_ID:"WORK_ID",EMPTY_STRING:"",PROPERTY_MESSAGES:"propertyMessages__",CONTEXT_MESSAGES:"contextMessages__",HTTP_MESSAGES:"httpMessages__",PAGE_MESSAGES:"pageMessages__",SUMMARY_OF_LISTS:"summary_of_lists__",SUMMARY_OF_GROUPS:"summary_of_groups__",SUMMARY_OF_MESSAGES:"summary_of_messages__",SUMMARY_OF_FIELD_VALUES:"summary_of_field_values__",SUMMARY_OF_WHEN_CONDITIONS:"summary_of_when_conditions__",SUMMARY_OF_EXPRESSIONS:"summary_of_expressions__",SUMMARY_OF_ASSOCIATED_LISTS:"summary_of_associated_lists__",CONTEXT_DATA:"context_data",TABLE:c=>`Table[${c}]`,HTTP:"HTTP",PROPERTY:"PROPERTY",PAGE_ERRORS:"page_level_errors",NO_MESSAGES:"No messages existing",PULSE_REFERENCE:"pulse.messages",IS_LOADING:"isLoading",APPROVED:"Approved",REJECTED:"Rejected",DUPLICATE:"Duplicate",IGNORE:"Ignore",PARAGRAPH:"PARAGRAPH",X_ORIGIN_CHANNEL:"x-origin-channel",AUTHORING_PREVIEW_CONTAINER:"root/authoring-preview",ERROR_FIELD_IN_PAGE:"erroneousInputOutputFieldInPage",ERROR_IN_PAGE_IDENTIFIER:"erroneousInputOutputIdentifier",UI_RESOURCES:"uiResources",UI_RESOURCES_CONTEXT_DATA:"uiResources.context_data",ACTION_BUTTONS:"uiResources.actionButtons",RESOURCES:"uiResources.resources",ROOT:"uiResources.root",CASE_INFO_IS_LOCAL_ACTION:"caseInfo.isLocalAction",DATA:"data",OPTIONS:"options",VIEWS:"uiResources.resources.views",NAVIGATIONS:"uiResources.resources.navigations",COMPONENTS:"uiResources.components",LOCALE_REFERENCES:"uiResources.localeReferences",STATIC_SERVER_URL:"staticServer",APPLICATION_DATA:"data.Application",REFERENCED_USERS:"referencedUsers",CASE_INFO_REFRESH_CONDITIONS:"caseInfo.refreshConditions",FIELD_LEVEL_SUCCESS:"success",FIELD_LEVEL_WARNING:"warning",FIELD_LEVEL_ERROR:"error",HASH_DELIMITER:"~^|^~",NULL_STRING:"null",DATA_PAGE:"DataPage",DECISION:"Decision",RULE_REFERENCE:"RuleReference",GET_PAGE_DATA:"getPageData",PROPERTY_ANNOTATION:"@P",FIELD_LABEL_ANNOTATION:"@FL",ATTACHMENT_ANNOTATION:"@ATTACHMENT",ASSOCIATED_PROPERTY_ANNOTATION:"@ASSOCIATED",CLASS_ANNOTATION:"@CLASS",ASSOCIATED:"associated",CLASS_ID:".classID",CLASSID:"classID",READONLY:"readonly",SHARED:"shared",RELOAD_IF_OLDER_THAN:"reloadIfOlderThan",RELOAD_ONCE_PER_INTERACTION:"reloadOncePerInteraction",PY_DETAILS:"pyDetails",LIST_ACTIONS:{INSERT:"INSERT",UPDATE:"UPDATE",DELETE:"DELETE",DELETE_ALL:"DELETE ALL",MOVE:"MOVE",SELECT:"SELECT",DESELECT:"DESELECT"},LIST_ACTIONS_TYPE:{SELECT_DESELECT:"SELECT_DESELECT",DESELECT_ALL:"DESELECT_ALL"},ENV_INFO_KEYS:{APPLICATION_NAME:"APPLICATION_NAME",APPLICATION_DESC:"APPLICATION_DESC",ACCESS_GROUP:"ACCESS_GROUP",USER_NAME:"USER_NAME",USER_ID:"USER_ID",USER_IMAGE:"USER_IMAGE",LOCALE:"LOCALE",TIMEZONE:"TIMEZONE",WORK_GROUP:"WORK_GROUP"},ID:"ID",SCALARLIST:"ScalarList",COREHEADERS:"coreHeaders",SKIPCOREHEADERS:"skipCoreHeaders",COREHEADER_APP_DEBUG_ID:"X-Pega-App-Debug-ID",COREHEADER_APP_DEBUG_LEVELS:"X-Pega-App-Debug-Levels",CONTEXT_DATA_MODAL_VIEW:{IS_MULTI_RECORD_DATA:"context_data.modalView.isMultiRecordData",VIEW_NAME:"context_data.modalView.viewName",PARENT_CONTEXT:"context_data.modalView.parentContext",INTERESTPAGE:"context_data.modalView.interestPage"},DATA_CLASS_NOT_FOUND:"Data object class not found",PRIORITY:{CRITICAL:100,HIGH:500,MEDIUM:1e3,LOW:2e3,TRIVIAL:3e3},...G,getProperty:c=>B.map(c)},H="pyRemoteCaseDetails";class ${static remoteCaseMapping={};static setRemoteCaseMapping=c=>{this.remoteCaseMapping=c,this.setAdditionalParameters()};static getRemoteCaseMapping=()=>this.remoteCaseMapping;static getRemoteCase=c=>this.remoteCaseMapping?.[c];static isRemoteCase=c=>!!(c&&this.remoteCaseMapping&&this.remoteCaseMapping[c]);static getRemoteHeaderByContext=c=>sh.getProperty(".RemoteSystemID",W.CASE_INFO.HEADERS,c);static getRemoteHeader=c=>this.remoteCaseMapping[c]?.RemoteSystemID;static injectRemoteCaseHeader=(c,l,u)=>{if(c&&c.RemoteSystemID)return;const d=this.getRemoteHeaderByContext(u);d?c.RemoteSystemID=d:l&&this.isRemoteCase(l.caseTypeID)&&(c.RemoteSystemID=this.getRemoteHeader(l.caseTypeID))};static isTraditionalRemoteCase=(c="")=>"Traditional"===$.getRemoteCase(c)?.RemoteApplicationType;static setAdditionalParameters=()=>{const c=Hd.environmentInfoObject?.pyRemoteCaseTypeList;c?.forEach((c=>{const l=this.getRemoteCase(c.pyWorkTypeImplementationClassName);l&&(l.name=c.pyWorkTypeName)}))}}const q=$,z={},Y=new Map,K=c=>{let l=W.EMPTY_STRING;return l=c&&c.includes(W.FORWARD_SLASH_STRING)?c.substring(0,c.lastIndexOf("/")):c,l},X=(c,l,u=!1)=>{let d=W.EMPTY_STRING;if(l&&c){let p=`${l}${W.FORWARD_SLASH_STRING}${c}`;const h=Uu(p);if(h||l!==W.APP.APP&&l!==W.APP.ROOT)if(h){if(u&&z[p])return d=`${p}${W.UNDERSCORE_STRING}${z[p]}`,d;z[p]?z[p]+=1:z[p]=1,d=`${p}${W.UNDERSCORE_STRING}${z[p]}`}else d=X(c,K(l));else p=`${l}${W.FORWARD_SLASH_STRING}${W.PRIMARY}`,z[p]?z[p]+=1:z[p]=1,d=`${p}${W.UNDERSCORE_STRING}${z[p]}`}return d},J=(c,l)=>{if(c&&l){const u=(Y[l]?.[c]??0)+1;return Y[l]||(Y[l]={}),Y[l][c]=u,`${l}${W.FORWARD_SLASH_STRING}${c}_${u}`}return""},Q=(c,l)=>{if(c&&l){const u=Y[l]?.[c];return u?`${l}${W.FORWARD_SLASH_STRING}${c}_${u}`:J(c,l)}return""},Z=c=>{let l=W.EMPTY_STRING;return c&&(l=c.substring(c.lastIndexOf("/")+1,c.lastIndexOf("_")).toLowerCase()),l},ee=(c,l)=>{if(null===c)return l;const[,u]=l.split(W.FORWARD_SLASH_STRING);return c+W.FORWARD_SLASH_STRING+u},te=c=>{const l=c.indexOf(W.FORWARD_SLASH_STRING),u=c.lastIndexOf(W.FORWARD_SLASH_STRING);return l===u?c:c.substring(0,u)},ne=c=>{const l=c.split(W.FORWARD_SLASH_STRING);return 2===l.length?c:l[0]+W.FORWARD_SLASH_STRING+l[2]},re="SET_PROPERTY",se="REPLACE_PROPERTY",ae="FIELD_CHANGE",oe="LOAD_VIEW",ie="SHOW_PAGE",ce="SHOW_DATA",le="SHOW_INSIGHT",ue="SHOW_DASHBOARD",de="SET_LOADING",pe="RESET_LOADING",he="SET_SHARED_PROPERTY",ge="CREATE_WORK",fe="OPEN_WORK_BY_HANDLE",me="UPDATE_DOCUMENT",ye="FINISH_ASSIGNMENT",Ie="CANCEL_ASSIGNMENT",Ee="OPEN_ASSIGNMENT",Ae="MERGE_DATA",_e="REMOVE_ITEM",Ce="GET_DATAOBJECT_ACTIONS",Se="SHOW_HISTORY",Te="ERROR",Ne="INIT_CONTAINERS",Pe="RESET_CONTAINERS",be="ADD_CONTAINER_ITEM",De="REMOVE_CONTAINER_ITEM",Re="ADD_TRANSIENT_ITEM",Oe="UPDATE_TRANSIENT_DATA",ve="REMOVE_TRANSIENT_ITEM",xe="REMOVE_ALL_TRANSIENT_ITEMS",we="CLEAR_TRANSIENT_DATA",Me="PURGE_TRANSIENT_DATA",Le="REPLACE_TRANSIENT_DATA",Ue="ACTIVATE_CONTAINER_ITEM",Fe="UPDATE_CONTAINER_ITEM",je="UPMERGE_AND_REMOVE_CONTAINER_ITEM",Ve="REPLACE_CONTAINER_ITEM",ke="ACTIVATE_MODAL_CONTAINER_ITEM",$e="REMOVE_CONTAINER",Be="ADD_SUGGESTION_CONTEXT",Ge="showView",We="showData",He="showInsight",qe="showDashboard",ze="openWorkByHandle",Ye="openAssignment",Ke="createNewWork",Xe="SHOW_CANCEL_ALERT",Je="openLocalAction",Qe="openProcessAction",Ze="caseWideActions",et="openBulkAction",tt="performBulkAction",nt="ADD_MESSAGES",rt="CLEAR_MESSAGES",st="RESET_STORE",at="FETCH_DATAPAGE",ot="ADD_SHARED_DATA",it="REMOVE_SHARED_DATA",ct="LIST_ACTION",lt="DELETE_CASE_SUMMARY",ut="ALTER_BLOCKING_ACTION_COUNT",dt="CREATE_DATA_OBJECT",pt="DELETE_DATA_OBJECT",ht="VIEW_DATA_OBJECT",gt="UPDATE_DATA_OBJECT",ft="OPEN_DATA_OBJECT_ACTION",mt="SUBMIT_DATA_OBJECT_ACTION",yt="OPEN_EMBEDDED_DATA_MODAL",It="SUBMIT_EMBEDDED_DATA_MODAL",Et="FILL_FORM_WITH_AI",At="openCase",Ct=(c,l)=>{if(!c||!l)return null;let u,d=W.EMPTY_STRING;return l&&(d=`${l}${W.FORWARD_SLASH_STRING}${c}`,u=Uu(d),u||l.includes("/")?u||(d=Ct(c,K(l))):d=`${l}${W.FORWARD_SLASH_STRING}${c}`),d},St=(c,l)=>{const u=Ct(c,l);return u&&Uu(u)?Uu(u):{}},Tt=(c,l)=>Gd.getSemanticURL(Ge,{page:c},l),Nt=new class{error=c=>{console.error(c)}};class _t{constructor(c,l,u){this._grammar=c,this._state="expectOperand",this._tree=null,this._exprStr=l||"",this._endState=u||{}}static _setParent(c,l){Object.defineProperty(c,"_parent",{value:l,writable:!0})}_addToken(c){const l=wt[this._state],u=this._exprStr;if(this._exprStr+=c.element,l.subHandler){this._subParser||this._startSubExpression(u);const l=this._subParser._addToken(c);l&&(this._endSubExpression(),this._state=l)}else{if(!l.operatorTypes[c.tokenType]){if(this._endState[c.tokenType])return this._endState[c.tokenType];throw new Error(`Token ${c.element} (${c.tokenType}) unexpected in expression: ${this._exprStr}`)}{const u=l.operatorTypes[c.tokenType],d=xt[c.tokenType];d&&d.call(this,c),u.toState&&(this._state=u.toState)}}return!1}addTokens(c){c.forEach(this._addToken,this)}buildAst(){return this._subParser&&this._endSubExpression(),this._state="complete",this._position?this._tree:null}_startSubExpression(c){const{endStates:l}=wt[this._state];this._subParser=new _t(this._grammar,c,l)}_endSubExpression(){wt[this._state].subHandler.call(this,this._subParser.buildAst()),this._subParser=null}setPositionInAST(c){this._position?(this._position.right=c,_t._setParent(c,this._position)):this._tree=c,this._position=c}}const Pt=_t,bt="identifier",Dt={operatorType:"binaryOperator",precedence:1,evaluate:(c,l)=>c&&l},Rt={operatorType:"binaryOperator",precedence:1,evaluate:(c,l)=>c||l},Ot={">":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c>l},">=":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c>=l},"<":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c<l},"<=":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c<=l},"==":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c===l},"!=":{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c!==l},"!":{operatorType:"unaryOperator",precedence:999,evaluate:c=>{let{value:l}=c;return"true"!==l&&"false"!==l||(l="true"===l),!l}},"(":{operatorType:"openParenthesis"},")":{operatorType:"closeParenthesis"},"&&":Dt,AND:Dt,and:Dt,"||":Rt,OR:Rt,or:Rt,CONTAINS:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c.includes(l)},NOT_CONTAINS:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!c.includes(l)},STARTS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c.startsWith(l)},NOT_STARTS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!c.startsWith(l)},ENDS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>c.endsWith(l)},NOT_ENDS_WITH:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!c.endsWith(l)},IS_NULL:{operatorType:"binaryOperator",precedence:2,evaluate:c=>!c},IS_NOT_NULL:{operatorType:"binaryOperator",precedence:2,evaluate:c=>!!c},IS_IN_LIST:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>l.split(",").includes(c)},IS_NOT_IN_LIST:{operatorType:"binaryOperator",precedence:2,evaluate:(c,l)=>!l.split(",").includes(c)}},vt={BinaryExpression:function(c){const l=[];let u="";return l[0]=this.evaluateAST(c.left),c.left.operationType===bt&&this._context&&(u=this._context.getFieldMetadata(c.left.value.substring(1))?.type??""),l[1]=c.right?this.evaluateAST(c.right,u):"",this._grammar[c.operator].evaluate(l[0],l[1])},identifier:function(c){return this._localDataObject?this._localDataObject[c.value.substring(1)]??"":this._contextTreeNodeContext?sh.getLitePropertyValue(this._contextTreeNodeContext,c.value):this._context.getValue(c.value)??""},literal:function(c,l){return void 0!==l&&""!==l&&"True-False"!==l||"true"!==c.value&&"false"!==c.value?c.value:"true"===c.value},UnaryExpression:function(c){return this._grammar[c.operator].evaluate(c.right)}},xt={unaryOperator:function(c){this.setPositionInAST({operationType:"UnaryExpression",operator:c.value})},binaryOperator:function(c){const{precedence:l}=this._grammar[c.value];let u=this._position._parent;for(;u&&u.operator&&this._grammar[u.operator].precedence>=l;)this._position=u,u=u._parent;const d={operationType:"BinaryExpression",operator:c.value,left:this._position};Pt._setParent(this._position,d),this._position=u,this.setPositionInAST(d)},identifier:function(c){const l={operationType:bt,value:c.value};this.setPositionInAST(l)},literal:function(c){this.setPositionInAST({operationType:"literal",value:c.value})},subExpression:function(c){this.setPositionInAST(c)}},wt={expectOperand:{operatorTypes:{literal:{toState:"expectBinOp"},identifier:{toState:bt},unaryOperator:{},openParenthesis:{toState:"subExpression"}}},expectBinOp:{operatorTypes:{binaryOperator:{toState:"expectOperand"}}},identifier:{operatorTypes:{binaryOperator:{toState:"expectOperand"}}},subExpression:{subHandler:xt.subExpression,endStates:{closeParenthesis:"expectBinOp"}}},Mt=["binaryOperator","unaryOperator","openParenthesis"],Lt=/^\s*$/,Ut=/^[a-zA-Z_.$][(0-9)a-zA-Z0-9_.$]*$/,jt=/\\\\/,Vt=["'(?:(?:\\\\')|[^'])*'",'"(?:(?:\\\\")|[^"])*"',"\\s+","\\btrue\\b","\\bfalse\\b"],kt=["[a-zA-Z_.\\$][(0-9)a-zA-Z0-9_.\\$]*","[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}|[0-9]{4}-[0-9]{2}-[0-9]{2}","(?:(?:[0-9]*\\.[0-9]+)|[0-9]+)"],$t=/^-?(?:(?:[0-9]*\.[0-9]+)|[0-9]+)$/;class Ft{constructor(c){this._grammar=c}static _isNegative(c){return Mt.some((l=>l===c[c.length-1].tokenType))}static _isWhitespace(c){return!!c.match(Lt)}static _createWordboundary(c){return(c=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).match(Ut)&&(c=`\\b${c}\\b`),c}static _unquote(c){const[l]=c,u=new RegExp(`\\\\${l}`,"g");return c.substr(1,c.length-2).replace(u,l).replace(jt,"\\")}_getSplitRegex(){if(!this._splitRegex){const c=Object.keys(this._grammar).sort(((c,l)=>l.length-c.length)).map((c=>Ft._createWordboundary(c)),this);this._splitRegex=new RegExp(`(${[Vt.join("|"),c.join("|"),kt.join("|")].join("|")})`)}return this._splitRegex}_splitExpression(c){const l=this._getSplitRegex();return c.split(l).filter((c=>c))}_createToken(c){const l={tokenType:"literal",value:c,element:c};return'"'===c[0]||"'"===c[0]?l.value=Ft._unquote(c):c.match($t)?l.value=parseFloat(c):"true"===c||"false"===c?l.value="true"===c:this._grammar[c]?l.tokenType=this._grammar[c].operatorType:c.match(Ut)&&(l.tokenType="identifier"),l}_getTokens(c){const l=[];let u=!1;for(let d=0;d<c.length;d+=1)Ft._isWhitespace(c[d])?l.length&&(l[l.length-1].element+=c[d]):"-"===c[d]&&Ft._isNegative(l)?u=!0:(u&&(c[d]=`-${c[d]}`,u=!1),l.push(this._createToken(c[d])));return l}tokenize(c){const l=this._splitExpression(c);return this._getTokens(l)}}const Bt=Ft,Gt=class{constructor(c,l){this._grammar={...Ot},this._expression=c,this._ast=null,this._context={},this._contextTreeNodeContext=null,this._localDataObject=l}buildAST(){const c=new Bt(this._grammar).tokenize(this._expression),l=new Pt(this._grammar);return l.addTokens(c),this._ast=l.buildAst(),this}evaluate(c,l){return this._context=c,this._contextTreeNodeContext=l,this.evaluateAST(this._ast)}evaluateAST(c,l){return vt[c.operationType].call(this,c,l)}},Wt=(c,l)=>{const u=c.replace(/[a-zA-Z0-9_)"'\s]=[a-zA-Z0-9_("'\s]/,(c=>c.replace("=","==")));return new Gt(u,l)},Ht=c=>!c||c.buildAST(),qt=(c,l,u)=>!c||c.evaluate(l,u),zt=(c,l,u)=>{const d=Wt(c,l),p=Ht(d);return qt(p,u)},Yt=class{static handleExpression(c,l,u,d){(c=>fetch(`${_.BASEURL}${_.ACTIONURL}`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}))({actionObject:{action:"decexp",params:{source:c,value:l,targets:u},context:this.getContext(c,d)}}).then((c=>c.json())).then((c=>{this.updateState(c,d)})).catch((c=>window.console.log(c)))}static getContext(c,l){const u=c.substring(0,c.indexOf("."));return{name:u,class:sh.getPropertyValue(`${u}.pxObjClass`,null,l)||sh.getPropertyValue(`${u}.pyClassName`,null,l)}}static updateState(c,l){Object.keys(c).forEach((u=>kp({type:re,payload:{context:l,reference:u,value:c[u]}})))}},Kt={},Xt=(c,l)=>Kt[l]&&Object.prototype.hasOwnProperty.call(Kt[l],c),Jt=c=>{const{context:l}=c;Xt(c.reference,l)&&Yt.handleExpression(c.reference,c.value,Kt[l][c.reference],l)},Qt=(c={})=>{eh.copy(c,Kt)},Zt=(c,l,u)=>zt(c,l,u?.pConnect.getPConnect()),en=new class{constructor(){this._dataSourceMap={}}hasContextName(c){return c in this._dataSourceMap}addContextName(c,l){l&&Object.keys(l).length>0?this._dataSourceMap[c]=l:this._dataSourceMap[c]={}}getContextObjectByName(c){return c in this._dataSourceMap?this._dataSourceMap[c]:null}deleteContextName(c){this.hasContextName(c)&&delete this._dataSourceMap[c]}addOrUpdatePropertyInContext(c,l,u){if(this.hasContextName(c)){const d=this.getContextObjectByName(c);if(d)if(Array.isArray(u))d[l]=u;else{const c=d[l];d[l]=[...new Set([...c,u])]}}else{const d={};Array.isArray(u)?d[l]=u:d[l]=[u],this.addContextName(c,d)}}deletePropertyInContext(c,l){if(this.hasContextName(c)){const u=this.getContextObjectByName(c);u&&l in u&&delete u[l]}}getPropertyFromContext(c,l){if(this.hasContextName(c)){const u=this.getContextObjectByName(c);if(u&&l in u)return u[l]}return[]}getDependencies(c,l){const u=this.getPropertyFromContext(c,l),d=new Set(u);return u.forEach((c=>{d.add(c)})),[...d]}},tn=new class{constructor(){this.componentMap={},this.overrideMap={},this.lazyMap={},this.customComponentLazyMap={}}register(c,l){this.componentMap[c]=l}registerLazyMap(c,l){this.lazyMap[c]=l}registerCustomComponentLazyMap(c,l){this.customComponentLazyMap[c]=l}getComponent(c){return this.componentMap[c]}getLazyComponent(c){return this.lazyMap[c]}getCustomComponent(c){return this.customComponentLazyMap[c]}mergeComponentsMap(c={}){eh.copy(c,this.componentMap)}mergeOverrideMap(c={}){eh.copy(c,this.overrideMap)}getOverrideMap(){return this.overrideMap}getLazyMap(){return this.lazyMap}},nn=new class{constructor(){this.handlers={}}registerHandler(c,l){this.handlers[c]=l}getHandler(c){return this.handlers[c]}},rn=class{static handleAnnotation(c,l,u){const d=c.indexOf(" "),p=-1===d?c:c.substring(0,d),h=nn.getHandler(p);return h?h(c.substring(d+1),l,u):c}static trimAnnotation(c){if("string"!=typeof c)return c;const l=c.indexOf(" "),u=c.substring(0,l),d=c.substring(l+1);return nn.getHandler(u)?d:c}static handleComponentMapping(c,l,u){const d=tn.getComponent(l.type);if(!d||!d.mapping)return;const p=d.mapping(l.config);if(p&&p["@map"]){const l=p["@map"],{source:d}=l;if(!d)return;const h=u.getValue(d);if("function"==typeof l.advanced)l.advanced(c,h);else{const u=l.inputs_map;c[l.output_property]=[];const d=c[l.output_property];h.forEach((c=>{const l={};Object.keys(u).forEach((d=>{let p=u[d];p&&0===p.indexOf(".")?(p=p.substring(1),l[d]=c[p]):l[d]=p})),d.push(l)}))}}}static getPropertyName(c=""){if(c&&eh.isString(c)){const l=c.startsWith(W.PROPERTY_ANNOTATION)||c.startsWith(W.ATTACHMENT_ANNOTATION)||c.startsWith(W.ASSOCIATED_PROPERTY_ANNOTATION),u=l?c.indexOf(" "):-1;return l?c.substring(u+2):c}return c}static getLeafPropertyName(c){if(eh.isString(c)&&c?.startsWith(W.PROPERTY_ANNOTATION)){const l=this.getPropertyName(c),u=l.split(".");return u.length<2?l:u.pop()}return c}static isProperty(c){return eh.isString(c)&&!!c?.startsWith(W.PROPERTY_ANNOTATION)}},sn=c=>{if(c){const{stageID:l,stages:u=[]}=c,d=u.length;for(let c=0;c<d;c+=1)if(u[c].ID===l)return"create"===u[c].transitionType&&"active"===u[c].visited_status}return!1},an=(c,l)=>{if(c&&l){const u=eh.getIn(l,["assignments","0","assigneeInfo"],{}),{ID:d,type:p}=u;return"worklist"===p?.toLowerCase()&&d===c}return!1},on=c=>{const{activeActionID:l,availableActions:u}=c||{};if(l&&u){const c=u.find((c=>c.ID===l));return Boolean(c)}return!1},cn=(c,l)=>{const u=sh.getPropertyValue(G.CASE_INFO.ACTIVE_ACTION_ID,l,c),d=sh.getPropertyValue(G.CASE_INFO.AVAILABLEACTIONS,l,c);let p=!1;if(d&&u){const c=d.find((c=>c.ID===u));c&&(p=c.type.toLowerCase()===G.LOCAL_ACTION_TYPE.CASE_WIDE.toLowerCase())}if(c&&!d){const l=$p(c);p=l?.context_data?.actionType===W.CASE}return p},ln=c=>Hp(null,W.CASE_VIEW_MODE_PROP,c)===W.PERFORM_MODE&&(c.includes(W.WORKAREA)||c.includes(W.MODAL)),un=c=>{const l=c?.parentCaseInfo?.ID;return Boolean(c&&l)},pn=(c,l,u)=>{let d,p,h,g,f,m,y,I,E;const A=$p(c);return u?.isTriggeredFromDifferentContext?(d=A.caseInfo.assignments[0].ID,p=A.caseInfo.ID,h=A.caseInfo.assignments,g=A.caseInfo.activeActionID,f=A.caseInfo.availableActions,m=A.caseInfo,y=A.caseInfo.businessID,I=A.caseInfo.caseTypeID,E=A.caseInfo.caseTypeName):(d=l.getValue(G.CASE_INFO.ASSIGNMENT_ID),p=l.getValue(G.CASE_INFO.CASE_INFO_ID),h=l.getValue(G.CASE_INFO.ASSIGNMENTS),g=l.getValue(G.CASE_INFO.ACTIVE_ACTION_ID),f=l.getValue(G.CASE_INFO.AVAILABLEACTIONS),m=l.getValue(G.CASE_INFO.CASE_INFO),y=l.getValue(G.CASE_INFO.BUSINESS_ID),I=l.getValue(G.CASE_INFO.CASE_TYPE_ID),E=l.getValue(G.CASE_INFO.CASE_TYPE_NAME)),{assignmentID:d,caseID:p,assignments:h,localActionID:g,caseActions:f,caseInfo:m,businessID:y,caseTypeID:I,caseTypeName:E}},hn=new class{constructor(){this.contextArray={},this.pauseDuration=2e3,this.waitingToPutUpIndicator=!1}getLoadingContext(c){let l=null;return c&&(({context:l}=c),l||(l=c.containerItemID),l||(l=c.contextName)),l}enableLoadingIndicator(c,l=!0){const u=this.getLoadingContext(c);u&&(this.addToContextArray(u),this.waitingToPutUpIndicator||(this.waitingToPutUpIndicator=!0,this.pauseBeforeShowing(u).then((c=>{l&&void 0!==this.contextArray[c]&&this.contextArray[c]>0&&kp({type:de,payload:{context:c}})}))))}pauseBeforeShowing=c=>new Promise((l=>setTimeout((()=>l(c)),this.pauseDuration)));disableLoadingIndicator(c,l=!0){const u=this.getLoadingContext(c);u&&(this.waitingToPutUpIndicator=!1,this.removeFromContextArray(u),l&&void 0!==this.contextArray[u]&&0===this.contextArray[u]&&kp({type:pe,payload:{context:u}}))}addToContextArray=c=>{void 0===this.contextArray[c]&&(this.contextArray[c]=0),this.contextArray[c]+=1};removeFromContextArray=c=>{void 0!==this.contextArray[c]&&this.contextArray[c]>0&&(this.contextArray[c]-=1)}},gn=new class{constructor(){this.counterActionMgrId=0,this.actionMgrActions={}}getNextActionMgrId(){return this.counterActionMgrId+=1,this.counterActionMgrId.toString()}register(c,l,u,d,p="unknown",h,g=!0){if(void 0!==this.actionMgrActions[c])return null;const f={actionType:p,promise:l,resolve:u,reject:d,actionPayload:h};return this.actionMgrActions[c]=f,g&&hn.enableLoadingIndicator(f.actionPayload),c}actionManagerPromise=(c,l="")=>{let u,d;""===l&&(l=this.getNextActionMgrId());const p=new Promise(((c,l)=>{u=c,d=l}));if(!u||!d)throw new Error("resolveFn or rejectFn is not defined.");return this.register(l,p,u,d,c),{actionMgrID:l,promise:p}};resolveActionByID(c,l,u=!0){const d=this.actionMgrActions[c];let p=c;return d?(setTimeout((()=>{d.resolve(l)}),0),hn.disableLoadingIndicator(d.actionPayload,u)):p=null,p}rejectActionByID(c,l=!0,u){const d=this.actionMgrActions[c];let p=c;return d?(d.reject(u),hn.disableLoadingIndicator(d.actionPayload,l)):p=null,p}};class dn{constructor(c,l,u={}){this.type=c,this.name=l,this.parent=null,this.children=[],this.eventSubscribers=[],this.value="",this.previousValue="|~#-old-#~|",this.props=u,this.references=new Map}addReference(c,l){this.references.set(c,l)}getReference(c){return c?this.references.get(c):void 0}getNode(c,l,u){return this.children.find((d=>d.type===c&&d.name===l&&d.props.index===u))}addNode(c,l,u={}){let d=this.getNode(c,l,u.index);return d?d.props=u:(d=new dn(c,l,u),d.parent=this,this.children.push(d)),d}addEventListener(c){this.eventSubscribers.push(c)}triggerEvent(c,l=!1){this.eventSubscribers.forEach((l=>{l(c)})),!l&&this.parent&&this.parent.triggerEvent(c)}setPreviousDefaultValue(){"|~#-old-#~|"===this.previousValue&&(this.previousValue=this.value)}removeReference(c,l){const u=this.references.get(c);u?.props?.index===l&&this.references.delete(c)}removeChildNode(c){const l=this.children.findIndex((l=>l.name.startsWith(c)));-1!==l&&this.children.splice(l,1)}removeChildren(){this.children.splice(0,this.children.length)}removeNode(c,l){for(let u=this.children.length-1;u>=0;u-=1){const d=this.children[u];if(d.props.index===l&&d.name===c){this.children.splice(u,1);break}}}}const fn=dn,mn=class{constructor(c,l,u,d={}){this.type=G.CONTEXT_TREE_NODE_TYPES.WHEN,this.subType=c,this.referenceName=l,this.name=u,this.props=d}},yn=/(([^.]+)\[\d+\])/g,In=c=>{if((c?.split(".")??[]).length<3)return[c];const l=c?.match(yn);if(!l)return[c];let u,d=l[l.length-1];return c=c?.split(d)[0],c=c?.substring(0,c.length-1),[d,u]=d.split("["),u=u?.split("]")[0],[c,d,u]},{FIELD:En,WHEN:An,DECLARATIVE_TARGET:_n,PAGELIST:Cn}=W.CONTEXT_TREE_NODE_TYPES,Sn=class{constructor(c,l,u={}){this.type=c,this.name=l,this.children=[],this.eventSubscribers=[],this.props=u,this.references=new Map([[En,new Map],[An,new Map],[_n,new Map]])}addReference(c,l){if(this.references.has(l.type)){const u=this.references.get(l.type);u.set(c,l),this.references.set(l.type,u)}else if(l.type===Cn){const u=this.references.get(En);u.set(c,l),this.references.set(En,u)}}removePageListNodes(c,l){const u=this.children.filter((l=>l.name.startsWith(c))).filter((u=>{const d=((c,l)=>{if(!c.startsWith(l))return-1;const u=c.slice(l.length).match(/\[([0-9]+)\]/);return u?parseInt(u[1],10):-1})(u.name,c);return-1!==d&&+d>=l}));u.length>0&&u.forEach((c=>{this.removeChildNode(c.name,l)}))}removeChildNode(c,l){const u=this.children.findIndex((l=>l.name.startsWith(c)));if(-1!==u){const[l]=this.children.splice(u,1),d=l?.parent;d?.removeChildNode(c)}const d=this.references.get(En),p=this.references.get(_n);[...d.keys(),...p.keys()].filter((l=>l.startsWith(c))).filter((c=>{const[,,u]=In(c);return+u>=l})).forEach((c=>{const l=d.get(c).parent;l?.removeChildren(),d.delete(c)}))}getReference(c,l){if(this.references.has(l))return this.references.get(l)?.get(c)}getNode(c,l,u){return this.children.find((d=>d.type===c&&d.name===l&&d.props.index===u))}addNode(c,l,u={}){let d=this.getNode(c,l,u.index);return d?d.props=u:(d=new fn(c,l,u),d.parent=this,this.children.push(d)),d}addEventListener(c){this.eventSubscribers.push(c)}triggerEvent(c){this.eventSubscribers.forEach((l=>{l(c)}))}removeReference(c,l,u){const d=this.references.get(l),p=d?.get(c);p?.props?.index===u&&d.delete(c)}removeNode(c,l){for(let u=this.children.length-1;u>=0;u-=1){const d=this.children[u];if(d.props.index===l&&d.name===c){this.children.splice(u,1);break}}}addWhen(c,l,u,d,p){if(!(u&&d&&c&&l))return;u.startsWith(".")&&(u=u.substring(1));const h=`${c}.${u}.${d}`,g=new mn(l,u,d,p),f=this.references.get("WHEN");f?.set(h,g)}},{VIEW:Tn,FIELD:Nn,CONTEXT:Pn,DECLARATIVE_TARGET:bn,WHEN:Dn}=G.CONTEXT_TREE_NODE_TYPES,Rn=new class{constructor(){this.rootNodes={}}_isContextNodeExist(c){return Object.keys(this.rootNodes).includes(c)}addContextNode(c){if(!this._isContextNodeExist(c)){const l=new Sn(Pn,c);this.rootNodes[c]=l}return this.rootNodes[c]}getContextNode(c){return c?this.rootNodes[c]:void 0}addPageNode(c,l){return this.addContextNode(c).addNode("PAGE",l)}_addParentViewNode(c,l,u){const d=this.addContextNode(c).addNode("PAGE",l);let p=d.getReference(u);return p||(p=d.addNode("VIEW",u),d.addReference(u,p)),p}pushChildPageNodeToParentView(c,l,u){const d=c.children;let p=!1;if(d)for(let h=0;h<d.length;h+=1)if(d[h].name===u){p=!0;break}p||d.push(l),l.parent=c}addViewNode(c,l,u,d){const p=this.addContextNode(c).addNode("PAGE",l);let h=null;h=d&&u!==d?this._addParentViewNode(c,l,d).addNode("VIEW",u):p.addNode("VIEW",u),p.addReference(u,h);const g=l.split(".");for(;g.length>0;){g.pop();const u=g.join("."),h=this.getContextNode(c)?.getNode("PAGE",u),f=h?.getReference(d);if(f){this.pushChildPageNodeToParentView(f,p,l);break}}return h}getViewNode(c,l,u){return this.getContextNode(c)?.getNode("PAGE",l)?.getReference(u)}addPageListNode(c,l,u,d,p){if(!d)return;d.startsWith(".")&&(d=d.substring(1));const h=this.addContextNode(c),g=h.addNode("PAGE",l)?.getReference(u)?.addNode("PAGELIST",`${l}.${d}`,p);return g&&h.addReference(`${l}.${d}`,g),g}updatePageListNode(c,l,u,d){u&&(u.startsWith(".")&&(u=u.substring(1)),this.addContextNode(c).removePageListNodes(`${l}.${u}`,d))}removeFieldNode(c,l,u,d,p){const h=this.getContextNode(c);h?.getNode("PAGE",l)?.getReference(u)?.removeNode(`${l}${d}`,p),h?.removeReference(`${l}${d}`,Nn,p),h?.removeReference(`${l}${d}`,bn,p)}removeViewNode(c,l,u,d){const p=this.getContextNode(c),h=p?.getNode("PAGE",l),g=h?.getReference(u);this.removeChildViewNodes(c,l,u,d);const f=g?.parent?.children?.findIndex((c=>c.name===u))??-1;f>-1&&g?.parent?.children.splice(f,1)}removeChildViewNodes(c,l,u,d){const p=this.getContextNode(c),h=p?.getNode("PAGE",l),g=h?.getReference(u);g?.children.forEach((h=>{"PAGE"===h.type?this.removeViewNode(c,h.name,u,d):h.type===Tn?this.removeChildViewNodes(c,l,h.name,d):(p.removeReference(h.name,Nn,h.props.index),p.removeReference(h.name,bn,h.props.index),"PAGELIST"!==h.type&&"Address"!==h.props?.componentName||this.deleteAllListNodes(c,h.name))})),h?.references.delete(u)}deleteAllListNodes(c,l){const u=u=>{const d=this.getContextNode(c),p=d?.references?.get(u);if(p)for(const[c]of p)c.includes(l)&&d?.references?.get(u)?.delete(c)};u(Nn),u(bn)}deleteListNode(c,l,u){const d=d=>{const p=this.getContextNode(c),h=p?.references?.get(d);if(h)for(const[c]of h)c.includes(`${l.join(".")}[${u}]`)&&p?.references?.get(d)?.delete(c)};d(Nn),d(bn)}getPageListNode(c,l,u,d){const p=this.getContextNode(c)?.getNode("PAGE",l)?.getReference(u);return p?.children.find((c=>"PAGELIST"===c.type&&c.name===`${l}.${d}`))}getFieldNode(c,l,u,d){return this.getViewNode(c,l,u)?.getNode(Nn,d)}_findViewNode(c,l,u,d){let p=d.addNode("PAGE",l)?.getReference(u);if(p)return p;const h=l.split(".");for(;h.length>0;){h.pop();const c=h.join(".");if(p=d.addNode("PAGE",c)?.getReference(u),p)return p}return this.addViewNode(c,l,u)}addFieldNode(c,l,u,d,p,h={}){const g=this.addContextNode(c),f=this._findViewNode(c,l,u,g),{isDeclarativeTarget:m}=h;let y;if(y=m?f.addNode(bn,`${l}${d}`,h):f.addNode(Nn,`${l}${d}`,h),y){const u=`${l}${d}`;if("Address"===y.props?.componentName&&this.deleteAllListNodes(c,y.name),g.addReference(u,y),y.value=p,y.setPreviousDefaultValue(),y.props.isInsideList){const c=l.substring(0,l.lastIndexOf("["));let u=g.getReference(c,Nn);u||(u=f.addNode(Nn,c,{}),g.addReference(c,u))}}return y}removeContextTreeNode(c){delete this.rootNodes[c]}onViewMutate(c,l,u,d){this.getViewNode(c,l,u)?.addEventListener(d)}mutateField(c,l,u,d){const p=this.getContextNode(c),[h,g,f]=In(l);u.startsWith(".")&&(u=u.substring(1)),g&&this.mutatePageList(c,h,g,{...d,rowIndex:f},!0);const m=p?.getReference(`${l}.${u}`,Nn);m&&m instanceof fn&&m.triggerEvent(d)}onPageListMutate(c,l,u,d,p){this.getPageListNode(c,l,u,d)?.addEventListener(p)}mutatePageList(c,l,u,d,p=!1){const h=this.getContextNode(c),g=h?.getReference(`${l}.${u}`,Nn);g&&g instanceof fn&&g.triggerEvent(d,p)}getFieldsList(c){const l=this.getContextNode(c);return l?.references.get(Nn)}getFieldReferenceForProperty(c,l){return this.getContextNode(c)?.references?.get(Nn)?.get(l)}getFieldReferencePreviousValue(c,l){let u=this.getContextNode(c)?.references?.get(Nn)?.get(l);return u||(u=this.getContextNode(c)?.references?.get(bn)?.get(l)),u?.value}updateFieldNodeValue(c,l,u){const d=this.getContextNode(c)?.references?.get(Nn)?.get(l);d instanceof fn&&d&&(d.previousValue=d.value,void 0===d.value&&(d.previousValue=u),d.value=u)}getContextReferences(c){if(!this.getContextNode(c))return;const l=this.getContextReferencesByType(c,Nn),u=this.getContextReferencesByType(c,bn);return new Map([...l.entries(),...u.entries()])}getContextReferencesByType(c,l){return this.getContextNode(c)?.references.get(l)||new Map}isFieldExists(c,l){return!!this.getContextReferencesByType(c,Nn)?.get(l)||!!this.getContextReferencesByType(c,bn)?.get(l)}addWhenNode(c,l,u,d,p,h){const g=this.getContextNode(c);g?.addWhen(l,u,d,p,h)}getDeclarativeTargets(c){const l=this.getContextNode(c),u=l?.references?.get(bn)||new Map,d=[];return u.forEach((c=>{const l=c?.props||{},{propertyName:u=""}=l,p=l.pageReference??G.CASE_INFO.CASE_INFO_CONTENT;d.push({pageReference:p,name:u})})),d}getWhens(c){const l=this.getContextNode(c),u=l?.references?.get(Dn)||new Map,d=[];return u.forEach((c=>{const l=c.subType,u=c.referenceName,p=c.name,h=c?.props?.pageReference??G.CASE_INFO.CASE_INFO_CONTENT;d.push({name:p,pageReference:h,referenceName:u,type:l})})),d}},On="REFRESH_DATA",vn="refresh",xn="refreshCaseData",wn="refreshAssignmentData",Mn="refreshCaseView",Ln="recalculate",Un="recalculateCaseData",Fn="recalculateAssignmentData",jn=c=>({type:On,payload:c}),Vn={},kn=(c,l,u,d,p)=>{c&&u&&l&&(d&&(d=eh.convertPageRefToClipboardPageNotation(d)),kp(jn({ID:c,viewID:l,context:u,options:p,caseViewAction:!0,interestPage:d})))},$n=(c,l,u)=>{Vn[l]||(Vn[l]={}),c&&!Vn[l][c]&&(Vn[l][c]={pageReference:u})},Bn=(c,l)=>{const u={pageName:(d=l.substring(l.lastIndexOf(" ")+1)).substring(0,d.lastIndexOf(".")),propertyName:d.substring(d.lastIndexOf(".")+1)};var d;const p=gp(u.propertyName,c.getValue(W.CLASS_ID,u.pageName));return!!p?.isDeclarativeTarget},Gn=(c,l,u)=>{const d=cn(c,l),p=sh.getPropertyValue(G.CASE_INFO.ACTIVE_ACTION_ID,l,c)?sh.getPropertyValue(G.CASE_INFO.ACTIVE_ACTION_ID,l,c):sh.getPropertyValue(G.CASE_INFO.ASSIGNMENTACTION_ID,l,c);let h;h=d?sh.getPropertyValue(G.CASE_INFO.CASE_INFO_ID,l,c):sh.getPropertyValue(G.CASE_INFO.ASSIGNMENT_ID,l,c)?sh.getPropertyValue(G.CASE_INFO.ASSIGNMENT_ID,l,c):sh.getPropertyValue(G.CONTEXT_DATA_ASSIGNMENTID,l,c),((c,l,u,d,p)=>{if(!(c&&u&&l))return;const h=p.actionMgrID||gn.getNextActionMgrId(),g={ID:c,actionID:l,context:u,caseWideAction:d,options:{...p,actionMgrID:h}};p.isFillFormWithAI?kp((c=>({type:Et,payload:c}))(g)):kp(jn(g))})(h,p,c,d,u)},Wn=c=>{const{context:l,pageReference:u}=c,d=(c=>Vn[c]&&Object.keys(Vn[c]).length>0&&ln(c))(l);if(d)if(sh.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.IS_MULTI_RECORD_DATA,u,l)){const c=sh.getPropertyValue(G.CASE_INFO.CASE_INFO_ID,u,l),d=sh.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.VIEW_NAME,u,l),p=sh.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.INTERESTPAGE,u,l);kn(c,d,l,p,{})}else Gn(l,u,{})},Hn=(c,l)=>{const{requestType:u}=c;return c?.options?.refreshFor&&"refresh"===u&&(l+=`?refreshFor=${c?.options?.refreshFor}`),c?.options?.isFillFormWithAI&&"refresh"===u&&(l+="?fillFormWithAI=true"),l},qn=(c,l)=>{const u=c.url?.includes("/refresh?refreshFor="),d=l.url?.includes("/refresh?refreshFor="),p=c.url?.endsWith("/refresh")&&!u,h=l.url?.endsWith("/refresh")&&!d;if(p&&h)return c.url===l.url;if(p&&d)return!0;if(u){if(h)return"CANCEL_REFRESH";if(d)return!1}return!1},zn=class{static formatPageReference(c){const l=c?.split(".").map((c=>{if(c.includes("[")){const l=c.indexOf("["),u=c.indexOf("]"),d=c.substring(l+1,u),p=Number(d)+1;return`${c.substring(0,l)}(${p})${c.substring(u+1)}`}return c}));return l.join(".")}static getFieldLabel(c){let l=c?.label;if(!l&&c?.inheritedProps){const u=c?.inheritedProps;(u.showLabel??1)&&(l=u.label)}return l}},Yn={CONTENT_FIELDS_PATH:[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO,W.CONTENT],FIELD_MESSAGES_PATH:[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO,W.CONTENT,W.SUMMARY_OF_MESSAGES,W.PROPERTY_MESSAGES],PAGE_MESSAGES_PATH:[W.CONTEXT_DATA,W.SUMMARY_OF_MESSAGES,W.PAGE_MESSAGES],HTTP_MESSAGES_PATH:[W.CONTEXT_DATA,W.SUMMARY_OF_MESSAGES,W.HTTP_MESSAGES],CASE_MESSAGE_PATH:[W.CASEMESSAGES]},Kn=(c="",l="",u,d)=>{let p,h=[];null!==c&&(p=(c=>c?.startsWith(".")?c.substring(1).split("."):c.split("."))(c));const g=l&&l.startsWith(".")?l.substr(1):l;if(u===W.PROPERTY&&c||c){h=[W.CONTEXT_DATA,...g.split(".")];for(let c=0;c<p.length-1;c+=1)h.push(p[c]);h.push(W.SUMMARY_OF_MESSAGES,W.PROPERTY_MESSAGES,p[p.length-1])}else u===G.PAGE?h=[...Yn.PAGE_MESSAGES_PATH]:u===W.HTTP?h=[...Yn.HTTP_MESSAGES_PATH]:u===W.CASEMESSAGES?h=[...Yn.CASE_MESSAGE_PATH]:d&&(h=[W.CONTEXT_DATA,...g.split(".")]);return h.filter(Boolean)},Xn=(c,l,u)=>{const d={content:{}},p=`${l}[${u}]`,h=eh.getIn(c?.content,p.split("."));return h&&eh.setIn(d.content,p.split("."),{...h}),d},Jn=(c,l,u,d,p,h,g={})=>{const f=((c,l,u)=>l<u?c.filter((c=>parseInt(c.match(/\d+/)?.[0],10)>l&&parseInt(c.match(/\d+/)?.[0],10)<=u)):c.filter((c=>parseInt(c.match(/\d+/)?.[0],10)<l&&parseInt(c.match(/\d+/)?.[0],10)>=u)))(u,d,p),m=d>p?"up":"down";f&&f?.length>0&&f?.forEach((u=>{const d=parseInt(u.match(/\d+/)?.[0],10),p=`${h}[${d}]`;g[`${h}[${d+("up"===m?1:-1)}]`]=eh.getIn(c[l],[W.CONTEXT_DATA,...p.split(".")]),eh.deleteIn(c[l],[W.CONTEXT_DATA,...p.split(".")])}));const y=Object.keys(g);y.length>0&&y.forEach((u=>{eh.setIn(c[l],[W.CONTEXT_DATA,...u.split(".")],g[u])}))},Qn=c=>{const{type:l,property:u,category:d,context:p,pageReference:h}=c;let g;u&&(g=u.slice(1));const f=$p(p);let m=[];const y=eh.getIn(f,Kn(g,h,d));return l&&"all"!==l?(y&&Array.isArray(y)&&y.length>0&&(m=y.filter((c=>c.type===l))),l===G.MESSAGES.MESSAGES_TYPE_ERROR&&m.length>0&&u&&Rn.mutateField(p,h,u,{messages:[...m],type:G.MESSAGES.MESSAGES_TYPE_ERROR,fieldName:u}),m):y},Zn=c=>{const{property:l,pageReference:u,category:d,context:p,type:h,isListEntry:g,clearContextMessages:f,deletingIndex:m}=c,y={context:p,type:h};l&&!g?(Rn.mutateField(p,u,l,{type:rt,fieldName:l}),y.property=l,y.pageReference=u):g?(y.pageReference=u,y.isListEntry=g,y.deletingIndex=m):y.category=d,kp(f?{type:rt,payload:{stateObj:c.stateObj,context:p}}:{type:rt,payload:y})},er=c=>{const{messages:l,property:u,pageReference:d,category:p,context:h}=c,g={messages:l,context:h};u?(g.property=u,g.pageReference=d):g.category=p,kp({type:nt,payload:g})},tr=(c,l,u)=>{for(const d of Object.keys(c))l.push(d),d===W.SUMMARY_OF_MESSAGES?u.push([...l]):"object"==typeof c[d]&&tr(c[d],l,u),l.pop();return u},nr=(c,l)=>{let u=Qn({context:W.APP.ROOT,category:"HTTP"});if(c){const c=Qn({context:l,category:"HTTP"});u?c&&(u=u.concat(Qn({context:l,category:"HTTP"}))):u=Qn({context:l,category:"HTTP"})}return u},rr=c=>{let l=null;l=td(c)[0]?zu(td(c)[0]):c,l&&Zn({context:l,stateObj:$p(l),clearContextMessages:!0})},sr={addMessages:er,getValidationErrorMessages:c=>{const l=$p(c),u=[],d=eh.getIn(l,[...Yn.CONTENT_FIELDS_PATH])||{};return tr(d,[],[]).forEach((c=>{const l=eh.getIn(d,[...c,W.PROPERTY_MESSAGES]);l&&Object.keys(l).forEach((c=>{l[c].forEach((c=>{c.type===W.MESSAGES.MESSAGES_TYPE_ERROR&&(c.fieldLabel?u.push({label:`${c.fieldLabel}:`,description:c.message}):u.push(zd.getLocaleValue(c.message,"Messages")))}))}))})),u},getMessages:Qn,clearMessages:Zn,getRootContainerHttpMessages:nr,clearContextMessagesInActiveWorkArea:rr},ar=sr,or=class{static execute(c,l,u,d){const p={};Object.prototype.hasOwnProperty.call(u,"nonFormProperties")&&(u.nonFormProperties.forEach((c=>{p[c]=u[c],delete u[c]})),delete u.nonFormProperties);const h={instruction:"INSERT",content:{...eh.unflatten(u)}},g=JSON.parse(JSON.stringify(h));return delete g.content.classID,{instruction:{target:eh.buildInstructionPageReference(d,c),content:{...g.content},listIndex:l,instruction:"INSERT"},actionPayload:h,displayPropertPayload:p}}},ir=class{static execute(c,l,u,d,p,h){const g={instruction:"UPDATE",content:{...eh.unflatten(d)}},f={content:{...g.content},target:eh.buildInstructionPageReference(p,l),listIndex:u,instruction:"UPDATE"};return h||kp(Gh({...g,listIndex:u-1,context:c,referenceList:`${p}${l}`})),f}},cr=class{static execute(c,l,u){return{target:eh.buildInstructionPageReference(u,c),listIndex:l,instruction:"DELETE"}}},lr=class{static getDeleteAllInstruction(c,l){return{instruction:"DELETE ALL",target:eh.buildInstructionPageReference(c,l)}}static execute(c,l,u,d){d||kp(Gh({instruction:"DESELECT_ALL",context:c,referenceList:`${u}${l}`}))}},ur=class{static execute(c,l,u,d){return{target:eh.buildInstructionPageReference(d,c),listMoveToIndex:u,listIndex:l,instruction:"MOVE"}}},dr=class{static execute(c,l,u,d){return{content:{...{...eh.unflatten(u)}},target:eh.buildInstructionPageReference(d,l),instruction:"REPLACE"}}},pr=class{static execute(c,l){return{target:eh.buildInstructionPageReference(l,c),instruction:"DELETE"}}},hr=class{constructor(c){this.next=null,this.automatic=!1,this.instruction=c,this.previous=null,this.childrenStateMachines=[]}},gr=class{constructor(c,l,u){this.target=c,this.pageReference=l,this.contextName=u,this.root=null,this.current=null,this.changeList={},this.targetPageReference=l+c,this.children=[],this.visibility=!0}addChild(c){null===this.current&&this.insertNode({}),this.current.childrenStateMachines.push(c)}insertNode(c){const l=new hr(c);null===this.root&&(this.root=l),null!==this.current&&(l.previous=this.current,this.current.next=l),this.current=l}buildChildSumbitPageInstructions(c,l){let u=[];return c.childrenStateMachines.forEach((c=>{c.visibility&&(u=u.concat(c.buildSubmitPageInstructions(l)))})),u}buildSubmitPageInstructions(c=!1){let l=this.root,u=[];for(;l;)!l.instruction.instruction||c&&l.automatic||u.push(l.instruction),u=[...u,...this.buildChildSumbitPageInstructions(l,c)],l=l.next;return u}initPageInstructions(c,l,u){const d=c.getValue(this.target)||[];l?d.forEach(((c,d)=>{l.forEach((l=>{const p=Wc(l),h={};let g=!0;u&&(h[Wc(u)]=crypto.randomUUID(),g=!1);const f={[p]:eh.getIn(c,p),...h};this.update(f,d+1,g,{isDefault:!0})}))})):d.forEach(((c,l)=>{if(u&&!c[Wc(u)]){const c={};c[Wc(u)]=crypto.randomUUID(),this.update(c,l+1,!1,{isDefault:!0})}}))}getChangeList(){return this.changeList}initChangeList(c){this.changeList[this.targetPageReference]=this.changeList[this.targetPageReference]||[],this.changeList[this.targetPageReference][c]=this.changeList[this.targetPageReference][c]||{}}update(c,l,u,d){const p=ir.execute(this.contextName,this.target,l,c,this.pageReference,u),{isDefault:h=!1,skipPageinstruction:g}=d;if(!g){if(this.initChangeList(l-1),!h){const u=this.changeList?.[this.targetPageReference]?.[l-1].content;this.changeList[this.targetPageReference][l-1]=Xp(eh.deepClone(u),c,d)}if(this.current?.automatic!==h||this.current?.instruction?.listIndex!==l||"UPDATE"!==this.current?.instruction.instruction)this.insertNode(p),h&&(this.current.automatic=!0);else{const l=this.current.instruction.content;this.current.instruction.content=Xp(eh.deepClone(l),eh.unflatten(c),d)}}}delete(c,l){const u=cr.execute(this.target,c,this.pageReference);this.changeList[this.targetPageReference]?.splice(c-1,1),this.insertNode(u),l||kp(Gh({instruction:"DELETE",listIndex:c-1,context:this.contextName,referenceList:`${this.pageReference}${this.target}`}))}insert(c,l,u,d){const{instruction:p,actionPayload:h={content:{}},displayPropertPayload:g={}}=or.execute(this.target,l,c,this.pageReference),{isDefault:f=!1}=d;if(this.initChangeList(l-1),!f){const u=this.changeList?.[this.targetPageReference]?.[l-1].content;this.changeList[this.targetPageReference][l-1]=Xp(eh.deepClone(u),c,d)}this.root&&!this.root.instruction?.instruction&&this.current&&!this.current.instruction?.instruction?this.root.instruction=p:this.insertNode(p),u||(h.content={...h.content,...g},kp(Gh({...h,listIndex:l-1,context:this.contextName,referenceList:`${this.pageReference}${this.target}`}))),f&&(this.current.automatic=!0)}replacePage(c){const l=dr.execute(this.contextName,this.target,c,this.pageReference);this.insertNode(l)}deletePage(){const c=pr.execute(this.target,this.pageReference);this.insertNode(c)}move(c,l){const u=this.changeList[this.targetPageReference]?.splice(c-1,1);this.changeList[this.targetPageReference]?.splice(l-1,0,u[0]);const d=ur.execute(this.target,c,l,this.pageReference);this.insertNode(d),kp(Gh({listIndex:c-1,listMoveToIndex:l-1,context:this.contextName,referenceList:`${this.pageReference}${this.target}`,instruction:"MOVE"}))}deleteAll(c){const l=lr.getDeleteAllInstruction(this.pageReference,this.target);this.changeList[this.targetPageReference]=[],this.insertNode(l),lr.execute(this.contextName,this.target,this.pageReference,c)}updatePage(c){const l=this.current.instruction.content;this.current.instruction.content=Xp(eh.deepClone(l),c)}},fr={},mr={},yr={},Ir=(c,l,u)=>{const d=c.getContextName();fr[d]||(fr[d]={}),fr[d][l]||(fr[d][l]={content:[]}),mr[d]||(mr[d]=[],yr[d]=[]),Bc.isStateMachineExist(d,u,l)||Bc.setStateMachine(d,l,u,new gr(l,u,d))},Er=c=>zn.formatPageReference(c),Ar=(c,l)=>{const u=mr[c],d=yr[c],p=Wc(l),h=p?.substring(0,p.indexOf("["));d?.indexOf(h)<0&&yr[c].push(h),u?.indexOf(p)<0&&mr[c].push(p)},_r=c=>{delete mr[c]},Cr=c=>Bc.buildPageInstructionsByContext(c),Sr=c=>Bc.buildPageInstructionsByContext(c,!0),Tr=c=>{Bc.clearStateMachines(c),delete fr[c]},Nr=(c,l,u,d)=>{let[,p]=l.split(`${c}[${d}]`);""!==p&&void 0!==p&&(p=p.startsWith(".")?p.substring(1):p,Object.keys(u).forEach((c=>{u[`${p}.${c}`]=u[c],delete u[c]})))},Pr=(c,l,u,d,p)=>{const{skipStateUpdate:h=!1}=p||{},g=u.getContextName(),f=u.getReferenceList(),m=d||u.getPageReference(),y=Er(f);Ir(u,y,m),Ar(g,`${f}[${l}]`),Nr(f,m,c,l);const I={instruction:W.LIST_ACTIONS.INSERT,content:{...eh.unflatten(c)}};delete JSON.parse(JSON.stringify(I)).content.classID,Bc.getStateMachine(g,m,y).insert(c,l+1,h,{})},br=(c,l)=>{const[,u]=c.split("."),d=l?.split(".").pop();return u===d},Dr=(c,l,u)=>{const d={};return Object.values(c).forEach((c=>{if(br(c,u)){const u=eh.getPropertyName(c),p=u.substr(u.indexOf(".")+1).split(".");if(p.length>1){let c=eh.getIn(l,p)??"";if(!c){const u=`!P!${p.join(":")}`;c=eh.getIn(l,u)??""}eh.setIn(d,p,c)}else{const c=eh.getIn(l,p)??"";d[p[p.length-1]]=c}}})),d},Rr=(c,l,u,d,p)=>{const h=c.getValue(l)||{};u&&Object.keys(h).length>0&&c.clearErrorMessages({property:d?p:c.getStateProps().value})},Or=c=>{if(!c)return!1;const l=Sr(c);return Array.isArray(l)&&l.length>0},xr=(c,l,u={})=>{const{skipStateUpdate:d=!1}=u,p=c.getPageReference(),h=Er(l);Ir(c,l,p),Bc.getStateMachine(c.getContextName(),p,h).deleteAll(d)},wr=c=>({insert:(l,u,d,p)=>Pr(l,u,c,d,p),update:(l,u,d)=>((c,l,u=0,d={})=>{const{skipStateUpdate:p=!0,pageRef:h}=d,g=l.getContextName();let f=l.getReferenceList();const m=h||l.getPageReference();f||(f=((c,l)=>{const u=c.indexOf(G.CONTENT)+G.CONTENT.length,d=c.lastIndexOf(`[${l}]`);return c.substring(u,d)})(m,u));const y=Er(f);Ir(l,y,m),Ar(g,`${f}[${u}]`),Nr(f,m,c,u),Bc.getStateMachine(g,m,y).update(c,u+1,p,d)})(l,c,u,d),updateProperty:(l,u,d)=>((c,l,u,d={})=>{const p=u.getPageReference(),{stateMachineTarget:h}=Bc.getStateMachineObjByPath(`${p}${c}`,u.getContextName(),`${p}${c}`.endsWith("]"));if(!h){let c=p.substring(0,p.lastIndexOf("["));const l=c.substring(c.lastIndexOf("."));c=c.substring(0,c.lastIndexOf(".")),c&&l&&Ir(u,l,c)}Bc.executeStateMachine(u.getContextName(),`${p}${c}`,l,!0,d)})(l,u,c,d),deleteEntry:(l,u)=>((c,l,u)=>{const d=l.getContextName(),p=l.getReferenceList(),h=u||l.getPageReference(),g=`${h+p}[${c}]`,f=Er(p);Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,pageReference:g,context:d,isListEntry:!0,deletingIndex:c}),Ir(l,f,h),Ar(d,`${p}[${c}]`),Bc.getStateMachine(d,h,f).delete(c+1);const m=Bc.getUnConnectedStateMachines(d)||{};Object.keys(m).forEach((c=>{c.includes(`${h}${f}`)&&c!==`${h}${f}`&&(m[c]=null)}))})(l,c,u),reorder:(l,u)=>((c,l,u)=>{const d=u.getContextName(),p=u.getReferenceList(),h=u.getPageReference(),g=Er(p);Ir(u,g,h),Ar(d,`${p}[${l}]`),Bc.getStateMachine(d,h,g).move(c+1,l+1)})(l,u,c),setSelectedRows:(l,u={skipPageInstructions:!1})=>((c,l,u)=>new Promise((d=>{const{skipPageInstructions:p=!1}=u,{selectionMode:h,selectionList:g,required:f}=l.getConfigProps(),m=h===W.LIST_SELECTION_MODE.MULTI,y=l.getContextName();let I=l.getPageReference(),E=((c,l,u)=>c?u.substring(1):l.substring(l.lastIndexOf(".")+1))(m,I,g);const A=l.getRawMetadata();let _=null;const C=(c=>c?.config?.dataRelationshipContext&&"SimpleTableSelect"===c.type&&"single"===c.config?.selectionMode)(A);C&&(E=A?.config?.dataRelationshipContext,_=I.concat(".").concat(E),I=_);const S=((c,l,u)=>c?`${l}${u}`:l)(m,I,g),T=((c,l,u,d)=>l?c.getFieldMetadata(`${u}`):c.getCurrentPageFieldMetadata(d))(l,m,E,_),{datasource:{parameters:N={}}}=T,P={...N};if(((c,l,u)=>{l?.descriptors?.length&&!u&&l.descriptors.forEach((l=>{const u=eh.getPropertyName(l),d=u.substr(u.indexOf(".")+1).split(".");c[d.join(".")]=l}))})(P,T,m),m){let u=g;u=Er(u);const d=l.getValue(S)||[];Ir(l,u,I);const h=[];let f=d.length;c.forEach((c=>{const l=Dr(N,c,E),g={};if(Object.prototype.hasOwnProperty.call(c,"displayProperty")){const l=c.displayProperty;g[l]=c[l]}const m=Object.entries(l);let A=d.findIndex((c=>m.every((([l,u])=>c[l]===u))));if(-1===A?(A=f,c.$selected&&(f+=1)):f=f?f-1:0,!p){const d=Bc.getStateMachine(y,I,u);c.$selected?d.insert(l,A+1,!0,{}):d.delete(A+1,!0)}h.push({instruction:c.$selected?W.LIST_ACTIONS.SELECT:W.LIST_ACTIONS.DESELECT,listIndex:A,content:{...l,...g}})})),kp(Gh({instruction:W.LIST_ACTIONS_TYPE.SELECT_DESELECT,context:y,referenceList:`${I}.${E}`,actions:h}))}else{const u=Dr(P,c[0],E);Object.keys(u).forEach((c=>{l.getActionsApi().updateFieldValue(`.${c}`,u[c],C?{contextPageReference:I}:{}),l.getActionsApi().triggerFieldChange(`.${E}.${c}`,u[c])}))}Rr(l,S,f,m,E),d()})))(l,c,u),getSelectedRows:(l=!1)=>((c,l)=>{const{selectionMode:u,selectionList:d}=l.getConfigProps(),p=[];let h=l.getPageReference();const g=u===W.LIST_SELECTION_MODE.MULTI;let f=g?d.substring(1):h.substring(h.lastIndexOf(".")+1);const m=l.getRawMetadata();let y=null;m?.config?.dataRelationshipContext&&"SimpleTableSelect"===m.type&&"single"===m.config?.selectionMode&&(f=m.config.dataRelationshipContext,y=h.concat(".").concat(f),h=y);const I=g?`${h}${d}`:h;let E=l.getValue(I)||[];if(Array.isArray(E)||(E=[E]),c)return Promise.resolve(E);const{datasource:{parameters:A={}}={}}=g?l.getFieldMetadata(`${f}`):l.getCurrentPageFieldMetadata(y);return E.forEach((c=>{const l=Object.values(A).reduce(((l,u)=>{const d=u.substring(u.lastIndexOf(".")+1);return br(u,f)&&c[d]?`${l}${c[d]}`:l}),"");l.trim()&&p.push(l.trim())})),Promise.resolve(p)})(l,c),clearSelectedRows:()=>function(c){const{selectionList:l,required:u}=c.getConfigProps(),d=c.getContextName(),p=c.getPageReference(),h=l,g=`${p}${l}`;return new Promise((l=>{let f=h;f=Er(f),Ir(c,f,p),Bc.getStateMachine(d,p,f).deleteAll(),Rr(c,g,u,!0,h),l()}))}(c),setVisibility:l=>((c,l=!0)=>{const u=c.getContextName(),{selectionMode:d,selectionList:p,renderMode:h,referenceList:g}=c.getComponentConfig();let f;if(d===W.LIST_SELECTION_MODE.MULTI&&p?f=p:"Editable"===h&&g&&(f=c.getStateProps().referenceList),f){f=Er(f);const d=Bc.getStateMachine(u,"",`${c.getPageReference()}${f}`);d&&(d.visibility=l)}})(c,l),initDefaultPageInstructions:(l,u,d)=>((c,l,u,d)=>{const p=c.getContextName(),h=c.getPageReference(),g=Er(l);Ir(c,g,h),Bc.getStateMachine(p,h,g).initPageInstructions(c,u,d)})(c,l,u,d),deleteAll:(l,u)=>xr(c,l,u),replacePage:(l,u)=>((c,l,u)=>{const d=c.getPageReference(),p=c.getContextName();Ir(c,l,d),Ar(p,eh.buildInstructionPageReference(d,l)),Bc.getStateMachine(p,d,l).replacePage(u)})(c,l,u),deletePage:l=>((c,l)=>{const u=c.getPageReference(),d=c.getContextName();Ir(c,l,u),Ar(d,eh.buildInstructionPageReference(u,l)),Bc.getStateMachine(d,u,l).deletePage()})(c,l)}),Mr=new class{constructor(){this.fieldDefaults={}}updateFieldDefaults(c){c&&(Object.keys(this.fieldDefaults).length?eh.mergeDeep(c,this.fieldDefaults):eh.copy(c,this.fieldDefaults))}setFieldDefault(c,l,u){c&&l&&(this.fieldDefaults[c]=this.fieldDefaults[c]||{},this.fieldDefaults[c][l]=u)}getDefaultsforType(c){return this.fieldDefaults[c]}};class vr{constructor(){this.validators={}}register(c,l){this.validators[c]=l}getValidator(c){return this.validators[c]}validateRequired(c,l,u,d,p,h){const{required:g,value:f}=h;let m=null;if("true"===g||!0===g){let g=d;switch(c){case"radiobuttons":g=f;break;case"attachment":{const c=u?.replace(G.CASE_INFO.CASE_INFO_CONTENT,"").replace(G.DATA_INFO.DATA_INFO_CONTENT,"");g=(Wp(`.attachmentsList${c}.${l?.replace(".","")}`,"context_data",p)||[]).filter((c=>!c.delete)),0===g?.length&&(g="");break}case"checkbox":g&&"false"!==g||(g="");break;default:"string"==typeof g&&(g=g.trim())}m=this.getValidator("required")(g),vr.messageDispatcher(l,u,p,m,zn.getFieldLabel(h))}return m}validateType(c,l,u,d,p,h){let g=null;const f={pageReference:u,context:p,property:l,target:h?.target,required:h?.required};let m=Mr.getDefaultsforType(h?.componentName||"")?.["client-validations"];!1!==m&&c&&this.getValidator(c)&&(g=this.getValidator(c)(d,f),""!==d&&vr.messageDispatcher(l,u,p,g,h?.label));const y=h?.validationType;return m=y&&Mr.getDefaultsforType(y)?.["client-validations"],!1!==m&&y&&this.getValidator(y)&&(g=this.getValidator(y)(d,f),vr.messageDispatcher(l,u,p,g,h?.label)),g}validate(c,l,u,d={}){const{context:p,disabled:h,readOnly:g,pageReference:f,skipRequiredValidation:m}=d;let y=null;return h||g||(m||(y=this.validateRequired(c,l,f,u,p,d)),y||(y=this.validateType(c,l,f,u,p,d))),{message:y}}static messageDispatcher(c,l,u,d,p){if(d){const h=[];h.push({type:G.MESSAGES.MESSAGES_TYPE_ERROR,fieldLabel:p,message:d}),er({messages:h,property:c,pageReference:l,context:u})}}isValidatorExist(c){return!!c.validatetype}}const Lr=new vr,Ur=(c,l)=>{c.DeclareExpressions&&Qt({[l.context]:c.DeclareExpressions})},Fr=(c,l,u=!1)=>{const d=eh.getIn(c,W.RESOURCES);d&&((c=>{c&&Ip(c)})(d),Ur(d,l)),u||dg({...c,options:l})},jr="text/javascript",Vr=new class{constructor(){this.loaderObj={},this.staticServerURL="",this.appStaticUrl=null,this.pegaOnlyUrl=!1,this.loadedAssets={},this.componentsConfig=null,this.appAlias="",this.b2sJWT=null,this.ccV2LibId="",this.imageBlobUrlCache={}}getTypes={SCRIPT:"script",STYLE:"link"};getStaticServerUrl(){return this.staticServerURL}setCCV2LibId(c){this.ccV2LibId=c}getCCV2LibId(){return this.ccV2LibId}async getThemeSchemaJSON(){const c=`${this.staticServerURL}themeOverrides.schema.json`;return fetch(c).then((c=>c.json()))}getConstellationServiceUrl(){return this.staticServerURL?.endsWith("/")?this.staticServerURL.substring(0,this.staticServerURL.length-1):this.staticServerURL}setAppAlias(c){this.appAlias=c}getAppAlias(){return this.appAlias}async getSvcComponentsConfig(c,l={}){let u="",d=0;return c.forEach((c=>{u+=`${0===d?"?":"&"}field${d}=${c.field}&value${d}=${c.value}`,d+=1})),this.pegaOnlyUrl?this.getSvcComponentsConfigSeparatedUrls(c,u,l):this.getSvcComponentsConfigCombinedUrl(c,u,l)}async getSvcComponentsConfigSeparatedUrls(c,l,u){const d=Hd.getBuiltOnAppNames(),p=this.loadAndFilterPegaComponentsConfig(c,d);let h=Promise.resolve([]);!0!==u.skipLoadCustomerComponents&&(h=this.loadAndCustomerComponentsConfig(l));const g=this.fetchSDKComponent(l),f=[];if(await Promise.all([p,h,g]).then((c=>{const l=this.mergeComponentList(c);f.push(...l)})),u.alternateDesignSystemURL&&1===f.length){const d=await this.getSvcComponentsConfigADS(c,l,u);f[0].alternateDesignSystemConfig=d}return{data:{components:f}}}mergeComponentList=c=>{const[l=[],u=[],d=[]]=c,p=[...l,...u];return this.appStaticUrl?p.map((c=>{const{name:l,type:u,subtype:p}=c,h=d.reduce(((c,d)=>(l===d.name&&u===d.type&&p===d.subtype&&(c=d),c)),{});return Object.keys(h).length>0?{...c,alternateDesignSystemConfig:{...h}}:c})):p};async fetchSDKComponent(c){if(this.appStaticUrl&&this.appStaticUrl.length>8&&this.appStaticUrl!==this.staticServerURL){const l=`${this.appStaticUrl}v102/${this.appAlias}/componentslist-ext${c}`;return fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).then((c=>c.components)).catch((()=>[]))}return Promise.resolve([])}async loadAndFilterPegaComponentsConfig(c,l){return this.loadPegaComponentsConfig().then((()=>{const u=[];return this.componentsConfig&&this.componentsConfig.forEach((d=>{let p=!0;c.forEach((c=>{Array.isArray(d[c.field])?d[c.field].includes(c.value)||(p=!1):d[c.field]!==c.value&&(p=!1)})),p&&this.checkForBuiltOnSupport(l,d.allowedApplications)&&u.push(d)})),u}))}async loadPegaComponentsConfig(){let c=null;if(null===this.componentsConfig){const l=`${this.staticServerURL}components/componentsconfig.json?v=${(new Date).getTime()}`;c=fetch(l,{method:"GET"}).then((c=>c.json())).then((async c=>{this.componentsConfig=c,this.ccV2LibId&&await this.loadLibraryComponentsConfig(this.ccV2LibId).then((c=>{c&&c.length>0&&(this.componentsConfig=(this.componentsConfig||[]).concat(c))})).catch((c=>{console.error(`Exception while appending custom component config from library ${this.ccV2LibId} : ${c}`)}))})).catch()}else c=Promise.resolve();return c}async loadLibraryComponentsConfig(c){let l=null;return l=fetch(`${this.appStaticUrl}v100/componentlib/componentsconfig/${c}?v=${Date.now()}`,{headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>{if(!c.ok)throw console.error("Error while fetching custom component config/library component config"),new Error(c.statusText);return c})).then((c=>c.json())).then((c=>Promise.resolve(c))).catch((l=>(console.error(`Exception while fetching custom component config from library ${c} : ${l}`),{error:l.message}))),l}async loadAndCustomerComponentsConfig(c){let l=null;if(this.appStaticUrl&&this.appStaticUrl.length>8&&this.appStaticUrl!==this.staticServerURL){const u=`${this.appStaticUrl}v103/${this.appAlias}/componentslist${c}`;l=fetch(u,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).then((c=>c.components)).catch((()=>[]))}else l=Promise.resolve([]);return l}checkForBuiltOnSupport(c,l){if(!c||!l||0===c.length||0===l.length)return!0;const u=c.split(",");return 0===u.length||u.some((function(c){return-1!==l.indexOf(c)}))}async getSvcComponentsConfigCombinedUrl(c,l,u){const d=`${this.staticServerURL}v102/${this.appAlias}/componentslist${l}`,p=await fetch(d,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).then((c=>({data:c})));if(!0===u.skipLoadCustomerComponents&&p?.data?.components?.length>0&&(p.data.components=p.data.components.filter((c=>void 0===c.componentKey))),u.alternateDesignSystemURL&&1===p?.data?.components?.length){const d=await this.getSvcComponentsConfigADS(c,l,u);p.data.components[0].alternateDesignSystemConfig=d}return p}getSvcComponentsConfigADS(c,l,u){const d=`${u.alternateDesignSystemURL}${u.alternateDesignSystemURL?.endsWith("/")?"":"/"}components/${c[0].value}/config-ext.json`;return fetch(d,{method:"GET"}).then((c=>{if(c.ok)return c.json();throw new Error(c.statusText)})).catch((c=>({error:c.message})))}getSvcImage(c){const l=`${this.appStaticUrl}v102/${this.appAlias}/image/${c}`;return fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.blob())).catch()}getSvcImageUrl(c){const l=`${this.appStaticUrl}v102/${this.appAlias}/image/${c}`;return void 0===this.imageBlobUrlCache[l]&&(this.imageBlobUrlCache[l]=fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.blob())).then((c=>window.URL.createObjectURL(c))).catch()),this.imageBlobUrlCache[l]}getSvcLocale(c,l){const u=`${this.appStaticUrl}v102/${this.appAlias}/locales/${c}/${l}`;return fetch(u,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}})}getSvcAvailableLocales(){const c=`${this.appStaticUrl}v102/app/${this.appAlias}/locales/getLocaleCodes`;return fetch(c,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.json())).catch((()=>[]))}getSvcComponent(c){const l=`${this.appStaticUrl}v102/${this.appAlias}/component/${c}`;return fetch(l,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>{if(!c.ok)throw Error(c.statusText);return c})).then((c=>c.text())).then((c=>c)).catch()}async importCustomComponentMap(c){fetch(`${this.appStaticUrl}v100/componentlib/componentsmap/${c}`,{headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>(c.ok||console.error("Error while fetching custom component map"),c))).then((c=>c.text())).then((l=>{this.setCCV2LibId(c);const u=document.createElement("script");u.src=window.URL.createObjectURL(new Blob([l],{type:jr})),u.onload=()=>console.log("Custom component lib map loaded"),u.onerror=()=>console.error("Error while appending custom component map"),document.head.appendChild(u)})).catch((c=>{console.error("Exception while appending custom component map : "),console.error(c)}))}loadSvcComponent(c){return new Promise(((l,u)=>{this.getSvcComponent(c).then((d=>{const p=document.createElement("script");p.src=window.URL.createObjectURL(new Blob([d],{type:jr})),p.onload=()=>l(c),p.onerror=()=>u(c),document.head.appendChild(p)})).catch((()=>{u(c)}))}))}initServer(c,l,u){console.log(`asset-loader.initServer(${c}, ${l})`),this.appStaticUrl=null,this.staticServerURL=null,this.pegaOnlyUrl=!1,this.componentsConfig=null,c&&l&&"no-appstatic"!==l&&"no-cdn"!==l?(this.appStaticUrl=l.endsWith("/")?l:`${l}/`,this.staticServerURL=c.endsWith("/")?c:`${c}/`,this.pegaOnlyUrl=!0):c&&l&&"no-appstatic"===l?(this.staticServerURL=c.endsWith("/")?c:`${c}/`,this.appStaticUrl=this.staticServerURL,this.pegaOnlyUrl=!0):c&&l&&"no-cdn"===l&&(this.staticServerURL=c.endsWith("/")?c:`${c}/`,this.appStaticUrl=this.staticServerURL),console.log(`asset-loader.initServer() staticServerURL=${this.staticServerURL}, appStaticUrl=${this.appStaticUrl}, pegaOnlyUrl=${this.pegaOnlyUrl})`),this.b2sJWT=u}register(c,l){this.loaderObj[c]=l}getLoader(c){let l;return l=c?this.loaderObj[c]:(c,l)=>new Promise(((u,d)=>{const p=document.createElement(l);"script"===l?(p.onload=()=>{u(c)},p.onerror=()=>{d(c)},p.type=jr,p.charset="UTF-8",p.async=!1,p.src=c):(p.type="text/css",p.rel="stylesheet",p.href=c),document.head.appendChild(p)})).catch((c=>{console.log(c)})),l}loadAssets(c,l){const{isDevServerMode:u}=l;if(!c)return Promise.resolve();const d=[];return c.forEach((c=>{const l=Object.keys(c)[0];let p=u?Object.values(c)[0]:this.getStaticServerUrl();p=p.endsWith("/")?p:`${p}/`,this.loadedAssets[l]||(l.includes(".js")?d.push(this.getLoader()(p+l,this.getTypes.SCRIPT)):l.includes(".css")&&this.getLoader()(p+l,this.getTypes.STYLE),this.loadedAssets[l]=!0)})),Promise.all(d)}getAssetsFromIsolations(c){const l=this.b2sJWT?.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")||"",u=decodeURIComponent(s.g.atob(l).split("").map((c=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")),d=JSON.parse(u),p=d?.tenant_id,{restApi:h,reqType:g}=rg("getAssetsFromIsolations",{isolationID:p,assetPath:c})||{},f=`${this.appStaticUrl}${h}`;return fetch(f,{method:g,credentials:"include",headers:{Authorization:`Bearer ${this.b2sJWT}`}}).then((c=>c.blob()))}},$r="component-loader",Br={},Gr=async(c,l)=>{const u=Vr.getLoader(),d=l||Vr.staticServerURL;if(!c||window.PCore&&!1===window.PCore.getBehaviorOverride("dynamicLoadComponents"))return Promise.resolve();if(Vr.getLoader($r))return Vr.getLoader($r)(c,d);const p=[];return c.forEach((c=>{if(Br[c])return;const l=tn.getComponent(c);if(l)(l.scripts||[]).forEach((c=>{const l=c.startsWith("http")?c:d+c;p.push(u(l,Vr.getTypes.SCRIPT))})),(l.styles||[]).forEach((c=>{p.push(u(d+c,Vr.getTypes.STYLE))})),Br[c]=!0;else{const l=`${Vr.getConstellationServiceUrl()}/v860/${Vr.getAppAlias()}/component/${c}.js`;p.push(u(l,Vr.getTypes.SCRIPT))}})),Promise.all(p)};class kr{static actionsTargetMap=new Map;static getTargetViewContainerName=c=>{if(c){const l=c.toLowerCase();let u="primary";return this.actionsTargetMap.has(l)&&(u=this.actionsTargetMap.get(l)),u}return""};static buildActionTargetMap=c=>{c&&Object.keys(c).forEach((l=>{const u=c[l];u&&u.actions&&u.actions.forEach((c=>{this.actionsTargetMap.set(c.toLowerCase(),l)}))}))}}const Wr=kr,Hr=class{constructor(c,l,u,d){this.eventType=c,this.callback=u,this.contextName=d,this.id=l}},qr=new class{constructor(){this.subscribers={}}publish(c,l){this.subscribers[c]?.forEach((c=>{c.callback(l)}))}unsubscribe(c,l,u){const d=this.subscribers[c]||[];let p=0,h=-1;d.forEach((c=>{c.id===l&&c.contextName===u&&(h=p),p+=1})),-1!==h&&d.splice(h,1)}unsubscribeAllWithEventType(c){this.subscribers[c]=[]}subscribe(c,l,u,d,p){this.subscribers[c]=this.subscribers[c]||[];let h=!1;if(p&&this.subscribers[c].forEach((c=>{h=c.id===l&&c.contextName===d})),!h){const p=new Hr(c,l,u,d);this.subscribers[c].push(p)}}clearContext(c){const l=this.subscribers;Object.keys(l).forEach((l=>{const u=this.subscribers[l],d=[];u.forEach((l=>{l.contextName!==c&&d.push(l)})),this.subscribers[l]=d}))}},zr=class{static subscribe(c,l,u,d=!1,p="app"){qr.subscribe(c,u,l,p,d)}static subscribeOnce(c,l,u){this.subscribe(c,l,u,!0)}static publish(c,l){qr.publish(c,l)}static unsubscribe(c,l,u="app"){qr.unsubscribe(c,l,u)}static unsubscribeAllWithEventType(c){qr.unsubscribeAllWithEventType(c)}static cleanContextSubscribers(c){qr.clearContext(c)}},Yr=c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.ASSIGNMENT_SUBMISSION,c)},Kr={CASE_INFO:`${W.DATA}.${W.CASE_INFO.CASE_INFO}`,CASE_CLASS_NAME:`${W.DATA}.${W.CASE_INFO.CASE_TYPE_ID}`,NEXT_ASSIGNMENT_INFO_ID:`${W.DATA}.${W.NEXT_ASSIGNMENT_INFO_ID}`,ASSIGNMENTS:`${W.DATA}.${W.CASE_INFO.ASSIGNMENTS}`,CASE_INFO_ID:`${W.DATA}.${W.CASE_INFO.CASE_INFO_ID}`,CASE_FIRST_FLOW_ACTION_NAME:`${W.DATA}.${W.CASE_INFO.ASSIGNMENTACTION_ID}`,CASE_FIRST_ASSIGNMENT_ID:`${W.DATA}.${W.CASE_INFO.ASSIGNMENT_ID}`},Xr=(c,l)=>{const{vcName:u,containerName:d}=l;return d||u||Wr.getTargetViewContainerName(c)},Jr=c=>{const l=c.lastIndexOf(W.FORWARD_SLASH_STRING)+1,u=c.lastIndexOf(W.UNDERSCORE_STRING);return c.substring(l,u)},Qr=c=>c===Mu.WORKAREA,Zr=c=>c===Mu.MODAL,es=c=>c===Te,ts=c=>c&&c.find((c=>c.type===Te)),ns=c=>eh.getIn(c,Kr.CASE_INFO,{}),rs=c=>c?c.split(" ").pop():void 0,ss=c=>eh.getIn(c,Kr.CASE_CLASS_NAME,W.EMPTY_STRING),as=c=>{const l=ns(c);return sn(l)&&an(Hd.getOperatorIdentifier(),l)},os=c=>eh.getIn(c,Kr.CASE_INFO_ID,W.EMPTY_STRING),is=c=>eh.getIn(c,Kr.CASE_FIRST_ASSIGNMENT_ID,W.EMPTY_STRING),cs=(c,l)=>{const{removeActionPayload:u,target:d}=l;if(u&&u.containerItemID){const{containerItemID:l,context:p}=u;c.push(Vh(xh,{containerItemID:l,context:p||Ju(l),target:d}))}},ls=c=>{const l=Vp();if(!c)return!1;const u=K(c),d=hd(u),p=hd(c);if(!d||!p)return!1;const h=Fu(d,u),g=Fu(p,c);if(!h||!g)return!1;const{key:f}=h||{};let{key:m}=g||{};return m||(m=l?.getState().data?.[c]?.caseInfo?.ID),f&&m&&f===m},us=(c,l,u={})=>{const{skipFlowNameUpdate:d}=u,p=os(l);eh.setIn(c,"key",p);const h=sn(ns(l));if(!d&&(c=>{const l=eh.getIn(c,Kr.ASSIGNMENTS,[]);return l&&l.length>0})(l)){const u=is(l),[,d]=u.split("!");(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CURRENT_ASSIGNMENT_UPDATED,c)})({assignmentID:u,isInCreateStage:h}),eh.setIn(c,"flowName",d)}},ds=(c,l)=>{const{attachmentsExist:u}=l;u&&eh.setIn(c,G.SUMMARY_OF_ATTACHMENTS_LAST_REFRESH_TIME,(new Date).toLocaleString()),eh.setIn(c,G.SUMMARY_OF_ASSIGNMENT_LAST_SUBMIT_TIME,(new Date).toLocaleString())},ps=(c,l,u)=>{let d=W.PROMISE_VALUE.RESOLVE;return ts(c)?(d=W.PROMISE_VALUE.REJECT,u?gn.rejectActionByID(l,!0,u):gn.rejectActionByID(l)):gn.resolveActionByID(l),d},hs=c=>{const l=Hd.getCaseTypeList();return"true"===l.filter((l=>l.pyWorkTypeImplementationClassName===c))?.[0]?.pyIsTraditionalUICase},gs=()=>"true"===Hd?.environmentInfoObject?.pxMashupDetails?.pyLaunchCaseInModal,fs=(c,l)=>{const u=ss(c?.response),d=ns(c?.response),{caseTypeID:p}=d,h=Hd.getFeatureMap();(h?.deferUpdateCaseSummaryView??!Object.hasOwn(h,W.DEFER_UPDATE_CASESUMMARY_VIEW))&&p&&Ap(W.CASESUMMARY_VIEW_NAME,p)&&((c,l,u)=>{const{containerItemID:d,caseID:p}=l;if(d){const{caseClassName:h,skipAssignmentsUpdate:g}=u,f=K(d),m=hd(f),y=m&&Uu(m),I=m&&zu(m),E=Z(f);I&&y?.items?.[I]?.key===l?.caseID&&c.push(Vh(ph,{containerItemID:f,context:f,container:E,containerName:E,caseId:p,viewName:G.CASESUMMARY_VIEW_NAME,updateData:!0,viewLoadingContainer:{context:f},caseClassName:h,...void 0!==g&&{skipAssignmentsUpdate:g}}))}})(l,c?.actionInPayload,{caseClassName:u,skipAssignmentsUpdate:!0})},ms=c=>$p(c)?.context_data?.caseViewMode;function ys(c,l){return function(){return c.apply(l,arguments)}}const{toString:Is}=Object.prototype,{getPrototypeOf:Es}=Object,As=(_s=Object.create(null),c=>{const l=Is.call(c);return _s[l]||(_s[l]=l.slice(8,-1).toLowerCase())});var _s;const Cs=c=>(c=c.toLowerCase(),l=>As(l)===c),Ss=c=>l=>typeof l===c,{isArray:Ts}=Array,Ns=Ss("undefined"),Ps=Cs("ArrayBuffer"),bs=Ss("string"),Ds=Ss("function"),Rs=Ss("number"),Os=c=>null!==c&&"object"==typeof c,vs=c=>{if("object"!==As(c))return!1;const l=Es(c);return!(null!==l&&l!==Object.prototype&&null!==Object.getPrototypeOf(l)||Symbol.toStringTag in c||Symbol.iterator in c)},xs=Cs("Date"),ws=Cs("File"),Ms=Cs("Blob"),Ls=Cs("FileList"),Us=Cs("URLSearchParams"),[Fs,js,Vs,ks]=["ReadableStream","Request","Response","Headers"].map(Cs);function $s(c,l,{allOwnKeys:u=!1}={}){if(null==c)return;let d,p;if("object"!=typeof c&&(c=[c]),Ts(c))for(d=0,p=c.length;d<p;d++)l.call(null,c[d],d,c);else{const p=u?Object.getOwnPropertyNames(c):Object.keys(c),h=p.length;let g;for(d=0;d<h;d++)g=p[d],l.call(null,c[g],g,c)}}function Bs(c,l){l=l.toLowerCase();const u=Object.keys(c);let d,p=u.length;for(;p-- >0;)if(d=u[p],l===d.toLowerCase())return d;return null}const Gs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ws=c=>!Ns(c)&&c!==Gs,Hs=(qs="undefined"!=typeof Uint8Array&&Es(Uint8Array),c=>qs&&c instanceof qs);var qs;const zs=Cs("HTMLFormElement"),Ys=(({hasOwnProperty:c})=>(l,u)=>c.call(l,u))(Object.prototype),Ks=Cs("RegExp"),Xs=(c,l)=>{const u=Object.getOwnPropertyDescriptors(c),d={};$s(u,((u,p)=>{let h;!1!==(h=l(u,p,c))&&(d[p]=h||u)})),Object.defineProperties(c,d)},Js="abcdefghijklmnopqrstuvwxyz",Qs="0123456789",Zs={DIGIT:Qs,ALPHA:Js,ALPHA_DIGIT:Js+Js.toUpperCase()+Qs},ea=Cs("AsyncFunction"),ta=(na="function"==typeof setImmediate,ra=Ds(Gs.postMessage),na?setImmediate:ra?(sa=`axios@${Math.random()}`,aa=[],Gs.addEventListener("message",(({source:c,data:l})=>{c===Gs&&l===sa&&aa.length&&aa.shift()()}),!1),c=>{aa.push(c),Gs.postMessage(sa,"*")}):c=>setTimeout(c));var na,ra,sa,aa;const oa="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Gs):"undefined"!=typeof process&&process.nextTick||ta,ia={isArray:Ts,isArrayBuffer:Ps,isBuffer:function(c){return null!==c&&!Ns(c)&&null!==c.constructor&&!Ns(c.constructor)&&Ds(c.constructor.isBuffer)&&c.constructor.isBuffer(c)},isFormData:c=>{let l;return c&&("function"==typeof FormData&&c instanceof FormData||Ds(c.append)&&("formdata"===(l=As(c))||"object"===l&&Ds(c.toString)&&"[object FormData]"===c.toString()))},isArrayBufferView:function(c){let l;return l="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer&&Ps(c.buffer),l},isString:bs,isNumber:Rs,isBoolean:c=>!0===c||!1===c,isObject:Os,isPlainObject:vs,isReadableStream:Fs,isRequest:js,isResponse:Vs,isHeaders:ks,isUndefined:Ns,isDate:xs,isFile:ws,isBlob:Ms,isRegExp:Ks,isFunction:Ds,isStream:c=>Os(c)&&Ds(c.pipe),isURLSearchParams:Us,isTypedArray:Hs,isFileList:Ls,forEach:$s,merge:function c(){const{caseless:l}=Ws(this)&&this||{},u={},d=(d,p)=>{const h=l&&Bs(u,p)||p;vs(u[h])&&vs(d)?u[h]=c(u[h],d):vs(d)?u[h]=c({},d):Ts(d)?u[h]=d.slice():u[h]=d};for(let p=0,h=arguments.length;p<h;p++)arguments[p]&&$s(arguments[p],d);return u},extend:(c,l,u,{allOwnKeys:d}={})=>($s(l,((l,d)=>{u&&Ds(l)?c[d]=ys(l,u):c[d]=l}),{allOwnKeys:d}),c),trim:c=>c.trim?c.trim():c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:c=>(65279===c.charCodeAt(0)&&(c=c.slice(1)),c),inherits:(c,l,u,d)=>{c.prototype=Object.create(l.prototype,d),c.prototype.constructor=c,Object.defineProperty(c,"super",{value:l.prototype}),u&&Object.assign(c.prototype,u)},toFlatObject:(c,l,u,d)=>{let p,h,g;const f={};if(l=l||{},null==c)return l;do{for(p=Object.getOwnPropertyNames(c),h=p.length;h-- >0;)g=p[h],d&&!d(g,c,l)||f[g]||(l[g]=c[g],f[g]=!0);c=!1!==u&&Es(c)}while(c&&(!u||u(c,l))&&c!==Object.prototype);return l},kindOf:As,kindOfTest:Cs,endsWith:(c,l,u)=>{c=String(c),(void 0===u||u>c.length)&&(u=c.length),u-=l.length;const d=c.indexOf(l,u);return-1!==d&&d===u},toArray:c=>{if(!c)return null;if(Ts(c))return c;let l=c.length;if(!Rs(l))return null;const u=new Array(l);for(;l-- >0;)u[l]=c[l];return u},forEachEntry:(c,l)=>{const u=(c&&c[Symbol.iterator]).call(c);let d;for(;(d=u.next())&&!d.done;){const u=d.value;l.call(c,u[0],u[1])}},matchAll:(c,l)=>{let u;const d=[];for(;null!==(u=c.exec(l));)d.push(u);return d},isHTMLForm:zs,hasOwnProperty:Ys,hasOwnProp:Ys,reduceDescriptors:Xs,freezeMethods:c=>{Xs(c,((l,u)=>{if(Ds(c)&&-1!==["arguments","caller","callee"].indexOf(u))return!1;const d=c[u];Ds(d)&&(l.enumerable=!1,"writable"in l?l.writable=!1:l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+u+"'")}))}))},toObjectSet:(c,l)=>{const u={},d=c=>{c.forEach((c=>{u[c]=!0}))};return Ts(c)?d(c):d(String(c).split(l)),u},toCamelCase:c=>c.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(c,l,u){return l.toUpperCase()+u})),noop:()=>{},toFiniteNumber:(c,l)=>null!=c&&Number.isFinite(c=+c)?c:l,findKey:Bs,global:Gs,isContextDefined:Ws,ALPHABET:Zs,generateString:(c=16,l=Zs.ALPHA_DIGIT)=>{let u="";const{length:d}=l;for(;c--;)u+=l[Math.random()*d|0];return u},isSpecCompliantForm:function(c){return!!(c&&Ds(c.append)&&"FormData"===c[Symbol.toStringTag]&&c[Symbol.iterator])},toJSONObject:c=>{const l=new Array(10),u=(c,d)=>{if(Os(c)){if(l.indexOf(c)>=0)return;if(!("toJSON"in c)){l[d]=c;const p=Ts(c)?[]:{};return $s(c,((c,l)=>{const h=u(c,d+1);!Ns(h)&&(p[l]=h)})),l[d]=void 0,p}}return c};return u(c,0)},isAsyncFn:ea,isThenable:c=>c&&(Os(c)||Ds(c))&&Ds(c.then)&&Ds(c.catch),setImmediate:ta,asap:oa};function ca(c,l,u,d,p){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=c,this.name="AxiosError",l&&(this.code=l),u&&(this.config=u),d&&(this.request=d),p&&(this.response=p,this.status=p.status?p.status:null)}ia.inherits(ca,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ia.toJSONObject(this.config),code:this.code,status:this.status}}});const la=ca.prototype,ua={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((c=>{ua[c]={value:c}})),Object.defineProperties(ca,ua),Object.defineProperty(la,"isAxiosError",{value:!0}),ca.from=(c,l,u,d,p,h)=>{const g=Object.create(la);return ia.toFlatObject(c,g,(function(c){return c!==Error.prototype}),(c=>"isAxiosError"!==c)),ca.call(g,c.message,l,u,d,p),g.cause=c,g.name=c.name,h&&Object.assign(g,h),g};const da=ca;function pa(c){return ia.isPlainObject(c)||ia.isArray(c)}function ha(c){return ia.endsWith(c,"[]")?c.slice(0,-2):c}function ga(c,l,u){return c?c.concat(l).map((function(c,l){return c=ha(c),!u&&l?"["+c+"]":c})).join(u?".":""):l}const fa=ia.toFlatObject(ia,{},null,(function(c){return/^is[A-Z]/.test(c)})),ma=function(c,l,u){if(!ia.isObject(c))throw new TypeError("target must be an object");l=l||new FormData;const d=(u=ia.toFlatObject(u,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(c,l){return!ia.isUndefined(l[c])}))).metaTokens,p=u.visitor||y,h=u.dots,g=u.indexes,f=(u.Blob||"undefined"!=typeof Blob&&Blob)&&ia.isSpecCompliantForm(l);if(!ia.isFunction(p))throw new TypeError("visitor must be a function");function m(c){if(null===c)return"";if(ia.isDate(c))return c.toISOString();if(!f&&ia.isBlob(c))throw new da("Blob is not supported. Use a Buffer instead.");return ia.isArrayBuffer(c)||ia.isTypedArray(c)?f&&"function"==typeof Blob?new Blob([c]):Buffer.from(c):c}function y(c,u,p){let f=c;if(c&&!p&&"object"==typeof c)if(ia.endsWith(u,"{}"))u=d?u:u.slice(0,-2),c=JSON.stringify(c);else if(ia.isArray(c)&&function(c){return ia.isArray(c)&&!c.some(pa)}(c)||(ia.isFileList(c)||ia.endsWith(u,"[]"))&&(f=ia.toArray(c)))return u=ha(u),f.forEach((function(c,d){!ia.isUndefined(c)&&null!==c&&l.append(!0===g?ga([u],d,h):null===g?u:u+"[]",m(c))})),!1;return!!pa(c)||(l.append(ga(p,u,h),m(c)),!1)}const I=[],E=Object.assign(fa,{defaultVisitor:y,convertValue:m,isVisitable:pa});if(!ia.isObject(c))throw new TypeError("data must be an object");return function c(u,d){if(!ia.isUndefined(u)){if(-1!==I.indexOf(u))throw Error("Circular reference detected in "+d.join("."));I.push(u),ia.forEach(u,(function(u,h){!0===(!(ia.isUndefined(u)||null===u)&&p.call(l,u,ia.isString(h)?h.trim():h,d,E))&&c(u,d?d.concat(h):[h])})),I.pop()}}(c),l};function ya(c){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(c).replace(/[!'()~]|%20|%00/g,(function(c){return l[c]}))}function Ia(c,l){this._pairs=[],c&&ma(c,this,l)}const Ea=Ia.prototype;Ea.append=function(c,l){this._pairs.push([c,l])},Ea.toString=function(c){const l=c?function(l){return c.call(this,l,ya)}:ya;return this._pairs.map((function(c){return l(c[0])+"="+l(c[1])}),"").join("&")};const Aa=Ia;function _a(c){return encodeURIComponent(c).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ca(c,l,u){if(!l)return c;const d=u&&u.encode||_a,p=u&&u.serialize;let h;if(h=p?p(l,u):ia.isURLSearchParams(l)?l.toString():new Aa(l,u).toString(d),h){const l=c.indexOf("#");-1!==l&&(c=c.slice(0,l)),c+=(-1===c.indexOf("?")?"?":"&")+h}return c}const Sa=class{constructor(){this.handlers=[]}use(c,l,u){return this.handlers.push({fulfilled:c,rejected:l,synchronous:!!u&&u.synchronous,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(c){this.handlers[c]&&(this.handlers[c]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(c){ia.forEach(this.handlers,(function(l){null!==l&&c(l)}))}},Ta={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Na={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Aa,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Pa="undefined"!=typeof window&&"undefined"!=typeof document,ba="object"==typeof navigator&&navigator||void 0,Da=Pa&&(!ba||["ReactNative","NativeScript","NS"].indexOf(ba.product)<0),Ra="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Oa=Pa&&window.location.href||"http://localhost",va={...p,...Na},xa=function(c){function l(c,u,d,p){let h=c[p++];if("__proto__"===h)return!0;const g=Number.isFinite(+h),f=p>=c.length;return h=!h&&ia.isArray(d)?d.length:h,f?(ia.hasOwnProp(d,h)?d[h]=[d[h],u]:d[h]=u,!g):(d[h]&&ia.isObject(d[h])||(d[h]=[]),l(c,u,d[h],p)&&ia.isArray(d[h])&&(d[h]=function(c){const l={},u=Object.keys(c);let d;const p=u.length;let h;for(d=0;d<p;d++)h=u[d],l[h]=c[h];return l}(d[h])),!g)}if(ia.isFormData(c)&&ia.isFunction(c.entries)){const u={};return ia.forEachEntry(c,((c,d)=>{l(function(c){return ia.matchAll(/\w+|\[(\w*)]/g,c).map((c=>"[]"===c[0]?"":c[1]||c[0]))}(c),d,u,0)})),u}return null},wa={transitional:Ta,adapter:["xhr","http","fetch"],transformRequest:[function(c,l){const u=l.getContentType()||"",d=u.indexOf("application/json")>-1,p=ia.isObject(c);if(p&&ia.isHTMLForm(c)&&(c=new FormData(c)),ia.isFormData(c))return d?JSON.stringify(xa(c)):c;if(ia.isArrayBuffer(c)||ia.isBuffer(c)||ia.isStream(c)||ia.isFile(c)||ia.isBlob(c)||ia.isReadableStream(c))return c;if(ia.isArrayBufferView(c))return c.buffer;if(ia.isURLSearchParams(c))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),c.toString();let h;if(p){if(u.indexOf("application/x-www-form-urlencoded")>-1)return function(c,l){return ma(c,new va.classes.URLSearchParams,Object.assign({visitor:function(c,l,u,d){return va.isNode&&ia.isBuffer(c)?(this.append(l,c.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},l))}(c,this.formSerializer).toString();if((h=ia.isFileList(c))||u.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ma(h?{"files[]":c}:c,l&&new l,this.formSerializer)}}return p||d?(l.setContentType("application/json",!1),function(c){if(ia.isString(c))try{return(0,JSON.parse)(c),ia.trim(c)}catch(c){if("SyntaxError"!==c.name)throw c}return(0,JSON.stringify)(c)}(c)):c}],transformResponse:[function(c){const l=this.transitional||wa.transitional,u=l&&l.forcedJSONParsing,d="json"===this.responseType;if(ia.isResponse(c)||ia.isReadableStream(c))return c;if(c&&ia.isString(c)&&(u&&!this.responseType||d)){const u=!(l&&l.silentJSONParsing)&&d;try{return JSON.parse(c)}catch(c){if(u){if("SyntaxError"===c.name)throw da.from(c,da.ERR_BAD_RESPONSE,this,null,this.response);throw c}}}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:va.classes.FormData,Blob:va.classes.Blob},validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ia.forEach(["delete","get","head","post","put","patch"],(c=>{wa.headers[c]={}}));const Ma=wa,La=ia.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ua=Symbol("internals");function ja(c){return c&&String(c).trim().toLowerCase()}function Va(c){return!1===c||null==c?c:ia.isArray(c)?c.map(Va):String(c)}function ka(c,l,u,d,p){return ia.isFunction(d)?d.call(this,l,u):(p&&(l=u),ia.isString(l)?ia.isString(d)?-1!==l.indexOf(d):ia.isRegExp(d)?d.test(l):void 0:void 0)}class Fa{constructor(c){c&&this.set(c)}set(c,l,u){const d=this;function p(c,l,u){const p=ja(l);if(!p)throw new Error("header name must be a non-empty string");const h=ia.findKey(d,p);(!h||void 0===d[h]||!0===u||void 0===u&&!1!==d[h])&&(d[h||l]=Va(c))}const h=(c,l)=>ia.forEach(c,((c,u)=>p(c,u,l)));if(ia.isPlainObject(c)||c instanceof this.constructor)h(c,l);else if(ia.isString(c)&&(c=c.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(c.trim()))h((c=>{const l={};let u,d,p;return c&&c.split("\n").forEach((function(c){p=c.indexOf(":"),u=c.substring(0,p).trim().toLowerCase(),d=c.substring(p+1).trim(),!u||l[u]&&La[u]||("set-cookie"===u?l[u]?l[u].push(d):l[u]=[d]:l[u]=l[u]?l[u]+", "+d:d)})),l})(c),l);else if(ia.isHeaders(c))for(const[g,f]of c.entries())p(f,g,u);else null!=c&&p(l,c,u);return this}get(c,l){if(c=ja(c)){const u=ia.findKey(this,c);if(u){const c=this[u];if(!l)return c;if(!0===l)return function(c){const l=Object.create(null),u=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=u.exec(c);)l[d[1]]=d[2];return l}(c);if(ia.isFunction(l))return l.call(this,c,u);if(ia.isRegExp(l))return l.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(c,l){if(c=ja(c)){const u=ia.findKey(this,c);return!(!u||void 0===this[u]||l&&!ka(0,this[u],u,l))}return!1}delete(c,l){const u=this;let d=!1;function p(c){if(c=ja(c)){const p=ia.findKey(u,c);!p||l&&!ka(0,u[p],p,l)||(delete u[p],d=!0)}}return ia.isArray(c)?c.forEach(p):p(c),d}clear(c){const l=Object.keys(this);let u=l.length,d=!1;for(;u--;){const p=l[u];c&&!ka(0,this[p],p,c,!0)||(delete this[p],d=!0)}return d}normalize(c){const l=this,u={};return ia.forEach(this,((d,p)=>{const h=ia.findKey(u,p);if(h)return l[h]=Va(d),void delete l[p];const g=c?function(c){return c.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((c,l,u)=>l.toUpperCase()+u))}(p):String(p).trim();g!==p&&delete l[p],l[g]=Va(d),u[g]=!0})),this}concat(...c){return this.constructor.concat(this,...c)}toJSON(c){const l=Object.create(null);return ia.forEach(this,((u,d)=>{null!=u&&!1!==u&&(l[d]=c&&ia.isArray(u)?u.join(", "):u)})),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([c,l])=>c+": "+l)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(c){return c instanceof this?c:new this(c)}static concat(c,...l){const u=new this(c);return l.forEach((c=>u.set(c))),u}static accessor(c){const l=(this[Ua]=this[Ua]={accessors:{}}).accessors,u=this.prototype;function d(c){const d=ja(c);l[d]||(function(c,l){const u=ia.toCamelCase(" "+l);["get","set","has"].forEach((d=>{Object.defineProperty(c,d+u,{value:function(c,u,p){return this[d].call(this,l,c,u,p)},configurable:!0})}))}(u,c),l[d]=!0)}return ia.isArray(c)?c.forEach(d):d(c),this}}Fa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ia.reduceDescriptors(Fa.prototype,(({value:c},l)=>{let u=l[0].toUpperCase()+l.slice(1);return{get:()=>c,set(c){this[u]=c}}})),ia.freezeMethods(Fa);const $a=Fa;function Ba(c,l){const u=this||Ma,d=l||u,p=$a.from(d.headers);let h=d.data;return ia.forEach(c,(function(c){h=c.call(u,h,p.normalize(),l?l.status:void 0)})),p.normalize(),h}function Ga(c){return!(!c||!c.__CANCEL__)}function Wa(c,l,u){da.call(this,c??"canceled",da.ERR_CANCELED,l,u),this.name="CanceledError"}ia.inherits(Wa,da,{__CANCEL__:!0});const Ha=Wa;function qa(c,l,u){const d=u.config.validateStatus;u.status&&d&&!d(u.status)?l(new da("Request failed with status code "+u.status,[da.ERR_BAD_REQUEST,da.ERR_BAD_RESPONSE][Math.floor(u.status/100)-4],u.config,u.request,u)):c(u)}const za=(c,l,u=3)=>{let d=0;const p=function(c,l){c=c||10;const u=new Array(c),d=new Array(c);let p,h=0,g=0;return l=void 0!==l?l:1e3,function(f){const m=Date.now(),y=d[g];p||(p=m),u[h]=f,d[h]=m;let I=g,E=0;for(;I!==h;)E+=u[I++],I%=c;if(h=(h+1)%c,h===g&&(g=(g+1)%c),m-p<l)return;const A=y&&m-y;return A?Math.round(1e3*E/A):void 0}}(50,250);return function(c,l){let u,d,p=0,h=1e3/l;const g=(l,h=Date.now())=>{p=h,u=null,d&&(clearTimeout(d),d=null),c.apply(null,l)};return[(...c)=>{const l=Date.now(),f=l-p;f>=h?g(c,l):(u=c,d||(d=setTimeout((()=>{d=null,g(u)}),h-f)))},()=>u&&g(u)]}((u=>{const h=u.loaded,g=u.lengthComputable?u.total:void 0,f=h-d,m=p(f);d=h,c({loaded:h,total:g,progress:g?h/g:void 0,bytes:f,rate:m||void 0,estimated:m&&g&&h<=g?(g-h)/m:void 0,event:u,lengthComputable:null!=g,[l?"download":"upload"]:!0})}),u)},Ya=(c,l)=>{const u=null!=c;return[d=>l[0]({lengthComputable:u,total:c,loaded:d}),l[1]]},Ka=c=>(...l)=>ia.asap((()=>c(...l))),Xa=va.hasStandardBrowserEnv?function(){const c=va.navigator&&/(msie|trident)/i.test(va.navigator.userAgent),l=document.createElement("a");let u;function d(u){let d=u;return c&&(l.setAttribute("href",d),d=l.href),l.setAttribute("href",d),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:"/"===l.pathname.charAt(0)?l.pathname:"/"+l.pathname}}return u=d(window.location.href),function(c){const l=ia.isString(c)?d(c):c;return l.protocol===u.protocol&&l.host===u.host}}():function(){return!0},Ja=va.hasStandardBrowserEnv?{write(c,l,u,d,p,h){const g=[c+"="+encodeURIComponent(l)];ia.isNumber(u)&&g.push("expires="+new Date(u).toGMTString()),ia.isString(d)&&g.push("path="+d),ia.isString(p)&&g.push("domain="+p),!0===h&&g.push("secure"),document.cookie=g.join("; ")},read(c){const l=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove(c){this.write(c,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Qa(c,l){return c&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)?function(c,l){return l?c.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):c}(c,l):l}const Za=c=>c instanceof $a?{...c}:c;function eo(c,l){l=l||{};const u={};function d(c,l,u){return ia.isPlainObject(c)&&ia.isPlainObject(l)?ia.merge.call({caseless:u},c,l):ia.isPlainObject(l)?ia.merge({},l):ia.isArray(l)?l.slice():l}function p(c,l,u){return ia.isUndefined(l)?ia.isUndefined(c)?void 0:d(void 0,c,u):d(c,l,u)}function h(c,l){if(!ia.isUndefined(l))return d(void 0,l)}function g(c,l){return ia.isUndefined(l)?ia.isUndefined(c)?void 0:d(void 0,c):d(void 0,l)}function f(u,p,h){return h in l?d(u,p):h in c?d(void 0,u):void 0}const m={url:h,method:h,data:h,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,withXSRFToken:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:f,headers:(c,l)=>p(Za(c),Za(l),!0)};return ia.forEach(Object.keys(Object.assign({},c,l)),(function(d){const h=m[d]||p,g=h(c[d],l[d],d);ia.isUndefined(g)&&h!==f||(u[d]=g)})),u}const to=c=>{const l=eo({},c);let u,{data:d,withXSRFToken:p,xsrfHeaderName:h,xsrfCookieName:g,headers:f,auth:m}=l;if(l.headers=f=$a.from(f),l.url=Ca(Qa(l.baseURL,l.url),c.params,c.paramsSerializer),m&&f.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),ia.isFormData(d))if(va.hasStandardBrowserEnv||va.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(!1!==(u=f.getContentType())){const[c,...l]=u?u.split(";").map((c=>c.trim())).filter(Boolean):[];f.setContentType([c||"multipart/form-data",...l].join("; "))}if(va.hasStandardBrowserEnv&&(p&&ia.isFunction(p)&&(p=p(l)),p||!1!==p&&Xa(l.url))){const c=h&&g&&Ja.read(g);c&&f.set(h,c)}return l},no="undefined"!=typeof XMLHttpRequest&&function(c){return new Promise((function(l,u){const d=to(c);let p=d.data;const h=$a.from(d.headers).normalize();let g,f,m,y,I,{responseType:E,onUploadProgress:A,onDownloadProgress:_}=d;function C(){y&&y(),I&&I(),d.cancelToken&&d.cancelToken.unsubscribe(g),d.signal&&d.signal.removeEventListener("abort",g)}let S=new XMLHttpRequest;function T(){if(!S)return;const d=$a.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders());qa((function(c){l(c),C()}),(function(c){u(c),C()}),{data:E&&"text"!==E&&"json"!==E?S.response:S.responseText,status:S.status,statusText:S.statusText,headers:d,config:c,request:S}),S=null}S.open(d.method.toUpperCase(),d.url,!0),S.timeout=d.timeout,"onloadend"in S?S.onloadend=T:S.onreadystatechange=function(){S&&4===S.readyState&&(0!==S.status||S.responseURL&&0===S.responseURL.indexOf("file:"))&&setTimeout(T)},S.onabort=function(){S&&(u(new da("Request aborted",da.ECONNABORTED,c,S)),S=null)},S.onerror=function(){u(new da("Network Error",da.ERR_NETWORK,c,S)),S=null},S.ontimeout=function(){let l=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const p=d.transitional||Ta;d.timeoutErrorMessage&&(l=d.timeoutErrorMessage),u(new da(l,p.clarifyTimeoutError?da.ETIMEDOUT:da.ECONNABORTED,c,S)),S=null},void 0===p&&h.setContentType(null),"setRequestHeader"in S&&ia.forEach(h.toJSON(),(function(c,l){S.setRequestHeader(l,c)})),ia.isUndefined(d.withCredentials)||(S.withCredentials=!!d.withCredentials),E&&"json"!==E&&(S.responseType=d.responseType),_&&([m,I]=za(_,!0),S.addEventListener("progress",m)),A&&S.upload&&([f,y]=za(A),S.upload.addEventListener("progress",f),S.upload.addEventListener("loadend",y)),(d.cancelToken||d.signal)&&(g=l=>{S&&(u(!l||l.type?new Ha(null,c,S):l),S.abort(),S=null)},d.cancelToken&&d.cancelToken.subscribe(g),d.signal&&(d.signal.aborted?g():d.signal.addEventListener("abort",g)));const N=function(c){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(c);return l&&l[1]||""}(d.url);N&&-1===va.protocols.indexOf(N)?u(new da("Unsupported protocol "+N+":",da.ERR_BAD_REQUEST,c)):S.send(p||null)}))},ro=(c,l)=>{const{length:u}=c=c?c.filter(Boolean):[];if(l||u){let u,d=new AbortController;const p=function(c){if(!u){u=!0,g();const l=c instanceof Error?c:this.reason;d.abort(l instanceof da?l:new Ha(l instanceof Error?l.message:l))}};let h=l&&setTimeout((()=>{h=null,p(new da(`timeout ${l} of ms exceeded`,da.ETIMEDOUT))}),l);const g=()=>{c&&(h&&clearTimeout(h),h=null,c.forEach((c=>{c.unsubscribe?c.unsubscribe(p):c.removeEventListener("abort",p)})),c=null)};c.forEach((c=>c.addEventListener("abort",p)));const{signal:f}=d;return f.unsubscribe=()=>ia.asap(g),f}},so=function*(c,l){let u=c.byteLength;if(!l||u<l)return void(yield c);let d,p=0;for(;p<u;)d=p+l,yield c.slice(p,d),p=d},ao=(c,l,u,d)=>{const p=async function*(c,l){for await(const u of async function*(c){if(c[Symbol.asyncIterator])return void(yield*c);const l=c.getReader();try{for(;;){const{done:c,value:u}=await l.read();if(c)break;yield u}}finally{await l.cancel()}}(c))yield*so(u,l)}(c,l);let h,g=0,f=c=>{h||(h=!0,d&&d(c))};return new ReadableStream({async pull(c){try{const{done:l,value:d}=await p.next();if(l)return f(),void c.close();let h=d.byteLength;if(u){let c=g+=h;u(c)}c.enqueue(new Uint8Array(d))}catch(c){throw f(c),c}},cancel:c=>(f(c),p.return())},{highWaterMark:2})},oo="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,io=oo&&"function"==typeof ReadableStream,co=oo&&("function"==typeof TextEncoder?(lo=new TextEncoder,c=>lo.encode(c)):async c=>new Uint8Array(await new Response(c).arrayBuffer()));var lo;const uo=(c,...l)=>{try{return!!c(...l)}catch(c){return!1}},po=io&&uo((()=>{let c=!1;const l=new Request(va.origin,{body:new ReadableStream,method:"POST",get duplex(){return c=!0,"half"}}).headers.has("Content-Type");return c&&!l})),ho=io&&uo((()=>ia.isReadableStream(new Response("").body))),go={stream:ho&&(c=>c.body)};var fo;oo&&(fo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((c=>{!go[c]&&(go[c]=ia.isFunction(fo[c])?l=>l[c]():(l,u)=>{throw new da(`Response type '${c}' is not supported`,da.ERR_NOT_SUPPORT,u)})})));const mo=oo&&(async c=>{let{url:l,method:u,data:d,signal:p,cancelToken:h,timeout:g,onDownloadProgress:f,onUploadProgress:m,responseType:y,headers:I,withCredentials:E="same-origin",fetchOptions:A}=to(c);y=y?(y+"").toLowerCase():"text";let _,C=ro([p,h&&h.toAbortSignal()],g);const S=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let T;try{if(m&&po&&"get"!==u&&"head"!==u&&0!==(T=await(async(c,l)=>{const u=ia.toFiniteNumber(c.getContentLength());return u??(async c=>{if(null==c)return 0;if(ia.isBlob(c))return c.size;if(ia.isSpecCompliantForm(c)){const l=new Request(va.origin,{method:"POST",body:c});return(await l.arrayBuffer()).byteLength}return ia.isArrayBufferView(c)||ia.isArrayBuffer(c)?c.byteLength:(ia.isURLSearchParams(c)&&(c+=""),ia.isString(c)?(await co(c)).byteLength:void 0)})(l)})(I,d))){let c,u=new Request(l,{method:"POST",body:d,duplex:"half"});if(ia.isFormData(d)&&(c=u.headers.get("content-type"))&&I.setContentType(c),u.body){const[c,l]=Ya(T,za(Ka(m)));d=ao(u.body,65536,c,l)}}ia.isString(E)||(E=E?"include":"omit");const p="credentials"in Request.prototype;_=new Request(l,{...A,signal:C,method:u.toUpperCase(),headers:I.normalize().toJSON(),body:d,duplex:"half",credentials:p?E:void 0});let h=await fetch(_);const g=ho&&("stream"===y||"response"===y);if(ho&&(f||g&&S)){const c={};["status","statusText","headers"].forEach((l=>{c[l]=h[l]}));const l=ia.toFiniteNumber(h.headers.get("content-length")),[u,d]=f&&Ya(l,za(Ka(f),!0))||[];h=new Response(ao(h.body,65536,u,(()=>{d&&d(),S&&S()})),c)}y=y||"text";let N=await go[ia.findKey(go,y)||"text"](h,c);return!g&&S&&S(),await new Promise(((l,u)=>{qa(l,u,{data:N,headers:$a.from(h.headers),status:h.status,statusText:h.statusText,config:c,request:_})}))}catch(l){if(S&&S(),l&&"TypeError"===l.name&&/fetch/i.test(l.message))throw Object.assign(new da("Network Error",da.ERR_NETWORK,c,_),{cause:l.cause||l});throw da.from(l,l&&l.code,c,_)}}),yo={http:null,xhr:no,fetch:mo};ia.forEach(yo,((c,l)=>{if(c){try{Object.defineProperty(c,"name",{value:l})}catch(c){}Object.defineProperty(c,"adapterName",{value:l})}}));const Io=c=>`- ${c}`,Eo=c=>ia.isFunction(c)||null===c||!1===c,Ao=c=>{c=ia.isArray(c)?c:[c];const{length:l}=c;let u,d;const p={};for(let h=0;h<l;h++){let l;if(u=c[h],d=u,!Eo(u)&&(d=yo[(l=String(u)).toLowerCase()],void 0===d))throw new da(`Unknown adapter '${l}'`);if(d)break;p[l||"#"+h]=d}if(!d){const c=Object.entries(p).map((([c,l])=>`adapter ${c} `+(!1===l?"is not supported by the environment":"is not available in the build")));let u=l?c.length>1?"since :\n"+c.map(Io).join("\n"):" "+Io(c[0]):"as no adapter specified";throw new da("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return d};function _o(c){if(c.cancelToken&&c.cancelToken.throwIfRequested(),c.signal&&c.signal.aborted)throw new Ha(null,c)}function Co(c){return _o(c),c.headers=$a.from(c.headers),c.data=Ba.call(c,c.transformRequest),-1!==["post","put","patch"].indexOf(c.method)&&c.headers.setContentType("application/x-www-form-urlencoded",!1),Ao(c.adapter||Ma.adapter)(c).then((function(l){return _o(c),l.data=Ba.call(c,c.transformResponse,l),l.headers=$a.from(l.headers),l}),(function(l){return Ga(l)||(_o(c),l&&l.response&&(l.response.data=Ba.call(c,c.transformResponse,l.response),l.response.headers=$a.from(l.response.headers))),Promise.reject(l)}))}const So={};["object","boolean","number","function","string","symbol"].forEach(((c,l)=>{So[c]=function(u){return typeof u===c||"a"+(l<1?"n ":" ")+c}}));const To={};So.transitional=function(c,l,u){function d(c,l){return"[Axios v1.7.7] Transitional option '"+c+"'"+l+(u?". "+u:"")}return(u,p,h)=>{if(!1===c)throw new da(d(p," has been removed"+(l?" in "+l:"")),da.ERR_DEPRECATED);return l&&!To[p]&&(To[p]=!0,console.warn(d(p," has been deprecated since v"+l+" and will be removed in the near future"))),!c||c(u,p,h)}};const No={assertOptions:function(c,l,u){if("object"!=typeof c)throw new da("options must be an object",da.ERR_BAD_OPTION_VALUE);const d=Object.keys(c);let p=d.length;for(;p-- >0;){const h=d[p],g=l[h];if(g){const l=c[h],u=void 0===l||g(l,h,c);if(!0!==u)throw new da("option "+h+" must be "+u,da.ERR_BAD_OPTION_VALUE)}else if(!0!==u)throw new da("Unknown option "+h,da.ERR_BAD_OPTION)}},validators:So},Po=No.validators;class bo{constructor(c){this.defaults=c,this.interceptors={request:new Sa,response:new Sa}}async request(c,l){try{return await this._request(c,l)}catch(c){if(c instanceof Error){let l;Error.captureStackTrace?Error.captureStackTrace(l={}):l=new Error;const u=l.stack?l.stack.replace(/^.+\n/,""):"";try{c.stack?u&&!String(c.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(c.stack+="\n"+u):c.stack=u}catch(c){}}throw c}}_request(c,l){"string"==typeof c?(l=l||{}).url=c:l=c||{},l=eo(this.defaults,l);const{transitional:u,paramsSerializer:d,headers:p}=l;void 0!==u&&No.assertOptions(u,{silentJSONParsing:Po.transitional(Po.boolean),forcedJSONParsing:Po.transitional(Po.boolean),clarifyTimeoutError:Po.transitional(Po.boolean)},!1),null!=d&&(ia.isFunction(d)?l.paramsSerializer={serialize:d}:No.assertOptions(d,{encode:Po.function,serialize:Po.function},!0)),l.method=(l.method||this.defaults.method||"get").toLowerCase();let h=p&&ia.merge(p.common,p[l.method]);p&&ia.forEach(["delete","get","head","post","put","patch","common"],(c=>{delete p[c]})),l.headers=$a.concat(h,p);const g=[];let f=!0;this.interceptors.request.forEach((function(c){"function"==typeof c.runWhen&&!1===c.runWhen(l)||(f=f&&c.synchronous,g.unshift(c.fulfilled,c.rejected))}));const m=[];let y;this.interceptors.response.forEach((function(c){m.push(c.fulfilled,c.rejected)}));let I,E=0;if(!f){const c=[Co.bind(this),void 0];for(c.unshift.apply(c,g),c.push.apply(c,m),I=c.length,y=Promise.resolve(l);E<I;)y=y.then(c[E++],c[E++]);return y}I=g.length;let A=l;for(E=0;E<I;){const l=g[E++],u=g[E++];try{A=l(A)}catch(c){u.call(this,c);break}}try{y=Co.call(this,A)}catch(c){return Promise.reject(c)}for(E=0,I=m.length;E<I;)y=y.then(m[E++],m[E++]);return y}getUri(c){return Ca(Qa((c=eo(this.defaults,c)).baseURL,c.url),c.params,c.paramsSerializer)}}ia.forEach(["delete","get","head","options"],(function(c){bo.prototype[c]=function(l,u){return this.request(eo(u||{},{method:c,url:l,data:(u||{}).data}))}})),ia.forEach(["post","put","patch"],(function(c){function l(l){return function(u,d,p){return this.request(eo(p||{},{method:c,headers:l?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}bo.prototype[c]=l(),bo.prototype[c+"Form"]=l(!0)}));const Do=bo;class vo{constructor(c){if("function"!=typeof c)throw new TypeError("executor must be a function.");let l;this.promise=new Promise((function(c){l=c}));const u=this;this.promise.then((c=>{if(!u._listeners)return;let l=u._listeners.length;for(;l-- >0;)u._listeners[l](c);u._listeners=null})),this.promise.then=c=>{let l;const d=new Promise((c=>{u.subscribe(c),l=c})).then(c);return d.cancel=function(){u.unsubscribe(l)},d},c((function(c,d,p){u.reason||(u.reason=new Ha(c,d,p),l(u.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(c){this.reason?c(this.reason):this._listeners?this._listeners.push(c):this._listeners=[c]}unsubscribe(c){if(!this._listeners)return;const l=this._listeners.indexOf(c);-1!==l&&this._listeners.splice(l,1)}toAbortSignal(){const c=new AbortController,l=l=>{c.abort(l)};return this.subscribe(l),c.signal.unsubscribe=()=>this.unsubscribe(l),c.signal}static source(){let c;return{token:new vo((function(l){c=l})),cancel:c}}}const Ro=vo,Oo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Oo).forEach((([c,l])=>{Oo[l]=c}));const xo=Oo,wo=function c(l){const u=new Do(l),d=ys(Do.prototype.request,u);return ia.extend(d,Do.prototype,u,{allOwnKeys:!0}),ia.extend(d,u,null,{allOwnKeys:!0}),d.create=function(u){return c(eo(l,u))},d}(Ma);wo.Axios=Do,wo.CanceledError=Ha,wo.CancelToken=Ro,wo.isCancel=Ga,wo.VERSION="1.7.7",wo.toFormData=ma,wo.AxiosError=da,wo.Cancel=wo.CanceledError,wo.all=function(c){return Promise.all(c)},wo.spread=function(c){return function(l){return c.apply(null,l)}},wo.isAxiosError=function(c){return ia.isObject(c)&&!0===c.isAxiosError},wo.mergeConfig=eo,wo.AxiosHeaders=$a,wo.formToJSON=c=>xa(ia.isHTMLForm(c)?new FormData(c):c),wo.getAdapter=Ao,wo.HttpStatusCode=xo,wo.default=wo;const Mo=wo;function Lo(c){var l=c((function(c){Error.call(c),c.stack=(new Error).stack}));return l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l}var Uo=Lo((function(c){return function(){c(this),this.name="EmptyError",this.message="no elements in sequence"}})),Fo=function(c,l){return Fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},Fo(c,l)};function jo(c,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function u(){this.constructor=c}Fo(c,l),c.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)}function Vo(c,l){var u,d,p,h={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=f(0),g.throw=f(1),g.return=f(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function f(f){return function(m){return function(f){if(u)throw new TypeError("Generator is already executing.");for(;g&&(g=0,f[0]&&(h=0)),h;)try{if(u=1,d&&(p=2&f[0]?d.return:f[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,f[1])).done)return p;switch(d=0,p&&(f=[2&f[0],p.value]),f[0]){case 0:case 1:p=f;break;case 4:return h.label++,{value:f[1],done:!1};case 5:h.label++,d=f[1],f=[0];continue;case 7:f=h.ops.pop(),h.trys.pop();continue;default:if(!((p=(p=h.trys).length>0&&p[p.length-1])||6!==f[0]&&2!==f[0])){h=0;continue}if(3===f[0]&&(!p||f[1]>p[0]&&f[1]<p[3])){h.label=f[1];break}if(6===f[0]&&h.label<p[1]){h.label=p[1],p=f;break}if(p&&h.label<p[2]){h.label=p[2],h.ops.push(f);break}p[2]&&h.ops.pop(),h.trys.pop();continue}f=l.call(c,h)}catch(c){f=[6,c],d=0}finally{u=p=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,m])}}}function ko(c){var l="function"==typeof Symbol&&Symbol.iterator,u=l&&c[l],d=0;if(u)return u.call(c);if(c&&"number"==typeof c.length)return{next:function(){return c&&d>=c.length&&(c=void 0),{value:c&&c[d++],done:!c}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")}function $o(c,l){var u="function"==typeof Symbol&&c[Symbol.iterator];if(!u)return c;var d,p,h=u.call(c),g=[];try{for(;(void 0===l||l-- >0)&&!(d=h.next()).done;)g.push(d.value)}catch(c){p={error:c}}finally{try{d&&!d.done&&(u=h.return)&&u.call(h)}finally{if(p)throw p.error}}return g}function Bo(c,l,u){if(u||2===arguments.length)for(var d,p=0,h=l.length;p<h;p++)!d&&p in l||(d||(d=Array.prototype.slice.call(l,0,p)),d[p]=l[p]);return c.concat(d||Array.prototype.slice.call(l))}function Go(c){return this instanceof Go?(this.v=c,this):new Go(c)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Wo=function(c){return c&&"number"==typeof c.length&&"function"!=typeof c};function Ho(c){return"function"==typeof c}function qo(c){return Ho(null==c?void 0:c.then)}var zo=Lo((function(c){return function(l){c(this),this.message=l?l.length+" errors occurred during unsubscription:\n"+l.map((function(c,l){return l+1+") "+c.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=l}}));function Yo(c,l){if(c){var u=c.indexOf(l);0<=u&&c.splice(u,1)}}var Ko=function(){function c(c){this.initialTeardown=c,this.closed=!1,this._parentage=null,this._finalizers=null}return c.prototype.unsubscribe=function(){var c,l,u,d,p;if(!this.closed){this.closed=!0;var h=this._parentage;if(h)if(this._parentage=null,Array.isArray(h))try{for(var g=ko(h),f=g.next();!f.done;f=g.next())f.value.remove(this)}catch(l){c={error:l}}finally{try{f&&!f.done&&(l=g.return)&&l.call(g)}finally{if(c)throw c.error}}else h.remove(this);var m=this.initialTeardown;if(Ho(m))try{m()}catch(c){p=c instanceof zo?c.errors:[c]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var I=ko(y),E=I.next();!E.done;E=I.next()){var A=E.value;try{Qo(A)}catch(c){p=null!=p?p:[],c instanceof zo?p=Bo(Bo([],$o(p)),$o(c.errors)):p.push(c)}}}catch(c){u={error:c}}finally{try{E&&!E.done&&(d=I.return)&&d.call(I)}finally{if(u)throw u.error}}}if(p)throw new zo(p)}},c.prototype.add=function(l){var u;if(l&&l!==this)if(this.closed)Qo(l);else{if(l instanceof c){if(l.closed||l._hasParent(this))return;l._addParent(this)}(this._finalizers=null!==(u=this._finalizers)&&void 0!==u?u:[]).push(l)}},c.prototype._hasParent=function(c){var l=this._parentage;return l===c||Array.isArray(l)&&l.includes(c)},c.prototype._addParent=function(c){var l=this._parentage;this._parentage=Array.isArray(l)?(l.push(c),l):l?[l,c]:c},c.prototype._removeParent=function(c){var l=this._parentage;l===c?this._parentage=null:Array.isArray(l)&&Yo(l,c)},c.prototype.remove=function(l){var u=this._finalizers;u&&Yo(u,l),l instanceof c&&l._removeParent(this)},c.EMPTY=function(){var l=new c;return l.closed=!0,l}(),c}(),Xo=Ko.EMPTY;function Jo(c){return c instanceof Ko||c&&"closed"in c&&Ho(c.remove)&&Ho(c.add)&&Ho(c.unsubscribe)}function Qo(c){Ho(c)?c():c.unsubscribe()}var Zo=null,ei=null,ti=void 0,ni=!1,ri=!1,si={setTimeout:function(c,l){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];var p=si.delegate;return(null==p?void 0:p.setTimeout)?p.setTimeout.apply(p,Bo([c,l],$o(u))):setTimeout.apply(void 0,Bo([c,l],$o(u)))},clearTimeout:function(c){var l=si.delegate;return((null==l?void 0:l.clearTimeout)||clearTimeout)(c)},delegate:void 0};function ai(c){si.setTimeout((function(){if(!Zo)throw c;Zo(c)}))}function oi(){}var ii=ci("C",void 0,void 0);function ci(c,l,u){return{kind:c,value:l,error:u}}var li=null;function ui(c){if(ni){var l=!li;if(l&&(li={errorThrown:!1,error:null}),c(),l){var u=li,d=u.errorThrown,p=u.error;if(li=null,d)throw p}}else c()}var di=function(c){function l(l){var u=c.call(this)||this;return u.isStopped=!1,l?(u.destination=l,Jo(l)&&l.add(u)):u.destination=Ii,u}return jo(l,c),l.create=function(c,l,u){return new fi(c,l,u)},l.prototype.next=function(c){this.isStopped?yi(function(c){return ci("N",c,void 0)}(c),this):this._next(c)},l.prototype.error=function(c){this.isStopped?yi(ci("E",void 0,c),this):(this.isStopped=!0,this._error(c))},l.prototype.complete=function(){this.isStopped?yi(ii,this):(this.isStopped=!0,this._complete())},l.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,c.prototype.unsubscribe.call(this),this.destination=null)},l.prototype._next=function(c){this.destination.next(c)},l.prototype._error=function(c){try{this.destination.error(c)}finally{this.unsubscribe()}},l.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},l}(Ko),pi=Function.prototype.bind;function hi(c,l){return pi.call(c,l)}var gi=function(){function c(c){this.partialObserver=c}return c.prototype.next=function(c){var l=this.partialObserver;if(l.next)try{l.next(c)}catch(c){mi(c)}},c.prototype.error=function(c){var l=this.partialObserver;if(l.error)try{l.error(c)}catch(c){mi(c)}else mi(c)},c.prototype.complete=function(){var c=this.partialObserver;if(c.complete)try{c.complete()}catch(c){mi(c)}},c}(),fi=function(c){function l(l,u,d){var p,h,g=c.call(this)||this;return Ho(l)||!l?p={next:null!=l?l:void 0,error:null!=u?u:void 0,complete:null!=d?d:void 0}:g&&ri?((h=Object.create(l)).unsubscribe=function(){return g.unsubscribe()},p={next:l.next&&hi(l.next,h),error:l.error&&hi(l.error,h),complete:l.complete&&hi(l.complete,h)}):p=l,g.destination=new gi(p),g}return jo(l,c),l}(di);function mi(c){var l;ni?(l=c,ni&&li&&(li.errorThrown=!0,li.error=l)):ai(c)}function yi(c,l){var u=ei;u&&si.setTimeout((function(){return u(c,l)}))}var Ii={closed:!0,next:oi,error:function(c){throw c},complete:oi},Ei="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ai(c){return c}var _i=function(){function c(c){c&&(this._subscribe=c)}return c.prototype.lift=function(l){var u=new c;return u.source=this,u.operator=l,u},c.prototype.subscribe=function(c,l,u){var d,p=this,h=(d=c)&&d instanceof di||function(c){return c&&Ho(c.next)&&Ho(c.error)&&Ho(c.complete)}(d)&&Jo(d)?c:new fi(c,l,u);return ui((function(){var c=p,l=c.operator,u=c.source;h.add(l?l.call(h,u):u?p._subscribe(h):p._trySubscribe(h))})),h},c.prototype._trySubscribe=function(c){try{return this._subscribe(c)}catch(l){c.error(l)}},c.prototype.forEach=function(c,l){var u=this;return new(l=Ci(l))((function(l,d){var p=new fi({next:function(l){try{c(l)}catch(c){d(c),p.unsubscribe()}},error:d,complete:l});u.subscribe(p)}))},c.prototype._subscribe=function(c){var l;return null===(l=this.source)||void 0===l?void 0:l.subscribe(c)},c.prototype[Ei]=function(){return this},c.prototype.pipe=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return function(c){return 0===c.length?Ai:1===c.length?c[0]:function(l){return c.reduce((function(c,l){return l(c)}),l)}}(c)(this)},c.prototype.toPromise=function(c){var l=this;return new(c=Ci(c))((function(c,u){var d;l.subscribe((function(c){return d=c}),(function(c){return u(c)}),(function(){return c(d)}))}))},c.create=function(l){return new c(l)},c}();function Ci(c){var l;return null!==(l=null!=c?c:ti)&&void 0!==l?l:Promise}function Si(c){return Ho(c[Ei])}function Ti(c){return Symbol.asyncIterator&&Ho(null==c?void 0:c[Symbol.asyncIterator])}function Ni(c){return new TypeError("You provided "+(null!==c&&"object"==typeof c?"an invalid object":"'"+c+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Pi="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function bi(c){return Ho(null==c?void 0:c[Pi])}function Di(c){return function(c,l,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,p=u.apply(c,l||[]),h=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",(function(c){return function(l){return Promise.resolve(l).then(c,y)}})),d[Symbol.asyncIterator]=function(){return this},d;function g(c,l){p[c]&&(d[c]=function(l){return new Promise((function(u,d){h.push([c,l,u,d])>1||f(c,l)}))},l&&(d[c]=l(d[c])))}function f(c,l){try{(u=p[c](l)).value instanceof Go?Promise.resolve(u.value.v).then(m,y):I(h[0][2],u)}catch(c){I(h[0][3],c)}var u}function m(c){f("next",c)}function y(c){f("throw",c)}function I(c,l){c(l),h.shift(),h.length&&f(h[0][0],h[0][1])}}(this,arguments,(function(){var l,u,d;return Vo(this,(function(p){switch(p.label){case 0:l=c.getReader(),p.label=1;case 1:p.trys.push([1,,9,10]),p.label=2;case 2:return[4,Go(l.read())];case 3:return u=p.sent(),d=u.value,u.done?[4,Go(void 0)]:[3,5];case 4:return[2,p.sent()];case 5:return[4,Go(d)];case 6:return[4,p.sent()];case 7:return p.sent(),[3,2];case 8:return[3,10];case 9:return l.releaseLock(),[7];case 10:return[2]}}))}))}function Ri(c){return Ho(null==c?void 0:c.getReader)}function Oi(c){if(c instanceof _i)return c;if(null!=c){if(Si(c))return p=c,new _i((function(c){var l=p[Ei]();if(Ho(l.subscribe))return l.subscribe(c);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Wo(c))return d=c,new _i((function(c){for(var l=0;l<d.length&&!c.closed;l++)c.next(d[l]);c.complete()}));if(qo(c))return u=c,new _i((function(c){u.then((function(l){c.closed||(c.next(l),c.complete())}),(function(l){return c.error(l)})).then(null,ai)}));if(Ti(c))return vi(c);if(bi(c))return l=c,new _i((function(c){var u,d;try{for(var p=ko(l),h=p.next();!h.done;h=p.next()){var g=h.value;if(c.next(g),c.closed)return}}catch(c){u={error:c}}finally{try{h&&!h.done&&(d=p.return)&&d.call(p)}finally{if(u)throw u.error}}c.complete()}));if(Ri(c))return vi(Di(c))}var l,u,d,p;throw Ni(c)}function vi(c){return new _i((function(l){(function(c,l){var u,d,p,h;return function(c,l,u,d){return new(u||(u=Promise))((function(p,h){function g(c){try{m(d.next(c))}catch(c){h(c)}}function f(c){try{m(d.throw(c))}catch(c){h(c)}}function m(c){var l;c.done?p(c.value):(l=c.value,l instanceof u?l:new u((function(c){c(l)}))).then(g,f)}m((d=d.apply(c,l||[])).next())}))}(this,void 0,void 0,(function(){var g,f;return Vo(this,(function(m){switch(m.label){case 0:m.trys.push([0,5,6,11]),u=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=c[Symbol.asyncIterator];return u?u.call(c):(c=ko(c),l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l);function d(u){l[u]=c[u]&&function(l){return new Promise((function(d,p){!function(c,l,u,d){Promise.resolve(d).then((function(l){c({value:l,done:u})}),l)}(d,p,(l=c[u](l)).done,l.value)}))}}}(c),m.label=1;case 1:return[4,u.next()];case 2:if((d=m.sent()).done)return[3,4];if(g=d.value,l.next(g),l.closed)return[2];m.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=m.sent(),p={error:f},[3,11];case 6:return m.trys.push([6,,9,10]),d&&!d.done&&(h=u.return)?[4,h.call(u)]:[3,8];case 7:m.sent(),m.label=8;case 8:return[3,10];case 9:if(p)throw p.error;return[7];case 10:return[7];case 11:return l.complete(),[2]}}))}))})(c,l).catch((function(c){return l.error(c)}))}))}function xi(c,l,u,d,p){void 0===d&&(d=0),void 0===p&&(p=!1);var h=l.schedule((function(){u(),p?c.add(this.schedule(null,d)):this.unsubscribe()}),d);if(c.add(h),!p)return h}function wi(c){return function(l){if(function(c){return Ho(null==c?void 0:c.lift)}(l))return l.lift((function(l){try{return c(l,this)}catch(c){this.error(c)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Mi(c,l,u,d,p){return new Li(c,l,u,d,p)}var Li=function(c){function l(l,u,d,p,h,g){var f=c.call(this,l)||this;return f.onFinalize=h,f.shouldUnsubscribe=g,f._next=u?function(c){try{u(c)}catch(c){l.error(c)}}:c.prototype._next,f._error=p?function(c){try{p(c)}catch(c){l.error(c)}finally{this.unsubscribe()}}:c.prototype._error,f._complete=d?function(){try{d()}catch(c){l.error(c)}finally{this.unsubscribe()}}:c.prototype._complete,f}return jo(l,c),l.prototype.unsubscribe=function(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var u=this.closed;c.prototype.unsubscribe.call(this),!u&&(null===(l=this.onFinalize)||void 0===l||l.call(this))}},l}(di);function Ui(c,l){return void 0===l&&(l=0),wi((function(u,d){u.subscribe(Mi(d,(function(u){return xi(d,c,(function(){return d.next(u)}),l)}),(function(){return xi(d,c,(function(){return d.complete()}),l)}),(function(u){return xi(d,c,(function(){return d.error(u)}),l)})))}))}function Fi(c,l){return void 0===l&&(l=0),wi((function(u,d){d.add(c.schedule((function(){return u.subscribe(d)}),l))}))}function ji(c,l){if(!c)throw new Error("Iterable cannot be null");return new _i((function(u){xi(u,l,(function(){var d=c[Symbol.asyncIterator]();xi(u,l,(function(){d.next().then((function(c){c.done?u.complete():u.next(c.value)}))}),0,!0)}))}))}function Vi(c,l){return l?function(c,l){if(null!=c){if(Si(c))return function(c,l){return Oi(c).pipe(Fi(l),Ui(l))}(c,l);if(Wo(c))return function(c,l){return new _i((function(u){var d=0;return l.schedule((function(){d===c.length?u.complete():(u.next(c[d++]),u.closed||this.schedule())}))}))}(c,l);if(qo(c))return function(c,l){return Oi(c).pipe(Fi(l),Ui(l))}(c,l);if(Ti(c))return ji(c,l);if(bi(c))return function(c,l){return new _i((function(u){var d;return xi(u,l,(function(){d=c[Pi](),xi(u,l,(function(){var c,l,p;try{l=(c=d.next()).value,p=c.done}catch(c){return void u.error(c)}p?u.complete():u.next(l)}),0,!0)})),function(){return Ho(null==d?void 0:d.return)&&d.return()}}))}(c,l);if(Ri(c))return function(c,l){return ji(Di(c),l)}(c,l)}throw Ni(c)}(c,l):Oi(c)}function ki(c,l,u){var d=Ho(c)||l||u?{next:c,error:l,complete:u}:c;return d?wi((function(c,l){var u;null===(u=d.subscribe)||void 0===u||u.call(d);var p=!0;c.subscribe(Mi(l,(function(c){var u;null===(u=d.next)||void 0===u||u.call(d,c),l.next(c)}),(function(){var c;p=!1,null===(c=d.complete)||void 0===c||c.call(d),l.complete()}),(function(c){var u;p=!1,null===(u=d.error)||void 0===u||u.call(d,c),l.error(c)}),(function(){var c,l;p&&(null===(c=d.unsubscribe)||void 0===c||c.call(d)),null===(l=d.finalize)||void 0===l||l.call(d)})))})):Ai}class Wi{static portalRegex=/(?<=v2\/pages\/)(.*?)(?=\?pageClass=)/;#e=0;#t=0;#n;#r=[];constructor(){this.#n=!1,zr.subscribe(W.START_PERFORMANCE_LOG,(()=>{this.#n=!0,this.clearStorage(),this.#e=Date.now()}),W.START_PERFORMANCE_LOG),zr.subscribe(W.STOP_PERFORMANCE_LOG,(()=>{this.#n=!1,this.#t=Date.now(),this.#s()}),W.STOP_PERFORMANCE_LOG)}static getCategory(c){return c.includes("v2/cases")||c.includes("v2/assignments")?"Case":c.includes("v2/data_views")?"DataPage":c.includes("v2/pages")?"Page":""}static getPortalLabel(c,l){const u=Wp(".pyPrimaryNavPages","pyPortal",l)||[];return u.find((l=>l.pyRuleName===c))?.pyLabel??c}static extractAssignmentLabel(c,l,u){c.label===W.TOP_ACTION_LABEL.OPENASSIGNMENT&&void 0===c.assignmentLabel&&(c.assignmentLabel=u?.data?.data?.caseInfo?.assignments.find((c=>c.ID===l))?.name??"")}#a(c,l,u,d){if(c<0)return;const p=this.#r[l].serviceCalls[c],h=Date.now();p.endTime=h,p.totalTimeTaken=h-p.startTime,p.httpMethod=d.config?.method,u?p.status="CANCELLED":"headers"in d&&(p.status=d.status,p.responseBytes=d.headers["content-length"])}#o(c,l,u,d,p){let h="";if(!u){const l=c.match(Wi.portalRegex)[0];h=l?.split(" ")[0]}const g=`${l||h}${W.HASH_DELIMITER}${p.startTime}`,f=eh.getHashedString(g);p.urlUniqueID=f;const m={label:l||`${Wi.getPortalLabel(h,d)} Portal`,actionUniqueID:f,serviceCalls:[p]};return this.#r.push(m),{actionUniqueID:f,urlUniqueID:f,topLevelAction:u}}#i(c,l,u){const d=this.#r[c];Wi.extractAssignmentLabel(d,l,u);const p=u.data?.data?.caseInfo?.content;p&&(d.caseLabel=p.pyLabel,d.caseID=p.pyID)}buildActionsList(c){const{url:l,topLevelAction:u,userAction:d,actionLabel:p,context:h}=c;let g={};if(this.#n){const c={url:l.split(P()??"")[1],startTime:Date.now(),context:h,category:Wi.getCategory(l)};if(u&&d)g=this.#o(l,p,!0,h,c);else if(Wi.portalRegex.test(l))g=this.#o(l,p,!1,h,c);else if(this.#r.length>0){const d=this.#r[this.#r.length-1].serviceCalls,p=`${l}${W.HASH_DELIMITER}${c.startTime}${W.HASH_DELIMITER}${d.length}`,h=eh.getHashedString(p);c.urlUniqueID=h,d.push(c),g.actionUniqueID=this.#r[this.#r.length-1].actionUniqueID,g.urlUniqueID=h,g.topLevelAction=u}}return g}reformActionList(c,l,u,d){const p=l.config,{actionUniqueID:h,urlUniqueID:g,topLevelAction:f,assignmentID:m}=p;if(this.#n){const p=this.#r.findIndex((c=>c.actionUniqueID===h));if(p>=0){f&&u&&"data"in l&&this.#i(p,m,l),c=c.split(P()??"")[1];const h=this.#r[p].serviceCalls.findIndex((l=>l.url===c&&l.urlUniqueID===g));this.#a(h,p,d,l)}}}#s(){if(0===this.#r.length)return;const c={version:"1.0.0",recordedTime:this.#t-this.#e,totalActions:this.#r.length,startTime:this.#e,userActions:this.#r};localStorage.setItem("performanceData",JSON.stringify(c))}clearStorage(){localStorage.removeItem("performanceData"),this.#r=[]}}const $i=new Wi;class qi{constructor(c,l=!0){this.config=c,l?(this.ssKeyConfig=c,this.reloadConfig()):this.updateConfig(c,!1)}static init(c,l=!0){return new qi(c,l)}updateConfig(c,l=!0){l?window.sessionStorage.setItem(this.ssKeyConfig,JSON.stringify(this.config)):gc(c)}reloadConfig(c=!0){if(c){const c=window.sessionStorage.getItem(this.ssKeyConfig);this.config=c?JSON.parse(c):null}else this.config=fc()}async buildAuthorizeUrl(c){c=c||window.btoa(location.origin);let{sessionIndex:l}=this.config;const{password:u}=this.config,d=this.config.clientId?this.config.clientId:this.config.client_id,p=this.config.redirectUri?this.config.redirectUri:this.config.redirect_uri,h=this.config.authorizeUri?this.config.authorizeUri:this.config.endPoints.authorize,g=this.config.authService?this.config.authService:this.config.authentication_service||"pega",f=this.config.appAlias?this.config.appAlias:Gd.getApplicationAlias(),m=this.config.userIdentifier?this.config.userIdentifier:this.config.user_identifier;l=l||this.config.tokenInfo.session_index;const y=l?`&session_index=${l}`:`${m}`?`&UserIdentifier=${m}`:`${u}`?`&Password=${window.atob(u)}`:"",I=new Uint8Array(64);window.crypto?.getRandomValues(I),this.config.codeVerifier=this.base64UrlSafeEncode(I),this.updateConfig(this.config,!1);const E=f?`+app.alias.${f.replace(/^app\//,"")}`:"";return this.getCodeChallenge(this.config.codeVerifier)?.then((l=>`${h}?client_id=${d}&response_type=code&redirect_uri=${p}&scope=openid${E}&state=${c}&code_challenge=${l}&code_challenge_method=S256&authentication_service=${g}&enable_psyncId=true${y}`))?.catch((()=>null))}getTokenAndFinish=c=>{window.removeEventListener("message",this.authMessageHandler,!1),this.getToken(c,!1).then((()=>{})).catch((c=>{console.log(c)}))};authMessageHandler=c=>{if(c.origin!==this.getRedirectUriOrigin())return;if(!c.data||!c.data.type||"PegaAuth"!==c.data.type)return;const l=c.data.code.toString();this.getTokenAndFinish(l)};getRedirectUriOrigin=()=>{let{redirectUri:c}=this.config;c=c||this.config.redirect_uri;const l=c.indexOf("//"),u=-1!==l?c.indexOf("/",l+2):-1;return-1!==u?c.substring(0,u):c};getToken(c,l){this.reloadConfig(l);const u=this.config.clientId?this.config.clientId:this.config.client_id,d=this.config.clientSecret?this.config.clientSecret:this.config.client_secret,p=this.config.redirectUri?this.config.redirectUri:this.config.redirect_uri,h=this.config.tokenUri?this.config.tokenUri:this.config.endPoints.token,{codeVerifier:g}=this.config,f=window.location.search,m=new URLSearchParams(f),y=c||m.get("code"),I=new URLSearchParams;return I.append("client_id",u),d&&I.append("client_secret",d),I.append("grant_type","authorization_code"),I.append("code",y),I.append("redirect_uri",p),I.append("code_verifier",g),this.config?.secureCookie&&I.append("send_token_as_cookie","true"),ic(h,{method:"POST",headers:new Headers({"content-type":"application/x-www-form-urlencoded"}),body:I.toString()}).then((c=>c.data)).then((c=>{c.eA=Date.now()+1e3*c.expires_in;let u=!1;if(this.config.codeVerifier&&(delete this.config.codeVerifier,u=!0),c.session_index&&(this.config.session_index=c.session_index,u=!0),u){this.updateConfig(this.config,l),this.config?.secureCookie?pc({pzCTkn:c?.csrf}):(hc({tokenInfo:c}),pc({Authorization:`${c?.token_type} ${c?.access_token}`}));const{onTokenRetrieval:u}=this.config;u&&"function"==typeof u&&u(c),window.postMessage("oAuthSuccess")}return c})).catch((()=>null))}sha256Hash(c){return window.crypto?.subtle?.digest("SHA-256",(new TextEncoder).encode(c))}encode64(c){return window.btoa(new Uint8Array(c).reduce(((c,l)=>c+String.fromCharCode(l)),""))}base64UrlSafeEncode(c){return this.encode64(c).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}getCodeChallenge(c){return this.sha256Hash(c)?.then((c=>this.base64UrlSafeEncode(c))).catch((c=>{console.log(c)})).finally((()=>null))}}const Bi=qi,Gi=(c,l)=>{(async c=>{const l={};if("OAuth2.0"===c?.authType){const u=new Bi(c,!1);l.reauthUrl=await u.buildAuthorizeUrl(),l.redirectOrigin=u.getRedirectUriOrigin(),window.addEventListener("message",u.authMessageHandler,!1)}else l.reauthUrl=P()+(N()?`${N()}`:"/?reAuth=true");return l})(l).then((l=>{const u={openReauthMessageModal:!0,reAuthenticationURL:l.reauthUrl,url:c,redirectOrigin:l.redirectOrigin};zr.publish(G.PUB_SUB_EVENTS.EVENT_REAUTH,u)}))},Hi=(c,l)=>"OAuth2.0"===l?.authType?c?.includes(l.endPoints.token):c?.includes("updateSession"),zi=c=>{const{config:l}=c,u=l.headers&&l.headers.context;return l.data&&(l.body=l.data),{url:l.url,config:l,context:u}},Yi=(c,l,u)=>{const{config:d}=c,{url:p,config:h,callback:g,isRefreshTokenPresent:f}=(c=>{let l="",u={},d={},p=!0;if("OAuth2.0"===c?.authType){l=c.endPoints.token;const h=new URLSearchParams;(!c.tokenInfo.refresh_token||c.tokenInfo.refresh_token&&c.tokenInfo.refresh_token.length<=0)&&(p=!1),h.append("client_id",c.client_id),h.append("grant_type","refresh_token"),c.clientSecret&&h.append("client_secret",c.clientSecret),c.secureCookie&&h.append("send_token_as_cookie","true"),c.tokenInfo?.refresh_token&&h.append("refresh_token",c.tokenInfo.refresh_token),u={method:"POST",body:h.toString(),headers:{"content-type":"application/x-www-form-urlencoded"}},d={success:l=>{const{data:u}=l,d={access_token:u?.access_token,refresh_token:u?.refresh_token};hc({tokenInfo:{...c.tokenInfo,...d}}),c.secureCookie?pc({pzCTkn:u?.csrf}):pc({Authorization:`${u?.token_type} ${u?.access_token}`});const{onTokenRetrieval:p}=c;p&&"function"==typeof p&&p(u)},failure:l=>{if(c.popupReauth)return Gi(l,c);zr.publish(G.PUB_SUB_EVENTS.EVENT_FULL_REAUTH,c)}}}else l=`${P()}/updateSession`,u={method:"GET",headers:{}},d={failure:Gi};return{url:l,config:u,callback:d,isRefreshTokenPresent:p}})(u),m=d.headers&&d.headers.context;d.data&&(d.body=d.data);const y=cc(d.url,d,m,l);return f?ic(p,h).then((c=>(l.setUpdateSessionStatus(!1),g?.success?.(c,d),zr.publish("updateSession",{updateStatus:"success"}),y.then((c=>Promise.resolve(c))).catch((c=>Promise.reject(c)))))).catch((c=>c&&c.config&&Hi(c.config.url,u)?(g?.failure?.(d.url,u),y):Promise.reject(c))):(g?.failure?.(d.url,u),y)},Ki=class{constructor(c){this.xrayInfo={},this.xRayDebugger=c}startXRay(){if(!this.xRayDebugger.xray)return null;const c=`${Date.now()+Math.random()}`;return this.xrayInfo[c]={startTime:Date.now()/1e3},c}startXRayRestApi(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],restApisTime:{...this.xrayInfo[c]?this.xrayInfo[c].restApisTime:{},[l]:Date.now()}})}stopXRayRestApi(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],restApisTime:{...this.xrayInfo[c]?.restApisTime,[l]:(Date.now()-this.xrayInfo[c]?.restApisTime[l])/1e3}})}updateXRay(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],...l})}stopXRay(c,l){this.xRayDebugger.xray&&(this.xrayInfo[c]={...this.xrayInfo[c],totalTime:Date.now()/1e3-this.xrayInfo[c].startTime},l().setXRayInfo(this.xrayInfo[c]),delete this.xrayInfo[c])}},Xi=new class{constructor(){this.xray=!1,this.onXRayCallback=null,this.xrayRuntime=new Ki(this),this.isPreview=!1,this.debugLevels="vcv=1;tracer=0;log=0"}onXRay(c){this.onXRayCallback=c}toggleXRay(c){this.xray=c,this.xrayRuntime.xrayInfo={},null!==this.onXRayCallback&&this.onXRayCallback(c)}enableXRay(){this.toggleXRay(!0)}disableXRay(){this.toggleXRay(!1)}toggle(){this.xray?this.toggleXRay(!1):this.toggleXRay(!0)}isXRayOn(){return this.xray}getXRayRuntime(){return this.xrayRuntime}setPreviewMode(){this.isPreview=!0}getPreviewMode(){return this.isPreview}enableTracer=()=>{this.debugLevels="vcv=1;tracer=1;log=0"};disableTracer=()=>{this.debugLevels="vcv=1;tracer=0;log=0"};getDebugLevels=()=>this.debugLevels},Ji=new class{constructor(){this.externalHeaders={},this.defaultHeaders={},this.SPECIAL_CHARS={SLASH:"/"}}registerHeader(c,l){return!this.defaultHeaders[c]&&(this.externalHeaders[c]=l,!0)}unRegisterHeader(c){this.externalHeaders[c]&&delete this.externalHeaders[c]}getRegisteredHeaders(){return this.externalHeaders}setDefaultHeaders(c){this.defaultHeaders={...this.defaultHeaders,...c}}getDefaultHeaders(){return this.defaultHeaders}addDebugHeaders(c={}){return{[W.COREHEADER_APP_DEBUG_ID]:c.debugId,[W.COREHEADER_APP_DEBUG_LEVELS]:Xi.getDebugLevels()}}getCoreHeadersFromContext(c){if(["root","app"].includes(c)||!c)return;const l=sh.getProperty(W.COREHEADERS,"",c);return l?{...l,debugInfo:Xi.getPreviewMode()&&{...l.debugInfo,[W.COREHEADER_APP_DEBUG_LEVELS]:Xi.getDebugLevels()}}:(c=c.substr(0,c.lastIndexOf(this.SPECIAL_CHARS.SLASH)),this.getCoreHeadersFromContext(c))}processCoreHeaders(c,l,u){const d=this.getCoreHeadersFromContext(u);if(d){const l=Object.keys(c);if(l.includes(W.SKIPCOREHEADERS))return void delete c[W.SKIPCOREHEADERS];const u=Object.assign({},...Object.values(d));Object.keys({...u}).forEach((d=>{l.includes(d)||(c[d]=u[d])}))}}injectCoreAdditionalHeaders(c,l,u,d){d?.includeRemoteSystemIdIfPresent&&q.injectRemoteCaseHeader(c,l,u),this.processCoreHeaders(c,l,u)}},Qi=Ji,Zi="updateSession",ec={},tc=new class{constructor(){this.updateSessionInProgress=!1}getUpdateSessionStatus=()=>this.updateSessionInProgress;setUpdateSessionStatus=c=>{this.updateSessionInProgress=c}},nc=new class{constructor(){this.timerID=void 0,this.expiryBuffer=45,this.timeoutWarned=!1}setTimerID=c=>{this.timerID=c};getTimerID=()=>this.timerID;resetInactiveTimeout=c=>{const l=window.PCore?.getEnvironmentInfo().getInactivityTimeout();if(this.timeoutWarned&&(zr.unsubscribe(G.PUB_SUB_EVENTS.RESET_TIMER,"resetCallback"),this.timeoutWarned=!1),l)return c&&clearTimeout(c),this.startInactivityTimeout(l>60?l:60)};startInactivityTimeout=c=>{const l=setTimeout((()=>{zr.publish(G.PUB_SUB_EVENTS.TIMEOUT_REMINDER,{timeRemaining:this.expiryBuffer}),clearTimeout(l),zr.subscribe(G.PUB_SUB_EVENTS.RESET_TIMER,this.resetInactiveTimeout,"resetCallback"),this.timeoutWarned=!0}),1e3*(c-this.expiryBuffer));return this.setTimerID(l),l}};let rc={},sc={},ac={},oc="";const ic=(c,l,u="root",d={})=>{const{doNotMergeHttpMessagesForStatusCode:p=null,cancelContext:h=u,includeRemoteSystemIdIfPresent:g=!0,actionLabel:f="",assignmentID:m=""}=d;let{topLevelAction:y=!1}=d;const I=y;y||(y=l.topLevelAction||!1),oc=p,null===c&&window.console.error("Error: url passed to Service Broker fetch is null (or) undefined");const{body:E,signal:A,withoutDefaultHeaders:_=!1,...C}=l;let S={};Hd.getPerformanceDashboardVisibility()&&(S={assignmentID:m,...$i.buildActionsList({url:c,topLevelAction:y,userAction:I,actionLabel:f,context:u})});const{Authorization:T,pzCTkn:N,...P}=l.headers||{};_||Qi.injectCoreAdditionalHeaders(P,l.body,u,{includeRemoteSystemIdIfPresent:g}),h&&ec[h]>=0?ec[h]+=1:h&&void 0===ec[h]&&(ec[h]=1);let b=_?{...P}:{...Qi.getDefaultHeaders(),...Qi.getRegisteredHeaders(),...P,context:u};if(c&&Hi(c,sc)&&tc.getUpdateSessionStatus()||!tc.getUpdateSessionStatus()){Hi(c,sc)&&"OAuth2.0"===sc?.authType&&(b={...P});const{restApi:l}=Gd.doesRestApiExist("Logout")&&Gd.getRestEndPoint("Logout")||{restApi:null};return(!l||c&&!c.endsWith(l))&&nc.setTimerID(nc.resetInactiveTimeout(nc.getTimerID())),function(c){return new Promise((function(l,u){var d,p=!1;c.subscribe({next:function(c){d=c,p=!0},error:u,complete:function(){p?l(d):u(new Uo)}})}))}(Vi(Mo({context:u,...C,url:c,data:E,...A&&void 0===A.aborted&&{cancelToken:A},...A&&void 0!==A.aborted&&{signal:A},headers:b,withCredentials:(D=sc,!("OAuth2.0"!==D?.authType||!D.secureCookie)||!("custom"!==D?.authType||!D.customCookies)||void 0),...S})).pipe(ki((()=>{const c=Qi.getCoreHeadersFromContext(b.context);c&&(c=>{zr.publish(W.PUB_SUB_EVENTS.FETCH_SUCCESS,c)})({...c})}))))}var D;return cc(c,l,u,tc)},cc=(c,l,u,d)=>new Promise(((p,h)=>{zr.subscribe(Zi,(g=>{d.setUpdateSessionStatus(!g.updateStatus),"success"===g.updateStatus?ic(c,l,u).then((c=>p(c))).catch((c=>h(c))):h(g.updateStatus.error)}),Zi)})),lc=c=>{ec[c]>0&&(ec[c]-=1,0===ec[c]&&delete ec[c])};Mo.interceptors.request.use((c=>(rc.request&&(c=rc.request(c)),c)),(c=>Promise.reject(c))),Mo.interceptors.response.use((c=>{const l=c.config.url;if(Hd.getPerformanceDashboardVisibility()&&$i.reformActionList(l,c,!0,!1),202===c.status&&c.config.headers.context&&c.data?.caseInfo?.errorMessage){const l=[{type:"error",message:c.data.caseInfo.errorMessage}];let u=c.config.headers.context;return u&&u.includes("/workarea")&&(u=u.substring(0,u.lastIndexOf("/workarea"))),er({messages:l,category:"HTTP",context:u}),Promise.reject(c)}return c.config.headers&&c.config.headers.context&&(c.config.skipClearErrorMessages||(Qn({type:"error",category:"HTTP",context:c.config.headers.context}).length>0&&Zn({type:"error",category:"HTTP",context:c.config.headers.context}),Qn({type:"error",category:c.config.headers.context===W.APP.APP?"PAGE":"",context:c.config.headers.context}).length>0&&Zn({type:"error",category:"PAGE",context:c.config.headers.context})),lc(c.config.headers.context)),rc.response&&(c=rc.response(c)),c}),(c=>{if(c.config&&c.config.headers&&c.config.headers.context&&lc(c.config.headers.context),Hd.getPerformanceDashboardVisibility()){const l=c.config.url,u=Mo.isCancel(c);$i.reformActionList(l,u?c:c.response,!1,u)}return!c.response||!c.response.status||401!==c.response.status||c.config&&Hi(c.config.url,sc)||zr.subscribe(Zi,(c=>{tc.setUpdateSessionStatus(!c.updateStatus)}),Zi),((c,l,u,d)=>{if(c.config&&Hi(c.config.url,u))return Promise.reject(c);if(c.response&&c.response.status&&401===c.response.status&&!l.getUpdateSessionStatus()){if(zr.unsubscribeAllWithEventType(Zi),l.setUpdateSessionStatus(!0),"custom"===u?.authType){zr.publish(G.PUB_SUB_EVENTS.EVENT_CUSTOM_REAUTH);const{url:u,config:d,context:p}=zi(c);return cc(u,d,p,l)}return Yi(c,l,u)}if(c.response&&c.response.status&&401===c.response.status&&l.getUpdateSessionStatus()){const{url:l,config:u,context:d}=zi(c);return ic(l,u,d)}if(c.response&&c.response.status&&422!==c.response.status&&424!==c.response.status&&c.config.headers.context&&c.response.data&&!d){const l=c.response.data.errorDetails&&c.response.data.errorDetails.map((l=>((c,l)=>l[G.TRACE_ID]?{type:"error",message:c.localizedValue||c.message,correlationID:l[G.TRACE_ID]}:{type:"error",message:c.localizedValue||c.message})(l,c.response.headers))),u=c.config.headers.context;return er({messages:l,category:"HTTP",context:u}),Promise.reject(c)}return Promise.reject(c)})(c,tc,sc,c.response&&c.response.status&&c.response.status===Number(oc)?oc:null)}));const uc=()=>Mo.CancelToken.source(),dc=c=>Mo.isCancel(c),pc=c=>{Qi.setDefaultHeaders(c)},hc=c=>{sc={...sc,...c}},gc=c=>{ac={...ac,...c}},fc=()=>({...ac}),mc=()=>({...sc}),yc=class{static isCaseActive(c,l){if(!c||!l)return!1;const u=Uu(l);if(u){const d=zu(l),{items:p={}}=u;return!(!d||!p[d]||p[d].key!==c)}return!1}static getCaseEditMetadata=(c,l)=>{const u={caseID:c,viewID:"pyEdit"},{restApi:d,reqType:p}=sg("loadView",u);return ic(d,{method:p},l)};static getCaseEditLock=(c,l)=>{const u={caseID:c,actionID:"pyUpdateCaseDetails"},{restApi:d,reqType:p}=sg(Ze,u);return ic(`${d}?viewType=page`,{method:p},l)};static updateCaseEditFieldsData=(c,l,u,d)=>{const p={caseID:c,actionID:"pyUpdateCaseDetails"},{restApi:h}=sg(Ze,p),g=l[c];return ic(`${h}?viewType=form`,{method:"PATCH",body:{content:{...g}},headers:{"if-match":u}},d)};static getCaseMessages=c=>$p(c)?.caseMessages;static getPropertiesToReplace=c=>(Zc(c)||[]).filter((c=>!c.allowMultiple)).map((c=>c.fullPath));static getUniqueGadgetId=()=>eh.generateUniqueID().substring(0,5);static getRemoteCaseMapping=()=>q.getRemoteCaseMapping();static isTraditionalRemoteCase=c=>q.isTraditionalRemoteCase(c);static getRemoteCaseKey=(c,l)=>{let u=l;try{c&&(u=c.slice(c.indexOf(" ")+1,c.indexOf("!")))}catch{}return u}},{RESOURCE_TYPES:Ic}=G,Ec={PAGE:"page",FORM:"form"},Ac={[Ic.CASE]:[Ke,ze,Ye],[Ic.PAGE]:[Ge,He],[Ic.DATA]:[We]},_c=(c,l,u={})=>{if(!c)return{};const d={etag:c.etag},{RemoteSystemID:p}=u;return c[G.REMOTE_SYSTEM_ID]||c[G.REMOTE_SYSTEM_ID.toLowerCase()]||p?d.RemoteSystemID=c[G.REMOTE_SYSTEM_ID]||c[G.REMOTE_SYSTEM_ID.toLowerCase()]||p:l&&q.isRemoteCase(l)&&(d.RemoteSystemID=q.getRemoteHeader(l)),d},Cc=(c,l={})=>{const{onlyChangedData:u=!1,nonEmptyAndChangedData:d=!1,skipUUID:p=!0,isTransientContext:h=!1,includeDisabledFields:g=!1}=l;let f={};f=el(c,{isTransientContext:h,includeDisabledFields:g}),u&&(delete f?.caseInfo?.content,h&&(f={}));const m=hl(c,!1);!h&&d&&((c,l)=>{Object.entries(c?.caseInfo?.content).forEach((([u,d])=>{const p=$p(l),h=M()(p,G.CASE_INFO.CASE_INFO_CLASSID),g=gp(u,h);("True-False"===g?.type&&!d||""===d)&&delete c.caseInfo.content[u]}))})(f,c);const y=j()(m,f);let I={},E=!1;({content:I,attachmentsExist:E}=((c,l)=>{let u={},d=!1;return(c||l?.caseInfo)&&(u=c?{...l}:{...l?.caseInfo},l?.caseInfo?.attachments&&(d=!0)),{content:u,attachmentsExist:d}})(h,y));const A=[...Cr(c)];return p&&A.forEach((c=>{delete c.content?.EmbedListUUID__})),I.pageInstructions=A,(mr[c]||[]).forEach((c=>{if(I?.content){const l=c?.replace(W.CASE_INFO.CASE_INFO_CONTENT,"");eh.deleteIn(I.content,(c=>{if(!c)return"";const l=c.split(".");let u,d="";for(u of l)if(u){if(u.includes("[")&&u.includes("]"))return d+=`['${u.substring(0,u.lastIndexOf("["))}']`,d;d+=`['${u}']`}return d})(l))}})),!h&&y?.dataInfo?(I={...y.dataInfo,pageInstructions:I.pageInstructions},{content:I}):{content:I,attachmentsExist:E}},Sc=(c,l)=>{let u,d,p={};const h=eh.getIn(c,W.UI_RESOURCES),g=eh.getIn(c,"confirmationNote");h?(u=eh.getIn(c,W.UI_RESOURCES_CONTEXT_DATA),d=eh.getIn(c,W.ROOT),p=eh.getIn(c,W.ACTION_BUTTONS)):g&&(d={});const{data:f={},Errors:m,semanticURL:y,key:I,flowName:E}=c,A=eh.getIn(c,"nextAssignmentInfo",null),_=eh.getIn(c,"nextAssignmentInfo.context",""),C=eh.getIn(c,"confirmationLinks",null),{isInCreateStage:S,openCaseViewAfterCreate:T,debugInfo:N}=l;return{data:{...f,key:I,flowName:E,coreHeaders:N&&{debugInfo:{[W.COREHEADER_APP_DEBUG_ID]:N.debugId}},caseInfo:{...f.caseInfo,actionButtons:p,headers:l.headers},[W.CONTEXT_DATA]:S?{...f[W.CONTEXT_DATA],...u,openCaseViewAfterCreate:T,errors:m}:{...f[W.CONTEXT_DATA],...u,errors:m}},semanticURL:y,nextAssignmentInfo:A,assignmentContext:_,confirmationLinks:C,key:I,root:d,...l}},Tc=async(c,l,u,d=!1,p=!1)=>{const h=eh.getIn(c,W.LOCALE_REFERENCES);await zd.loadLocaleResources(h);const g=eh.getIn(c,W.COMPONENTS);if(g)try{await Gr(g)}catch(c){console.error(c)}const f={actionConfig:l,...u};d?dg({...c,options:f,directUrlUpdation:!0}):Fr(c,f,p)},Nc=(c="")=>{const l=c.indexOf(" "),u=c.indexOf("!");return c.substring(l+1,u)},Pc=c=>{if(c){const[,l]=c.split("!");return{key:Nc(c),flowName:l}}return{}},bc=c=>{const{payload:l}=c,{err:u,context:d,actionMgrID:p}=l,h=u&&u.response?u.response.data:"",g=nl(d);return p&&gn.rejectActionByID(p),Vh(kh,"Error action triggered",h,d,g)},Dc=(c,l)=>sd(c)&&od(c)?Vh(Lh,l):Vh(Ih,l),Rc=(c,l,u=W.APP.APP,d={})=>{let p=null;const{buildNew:h=!0}=d;return sd(c)?p=od(c)?zu(c):X(l,u):ad(c)&&(od(c)&&!h?p=Qu(c):od(c)&&!h||(p=X(l,u))),p},Oc=c=>c&&c.type===be,vc=c=>{let l=!1;const u=nd(c);for(let d=0;d<u.length;d+=1){const c=u[d];if(c&&Il(c)){l=!0;break}}return l},xc=(c,l={})=>{let u=!1,d=!1,p={},h=!0,g=!1,f=!1;const{showConfirmDialogForMaxDocumentLimitReached:m=!1,dirtyMessage:y,skipChildDirtyState:I=!1}=l;if(sd(c)){const l=zu(c);if(!l)return{continueExecution:h,removeActionPayload:p};const d=Ju(l);Il(d)&&(u=!0),I||u||(u=vc(l))}else if(ad(c)&&ld(c)){let l=pd(c);l||(l=zu(c),d=!0),p.containerItemID=l,p.context=Ju(l)}if(u){const c=y||dl;g=window.confirm(zd.getLocaleValue(c,"Messages"))}if(!g&&u&&(p={},h=!1),d){const c=zd.getLocaleValue(pl,"Messages");m?f=window.confirm(c):(window.alert(c),h=!1)}return!f&&d&&(p={},h=!1),{continueExecution:h,removeActionPayload:p}},wc=(c,l)=>{let u=!1;const d=Hd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT),{insKey:p,isParallelCall:h,skipFlowNameCheck:g}=l;if(!p)return{};const[,f]=p.split("!")||"",m=g?p:Nc(p),y=Gu(c,m);let I={},E=!1;if(y&&!d&&(u=!0,I=Fu(c,y),!g)){let c=I?.flowName;const l=Jr(y),d=ed(y);if(d.length){const u=Ct(l,d[0]);c=Fu(u,d[0])?.flowName}else u=c===f;(c!==f||h)&&(E=!0)}return{activate:u,activateContainerActionPayload:{target:c,isParallelAssignment:E,containerItemID:y,semanticURL:I.semanticURL,insKey:p}}},Mc=(c,l,u)=>c===Ic.PAGE?((c,l={})=>{let u=!1;const{semanticURL:d}=l,p=Gu(c,d);return p&&(u=!0),{activate:u,activateContainerActionPayload:{target:c,containerItemID:p,semanticURL:d}}})(l,u):c===Ic.ASSIGNMENT?wc(l,u):c===Ic.CASE?wc(l,{...u,skipFlowNameCheck:!0}):{},Lc=(c=[])=>{od(`${W.APP.APP}/${W.PREVIEW}`)&&c.push(Vh(yh,ud({context:G.APP.APP,name:W.PREVIEW})))},Uc=c=>{let l;for(const u of Object.keys(Ac))if(Ac[u].includes(c)){l=u;break}return l},Fc=(c,l)=>{const{data:u={},context:d,caseViewMode:p}=c,h={data:{...u},caseViewMode:p,context:K(d)};eh.deleteIn(h.data,"shared"),eh.setIn(h.data,["context_data","caseViewMode"],p),l.push({type:lt,payload:{context:h.context}}),l.push(Vh(uh,h))},jc=c=>{if(Array.isArray(c)&&c.length>0){const l=(c=>{const l=c[0];for(const u of c)if("other"===u?.payload?.nextAssignmentInfo?.context||"remote"===u?.payload?.nextAssignmentInfo?.context)return u;return l})(c),u=eh.getIn(l,["payload","assignmentContext"]);if("other"===u||"remote"===u){const d=eh.getIn(l,["payload","nextAssignmentInfo","ID"]);if(l?.payload?.isProcessAction){const u={acName:eh.getIn(l,["payload","target"]),caseID:l.payload.data.caseInfo.ID,containerItemID:eh.getIn(l,["payload","context"]),context:eh.getIn(l,["payload","context"])},d={type:Ie,payload:{...u}};c.push(d),c=c.filter((c=>delete c?.payload?.data?.caseMessages)),kp(c),c=c.filter((c=>c.type!==Ie))}const p=((c,l,u)=>({assignmentID:c,vcName:W.PRIMARY,targetContainerName:eh.getIn(l,["payload","target"]),context:eh.getIn(l,["payload","context"]),..."other"===u&&{isChild:!0},isProcessAction:l?.payload?.isProcessAction,..."remote"===u&&{isRemote:!0},..."remote"===u&&{remoteClassName:l.payload.nextAssignmentInfo.className}}))(d,l,u);sd(p.targetContainerName)||l?.payload?.containerName!==W.WORKAREA||(p.isMultiDoc=!0,c=[]);const h={type:Ee,payload:{...p}};c.push(h),kp(c)}else kp(c)}},Vc=(c,l)=>j()(c,l,(function(c,l){if(Array.isArray(c))return c.concat(l)})),kc=c=>{let l={},u=vd(c);for(;u;){const c=Cc(u);l=Vc(c.content,l),u=vd(u)}return l};class Jc{static getChanges(c){return{...hl(c)}}static getSubmitData(c,l){const{isTransientContext:u=!1,includeDisabledFields:d=!1}=l||{},{content:p}=Cc(c,{isTransientContext:u,includeDisabledFields:d});return p}static isStateModified(c){return Il(c)||Or(c)||!(!c||!fl(c))}static isFormValid(c,l){return tl(c,l)}static clearChangedProperties(c){return Tr(c),_r(c),El(c)}static getEditableFields(c){return rl(c)}static setCustomValidator(c,l){Lr.register(c,l)}static isPropertyEditable(c,l){return Jc.getEditableFields(c).some((c=>c.name===l))}}const $c=Jc,Bc=new class{constructor(){this.states={},this.unConnectedStates={}}getStateMachine(c,l,u){return this.states?.[c]?.[`${l}${u}`]||this.unConnectedStates?.[c]?.[`${l}${u}`]}isStateMachineExist(c,l,u){return!!this.states?.[c]?.[`${l}${u}`]||!!this.unConnectedStates?.[c]?.[`${l}${u}`]}getUnConnectedStateMachines(c){return this.unConnectedStates?.[c]}getAllStateMachines(c,l,u){return{states:this.states?.[c]?.[`${l}${u}`],unConnectedStates:this.unConnectedStates?.[c]?.[`${l}${u}`]}}getAllStateMachinesByContext(c){return{states:this.states?.[c],unConnectedStates:this.unConnectedStates?.[c]}}setStateMachine(c,l,u,d){const p=`${u}${l}`,{stateMachine:h}=this.getStateMachineObjByPath(p,c,!0),g=(l,u,d=!1)=>{const p=d?this.states:this.unConnectedStates;p[c]||(p[c]={}),p[c][l]||(p[c][l]={}),p[c][l]=u};if(h&&h.targetPageReference!==d.targetPageReference)return h.addChild(d),void g(p,d);const f=Object.entries(this.states[c]||{}).filter((([c])=>{if(c.includes(p)){const l=c.substring(0,p.length).length;return c.substring(l).startsWith("[")||c.substring(l).startsWith(".")}return!1})).reduce(((c,[l,u])=>({...c,[l]:u})),{});Object.keys(f)?.length?(Object.entries(f).forEach((([l,u])=>{delete this.states[c][l],d.addChild(u),g(l,u)})),this.states[c][p]=d):g(p,d,!0)}buildPageInstructionsByContext(c,l){const u=this.getStateMachinesByContext(c)||{},d=[];return Object.keys(u).sort().forEach((p=>{const h=Rn.getContextReferences(c)?.get(p),g=u[p];if(h){const c=g.buildSubmitPageInstructions(l);d.push(...c)}})),d}buildClientChangeList(c){const l=this.getStateMachinesByContext(c)||{};let u={};const d={};return Object.keys(l).forEach((c=>{const d=l[c].getChangeList();u={...u,...d}})),eh.flatten(u,"",d),d}getStateMachinesByContext(c){return c?this.states?.[c]:void 0}clearStateMachines(c){this.states[c]={},this.unConnectedStates[c]={}}setStateMachineEmpty(c,l){const u=this.getStateMachine(c,l,"");u.root=null,u.current=null;const d=this.getUnConnectedStateMachines(c)||{};Object.keys(d).forEach((c=>{c.includes(l)&&delete d[c]}))}removeStateMachine(c,l){delete this.states[c]?.[l]}getStateMachineObjByPath(c,l,u){const d=/\[\d+\]$/gm;let p=null;for(;c&&!this.isStateMachineExist(l,"",c);)p=null,u&&c.endsWith("]")?(p=c.match(d),p=p?.[p.length-1]?.substring(1,p[p.length-1].length-1),[c]=c.split(d)):c=c.substring(0,c.lastIndexOf("."));return c?{stateMachineTarget:c,stateMachine:this.getStateMachine(l,"",c),index:p}:{}}executeStateMachine(c,l,u,d=!0,p={}){const{stateMachineTarget:h,index:g}=this.getStateMachineObjByPath(l,c,d);if(!h)return!1;let[,f]=l.split(h);if(!f)return!1;null!==g&&([,f]=f.split(/^\[\d+\]/gm));const m={[Wc(f)]:u},y=this.getStateMachine(c,"",h);return null!==g?y.update(m,Number(g)+1,p.skipStateUpdate??!0,p):y.updatePage(eh.unflatten(m)),!0}registerForServerChanges(){Lp.registerForListChanges(((c,l,u)=>{setTimeout((()=>{!l.includes(".classID")&&$c.isPropertyEditable(c,l)&&this.executeStateMachine(c,l,u)}),0)}))}unRegisterForServerChanges(){Lp.unRegisterForListChanges()}},Gc={},Wc=c=>c.startsWith(".")?c.substring(1):c,Hc=c=>{delete Gc[c]},qc=(c,l={})=>{const{includeDisabledFields:u=!1}=l,d=sh.resolveContextTreeNodeProps(c),p=!0!==d.readOnly&&!1!==d.visibility&&(u||!0!==d.disabled),h="string"==typeof c?.value&&c?.value.includes("@FILTERED_LIST"),g=(c=>c.selectionList||c.selectionKey||"Editable"===c.renderMode&&c.referenceList)(c);return(c?.value||g)&&!h&&p},zc=(c,l,u,d,p)=>{let h=(Wp(`.attachmentsList.${l?.replace(".","")}`,"context_data",u)||[]).filter((c=>`${d.pageReference}.${c.label}`===p));return h=eh.buildAttachmentsFormData(h),h.length>0&&(c=[...c,...h]),c},Yc=(c,l,u,d,p)=>(Bc.executeStateMachine(c,d,sh.getLitePropertyValue(u,l))||p.push(d),p),Kc=c=>{const l=c.pageReference?.replace(G.CASE_INFO.CASE_INFO_CONTENT,"")?.replace(G.DATA_INFO.DATA_INFO_CONTENT,"");return"Attachment"===c.componentName&&""!==l},Xc=(c,l,u)=>{const d=l.isInsideList,{ignoreFieldsInsideList:p=!0}=u;return(!d||d&&!p)&&!Array.isArray(sh.getLitePropertyValue(l,c))&&"Address"!==l.componentName},Qc=(c,l={})=>{let u=[],d=[];const p=[],h=Rn.getContextReferences(c);if(!h)return{formInputs:u,attachments:d,formPageFields:p};if(({attachmentList:d,editableFormFieldsReferenceList:u}=((c,l,u)=>{const{includeDisabledFields:d=!1}=u;let p=[],h=[];for(const[g,f]of c){const c=sh.resolveContextTreeNodeProps(f.props),m=c.propertyName;if(qc(f.props,{includeDisabledFields:d})){const d=Kc(c);"Attachment"!==c.componentName||d?!d&&Xc(g,c,u)&&(p=Yc(l,m,c,g,p)):h=zc(h,m,l,c,g)}}return{attachmentList:h,editableFormFieldsReferenceList:p}})(h,c,l)),Gc[c])for(const g in Gc[c].fieldOrder)Object.hasOwn(Gc[c].fieldOrder,g)&&p.push(g);return{formInputs:u,attachments:d,formPageFields:p}},Zc=c=>{let l=[];const u=Rn.getContextReferences(c);if(u)for(const[d,p]of u){const c=p?.props;if(qc(c)&&"Attachment"===c?.componentName){const u="true"===c?.allowMultiple;l=[...l,{type:"File",allowMultiple:u,fullPath:d}]}}return l},el=(c,l={})=>{const u={},d=$p(c),{ignoreFieldsInsideList:p=!0,isTransientContext:h=!1,includeDisabledFields:g=!1}=l;if(h||d?.caseInfo?.content){const{formInputs:l,attachments:f,formPageFields:m}=Qc(c,{ignoreFieldsInsideList:p,includeDisabledFields:g});f&&f.length>0&&eh.buildObject("caseInfo.attachments",u,f),((c,l,u)=>{c.forEach((c=>{let d=eh.getIn(l,c);"object"==typeof d&&(d=eh.deepClone(d),delete d?.classID),eh.buildObject(c,u,d)}))})(m,d,u),l&&l.length>0?l.forEach((c=>{eh.buildObject(c,u,eh.getIn(d,c))})):h||eh.buildObject(G.CASE_INFO.CASE_INFO_CONTENT,u,{})}if(!h&&d?.dataInfo?.content){const{formInputs:l}=Qc(c,{ignoreFieldsInsideList:p});l.forEach((c=>{eh.buildObject(c,u,eh.getIn(d,c))}))}return u},tl=(c,l)=>{const u=Rn.getContextReferences(c);let d=!0;if(!u)return d;for(const[p,h]of u){const c=sh.resolveContextTreeNodeProps(h.props);if(qc(h.props)&&(!l||p.includes(l))){const l=Lr.validate(c.componentName?.toLowerCase(),c.propertyName,sh.getLitePropertyValue(c,c.propertyName),c);d&&(d=!l.message)}}return d},nl=(c,l=!1)=>{const u=Rn.getContextReferences(c),d=[];if(u)for(const[p,h]of u)if(!1!==sh.resolveContextTreeNodeProps(h.props).visibility){const c=8,u=l?p:p.substring(p.indexOf("content")+c);d.push(u)}return d},rl=c=>{const l=[],u=Rn.getContextReferences(c);if(u)for(const[d,p]of u){const c=sh.resolveContextTreeNodeProps(p.props);qc(p.props)&&"Attachment"!==c.componentName&&"multirecordlist"!==c.type&&l.push({name:d,label:c.label,type:c.componentName?.toLowerCase()})}return l},sl=class{static getPropertyName(c){return rn.getPropertyName(c)}static isProperty(c){return rn.isProperty(c)}static getLeafPropertyName(c){return rn.getLeafPropertyName(c)}static isPropertyInternal(c){return c.startsWith("px")||c.startsWith("pz")}},al=class{static isPageInstruction(c){return c&&c.includes("[")&&c.includes("]")}};class ml{constructor(){this.refreshMap={},this.propChangeRefreshMap={}}static initializeRefreshCache(c,l,u,d,p){void 0===c[l]&&(c[l]={}),c[l][u]=[{uniqueHash:d,callback:p}]}registerForRefresh(c,l,u,d,p){const h=d.split("/").join(W.HASH_DELIMITER),g=eh.getHashedString(h);"PROP_CHANGE"===c?this.propChangeRefreshMap?.[p]?.[u]?this.propChangeRefreshMap[p][u].some((c=>c.uniqueHash===g))||this.propChangeRefreshMap[p][u].push({uniqueHash:g,callback:l}):ml.initializeRefreshCache(this.propChangeRefreshMap,p,u,g,l):this.refreshMap?.[p]?.[`${c}-${u}`]?this.refreshMap[p][`${c}-${u}`].some((c=>c.uniqueHash===g))||this.refreshMap[p][`${c}-${u}`].push({uniqueHash:g,callback:l}):ml.initializeRefreshCache(this.refreshMap,p,`${c}-${u}`,g,l)}triggerRefreshForType(c,l,u){"PROP_CHANGE"===c?this.propChangeRefreshMap?.[u]?.[l]&&this.propChangeRefreshMap[u][l].forEach((c=>c.callback())):this.refreshMap?.[u]?.[`${c}-${l}`]&&this.refreshMap[u][`${c}-${l}`].forEach((c=>c.callback()))}deRegisterForRefresh(c){delete this.propChangeRefreshMap[c],delete this.refreshMap[c]}}const ol=new ml,{APP:il}=W;let cl={},ll={},ul={};const dl="You will lose unsaved changes. Do you want to continue?",pl="You have reached maximum limit of pending changes. Please commit/cancel one or more changes to continue.",hl=(c=il.APP,l,u)=>{let d=[],p=[];l||(d=nl(c,!0)),u||(p=(c=>{const l=Rn.getContextReferences(c),u=[];if(l)for(const[d,p]of l)!0===sh.resolveContextTreeNodeProps(p.props).readOnly&&u.push(d);return u})(c));const h={};((c,l)=>{const u=ll[l]||{};Object.keys(u).forEach((l=>{Object.hasOwn(u,l)&&eh.buildObject(l,c,u[l].value)}))})(h,c);const g=cl[c]||{};return Object.keys(g).forEach((c=>{const u=!l&&d.includes(c)||l;Object.prototype.hasOwnProperty.call(g,c)&&u&&!p.includes(c)&&eh.buildObject(c,h,g[c].value)})),h},gl=c=>{const{context:l}=c,u=c.reference.startsWith(".")?c.reference.substr(1):c.reference;delete cl[l]?.[u],delete ll[l]?.[u]},fl=c=>ul[c],yl=(c,l)=>{const{context:u,initialValue:d="",isStrictTracking:p}=l,h=l.reference.startsWith(".")?l.reference.substr(1):l.reference;c[h]?c[h].previousValue=Wp(l.reference,null,u):(c[h]={initialValue:d||Wp(l.reference,null,u)},c[h].previousValue=c[h].initialValue),c[h].value=l.value,p&&c[h].value===c[h].initialValue&&gl(l)},Il=c=>{const l=Sr(c)||{};return c&&cl[c]&&Object.keys(cl[c]).some((l=>cl[c][l].initialValue!==cl[c][l].value))||Object.keys(l).length>0},El=c=>{c&&cl[c]?(cl[c]={},ll[c]={}):"all"===c&&(cl={},ll={},ul={}),ul[c]&&(ul[c]=!1)},Al=()=>c=>l=>{const{type:u,payload:d={}}=l||{};if(u===ae&&(Jt(d),(c=>{const{context:l,pageReference:u,value:d,reference:p}=c;Lp.triggerCascade(l,p,d);const h=en.getDependencies(l,p),g=Lp.getResetDependencies(l,p),f={context:l,datapages:{}};[...h,...g].forEach((c=>{const u=eh.getPropertyNameFromDependency(c);if("multiRecord"===c.mode){const c=u.split("."),d=`.${c.pop()}`,p=c.join(".");Bc.getStateMachine(l,p,d).deleteAll()}else al.isPageInstruction(u)&&Bc.executeStateMachine(l,u,""),kp({type:re,payload:{reference:u,value:"",context:l,isArrayDeepMerge:!0,isImplicit:!0}})})),h.forEach((d=>{let p=u;d.startsWith(u)||(p="");const h=d.replace(`${p}`,"").split(".").filter((c=>!!c));h.pop();const g=h.join("."),m=Wp(`.${g}`,p,l)?.classID||c.classID,y=gp(d.split(".").pop(),m),{datasource:I}=y,E={};let A=[];I.parameters.forEach((c=>{c?.value?(E[c.name]=sl.isProperty(c.value)?Wp(`.${eh.getFullPropertyReference([g,eh.getPropertyName(c.value)])}`,p,l):c.value,void 0===E[c.name]||null===E[c.name]||""===E[c.name]?(E[c.name]="",A.push(W.NULL_STRING)):A.push(E[c.name])):(E[c.name]="",A.push(W.NULL_STRING))})),A=I.name.concat(W.UNDERSCORE_STRING,eh.getHashedString(A.join(W.HASH_DELIMITER)));const{name:_}=I,C=Cp(_);f.datapages[A]={mode:I.mode,propertyName:d,name:I.name,dataViewParameters:E,refreshStrategy:C?.refreshStrategy}})),h.length&&kp({type:at,payload:f})})(d),(((c,l)=>{if(!c||!l)return!1;const u=cl[c]&&cl[c][l];return!!u&&u.previousValue!==u.value})(d.context,d.reference)||Or(d.context))&&Wn(d),ol.triggerRefreshForType("PROP_CHANGE",d.reference,d.context)),u===ct){const{context:c,referenceList:l}=d;Wn({context:c,pageReference:l})}if(u===re||u===se){const{reference:c,isImplicit:u,context:p,skipDirtyValidation:h=!1}=d;Rn.updateFieldNodeValue(p,c,d.value),al.isPageInstruction(c)||h?h||(ul[`${p}`]=!0):(c=>{const{payload:l}=c,{context:u}=l,d=l.reference.startsWith(".")?l.reference.substr(1):l.reference;Rn.isFieldExists(u,d)||(ll[u]=ll[u]||{},yl(ll[u],l)),cl[u]=cl[u]||{},yl(cl[u],l)})(l),(d.removePropertyFromChangedList||u)&&gl(d)}if(u===we||u===Me){const{transientItemID:c,data:l}=d;eh.iterateLeafNodes(l,(l=>{gl({context:c,value:"",reference:l.join(".")})}))}u&&[Fe,De,Ve,xe].includes(u)&&(El(d.context),Lp.purgeResetDependencies(d.context),(c=>{c&&Vn[c]&&delete Vn[c]})(d.context),(d.childContainersContexts||[]).forEach((c=>{El(c)})),(d.transientItems||[]).forEach((c=>{El(c)}))),c(l)},_l=new class{getCoreheaders(c){const l=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${W.PRIMARY}`,u=zu(l),d=Ju(u),p=sh.getProperty(W.COREHEADERS,"",d);if(p&&c in p)return p[c]}},Cl=class{constructor(c){this.c11nEnv=c}validate(c,l){const{value:u}=this.c11nEnv.getStateProps();if(!l&&!(l=u)){const c=this.c11nEnv.getComponentConfig(),u=this.c11nEnv.getStateProps();l="multi"===c.selectionMode?u.selectionList:"Editable"===c.renderMode?u.referenceList:"single"===c.selectionMode?u.selectionKey:u.value}const d=((c,l,u)=>{const d=""===l&&u?.startsWith(".")?u.substring(1,u.length):u,p=Rn.getContextReferences(c)?.get(`${l}${d}`)?.props;return p?sh.resolveContextTreeNodeProps(p):p})(this.c11nEnv.getContextName(),this.c11nEnv.getPageReference(),l),{message:p}=Lr.validate(this.c11nEnv.getComponentName()?.toLowerCase(),l,c,d);return p?{status:!1,message:p}:{status:!0}}},Sl="OPEN_PROCESS_ACTION",Tl="OPEN_ASSIGNMENT",Nl="DELETE_CASE_IN_CREATE_STAGE",Pl="SAVE_AND_CLOSE",bl=c=>({type:Pl,payload:c}),Dl=class{static getSavableDataPage(c){return Rp(c)}static getLookUpDataPage(c){return vp(c)}static getLookUpDataPageInfo(c){return xp(c)}static getDataPageKeys(c){return Op(c)}},Rl=class{constructor(c){this.c11nEnv=c}containerManagerPromise=c=>{const l=gn.getNextActionMgrId();let u,d;const p=new Promise(((c,l)=>{u=c,d=l}));if(!u||!d)throw new Error("resolveFn or rejectFn is not defined.");return gn.register(l,p,u,d,c),{actionMgrID:l,promise:p}};initializeContainers(c){const l=Ne,u=this.c11nEnv,d={context:u.getContextName(),name:u.getContainerName(),type:W.CONTAINER_TYPE.SINGLE},{actionMgrID:p,promise:h}=this.containerManagerPromise(l),g={...d,...c,actionMgrID:p};return kp(mh(g)),h}addContainerItem(c){const l=be,u=this.c11nEnv,d=u.getMetadata(),{children:p}=d||{};let h;p&&([h]=p);const g=u.getContextName(),f=u.getContainerName(),m=X(f,g,c?.containerType===W.CONTAINER_TYPE.SINGLE),y=Ct(f,g),I={root:{...h,config:{...h?.config,context:h?.config?.context||u.getPageReference?.()}},containerItemID:m,context:m,target:y,containerName:f};c=JSON.parse(JSON.stringify(c)),[W.WORKAREA].includes(f)&&delete c.data?.coreHeaders;const{actionMgrID:E,promise:A}=this.containerManagerPromise(l),_={...I,...c,actionMgrID:E};return kp(Ih(_)),A}updateContainerItem(c){if(!c?.containerItemID)return Promise.reject(new Error("updateContainerItem : containerItemID is required in containerInfo object"));const l=Fe,u={context:Ju(c.containerItemID),target:hd(c.containerItemID)},{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return kp(Nh(h)),p}activateContainerItem(c){if(!c?.containerItemID)return Promise.reject(new Error("activateContainerItem : containerItemID is required in containerInfo object"));const l=Ue,u={target:hd(c.containerItemID)},{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return kp(Oh(h)),p}removeContainerItem(c){if(!c?.containerItemID)return Promise.reject(new Error("removeContainerItem : containerItemID is required in containerInfo object"));const l=De,u={context:Ju(c.containerItemID),target:hd(c.containerItemID)},{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return kp(xh(h)),p}resetContainers(c){if(!c?.context||!c?.name)return Promise.reject(new Error("resetContainers : context and name are required in containerInfo object"));const l=Pe,u=ud(c),{actionMgrID:d,promise:p}=this.containerManagerPromise(l),h={...u,...c,actionMgrID:d};return kp(yh(h)),p}addTransientItem(c){const{id:l,data:u}=c,d=this.c11nEnv.getContextName(),p=Q(l,d),h=Id(d);return p&&h.includes(p)||kp(Eh({transientItemID:p,contextName:d,target:hd(d),data:u})),p}updateTransientData(c){const{transientItemID:l,data:u}=c,d=this.c11nEnv.getContextName();if(l){if(!Id(d).includes(l))return;kp(Ah({transientItemID:l,data:u}))}}removeTransientItem(c){const l=this.c11nEnv.getContextName(),{target:u=this.c11nEnv.getTarget(),containerItemID:d,transientItemID:p}=c;if(p&&d){if(!Id(l).includes(p))return;kp(Mh({target:u,containerItemID:d,transientItemID:p}))}}createContainerPConnect(c,l,u,d=!1){vu.createContainerPConnect(c,l,u,d)}hasContainerItems(){const c=this.c11nEnv.getContextName(),l=this.c11nEnv.getContainerName();return od(`${c}/${l}`)}isContainerInitialized(){const c=this.c11nEnv.getContextName(),l=this.c11nEnv.getContainerName();return Wu(c,l)}};var Ol=function(c,l){return c===l||"function"==typeof l&&c===l.toString()};function vl(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u,d=c.length;return u=1===d?function(l){return Ol(l.type,c[0])}:function(l){for(var u=0;u<d;u++)if(Ol(l.type,c[u]))return!0;return!1},wi((function(c,l){var d=0;c.subscribe(Mi(l,(function(c){return u.call(undefined,c,d++)&&l.next(c)})))}))}function xl(c,l){return wi((function(u,d){var p=null,h=0,g=!1,f=function(){return g&&!p&&d.complete()};u.subscribe(Mi(d,(function(u){null==p||p.unsubscribe();var g=0,m=h++;Oi(c(u,m)).subscribe(p=Mi(d,(function(c){return d.next(l?l(u,c,m,g++):c)}),(function(){p=null,f()})))}),(function(){g=!0,f()})))}))}function wl(c,l){return wi((function(u,d){var p=0;u.subscribe(Mi(d,(function(u){d.next(c.call(l,u,p++))})))}))}function Ml(c,l,u){return void 0===u&&(u=1/0),Ho(l)?Ml((function(u,d){return wl((function(c,p){return l(u,c,d,p)}))(Oi(c(u,d)))}),u):("number"==typeof l&&(u=l),wi((function(l,d){return function(c,l,u,d){var p=[],h=0,g=0,f=!1,m=function(){!f||p.length||h||l.complete()},y=function(c){return h<d?I(c):p.push(c)},I=function(c){h++;var f=!1;Oi(u(c,g++)).subscribe(Mi(l,(function(c){l.next(c)}),(function(){f=!0}),void 0,(function(){if(f)try{h--;for(var c=function(){var c=p.shift();I(c)};p.length&&h<d;)c();m()}catch(c){l.error(c)}})))};return c.subscribe(Mi(l,y,(function(){f=!0,m()}))),function(){}}(l,d,c,u)})))}function Ll(c){return c&&Ho(c.schedule)}function Ul(c){return c[c.length-1]}function Fl(c){return Ll(Ul(c))?c.pop():void 0}function jl(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return Vi(c,Fl(c))}function Vl(c){return wi((function(l,u){var d,p=null,h=!1;p=l.subscribe(Mi(u,void 0,void 0,(function(g){d=Oi(c(g,Vl(c)(l))),p?(p.unsubscribe(),p=null,d.subscribe(u)):h=!0}))),h&&(p.unsubscribe(),p=null,d.subscribe(u))}))}var kl=new _i((function(c){return c.complete()}));function $l(c){return c?function(c){return new _i((function(l){return c.schedule((function(){return l.complete()}))}))}(c):kl}const Bl=(c,l,u)=>Vl((d=>("ERR_CANCELED"!==d?.code&&console.error(c,d),jl(kh(c,d,l,null,u))))),Gl=(c,l)=>u=>new _i((d=>{let p={},h=0;return u.pipe(Ml((u=>{const d=Date.now();let g;return g=l||A(),g&&g(u,p)&&d-h<c?$l():(p=u,h=d,jl(u))}))).subscribe(d)})),Wl=new class{constructor(){this.components={}}_checkComponent(c,l){return!!this.components[l]?.[c]}start(c,l,u,d,p){const h={viewName:c,pageReference:u,contextName:d,isInProgress:!0,active:!0,caseKey:l};this.components[d]=this.components[d]||{},this.components[d][p]=h}stop(c,l){this._checkComponent(c,l)&&(this.components[l][c].isInProgress=!1)}remove(c,l){this._checkComponent(c,l)&&delete this.components[l][c]}removeContext(c){delete this.components[c]}enableCascade(c){this.components[c]&&Object.values(this.components[c]).forEach((c=>{c.isInProgress&&(c.cascade=!0)}))}activate(c,l){this._checkComponent(c,l)&&(this.components[l][c].active=!0)}deactivate(c,l){this._checkComponent(c,l)&&(this.components[l][c].active=!1)}refreshActiveComponents(c){c&&this.components[c]&&Object.keys(this.components[c]).forEach((l=>{this.refreshComponent(l,c)}))}refreshComponent(c,l){if(!this._checkComponent(c,l))return;const u=this.components[l][c];if(u.active&&u.cascade){const{caseKey:c,viewName:d,pageReference:p}=u;kn(c,d,l,p,{})}}},Hl="postDataViewMetadata",ql={getData:(c,l,u,d)=>((c,l,u,d={})=>{const p={dataViewName:c},{skipClearErrorMessages:h,signal:g,doNotMergeMessagesForStatusCode:f}=d,{restApi:m,reqType:y}=sg("getListData",p);return ic(m,{method:y,body:l,...g&&{signal:g},...h&&{skipClearErrorMessages:h}},u,f)})(c,l,u,d),getListCount:(c,l,u)=>{const d={dataViewName:c},{restApi:p,reqType:h}=sg("getListDataCount",d);return ic(p,{method:h,body:l},u)},getDataViewMetadata:(c,l,u,d)=>{const p=!!u,h=!!d,g=Gd.doesRestApiExist(Hl),f=(p||h)&&g?Hl:"getDataViewMetadata",m={dataViewName:c},{restApi:y,reqType:I}=sg(f,m);if(g){if(p)return ic(y,{method:I,body:{associationFilter:u}},l);if(h)return ic(y,{method:I,body:{propertyFilter:d}},l)}return ic(y,{method:I},l)},getDataObjectView:(c,l,u,d,p={})=>{const{skipClearErrorMessages:h,signal:g,doNotMergeMessagesForStatusCode:f}=p,m={data_view_ID:c,view_ID:l},y={dataViewParameters:u},{restApi:I,reqType:E}=sg("readDataObject",m);return ic(I,{method:E,body:y,...g&&{signal:g},...h&&{skipClearErrorMessages:h}},d,f)},getCaseEditMetadata:(c,l)=>yc.getCaseEditMetadata(c,l),getCaseEditLock:(c,l)=>yc.getCaseEditLock(c,l),updateCaseEditFieldsData:(c,l,u,d)=>yc.updateCaseEditFieldsData(c,l,u,d),moveListRecords:(c,l)=>{const{sourceID:u,destinationID:d,context:p,listClass:h,viewName:g,viewClassName:f}=c,m={viewName:g,viewClassName:f},{restApi:y,reqType:I}=sg("moveListRecords",m);return ic(y,{method:I,body:{content:{sourceID:u,destinationID:d,context:p,listClass:h}}},l)},isTimeElapsed:(c,l,u="")=>{if(l){if(c&&u===W.RELOAD_IF_OLDER_THAN)return new Date(c).setSeconds(l)<Date.now();if(c&&u===W.RELOAD_ONCE_PER_INTERACTION)return!0}return!0},getAppCacheKey:c=>void 0!==td("root").find((c=>c.includes("authoring-preview")))?`${W.AUTHORING_PREVIEW_CONTAINER}-${c}`:`${Vr.getAppAlias()}-${c}`,isDistinctResultsOnly:c=>{const l=Hd.getKeyMapping("pyGUID");return!c.some((c=>c.field===l))}},zl=class{constructor(c,l,u){this.filter=c,this.messageHandler=l,this.contextName=u}},Yl=class{constructor(){this.users={},this.connected=!1,this.connectionsCount=1}_handleUserPresence({message:c}){const{state:l,updateById:u}=c,d=this.users[u];d&&(d.state=l,Object.keys(d.subscribers).forEach((c=>{d.subscribers[c]?.callback({state:d.state})})))}_getAutoGenId(){return this.connectionsCount+=1,`${Date.now()}_${this.connectionsCount}`}subscribe(c,l,u){const d=this._getAutoGenId(),p=this.users[c];if(p)return p.subscribers[d]={callback:l,contextName:u},d;this.users[c]={subscribers:{[d]:{callback:l,contextName:u}}};const h={matcher:"PRESENCE",criteria:{userId:c}};return Zl.subscribe(h,this._handleUserPresence.bind(this)),d}unsubscribe(c,l){const u={matcher:"PRESENCE",unsubscribeUsers:{users:[c]}};this.users[c]&&this.users[c].subscribers&&(delete this.users[c].subscribers[l],0===Object.keys(this.users[c].subscribers).length&&(delete this.users[c],Zl.publishMessage(u)))}getUserState(c){return this.users[c]&&this.users[c].state}clearContext(c){Object.keys(this.users).forEach((l=>{Object.keys(this.users[l].subscribers).forEach((u=>{this.users[l].subscribers[u].contextName===c&&this.unsubscribe(l,u)}))}))}};var Kl=s(924),Xl=s.n(Kl);const Jl=class{constructor(c,l){this.atomicSubscribers={},this.connectionsCount=1,this.connected=!1,this.matcher=c,this.criteria=l}_handleAtomicMessage({message:c}){Object.keys(this.atomicSubscribers).forEach((l=>{const u=this.atomicSubscribers[l],d=Object.keys(u.criteria),p=Object.keys(c);0===Xl()(d,p).length&&u.callback(c)}))}_getAutoGenId(){return this.connectionsCount+=1,`${Date.now()}_${this.connectionsCount}`}subscribe(c,l){if(!this.connected){const c={matcher:this.matcher,criteria:this.criteria};Zl.subscribe(c,this._handleAtomicMessage.bind(this)),this.connected=!0}const u=this._getAutoGenId();return this.atomicSubscribers[u]={criteria:c,callback:l},u}unsubscribe(c){delete this.atomicSubscribers[c]}},Ql=new class{constructor(){this.subscriptions={}}getOrCreateSubscription(c){if(!this.subscriptions[c]){const l={caseId:c};this.subscriptions[c]=new Jl("CASE",l)}return this.subscriptions[c]}};class mu{static subscribers={};static connectionsCount=0;static webSocket=null;static connectionConfig=null;static inProgressSubscriptions=[];static inProgressMessages=[];static isServiceAlive=null;static serviceAliveHandler=null;static userPresence=new Yl;static refreshB2SOffset=10;static initConnection(c){if(!c)return;const{messagingService:l}=c;if(!l||l&&l.length<=6)return;const u=Vr.b2sJWT;if(!u||u.length<4)return;this.webSocket&&(this.cleanSocketListeners(),this.webSocket.close());const d=l.endsWith("/")?l+"ws":l+"/ws";try{const c=new WebSocket(`${d}`);this.webSocket=c,c.addEventListener("open",this.handleOnOpen.bind(this)),c.addEventListener("message",this.handleOnMessage.bind(this)),c.addEventListener("error",this.handleOnError.bind(this)),c.addEventListener("close",this.handleOnClose.bind(this))}catch(c){console.log(c)}}static handleOnError(c){this.getTokenExpiryTime()<=0&&(clearInterval(this.reInitInterval),this.reInitInterval=void 0),console.log("web socket connection error event: ",c)}static handleOnClose(c){null!==this.serviceAliveHandler&&(clearTimeout(this.serviceAliveHandler),this.serviceAliveHandler=null),c&&4001===c.code||this.connectionConfig?.disableReInit||this.reInitInterval||this.getTokenExpiryTime()<=0||this.reInitialization()}static handleOnOpen(){if(clearInterval(this.reInitInterval),this.reInitInterval=void 0,null!==this.webSocket&&1===this.webSocket.readyState){const c=Vr.b2sJWT;if(!c||c.length<4)return;this.publishMessage({token:c})}}static handleOnMessage(c){if(null!==c&&"ALIVE"===c.data)null===this.isServiceAlive&&this.checkLiveliness(8e3),this.isServiceAlive=!0;else{let u=null;try{u=JSON.parse(c.data)}catch(l){console.error("Invalid data received from messaging service",c.data)}if(u&&u.msgId&&this.webSocket.send(`{"ack":"${u.msgId}"}`),u&&u.filter){const{matcher:c,criteria:l}=u.filter;delete l.environmentID,Object.keys(this.subscribers).forEach((d=>{const p=this.subscribers[d];p.filter.matcher===c&&eh.isEqual(p.filter.criteria,l)&&p.messageHandler(u)}))}else if(u&&u.tokenExpiryTime){this.setTokenExpiryTime(u);const c=1e3*(this.getTokenExpiryTime()-this.refreshB2SOffset);setTimeout((()=>this.refreshB2STokenReInit()),c);let l=[];this.inProgressSubscriptions.forEach((({messageSubscriber:c,id:u})=>{l?.includes(u)||(l?.push(u),this.subscribeToSocket(c,u))})),this.inProgressSubscriptions=[],this.inProgressMessages.forEach((c=>{this.publishMessage(c)})),this.inProgressMessages=[],l=null}else console.error("filter missing from received data from messaging service",c.data)}}static reInitialization(c){this.reInitInterval||(Object.keys(this.subscribers).forEach((c=>{this.inProgressSubscriptions.push({messageSubscriber:this.subscribers[c],id:c})})),c?this.initConnection(this.connectionConfig):this.reInitInterval=setInterval((()=>{this.initConnection(this.connectionConfig)}),5e3))}static checkLiveliness(c){!1===this.isServiceAlive?this.reInitialization(!0):this.isServiceAlive=!1,null!==this.serviceAliveHandler&&clearTimeout(this.serviceAliveHandler),this.serviceAliveHandler=setTimeout((()=>{this.checkLiveliness(c)}),c)}static setConnectionConfig(c){this.connectionConfig=c}static cleanSocketListeners(){null!==this.webSocket&&(this.webSocket.removeEventListener("open",this.handleOnOpen.bind(this)),this.webSocket.removeEventListener("message",this.handleOnMessage.bind(this)),this.webSocket.removeEventListener("error",this.handleOnError.bind(this)),this.webSocket.removeEventListener("close",this.handleOnClose.bind(this)))}static disconnect(){null!==this.webSocket&&(this.cleanSocketListeners(),this.webSocket.close(),this.webSocket=null)}static subscribe(c,l,u,d){this.connectionsCount+=1;const p=d||`${Date.now()}_${this.connectionsCount}`,h=new zl(c,l,u);return null!==this.webSocket&&1===this.webSocket.readyState?(this.subscribeToSocket(h,p),p):(this.inProgressSubscriptions.push({messageSubscriber:h,id:p}),null===this.webSocket&&this.initConnection(this.connectionConfig),p)}static subscribeToSocket(c,l){this.subscribers[l]=c;const u={filter:c.filter,subscribe:{id:l}};this.webSocket.send(JSON.stringify(u))}static unsubscribe(c){if(this.subscribers[c]){delete this.subscribers[c];const l={unsubscribe:{id:c}};null!==this.webSocket&&1===this.webSocket.readyState&&this.webSocket.send(JSON.stringify(l))}}static publishMessage(c){null!==this.webSocket?null===this.webSocket||1!==this.webSocket.readyState?this.inProgressMessages.push(c):this.webSocket.send(JSON.stringify(c)):console.error("Web socket not initialized.")}static getUserPresence=()=>this.userPresence;static getCaseSubscription=c=>Ql.getOrCreateSubscription(c);static refreshB2STokenReInit=async()=>{const c={body:{B2SToken:Vr.b2sJWT}};PCore.getRestClient().invokeRestApi("refreshB2S",c).then((c=>{const{newB2SToken:l}=c.data;l&&l.length>30?(Vr.b2sJWT=l,this.setTokenExpiryTime({tokenExpiryTime:Math.round(Date.now()/1e3)+60}),this.webSocket.close()):console.log("refreshB2S: invalid b2s length")})).catch((c=>{console.log(`refreshB2S: error occurred while fetching: ${c}`)}))};static getTokenExpiryTime=()=>{const c=Math.round(Date.now()/1e3);return this.tokenExpiryTime-c};static setTokenExpiryTime=c=>{this.tokenExpiryTime=c.tokenExpiryTime};static clearContext(c){Object.keys(this.subscribers).forEach((l=>{this.subscribers[l].contextName===c&&this.unsubscribe(l)})),this.userPresence.clearContext(c)}}const Zl=mu,eu=class{constructor(){this.records=[],this.maxRecords=0,this.isDirty=!1}getRecords(c){if(c){const l=[],{pageNumber:u,pageSize:d}=c,p=u*d;let h=p-d;for(;h<p;h+=1){if(!this.records[h])return this.maxRecords===h?l:[];l.push(this.records[h])}return l}return this.records}mergeRecords(c,l){if(l){const{pageNumber:u,pageSize:d}=l,p=u*d;let h=0;for(let l=p-d+1-1;l<p;l+=1)this.records[l]=c[h],h+=1;if(c.length<d){const l=(u-1)*d+c.length;this.setMaxRecordsCount(l)}}else c||(c=[]),Array.isArray(this.records)&&Array.isArray(c)&&(this.records=Xp(this.records,c,{isArrayDeepMerge:!1})),this.setMaxRecordsCount(this.records.length)}setMaxRecordsCount(c){this.maxRecords=c}getMaxRecordsCount(){return this.maxRecords}},tu=new class{constructor(){this.dataStore={},this.dataStoreMeta={},this.subscribers={},this.dataPageSubscribers={},this.isCacheEnabled=!0,this.subscribedDataPageNames=new Set}SUBSCRIPTION_STATUS_FAILED="FAILED";SUBSCRIPTION_STATUS_SUCCESS="SUCCESS";DATAPAGE_NOT_CACHED="Data Page Not Cached";DUPLICATE_SUBSCRIPTION_ID="Duplicate Subscription Id";MISSING_MANDATORY_FIELD="Missing Mandatory Field(s)";getData(c,l,u,d){const p=this.generateHash(c,l,d);if(this.dataStore[c]&&this.dataStore[c][p]){const l=this.dataStore[c][p];return l.isDirty?[]:l.getRecords(u)}return[]}generateHash(c,l,u){const d=Cp(c);let p=[];d||(p=Object.keys(l||{}).map((c=>({name:c}))));let h="",g=c;const f=[];return(d?.parameters||p).forEach((c=>{l?.[c.name]?f.push(l[c.name]):f.push(c.defaultValue??W.NULL_STRING)})),u&&f.push(JSON.stringify(u)),f.join(W.HASH_DELIMITER)&&(h=eh.getHashedString(f.join(W.HASH_DELIMITER)),g=c+W.UNDERSCORE_STRING+h),g}async getDataAsync(c,l,u={},d,p,h={}){if(this.subscribeToMessageService(c),h.purgeDataPageCache&&(this.dataStore[c]={},this._removeDataStoreMetaEntry(c)),!this.isCacheable(c,p)||h.invalidateCache){const g=await this.fetchData(c,u,d,p,l,h),f=g?.data?.data??[];return{...g.data,data:f,pageNumber:g?.data?.pageNumber,pageSize:g?.data?.pageSize,queryStats:g?.data?.queryStats,status:g?.status}}const g=this.getData(c,u,d,p);if(g.length>0)return Promise.resolve({data:g});const f=await this.fetchData(c,u,d,p,l,h);return{...f.data,data:this.mergeDataStore(c,u,d,p,f),pageNumber:f?.data?.pageNumber,pageSize:f?.data?.pageSize,queryStats:f?.data?.queryStats,status:f?.status}}async getPageDataAsync(c,l,u={},d={}){this.subscribeToMessageService(c);const p=this.generateHash(c,u,null);if(d.purgeDataPageCache&&(this.dataStore[c]={},this._removeDataStoreMetaEntry(c)),this.isCacheable(c)&&this.dataStore[c]&&this.dataStore[c][p]){if(!d?.invalidateCache)return Promise.resolve(this.dataStore[c][p]);delete this.dataStore[c][p],this._removeDataStoreMetaEntry(c,u,p)}const{restApi:h,reqType:g}=sg(W.GET_PAGE_DATA,{dataViewName:c,dataViewParameters:encodeURIComponent(JSON.stringify(u))}),f={method:g},m=h&&u&&0===Object.keys(u).length?h.split("?")[0]:h;return ic(m,f,l).then((l=>(this.isCacheable(c)&&(this.dataStore[c]={...this.dataStore[c],[p]:l.data},this._addDataStoreMetaEntry(c,u,p)),l.data)))}subscribeToDataPageUpdates(c,l,u,d={}){if(!c||!l||!u)return!1;const p=this.generateHash(u,d,null);this.dataPageSubscribers[u]??={};const h=this.dataPageSubscribers[u];h[p]??={};const g=h[p];return!g[c]&&(g[c]??=l,!0)}unsubscribeToDataPageUpdates(c,l,u={}){if(!c||!l)return!1;const d=this.generateHash(l,u,null);return delete this.dataPageSubscribers[l]?.[d]?.[c],!0}_isDataPageCached(c,l){if(l&&eh.isObjectEmpty(l))return!!this.dataStore[c];const u=this.generateHash(c,l,null);return!!this.dataStoreMeta[c]?.[u]?.length}updateDataPageStore(c={}){Object.keys(c).forEach((l=>{this.dataStore[l]||(this.dataStore[l]={});const u=c[l];Object.keys(u).forEach((u=>{if(this.dataStore[l][u])this.dataStore[l][u].mergeRecords(c[l][u].pxResults);else{const d=new eu;this.dataStore[l][u]=d,d.mergeRecords(c[l][u].pxResults||[])}}))}))}_addDataStoreMetaEntry(c,l,u){const d=this.generateHash(c,l,null);this.dataStoreMeta[c]??={};const p=this.dataStoreMeta[c];p[d]??=[];const h=p[d];h.includes(u)||h.push(u)}_removeDataStoreMetaEntry(c,l,u){if(!c||l||u||(this.dataStoreMeta[c]={}),c&&l&&u){const d=this.generateHash(c,l,null);this.dataStoreMeta[c][d]=this.dataStoreMeta[c][d].filter((c=>c!==u))}}mergeDataStore(c,l,u,d,p){const h=this.generateHash(c,l,d),g=p?.data?.data;if(!g||0===g.length)return[];this.dataStore[c]||(this.dataStore[c]={}),this.dataStore[c][h]||(this.dataStore[c][h]=new eu);const f=this.dataStore[c][h];return f.mergeRecords(g,u),f.isDirty=!1,this._addDataStoreMetaEntry(c,l,h),f.getRecords(u)}async fetchData(c,l,u,d,p,h){const{additionalApiParams:{useExtendedTimeout:g=!1,includeTotalCount:f=!1}={},...m}=h,y={dataViewParameters:l};return f&&(y.includeTotalCount=!0),g&&(y.useExtendedTimeout=!0),u&&(y.paging=u),d&&(y.query=d),ql.getData(c,y,p,m)}isDataPage(c=""){return c.startsWith("D_")||c.startsWith("Declare_")}handleCascadeUpdate(){const{dataPageName:c,scope:l}=this;l.handleMessage({message:{datapage:c,parameters:""}})}subscribeToUpdate(c,l,u,d,p,h){this.subscribers[c]=this.subscribers[c]||{},this.subscribers[c].callback=this.subscribers[c].callback||{},h&&!this.subscribers[c].callback?.[h]&&(this.subscribers[c].callback[h]=p),this.subscribeToCascadeUpdates(c,l,u,d,h)}unsubscribe(c,l,u,d,p){delete this.subscribers[c]?.callback?.[p],l&&l.length>0&&Lp.unRegisterFields(u,d,l,p)}subscribeToCascadeUpdates(c,l,u,d,p){l&&l.length>0&&Lp.registerFields(u,d,l,this.handleCascadeUpdate.bind({dataPageName:c,scope:this}),p)}subscribeToMessageService(c){if(c&&this.subscribedDataPageNames.has(c))return;const l={matcher:"DATAPAGE_UPDATED",criteria:{datapage:c}};Zl.subscribe(l,this.handleMessage.bind(this)),this.subscribedDataPageNames.add(c)}handleMessage(c){const{msgId:l,message:u}=c,{datapage:d,parameters:p=""}=u,h=this.subscribers[d];this.markDataInstanceDirty(d,""===p?null:JSON.parse(p)),l&&this._executeDataPageSubscriptions(c),!l&&h?.callback&&Object.keys(h.callback).forEach((l=>{h.callback?.[l](c.message)}))}markDataInstanceDirty(c,l){let u,d;l&&(u=this.generateHash(c,l,null),d=this.dataStoreMeta[c]?.[u],!d)||!this.dataStore[c]||Object.keys(this.dataStore[c]).filter((c=>!l||!d||d.includes(c))).forEach((l=>{this.dataStore[c][l].isDirty=!0}))}_executeDataPageSubscriptions(c){const{message:l}=c,{datapage:u,parameters:d}=l,p=d?JSON.parse(d):null;if(this.dataPageSubscribers[u])if(p){const l=[];l.push(this.generateHash(u,p,null)),l.push(this.generateHash(u,null,null)),l.forEach((l=>{const d=this.dataPageSubscribers[u]?.[l]??{};Object.keys(d).forEach((l=>{d[l](c.message)}))}))}else{const l=this.dataPageSubscribers[u];Object.keys(l).forEach((u=>{const d=l[u];Object.keys(d).forEach((d=>{l[u][d](c.message)}))}))}}isPerInteraction(c){const l=Cp(c);return"reloadOncePerInteraction"===l?.refreshStrategy?.type}isCacheable(c,l){return!(this.isPerInteraction(c)||!this.isCacheEnabled||l&&Object.keys(l).length>1)}disableCache(c){this.isCacheEnabled=!c}},nu=class{constructor(c,l,u,d,p=100,h=500){this.finalDataViewCall=c,this.combiner=l,this.comparator=u,this.separator=d,this.maxtime=p,this.maxsize=h,this.groupedDataViewArray=[]}findCombinableDataViewCall(c){return this.groupedDataViewArray.find((l=>this.comparator(l,c)))}dequeueAllDataViewCalls(){for(this.groupedDataViewArray.reverse();this.groupedDataViewArray.length>0;){const c=this.groupedDataViewArray.pop();this.finalDataViewCall(c).then((l=>{this.separator(c,l)}))}clearTimeout(this.timeoutId)}dequeueDataViewCallOnSizeExceed(c){const l=this.groupedDataViewArray.findIndex((l=>this.comparator(l,c)));this.groupedDataViewArray[l]&&(this.groupedDataViewArray.splice(l,1),this.finalDataViewCall(c).then((l=>{this.separator(c,l)})))}queueDataViewCall(c,l){let u,d,p=this.findCombinableDataViewCall(c);return u=new Promise((c=>{d=c})),p&&!p.dataViewCallMap[l]?(this.combiner(p,c),p.dataViewCallMap[l]={promise:u,resolve:d}):p?u=p.dataViewCallMap[l].promise:(p={...c,dataViewCallMap:{[l]:{promise:u,resolve:d}}},this.groupedDataViewArray.push({...c,dataViewCallMap:{[l]:{promise:u,resolve:d}}})),Object.keys(p.dataViewCallMap).length===this.maxsize?this.dequeueDataViewCallOnSizeExceed(p):(clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.dequeueAllDataViewCalls()),this.maxtime)),u}},ru=class{constructor(){this.bufferedDataQueues={}}getBufferedDataQueueForDataPage(c){return this.bufferedDataQueues[c]}addBufferedDataQueueForDataPage(c,l,u,d,p,h,g){return this.getBufferedDataQueueForDataPage(c)||(this.bufferedDataQueues[c]=new nu(l,u,p,d,h,g)),this.bufferedDataQueues[c]}},su=c=>c.map((c=>c.field)),au=(c,l)=>{const u=(c.query?.filter).filterConditions,d=(l.query?.filter).filterConditions;let p=(l.query?.filter).logic;const h=Object.keys(u).length;((c,l)=>((c,l)=>1===Object.keys(c).length&&Object.keys(c).length===Object.keys(l).length)(c,l)&&((c,l)=>"EQ"===l.F0.comparator&&(c.F0.comparator===l.F0.comparator||"IN"===c.F0.comparator))(c,l)&&c.F0.ignoreCase===l.F0.ignoreCase)(u,d)?("EQ"===u.F0.comparator&&(c=>{const l=c?.F0.rhs.value;c.F0.rhs={values:[l]},c.F0.comparator="IN"})(u),u.F0.rhs.values.push(d.F0.rhs.value)):(Object.keys(d).forEach(((c,l)=>{const g=`F${h+l}`;u[g]=d[c],p=p.replace(c,g)})),(c.query?.filter).logic+=` OR ${p}`);const g=su(c.query?.select);su(l.query?.select).forEach((l=>{g.includes(l)||(c.query?.select).push({field:l})}))},ou=(c,l)=>((c,l)=>Object.keys(c.filterConditions).length%Object.keys(l.filterConditions).length==0&&!Object.keys(l.filterConditions).some((u=>c.filterConditions[u].lhs.field!==l.filterConditions[u]?.lhs.field)))(c.query?.filter,l.query?.filter)&&(((c,l)=>c.dataViewParameters&&l.dataViewParameters&&Object.keys(l.dataViewParameters).length===Object.keys(c.dataViewParameters).length&&!Object.keys(c.dataViewParameters).some((u=>"string"==typeof l.dataViewParameters?.[u]?c.dataViewParameters?.[u]!==l.dataViewParameters?.[u]:!eh.isEqual(c.dataViewParameters?.[u],l.dataViewParameters?.[u]))))(c,l)||((c,l)=>!c.dataViewParameters&&!l.dataViewParameters)(c,l)),iu=(c,l)=>{const{data:u}=l,{dataViewCallMap:d,filterDataOnClient:p}=c;Object.keys(d).forEach((c=>{d[c].resolve({data:p(c,u)})}))},cu=(c,l)=>{try{window.sessionStorage.setItem(c,l)}catch(c){}};class bu{constructor(c,l){this.isInitialised=!1,this.isQueryable=!0,this.dataSourceMetaData={},this.nonQueryableData=[],this.fetchedNQData=!1,this.previousSearchText=null,this.totalRecordCount=0,this.fetchedRecordCount=0,this.cache={},this.pageNumber=0,this.isNQDataFetchInProgress=!1,this.fetchNQDataPromise=null,this.dataSource="",this.bufferInitialized=!1,c&&(this.listType=c.listType,this.dataSource=c.dataSource,c.enablePagination?(this.enablePagination=c.enablePagination,this.pageSize=c.pageSize):this.maxResultsDisplay=c.maxResultsDisplay,this.parameters=c.parameters,this.columns=c.columns,this.matchPosition=c.matchPosition,this.ignoreCase=!1!==c.ignoreCase,this.dataSourceMetaData=c.dataSourceMetaData,this.context=l)}static searchResultsCache={};static init(c,l){return new Promise(((u,d)=>{const p=[...c.columns.map((c=>c.value)),...Object.entries(c.parameters).map((([c,l])=>`${c}+${l}`)),c.matchPosition,c.maxResultsDisplay].join(W.HASH_DELIMITER),h=eh.getHashedString(p),g=`${c.dataSource}_${h}`,f=ql.getAppCacheKey(c.dataSource);if(window.sessionStorage.getItem(f)){const p=JSON.parse(window.sessionStorage.getItem(f));if(l&&bu.searchResultsCache?.[l]?.[g])u(bu.searchResultsCache[l][g]);else if("form"!==c.cacheLifeSpan&&bu.searchResultsCache?.persisted?.[g])u(bu.searchResultsCache.persisted[g]);else{const h=new bu(c,l);JSON.stringify(p.associationFilter)===JSON.stringify(c.associationFilter)?(h.dataSourceMetaData=p.dataSourceMetaData,h.isQueryable=p.isQueryable,h.isInitialised=p.isInitialised,h.associationFilter=p.associationFilter,bu.initializeCache(l,c,g,h),u(h)):(h.associationFilter=c.associationFilter,h.propertyFilter=c.propertyFilter,h.fetchMetaData(l).then((d=>{cu(f,JSON.stringify({isQueryable:d.data.isQueryable,dataSourceMetaData:d.data,isInitialised:!0,associationFilter:c.associationFilter})),h.isQueryable=d.data.isQueryable,h.dataSourceMetaData=d.data,h.isInitialised=!0,bu.initializeCache(l,c,g,h),u(h)})).catch((c=>{h.isInitialised=!1,d(c)})))}}else if(c.deferDatasource&&Cp(c.dataSource)){const d=new bu(c,l),p=Cp(c.dataSource);d.isQueryable=!!p?.isQueryable,d.isInitialised=!0,d.dataSourceMetaData=p,cu(f,JSON.stringify({isQueryable:p?.isQueryable,dataSourceMetaData:p,isInitialised:!0})),d.context=l,bu.initializeCache(l,c,g,d),u(d)}else{const p=new bu(c,l);p.associationFilter=c.associationFilter,p.propertyFilter=c.propertyFilter,p.fetchMetaData(l).then((d=>{cu(f,JSON.stringify({isQueryable:d.data.isQueryable,dataSourceMetaData:d.data,isInitialised:!0,associationFilter:c.associationFilter})),p.isQueryable=d.data.isQueryable,p.dataSourceMetaData=d.data,p.isInitialised=!0,bu.initializeCache(l,c,g,p),u(p)})).catch((c=>{p.isInitialised=!1,d(c)}))}}))}static bufferedDataView=new ru;registerForBufferedCall(c){return this.isQueryable&&(this.initializeBufferCallsForDataPage((c=>({combiner:au,comparator:ou,separator:iu,...c}))(c)),this.bufferInitialized=!0),this}static clearContextedCache(c){delete bu.searchResultsCache[c]}static initializeCache(c,l,u,d){c&&"form"===l.cacheLifeSpan?.toLowerCase()?(void 0===bu.searchResultsCache[c]&&(bu.searchResultsCache[c]={}),bu.searchResultsCache[c][u]=d):(void 0===bu.searchResultsCache.persisted&&(bu.searchResultsCache.persisted={}),bu.searchResultsCache.persisted[u]=d)}fetchMetaData(c){return ql.getDataViewMetadata(this.dataSource,c,this.associationFilter,this.propertyFilter)}initializeBufferCallsForDataPage(c){bu.bufferedDataView.addBufferedDataQueueForDataPage(this.dataSource,(c=>tu.getDataAsync(this.dataSource,this.context,c.dataViewParameters,c.paging,c.query)),c.combiner,c.separator,c.comparator,c.waitTime,c.maxSize)}buildSchemaForQueryableBufferDP(c){return{...this.buildSchemaForQueryableDP(c),paging:void 0,filterDataOnClient:this.filterDataOnClient.bind(this)}}getData(c,l){if(this.isQueryable){if(this.bufferInitialized)try{const l=this.buildSchemaForQueryableBufferDP(c);return bu.bufferedDataView.getBufferedDataQueueForDataPage(this.dataSource).queueDataViewCall(l,c)}catch{const u=this.buildSchemaForQueryableDP(c,l);return tu.getDataAsync(this.dataSource,this.context,u.dataViewParameters,u.paging,u.query)}const u=this.buildSchemaForQueryableDP(c,l);return tu.getDataAsync(this.dataSource,this.context,u.dataViewParameters,u.paging,u.query)}return this.fetchNonQueryableResults(c,l)}memoizedGetData(c,l){const u=c?.toLowerCase();if(this.enablePagination?u in this.cache&&this.pageNumber in this.cache[u]:u in this.cache)return this.enablePagination?this.cache[u][this.pageNumber]:this.cache[u];const d=this.getData(c,l);return this.enablePagination?(this.cache[u]=this.cache[u]||{},this.cache[u][this.pageNumber]=d):this.cache[u]=d,d}fetchData(c,l=!1,u){return this.isValidDatasource()&&this.isInitialised?(this.pageNumber=l?this.pageNumber:1,this.memoizedGetData(c,u)):Promise.reject(new Error)}fetchPaginatedData(c){return this.pageNumber+=1,this.fetchData(c,!0)}fetchNonQueryableResults(c,l){if(void 0===c)return Promise.resolve({data:[]});if(this.fetchedNQData)return Promise.resolve({data:this.filterDataOnClient(c,this.nonQueryableData,l)});if(this.isNQDataFetchInProgress)return this.fetchNQDataPromise?.then((()=>({data:this.filterDataOnClient(c,this.nonQueryableData,l)}))).catch((c=>Promise.reject(c)));if(this.dataSourceMetaData?.structure&&"list"===this.dataSourceMetaData.structure.toLowerCase()){const u=this.buildSchemaForNonQueryableDP();return this.fetchNQDataPromise=tu.getDataAsync(this.dataSource,this.context,u.dataViewParameters),this.isNQDataFetchInProgress=!0,new Promise(((u,d)=>{this.fetchNQDataPromise?.then((d=>(this.nonQueryableData=[...d.data],this.fetchedNQData=!0,u({data:this.filterDataOnClient(c,this.nonQueryableData,l)})))).catch((c=>d(c))).finally((()=>{this.isNQDataFetchInProgress=!1,this.fetchNQDataPromise=null}))}))}return Promise.resolve(null)}filterDataOnClient(c,l,u){const d=(u?.columns??this.columns)?.filter((c=>c.useForSearch)).map((c=>c.value));return l.reduce(((l,p)=>(Object.keys(p).every((h=>!(d?.includes(h)&&p[h]&&this.positionMatches(`${p[h]}`,c,u)&&(l.push({...p}),1)))),l)),[])}positionMatches(c,l,u){const d=u?.ignoreCase??this.ignoreCase,p=d?c.toLowerCase():c,h=d?l.toLowerCase():l;switch(u?.matchPosition??this.matchPosition){case"start":return p.startsWith(h);case"contains":return p.includes(h);case"equals":return p===h;default:return!1}}buildSelect(c){const l=[],u=[];return(c?.columns??this.columns)?.forEach((c=>{if(!u.includes(c.value)){u.push(c.value);const d={field:c.value};l.push(d)}})),l}buildFilters(c,l){const u=l?.matchPosition??this.matchPosition,d=l?.ignoreCase??this.ignoreCase,p={};let h=0;(l?.columns??this.columns)?.forEach((l=>{if(l.useForSearch){const g=`F${h}`;h+=1;const f={field:l.value},m={value:c};let y="CONTAINS";"start"===u?y="STARTS_WITH":"equals"===u&&(y="EQ");const I={...`${parseFloat(c)}`!==c==1&&{ignoreCase:d?"true":"false"},lhs:f,rhs:m,comparator:y};p[g]=I}}));const g=Object.keys(p).join(" OR ");return{filterConditions:p,logic:g}}buildQuery(c,l){const u=this.buildSelect(l);return c?{select:u,filter:this.buildFilters(c,l),...ql.isDistinctResultsOnly(u)&&{distinctResultsOnly:"true"}}:{select:u,...ql.isDistinctResultsOnly(u)&&{distinctResultsOnly:"true"}}}buildPageOptions(){return this.enablePagination?{pageNumber:this.pageNumber,pageSize:this.pageSize}:{maxResultsToFetch:this.maxResultsDisplay}}buildSchemaForQueryableDP(c,l){return{dataViewParameters:this.parameters,query:this.buildQuery(c,l),paging:this.buildPageOptions()}}buildSchemaForNonQueryableDP(){return{dataViewParameters:this.parameters}}isValidDatasource(){return!!this.dataSource}}const lu=bu,uu=class{static cleanCaches(c){Lp.purgeCascadeFields(c),Wl.removeContext(c),lu.clearContextedCache(c),zr.cleanContextSubscribers(c),Hc(c),Rn.removeContextTreeNode(c),Zl.clearContext(c),ol.deRegisterForRefresh(c)}},du="GET_DESCENDANTS",pu=new class{MISSING_CONTEXT_PARAM="context is required parameter";INVALID_CONTEXT_DETAILS="Invalid Context";INVALID_CONTEXT_OPERATION="Invalid Operation on Given Context";schedulePendingActionOnCompletion(c,l){const u=[],d=l.context_data?.blocking_action_counter??0,p=l.context_data?.deferred_action_queue?[...l.context_data.deferred_action_queue]:[];let h=l.context_data?.is_deferred_action_in_progress??!1;if(d<=0){if(h)u.push({type:Ae,payload:{context:c,data:{context_data:{is_deferred_action_in_progress:!1}}}});else{if(!(p.length>0))return;{const l=p.shift();h=!h,u.push({type:Ae,payload:{context:c,data:{context_data:{deferred_action_queue:p,blocking_action_counter:d,is_deferred_action_in_progress:h}}}}),u.push(l)}}kp(u)}}executeOrQueueDeferredAction(c){if(!c?.payload?.context)return Promise.reject(new Error("Action Context is Mandatory Field."));const l=$p(c?.payload?.context);if(l){const u=[],d=l.context_data?.blocking_action_counter??0,p=l.context_data?.deferred_action_queue?[...l.context_data.deferred_action_queue]:[];let h=l.context_data?.is_deferred_action_in_progress??!1;return p.length<=0&&!h&&(d<=0?(u.push(c),h=!h):p.push(c),u.unshift({type:Ae,payload:{context:c.payload.context,data:{context_data:{deferred_action_queue:p,blocking_action_counter:d,is_deferred_action_in_progress:h}}}}),kp(u)),Promise.resolve()}return Promise.reject(new Error(this.INVALID_CONTEXT_DETAILS))}handleDeferredActionCompletion(c){if(!c)return Promise.reject(new Error(this.MISSING_CONTEXT_PARAM));const l=$p(c);return l&&!0===l.context_data?.is_deferred_action_in_progress?(kp({type:Ae,payload:{context:c,data:{context_data:{is_deferred_action_in_progress:!1}}}}),this.schedulePendingActionOnCompletion(c,l),Promise.resolve()):Promise.reject(new Error(this.INVALID_CONTEXT_DETAILS))}registerBlockingAction(c){return c?$p(c)?(kp({type:ut,payload:{context:c,isInitiateBlockingAction:!0}}),Promise.resolve()):Promise.reject(new Error(this.INVALID_CONTEXT_DETAILS)):Promise.reject(new Error(this.MISSING_CONTEXT_PARAM))}deRegisterBlockingAction(c){if(!c)return Promise.reject(new Error(this.MISSING_CONTEXT_PARAM));const l={...$p(c)};return l.context_data={...l.context_data},l&&l.context_data?.blocking_action_counter>0?(kp({type:ut,payload:{context:c,isInitiateBlockingAction:!1}}),l.context_data.blocking_action_counter-=l.context_data.blocking_action_counter,this.schedulePendingActionOnCompletion(c,l),Promise.resolve()):Promise.reject(new Error(this.INVALID_CONTEXT_OPERATION))}cancelDeferredActionsOnError(c){if(!c)return;const l=$p(c);if(l){const u={...l};u.context_data={...u.context_data},u.context_data?.deferred_action_queue&&eh.rejectPendingActions(u.context_data.deferred_action_queue)&&(u.context_data.deferred_action_queue=[]),u.context_data?.blocking_action_counter&&(u.context_data.blocking_action_counter=0),u.context_data?.is_deferred_action_in_progress&&(u.context_data.is_deferred_action_in_progress=!1),kp({type:Ae,payload:{context:c,data:{...u}}}),hn.disableLoadingIndicator({context:c})}}},hu=(c,l)=>{const u={},d=Dl.getLookUpDataPage(c),p=Dl.getDataPageKeys(d);if(p)for(const h of p)u[h.keyName]=h.isAlternateKeyStorage?l[h.linkedField]:l[h.keyName];return{dataViewParameters:u,dataPageID:d,dataPageKeys:p}},gu=(c,l)=>{const u=Dl.getSavableDataPage(c),d=Dl.getDataPageKeys(u);return d?.forEach((c=>{c.isAlternateKeyStorage&&(c.keyName===c.linkedField||Object.keys(l).includes(c.linkedField))?c.keyName=l[c.linkedField]:c.isAlternateKeyStorage&&Object.keys(l).includes(c.keyName)&&c.keyName!==c.linkedField?(l[c.linkedField]=l[c.keyName],delete l[c.keyName]):c.keyName=l[c.keyName]})),{keys:l,dataPageID:u,dataPageKeys:d}},fu=c=>{zr.publish(G.PUB_SUB_EVENTS.EVENT_CANCEL,c)},yu=(c,l,u)=>{const{callbacks:d}=u;return u.callbacks=null,c(l,u).then((c=>{"cancel"===c?d?.cancel?.():d?.submit?.()}))},Iu=class{constructor(c){this.c11nEnv=c}MSG_CLASSNAME_REQUIRED="className is required parameter";MSG_CLASSNAME_STRING="className must be a string";MSG_ACTION_ID_REQUIRED="actionID is required parameter";MSG_ACTION_ID_STRING="actionID must be a string";MSG_ACTION_NAME_REQUIRED="actionName is required parameter";MSG_ACTION_NAME_STRING="actionName must be a string";MSG_KEY_PROPERTIES_REQUIRED="keyProperties is required parameter";MSG_DATAVIEWID_REQUIRED="dataViewID is required parameter";MSG_DATAVIEWID_STRING="dataViewID must be a string";MSG_CONTAINERITEMID_REQUIRED="containerItemID is required parameter";MSG_CONTAINERITEMID_STRING="containerItemID must be a string";MSG_PAGENAME_REQUIRED="pageName is required parameter";MSG_PAGENAME_STRING="pageName must be string";MSG_INSIGHTID_REQUIRED="insightID is required parameter";MSG_DASHBOARDID_REQUIRED="DashboardID is required parameter";MSG_ACTIVE_SUGGESTION_UNATTENDED="You must accept or decline autofilled fields.";MSG_CASE_ID_REQUIRED="caseID is required parameter";MSG_CONTEXT_STRING="context must be string";shouldDeleteCaseInCreateStage=(c,l,u)=>!c&&l||u;getSaveActionPayload=(c,l=!1)=>{const u=c,d=u&&u.includes(W.MODAL),p=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),h=this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),g=this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID)?this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID):this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENTACTION_ID),f=this.c11nEnv.getContainerName(),m=this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),y=l?void 0:tl(this.c11nEnv.getContextName()),I=this.c11nEnv.getValue("isProcessAction","isProcessAction");return oh.buildActionObject({context:u,containerItemID:c,assignmentID:h,actionID:g,caseID:p,containerName:f,caseType:m,isModalAction:d,isFormValid:y,isProcessAction:I,saveOnly:l},this.c11nEnv)};actionsApiPromise=(c,l,u=!0)=>{let d,p,h="";h=l&&null!==l.actionMgrID?l.actionMgrID||"":gn.getNextActionMgrId();const g=new Promise(((c,l)=>{d=c,p=l}));if(!d||!p)throw new Error("resolveFn or rejectFn is not defined.");return gn.register(h,g,d,p,c,l,u),{actionMgrID:h,promise:g}};showDataObjectCreateView(c,l=G.VIEW_NAMES.DATA_OBJECT_CREATE_VIEW){const u=oh.buildActionObject({viewName:l,className:c},this.c11nEnv),d=ie,{promise:p}=this.actionsApiPromise(d,u);return kp({type:d,payload:{...u,containerName:G.MODAL,skipSemanticUrl:!0,isCreateDataObject:!0}}),p}cancelDataObject(c){if(!c)return Promise.reject(new Error("containerItemId is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=c;if(!Il(l))return new Rl(this.c11nEnv).removeContainerItem({containerItemID:c,skipReleaseLockRequest:!0});const u=Xe,d=oh.buildActionObject({containerItemID:c,context:l},this.c11nEnv),p=l&&l.includes(W.MODAL);kp({type:u,payload:{...d,isModalAction:p,isDataObject:!0,skipReleaseLockRequest:!0}});const{promise:h}=this.actionsApiPromise(u,d);return h.then((()=>{fu({})}))}createDataObject(c){if(!c)return Promise.reject(new Error("containerItemID is required parameter"));const{data:l}=Vp()?.getState()||{},u=l[c]?.dataInfo?.content?.classID;if(!u)return Promise.reject(new Error(W.DATA_CLASS_NOT_FOUND));const d=Dl.getSavableDataPage(u),p=dt,h=!!c&&c.includes(W.MODAL),g=oh.buildActionObject({containerItemID:c,dataPageID:d},this.c11nEnv),{promise:f}=this.actionsApiPromise(p,g);return kp({type:"CREATE_DATA_OBJECT",payload:{...g,isModalAction:h,isFormValid:tl(c)}}),f}deleteDataObject(c,l){if(!c)return Promise.reject(new Error("className is required parameter"));if(!l)return Promise.reject(new Error("keys is required parameter"));const u=pt,d=Dl.getSavableDataPage(c),p=Dl.getDataPageKeys(d),h={};if(p)for(const m of p)h[m.keyName]=m.isAlternateKeyStorage?l[m.linkedField]:l[m.keyName];const g=oh.buildActionObject({dataViewName:d,dataViewParameters:h},this.c11nEnv),{promise:f}=this.actionsApiPromise(u,g);return kp({type:"DELETE_DATA_OBJECT",payload:{...g}}),f}getDataObjectView(c,l,u={viewName:""}){if(!c)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(!l)return Promise.reject(new TypeError(this.MSG_KEY_PROPERTIES_REQUIRED));if("object"!=typeof l)return Promise.reject(new TypeError("keyProperties must be a object"));const d=ht,{dataPageID:p,dataViewParameters:h}=hu(c,l),g=oh.buildActionObject({dataLookUp:p,keyProperties:l,requestPayload:h,viewName:u.viewName||G.VIEW_NAMES.DATA_OBJECT_EDIT_VIEW,containerName:W.MODAL},this.c11nEnv),{promise:f}=this.actionsApiPromise(d,g);return kp({type:"VIEW_DATA_OBJECT",payload:{...g}}),f}updateDataObject(c,l){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if(!l)return Promise.reject(new Error("keys is required parameter"));const{data:u}=Vp()?.getState()||{},d=u[c]?.dataInfo?.content?.classID;if(!d)return Promise.reject(new Error(W.DATA_CLASS_NOT_FOUND));const{dataPageID:p,keys:h}=gu(d,l),g=gt,f=c&&c.includes(W.MODAL),m=oh.buildActionObject({containerItemID:c,dataPageID:p,key:h},this.c11nEnv),{promise:y}=this.actionsApiPromise(g,m);return kp({type:"UPDATE_DATA_OBJECT",payload:{...m,isModalAction:f,isFormValid:tl(c)}}),y}openDataObjectAction(c,l,u,d){if(!c)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(!l)return Promise.reject(new TypeError(this.MSG_KEY_PROPERTIES_REQUIRED));if("object"!=typeof l)return Promise.reject(new TypeError("keyProperties must be a object"));if(!u)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));if(!d)return Promise.reject(new Error(this.MSG_ACTION_NAME_REQUIRED));const p=ft,{dataViewParameters:h,dataPageID:g,dataPageKeys:f}=hu(c,l),m=oh.buildActionObject({actionID:u,actionName:d,dataViewParameters:h,lookupDatapage:g,containerName:W.MODAL,dataViewPayload:f,context:this.c11nEnv.getContextName()},this.c11nEnv),{promise:y}=this.actionsApiPromise(p,m);return kp({type:p,payload:{...m}}),y}submitDataObjectAction(c,l,u){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));if(!l)return Promise.reject(new Error(this.MSG_KEY_PROPERTIES_REQUIRED));if(!u)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));const{data:d}=Vp()?.getState()||{},p=d[c]?.dataInfo?.content?.classID;if(!p)return Promise.reject(new Error(W.DATA_CLASS_NOT_FOUND));const h=wd(c),g=hd(h),f=Fu(g,h)||{},{resourceType:m="",key:y=""}=f,I=mt,{dataPageID:E,keys:A}=gu(p,l),_=oh.buildActionObject({containerItemID:c,actionID:u,resourceType:m,key:y,keys:A,savableDatapage:E,containerName:W.MODAL,context:c},this.c11nEnv);_.context=c;const{promise:C}=this.actionsApiPromise(I,_);return kp({type:I,payload:{..._,isFormValid:tl(c)}}),C}createWork(c,l={flowType:"",containerName:"",openCaseViewAfterCreate:!1,modalOptions:{dockable:!1},startingFields:Object,remoteCaseMeta:{},channelName:""}){if(!c)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.createWork)return window.pms.plugins.c11n.createWork(c,"pyStartCase");const{dockable:u=!1}=l?.modalOptions||{};let d=ge;const p=oh.buildActionObject({class:c,flowType:"pyStartCase",containerName:W.PRIMARY,openCaseViewAfterCreate:!0,...l,modalOptions:{isDockable:u}},this.c11nEnv),{promise:h}=this.actionsApiPromise(d,p);if(l.channelName&&(p.headers=p.headers||{},p.headers[W.X_ORIGIN_CHANNEL]=l.channelName),q.isRemoteCase(c)){const{RemoteClassName:l,RemoteSystemID:u,name:h}=q.getRemoteCase(c);if(p.className=c,p.class=l,p.headers=p.headers||{},p.headers.RemoteSystemID=u,q.isTraditionalRemoteCase(c)){const u={className:c,name:h,action:"createWork",remoteClassName:l};d=this.setTraditionalRemoteCaseParams(p,u)}}return Xi.getPreviewMode()&&(p.debugInfo={debugId:eh.generateUniqueID()}),kp({type:d,payload:{...p}}),h}setTraditionalRemoteCaseParams(c,l){return c.className=l.className,c.isTraditionalRemoteCase=q.isTraditionalRemoteCase(l.className),c.remoteClassName=l.remoteClassName,c.action=l.action,c.viewName=H,c.gadgetId=l.gadgetId??yc.getUniqueGadgetId(),c.name=l.name,c.skipSemanticUrl=!0,ie}getDataObjectActions(c,l){if(!c)return Promise.reject(new Error(this.MSG_DATAVIEWID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_DATAVIEWID_STRING));const u=Ce,d=oh.buildActionObject({dataViewID:c,dataViewParameters:l},this.c11nEnv),{promise:p}=this.actionsApiPromise(u,d);return kp({type:u,payload:{...d}}),p}getDescendants(c,l){if(!c)return Promise.reject(new Error(this.MSG_CASE_ID_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CONTEXT_STRING));const u=l||this.c11nEnv.getContextName(),d=oh.buildActionObject({caseID:c,currentContext:u},this.c11nEnv),{promise:p}=this.actionsApiPromise("GET_DESCENDANTS",d),h=(g={...d,context:u},{type:du,payload:g});var g;return kp(h),p}openWorkByHandle(c,l,u={}){if(!c)return Promise.reject(new Error("workID is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("workID must be a string"));if(!l)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.openWorkByHandle)return window.pms.plugins.c11n.openWorkByHandle(c,l);const d={insKey:c,acTargetName:u.targetContainer||W.PRIMARY,containerName:u.targetContainer||W.PRIMARY};let p=fe;const h=oh.buildActionObject(d,this.c11nEnv),{promise:g}=this.actionsApiPromise(p,h);return u.channelName&&(h.headers=h.headers||{},h.headers[W.X_ORIGIN_CHANNEL]=u.channelName),h.className=l,q.isRemoteCase(l)&&(p=this.setRemoteCaseParamsForOpenCase(h,l,u.remoteCaseMeta)??p),Xi.getPreviewMode()&&![W.WORKAREA].includes(u.targetContainer)&&(h.debugInfo={debugId:eh.generateUniqueID()}),kp({type:p,payload:{...u,...h}}),g}setRemoteCaseParamsForOpenCase(c,l,u={}){const{RemoteSystemID:d,RemoteClassName:p,name:h}=q.getRemoteCase(l);if(c.headers=c.headers||{},c.headers.RemoteSystemID=d,c.isRemoteCase=!0,c.remoteCaseClass=l,q.isTraditionalRemoteCase(l)){c.remoteCaseMeta=u;const d={className:l,name:h,action:At,remoteClassName:p};return this.setTraditionalRemoteCaseParams(c,d)}}openAssignment(c,l,u={isActionFromToDoList:!1,isChild:!1,context:"",viewType:"",skipBrowserSemanticUrlUpdate:!1,containerName:"",channelName:"",remoteCaseMeta:{}}){if(!c)return Promise.reject(new Error("assignmentID is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("assignmentID must be a string"));if(!l)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.openAssignment)return window.pms.plugins.c11n.openAssignment(c,l);const d={assignmentID:c,doDeleteCaseSummary:!0,containerName:u.containerName,isActionFromToDoList:u.isActionFromToDoList,isChild:!1};u.isChild&&(d.containerName=W.PRIMARY,d.isChild=u.isChild);let p=Tl;const h=oh.buildActionObject(d,this.c11nEnv),{promise:g}=this.actionsApiPromise(p,h);if(u.channelName&&(h.headers=h.headers||{},h.headers[W.X_ORIGIN_CHANNEL]=u.channelName),q.isRemoteCase(l)){const{RemoteClassName:c,RemoteSystemID:d,name:g}=q.getRemoteCase(l);if(h.headers=h.headers||{},h.headers.RemoteSystemID=d,q.isTraditionalRemoteCase(l)){h.remoteCaseMeta=u.remoteCaseMeta;const d={className:l,name:g,action:"openAssignment",remoteClassName:c};p=this.setTraditionalRemoteCaseParams(h,d)}}h.className=l,h.activeItemCaseViewMode=this.c11nEnv.getValue("context_data.caseViewMode"),Xi.getPreviewMode()&&![W.WORKAREA].includes(u.containerName)&&(h.debugInfo={debugId:eh.generateUniqueID()});const f={context:h.context||u.context,containerName:h.containerName||u.containerName,targetContainerName:h.containerName||u.containerName,viewType:h.viewType||u.viewType,skipBrowserSemanticUrlUpdate:u.skipBrowserSemanticUrlUpdate};return kp({type:p,payload:{...h,...f}}),g}finishAssignment(c,l={outcomeID:"",jsActionQueryParams:{}}){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const u=Ju(c);let d=u;if(u?.includes("/workarea")&&(d=u.substring(0,d?.lastIndexOf("/workarea"))),(c=>{const l=Rn.getContextReferences(c);if(l)for(const[,u]of l)if(sh.resolveContextTreeNodeProps(u.props).hasSuggestions)return!0;return!1})(u)){const c=[{type:"error",message:zd.getLocaleValue(this.MSG_ACTIVE_SUGGESTION_UNATTENDED,"Messages")}];return er({messages:c,context:d,category:G.PAGE}),Promise.reject({type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR})}const p=ye,h=l?.isTriggeredFromDifferentContext,{caseID:g,assignments:f,localActionID:m,caseActions:y,caseInfo:I,businessID:E,caseTypeID:A,caseTypeName:_}=pn(c,this.c11nEnv,{isTriggeredFromDifferentContext:h}),C=sn(I);let S,T=!1;if(y){const c=y.find((c=>c.ID===m));T="Case"===c?.type}else S=$p(u);let{assignmentID:N}=pn(c,this.c11nEnv,{isTriggeredFromDifferentContext:h});S?.context_data?.actionType&&(T=S.context_data.actionType===W.CASE,N=N||S.context_data.assignmentID);const P=((c,l,u)=>{let d;const p=c?.find((c=>c.ID===l))?.actions,h=p?.filter((c=>c.ID===W.FIX_BROKEN_ASSIGNMENTS))||[];return d=u&&h?.length>0?h[0].ID:u||((c,l)=>{if(!Array.isArray(c)||!l)throw new Error("Invalid parameters passed to getAssignmentActionID API");return c.find((c=>c.ID===l))?.actions?.[0]?.ID})(c,l),d})(f,N,m),[b,D]=g.split(" "),R={class:b,actionID:P,assignmentID:N,caseID:g,workID:D,containerName:this.c11nEnv.getContainerName(),containerItemID:c,isCaseWideAction:T,doDeleteCaseSummary:!0,isInCreateStage:C,businessID:E,caseTypeID:A,caseTypeName:_};c?.includes(W.MODAL)&&(R.containerName=W.MODAL,R.isModalAction=!0),R.outcome=l.outcomeID,R.jsActionQueryParams=l.jsActionQueryParams,I?.isLocalAction&&(R.viewType=Ec.FORM);const O=oh.buildActionObject(R,this.c11nEnv),{promise:v}=this.actionsApiPromise(p,O),x=this.c11nEnv.getValue("isProcessAction","isProcessAction");return O.isProcessAction=x,pu.executeOrQueueDeferredAction({type:p,payload:{...O,context:u}}),v}getNextWork(){const c=Tl,l=oh.buildActionObject({containerName:W.PRIMARY,isGetNextWork:!0},this.c11nEnv),{promise:u}=this.actionsApiPromise(c,l);return kp({type:c,payload:{...l}}),u}openStage(c){if(!c)return Promise.reject(new Error("stageID is required parameter for openStage"));const l=Tl,u=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),d=this.c11nEnv.getCaseSummary().headers,p=oh.buildActionObject({containerName:this.c11nEnv.getContainerName(),isOpenStage:!0,stageID:c},this.c11nEnv),{promise:h}=this.actionsApiPromise(l,p),g={type:l,payload:{...p,caseID:u,headers:d}};return kp(g),h}submitBulkAction(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l="SUBMIT_BULK_ACTION",u=this.c11nEnv.getValue(G.CASE_INFO.CASES),d=this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID),p={containerName:this.c11nEnv.getContainerName(),containerItemID:c,isCaseWideAction:!0,doDeleteCaseSummary:!0,isInCreateStage:!1};c&&c.includes(W.MODAL)&&(p.containerName=W.MODAL,p.isModalAction=!0);const h=oh.buildActionObject(p,this.c11nEnv),{promise:g}=this.actionsApiPromise(l,h),f=Ju(c);return kp({type:l,payload:{...h,context:f,cases:u,actionID:d,isFormValid:tl(f),classID:this.c11nEnv.getCurrentClassID()}}),g}submitBulkActionAsync(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l="SUBMIT_BULK_ACTION_ASYNC",u=this.c11nEnv.getValue(G.CASE_INFO.CASES),d=this.c11nEnv.getValue(G.CASE_INFO.ACTIVE_ACTION_ID),p={containerName:c.includes(W.MODAL)?W.MODAL:this.c11nEnv.getContainerName(),containerItemID:c,isCaseWideAction:!0,doDeleteCaseSummary:!0,isInCreateStage:!1,isModalAction:c.includes(W.MODAL)},h=oh.buildActionObject(p,this.c11nEnv),{promise:g}=this.actionsApiPromise(l,h),f=Ju(c);return kp({type:l,payload:{...h,context:f,cases:u,actionID:d,isFormValid:tl(f),classID:this.c11nEnv.getCurrentClassID()}}),g}openBulkAction(c,l){if(!c)return Promise.reject(new Error("actionID is required parameter for openBulkAction"));if("string"!=typeof c)return Promise.reject(new TypeError("actionID must be a string openBulkAction"));const{selectedList:u,runningMode:d}=l,p=l.type,h={selectedList:u,vcName:l.target,actionName:l?.name,actionID:c,doDeleteCaseSummary:!0,localActionType:p,runningMode:d,...l},g="OPEN_BULK_ACTION",f=oh.buildActionObject(h,this.c11nEnv),{promise:m}=this.actionsApiPromise(g,f);return kp({type:g,payload:{...f}}),m}cancelBulkAction(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=De,u={containerItemID:c,context:c,skipReleaseLockRequest:!0,target:`${W.APP.APP}/${W.MODAL}`,caseViewMode:W.PERFORM_MODE,deleteContext:!0};kp({type:l,payload:u});const{promise:d}=this.actionsApiPromise(l,u);return d}approveCase(c){return c?"string"!=typeof c?Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING)):(kp({type:re,payload:{reference:G.CASE_INFO.APPROVALFLAG,value:W.APPROVED,context:c}}),this.finishAssignment(c)):Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED))}rejectCase(c){return c?"string"!=typeof c?Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING)):(kp({type:re,payload:{reference:G.CASE_INFO.APPROVALFLAG,value:W.REJECTED,context:c}}),this.finishAssignment(c)):Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED))}resolveDuplicateCase(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const[,l]=this.c11nEnv.getValue(G.CASE_INFO.DUPLICATECASEINSKEY).split(" "),u={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEFLAG,value:W.DUPLICATE,context:c}},d={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEID,value:l,context:c}};return kp([u,d]),this.finishAssignment(c)}ignoreDuplicateCase(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEFLAG,value:W.IGNORE,context:c}},u={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEID,value:"",context:c}},d={type:re,payload:{reference:G.CASE_INFO.DUPLICATECASEINSKEY,value:"",context:c}};return kp([l,u,d]),this.finishAssignment(c)}openLocalAction(c,l){if(!c)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_ACTION_ID_STRING));const u=l.caseID||this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID);if(window.pms?.plugins?.c11n?.openLocalAction)return l.caseID=u,yu(window.pms.plugins.c11n.openLocalAction,c,l);const d=l.assignKey||this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),p=l.type,h={caseID:u,assignmentID:d,vcName:l.target,actionName:l?.name,assignKey:d,actionID:c,doDeleteCaseSummary:!0,localActionType:p,...l},g="OPEN_LOCAL_ACTION",f=oh.buildActionObject(h,this.c11nEnv),m=this.c11nEnv.getContextName(),{promise:y}=this.actionsApiPromise(g,f),I=td(m)[0];let E=!1;const A=q.getRemoteHeaderByContext(m);let _;if(A&&(f.headers={},f.headers.RemoteSystemID=A),!I)return _=m,kp({type:g,payload:{...f,contextName:m,continueExecution:E}}),y;_=zu(I);const C=Uu(I);if(C?.accessedOrder.forEach((c=>{u===C.items[c].key&&(E=!0,_=C.items[c].context)})),!E||_&&"review"===Vp()?.getState()?.data[_]?.context_data?.caseViewMode)return kp({type:g,payload:{...f,contextName:m,continueExecution:E}}),y;const S=_,T=S&&S.includes(W.MODAL),N=l.assignKey||this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),P=$p(_),b=P?.caseInfo?.assignments?P.caseInfo.assignments[0]?.actions[0]?.ID:void 0,D=this.c11nEnv.getContainerName(),R=this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),O=this.c11nEnv.getValue("isProcessAction","isProcessAction"),v=oh.buildActionObject({context:S,containerItemID:_,assignmentID:N,actionID:b,caseID:u,containerName:D,caseType:R,isModalAction:T,isFormValid:!0,isProcessAction:O},this.c11nEnv);v.context=_;const x=Ju(_),w=this.c11nEnv.getCaseSummary(),M=sn(w),L=oh.buildActionObject({caseID:u,containerItemID:_,cancelContext:x},this.c11nEnv);let U={};return T?(L.acTargetName=W.MODAL,L.isInCreateStage=M,L.isModalAction=T,U={...L}):U={...L,acName:Ct(this.c11nEnv.getContainerName(),L.context)},kp({type:g,payload:{...f,contextName:m,saveActionPayload:v,cancelActionPayload:U,continueExecution:E}}),y}openProcessAction(c,l){if(!c)return Promise.reject(new Error(this.MSG_ACTION_ID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_ACTION_ID_STRING));const u=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID)||l.caseID;if(window.pms?.plugins?.c11n?.openProcessAction)return l.caseID=u,yu(window.pms.plugins.c11n.openProcessAction,c,l);const d=this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID)||l.assignKey,p=l.type,h={caseID:u,assignmentID:d,vcName:l.target,actionName:l?.name,assignKey:d,actionID:c,doDeleteCaseSummary:!0,processActionType:p,isProcessAction:!0,...l},g=Sl,f=oh.buildActionObject(h,this.c11nEnv),{promise:m}=this.actionsApiPromise(g,f);return kp({type:g,payload:{...f}}),m}navigateToStep(c,l){if(!c)return Promise.reject(new Error("stepID is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("stepID must be a string"));if(!l)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const u="NAVIGATE_TO_STEP",d=this.c11nEnv.getValue(G.NEXT_ASSIGNMENT_INFO_ID)?this.c11nEnv.getValue(G.NEXT_ASSIGNMENT_INFO_ID):this.c11nEnv.getValue(G.CASE_INFO.ASSIGNMENT_ID),p=sn(this.c11nEnv.getCaseSummary()),h={ID:d,stepID:c,acTargetName:this.c11nEnv.getContainerName(),targetContainerName:this.c11nEnv.getContainerName(),containerItemID:l,doDeleteCaseSummary:!0,isInCreateStage:p};l&&l.includes(W.MODAL)&&(h.acTargetName=W.MODAL);const g=oh.buildActionObject(h,this.c11nEnv),{promise:f}=this.actionsApiPromise(u,g),m=Ju(l);return kp({type:u,payload:{...g,containerItemID:l,context:m}}),f}cancelAssignment(c,l){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const{CASE_INFO:u}=G,d=Ie,p=Ju(c),h=c&&c.includes(W.MODAL),g=this.c11nEnv.getCaseSummary(),f=sn(g),m=this.c11nEnv.getValue(u.CASE_INFO_ID),y=this.c11nEnv.getValue(u.ASSIGNMENT_ID),I=oh.buildActionObject({caseID:m,containerItemID:c,context:p},this.c11nEnv);let E={};h?(I.acTargetName=W.MODAL,I.isInCreateStage=f,I.isModalAction=h,E={...I}):E={...I,acName:Ct(this.c11nEnv.getContainerName(),I.context)};const{promise:A}=this.actionsApiPromise(d,I);return kp({type:d,payload:E}),A.then((()=>{l||fu({caseID:m,assignmentID:y,context:this.c11nEnv.getContextName()})}))}cancelLocalAction(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const{CASE_INFO:l}=G,u=c,d=Xe,p=c&&c.includes(W.MODAL),h=this.c11nEnv.getValue(l.CASE_INFO_ID),g=oh.buildActionObject({caseID:h,containerItemID:c,context:u},this.c11nEnv);if(!Il(u))return new Rl(this.c11nEnv).removeContainerItem({containerItemID:c}).then((()=>{fu({caseID:h,context:this.c11nEnv.getContextName()})}));kp({type:d,payload:{...g,isModalAction:p}});const{promise:f}=this.actionsApiPromise(d,g);return f}cancelCreateStageAssignment(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const{CASE_INFO:l}=G,u=Xe,d=c,p=d&&d.includes(W.MODAL),h=this.c11nEnv.getCaseSummary(),g=sn(h),f=this.c11nEnv.getValue(l.CASE_INFO_ID),m=oh.buildActionObject({caseID:f,containerItemID:c,context:d},this.c11nEnv),y=this.c11nEnv.getValue("isProcessAction","isProcessAction"),I=Hd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT);if(m.isProcessAction=y,g&&(p||I)&&!on(h)){const l=this.c11nEnv.getValue(W.CASE_INFO.IS_FIRST_ASSIGNMENT),f=Il(d);if(this.shouldDeleteCaseInCreateStage(f,l,I))return this.deleteCaseInCreateStage(c);kp({type:u,payload:{...m,isModalAction:p,isChildCase:un(h),isInCreateStage:g}})}const{promise:E}=this.actionsApiPromise(u,m);return E.then((()=>{}))}saveAssignment(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=Pl,u=this.getSaveActionPayload(c,!0),{promise:d}=this.actionsApiPromise(l,u);return kp(bl(u)),d}saveAndClose(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=Pl,u=this.getSaveActionPayload(c),{promise:d}=this.actionsApiPromise(l,u);return kp(bl(u)),d}deleteCaseInCreateStage(c,l=!1){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const u=Nl,d=c,p=d&&d.includes(W.MODAL),h=this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),g=this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),f=oh.buildActionObject({caseID:h,caseType:g,containerItemID:c,context:d,ignoreCaseDeletion:l},this.c11nEnv),m=this.c11nEnv.getValue("isProcessAction","isProcessAction"),y=this.c11nEnv.getValue(G.CASE_INFO.PARENTCASEINFO);f.isProcessAction=m,f.parentCaseInfo=y;const I=`${W.APP.APP}/${Mu.PRIMARY}`,E=Rc(I,Mu.PRIMARY);f.parentContext=E,p&&(f.targetName=W.MODAL,f.containerName=Mu.MODAL,f.isModalAction=p),kp((c=>({type:Nl,payload:c}))(f));const{promise:A}=this.actionsApiPromise(u,f);return A.then((()=>{fu({caseID:h,context:this.c11nEnv.getContextName()})}))}getRecents(c){if(!c)return Promise.reject(new Error("maxResultsToFetch is required parameter"));if("number"!=typeof c)return Promise.reject(new TypeError("maxResultsToFetch must be number"));let{restApi:l}=Gd.getRestEndPoint("getRecents")||{};l=`${l}?maxResultsToFetch=${c}`;const u=P()+l;return ic(u,{method:"GET",headers:{}})}updateRecents(c,l,u,d){const{restApi:p}=Gd.getRestEndPoint("updateRecents")||{},h=`${P()}${p}`;return ic(h,{method:"PATCH",headers:{"Content-Type":"application/json"},body:{pyLabel:u,pyID:l,classID:c,ID:d}})}logout(){const{restApi:c}=Gd.getRestEndPoint("Logout")||{},l=`${P()}${c}`;return ic(l,{method:"GET",headers:{}}).then((c=>(Object.keys(Rn.rootNodes).forEach((c=>{uu.cleanCaches(c)})),Rn.rootNodes={},sessionStorage.clear(),Zp(),Promise.resolve(c))))}invoke(c,l={}){const u={method:l.method||"GET",body:l.body};return ic(c,u,this.c11nEnv.getContextName())}showCasePreview(c,l={}){this.loadView(c,"pyCasePreview",{container:Mu.PREVIEW,containerName:Mu.PREVIEW,context:G.APP.APP,...l})}showDataPreview(c,l,u){return c?"string"!=typeof c?Promise.reject(new TypeError("dataContext must be string")):l?"object"!=typeof l?Promise.reject(new TypeError("dataContextParameters must be an object")):this.showData("pyDataPreview",c,l,{container:Mu.PREVIEW,containerName:Mu.PREVIEW,context:G.APP.APP,...u||{},skipSemanticUrl:!0}):Promise.reject(new Error("dataContextParameters is required parameter")):Promise.reject(new Error("dataContext is required parameter"))}loadView(c,l,u){let d=oh.buildActionObject({caseId:c,viewName:l,caseClassName:this.c11nEnv.getValue(G.CASE_INFO.CASE_TYPE_ID),RemoteSystemID:q.getRemoteHeaderByContext(this.c11nEnv.getContextName())},this.c11nEnv);u||(u={containerName:this.c11nEnv.getContainerName(),updateData:!1}),u&&"object"==typeof u?(Object.hasOwn(u,"container")&&!Object.hasOwn(u,"containerName")&&(u.containerName=u.container),d={...d,...u}):d={...d,containerName:this.c11nEnv.getContainerName()};const p=oe,{promise:h}=this.actionsApiPromise(p,d,!1);return kp({type:p,payload:{...d}}),h}showPage(c,l,u={containerName:"",skipSemanticUrl:""}){if(!c)return Promise.reject(new Error(this.MSG_PAGENAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_PAGENAME_STRING));if(!l)return Promise.reject(new Error(this.MSG_CLASSNAME_REQUIRED));if("string"!=typeof l)return Promise.reject(new TypeError(this.MSG_CLASSNAME_STRING));if(window.pms?.plugins?.c11n?.showPage)return window.pms.plugins.c11n.showPage(c,l,u);const d=oh.buildActionObject({viewName:c,className:l},this.c11nEnv),p=ie,{promise:h}=this.actionsApiPromise(p,d);return Xi.getPreviewMode()&&(d.debugInfo={debugId:eh.generateUniqueID()}),kp({type:p,payload:{...d,containerName:u.containerName||this.c11nEnv.getContainerName(),skipSemanticUrl:u.skipSemanticUrl}}),h}showInsight(c,l={}){if(!c)return Promise.reject(new Error(this.MSG_INSIGHTID_REQUIRED));const u=oh.buildActionObject({},this.c11nEnv),d=le,{promise:p}=this.actionsApiPromise(d,u);return kp({type:d,payload:{...u,containerName:this.c11nEnv.getContainerName(),skipSemanticUrl:l.skipSemanticUrl||!1,insightID:c}}),p}showDashboard(c,l={}){if(!c)return Promise.reject(new Error(this.MSG_DASHBOARDID_REQUIRED));const u=oh.buildActionObject({},this.c11nEnv),d=ue,{promise:p}=this.actionsApiPromise(d,u);return kp({type:d,payload:{...u,containerName:this.c11nEnv.getContainerName(),skipSemanticUrl:l.skipSemanticUrl||!1,dashboardID:c}}),p}showData(c,l,u,d={containerName:"",skipSemanticUrl:!1}){if(!c)return Promise.reject(new Error(this.MSG_PAGENAME_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_PAGENAME_STRING));if(!l)return Promise.reject(new Error("dataContext is required parameter"));if("string"!=typeof l)return Promise.reject(new TypeError("dataContext must be string"));const p=oh.buildActionObject({pageName:c,dataContext:l,dataContextParameters:u},this.c11nEnv),h=ce,{promise:g}=this.actionsApiPromise(h,p);return kp({type:h,payload:{...p,...d,skipSemanticUrl:Boolean(d.skipSemanticUrl)}}),g}changeHandler(c,l){oh.changeHandler(c,l)}eventHandler(c,l){oh.eventHandler(c,l)}triggerFieldChange(c,l,u=!1){const d=this.c11nEnv.getContextName(),p=this.c11nEnv.getPageReference(),h=sh.getContextPath(p,c);u||this.c11nEnv.getValidationApi().validate(l),this.c11nEnv.isInsideList()&&this.c11nEnv.getListActions().updateProperty(c,l);let g=this.c11nEnv.getValue(W.CLASS_ID);const f=c?c.split(".").filter((c=>!!c)):[];f.length>1&&(f.pop(),g=Wp(`.${f.join(".")}.classID`,p,d)),c=eh.trimDotForProperty(c),kp({type:ae,payload:{reference:h,value:l,context:d,pageReference:this.c11nEnv.getPageReference(),propertyName:c||this.c11nEnv.getComponentConfig().value,classID:g}})}updateFieldValue(c,l,u={}){const{removePropertyFromChangedList:d=!1,isArrayDeepMerge:p=!0,contextPageReference:h="",isListEntry:g=!1,skipDirtyValidation:f=!1}=u,m=this.c11nEnv.getContextName();let y=this.c11nEnv.getPageReference();const I=h?.startsWith(y)?h.replace(y,""):h;y=h||y;const E=sh.getContextPath(y,c);let A=!1;this.c11nEnv.isInsideList()&&this.c11nEnv.getListActions().updateProperty(I?`${I}${c}`:c,l,{isArrayDeepMerge:p}),this.c11nEnv.isBulkAction()&&(A=!0),c||(c=this.c11nEnv.getStateProps().value),Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,property:c,pageReference:y,context:m,isListEntry:g}),kp({type:re,payload:{reference:E,value:l,context:m,isArrayDeepMerge:p,skipDirtyValidation:f,...A&&{isStrictTracking:A},...d&&{removePropertyFromChangedList:d}}})}activateModalContainerItem(c){const l=ke,{context:u}=c,d=u&&u.includes(W.MODAL),p=oh.buildActionObject({...c,containerName:this.c11nEnv.getContainerName(),containerItemID:u},this.c11nEnv);d&&(p.containerName=W.MODAL,p.isModalAction=d),kp({type:l,payload:p});const{promise:h}=this.actionsApiPromise(l,p);return h}refreshCaseView(c,l,u,d={}){const{promise:p,actionMgrID:h}=this.actionsApiPromise("REFRESH_DATA"),{autoDetectRefresh:g,propertyName:f,preserveClientChanges:m,classID:y,context:I,optionalPayload:E}=d,A={actionMgrID:h,caseViewAction:!0,preserveClientChanges:m,propertyName:f,classID:y,optionalPayload:E};d.refreshFor&&(A.refreshFor=d?.refreshFor);const _=I||this.c11nEnv.getContextName(),C=this.c11nEnv.getPageReference();return!this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.IS_MULTI_RECORD_DATA)&&g&&(((c,l)=>ln(c)&&!cn(c,l))(_,C)||cn(_,C))?Gn(_,u,A):kn(c,l,_,u,A),p}openEmbeddedDataModal(c,l,u,d,p,h){const g=yt,f=l.getCaseInfo().getKey(),m=`${l.getPageReference().replace(G.CASE_INFO.CASE_INFO_CONTENT,"")}${u}[${d}]`,y={targetProperty:u,index:d,viewID:c,ID:f,actionType:p,interestPage:eh.convertPageRefToClipboardPageNotation(m),heading:h},I=oh.buildActionObject(y,this.c11nEnv),{promise:E}=this.actionsApiPromise(g,I);return Hd.getFeatureMap().granularUIRefresh&&(l.getMetadata().config.children[0].children||[]).forEach((c=>{const u=rn.trimAnnotation(c.config.value),d=gp(u.startsWith(".")?u.replace(".",""):u,c.config.classID);if(d?.isDeclarativeTarget){const c=l.getPageReference();Rn.addFieldNode(l.getContextName(),c+m,l.viewName,u,"",{isDeclarativeTarget:!0,propertyName:u,pageReference:c+m})}})),kp({type:g,payload:{...I,containerName:G.MODAL,skipSemanticUrl:!0}}),E}submitEmbeddedDataModal(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=It,u=this.c11nEnv.getPageReference().replace(G.CASE_INFO.CASE_INFO_CONTENT,""),d=Ju(c),p={containerItemID:c,containerName:this.c11nEnv.getContainerName(),doDeleteCaseSummary:!0,isInCreateStage:!1,ID:this.c11nEnv.getValue(G.CASE_INFO.CASE_INFO_ID),viewID:this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.VIEW_NAME),isFormValid:tl(d),interestPage:eh.convertPageRefToClipboardPageNotation(u),parentContext:this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.PARENT_CONTEXT),isModalAction:!1,target:this.c11nEnv.getTarget()};c&&c.includes(W.MODAL)&&(p.containerName=W.MODAL,p.isModalAction=!0);const h=oh.buildActionObject(p,this.c11nEnv),{promise:g}=this.actionsApiPromise(l,h);if(Il(d)){const[c,l,u]=In(this.c11nEnv.getPageReference());Rn.mutatePageList(this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.PARENT_CONTEXT),c,l,{type:rt,rowIndex:u}),kp({type:rt,payload:{pageReference:this.c11nEnv.getPageReference(),context:this.c11nEnv.getValue(W.CONTEXT_DATA_MODAL_VIEW.PARENT_CONTEXT),isListEntry:!0}})}return pu.executeOrQueueDeferredAction({type:l,payload:{...h,context:d}}),g}fillFormWithAI(c){if(!c)return Promise.reject(new Error(this.MSG_CONTAINERITEMID_REQUIRED));if("string"!=typeof c)return Promise.reject(new TypeError(this.MSG_CONTAINERITEMID_STRING));const l=Ju(c),u=this.c11nEnv.getPageReference(),{promise:d,actionMgrID:p}=this.actionsApiPromise(Et);return Gn(l,u,{actionMgrID:p,isFillFormWithAI:!0,preserveClientChanges:!1}),d}},Eu=class{constructor(c){this.c11nEnv=c}async getCaseStages(c,l){const u={caseID:c},{restApi:d,reqType:p}=sg("getCaseStages",u);return(await ic(d,{method:p},l)).data.stages}getCaseTypeName(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_TYPE_NAME)}getName(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_NAME)}getClassName(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_TYPE_ID)}getAvailableProcesses(){return this.c11nEnv.getValue(W.CASE_INFO.AVAILABLEPROCESSES)}getKey(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ID)}getID(){const c=this.getKey();if(c){const[,l]=c.split(" ");return l||c}}getAssignmentID(){return this.c11nEnv.getValue(W.CASE_INFO.ASSIGNMENT_ID)}getActions(){return this.c11nEnv.getValue(W.CASE_INFO.ACTION_BUTTONS)}getActiveFlowActionID(){return this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID)||this.c11nEnv.getValue(W.CASE_INFO.ASSIGNMENTACTION_ID)}getParentCaseInfo(){return this.c11nEnv.getValue(W.CASE_INFO.PARENTCASEINFO)}isPerform(){return this.c11nEnv.getValue(`${W.CONTEXT_DATA}${W.CASE_VIEW_MODE_PROP}`)===W.PERFORM_MODE}isReview(){return this.c11nEnv.getValue(`${W.CONTEXT_DATA}${W.CASE_VIEW_MODE_PROP}`)===W.REVIEW_MODE}isAssignmentInCreateStage(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO);return sn(c)}isLocalAction(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO);return on(c)}getCurrentAssignmentViewName(){let c=null,l=!1;if(this.c11nEnv.getValue("context_data.caseViewMode")===W.PERFORM_MODE){if(this.isLocalAction())return c;if(this.isAssignmentInCreateStage())l=!0;else{const l=this.c11nEnv.getTarget(),u=this.c11nEnv.getContextName(),d=Fu(l,u),{config:p}=l&&u?d&&d.view:this.c11nEnv.getMetadata();c=p?.type===W.VIEW?p?.name:null}(c&&c.startsWith(W.PROPERTY_ANNOTATION)||l)&&(c=this.c11nEnv.getValue(W.CASE_INFO.VIEW_NAME))}return c}getActionRefreshConditions(){const c=this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID),l=K(this.c11nEnv.getContextName());let u;l&&(u=$p(l));const d=u?.caseInfo?.availableActions,p=$p(this.c11nEnv.getContextName()),h=p?.caseInfo?.refreshConditions;if(c){if(d){const l=d.find((l=>l.ID===c));return l?l.refreshConditions:h}return h}return this.c11nEnv.getValue(W.CASE_INFO.ACTION_REFRESH_CONDITIONS)}getBusinessID(){return this.c11nEnv.getValue(W.CASE_INFO.BUSINESS_ID)}getAssignments(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO)?.assignments}getChildAssignments(){return this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO)?.childCases?.[0]?.assignments}isCaseWideLocalAction=()=>{const c=this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID),l=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS);if(l&&c){const u=l.find((l=>l.ID===c));return"Case"===u?.type}return!1};getAllAssignments(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS),l=this.c11nEnv.getValue(W.CASE_INFO.ASSIGNMENT_LABEL),u=this.c11nEnv.getValue(W.CASE_INFO.D_CASE_ASSIGNMENTS_RESULTS)||[],d=this.getChildAssignments()||[];let p=JSON.parse(JSON.stringify(d));p=p.map((c=>(c.isChild=!0,c)));const h=[...u,...p];let g=JSON.parse(JSON.stringify(h));return c&&!this.isPerform()&&(g=g.map((c=>(c.name=this.getActiveCaseActionName()||c?.name||l,c)))),g}getActiveCaseActionName(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS),l=this.c11nEnv.getValue(W.CASE_INFO.ACTIVE_ACTION_ID),u=c.find((c=>c.ID===l));return u?.name||""}getFirstCaseActionName(){const c=this.c11nEnv.getValue(W.CASE_INFO.CASE_INFO_ACTIONS);return c[0]?.name||""}hasAssignments(){const c=this.c11nEnv.getValue(W.CASE_INFO.D_CASE_ASSIGNMENTS_RESULTS),l=this.getChildAssignments();return!!(c||l||this.isCaseWideLocalAction())}hasMessages=()=>!!this.c11nEnv.getValue("caseMessages");hasGetNextWorkLinks(){return!!this.c11nEnv.getValue(W.CASE_INFO.GETNEXTWORK)}},{RESOURCE_TYPES:Au}=G,_u=class{static openCase(c,l,u,d={}){const p={insKey:c,acTargetName:u,actionMgrID:gn.getNextActionMgrId(),context:l,...d},h=fe;d&&d.channelName&&(p.headers={},p.headers[W.X_ORIGIN_CHANNEL]=d.channelName);const{promise:g}=gn.actionManagerPromise(h,p.actionMgrID);return kp({type:h,payload:p}),g}static openAssignment(c,l,u,d={}){const p={assignmentID:c,vcName:u,doDeleteCaseSummary:!0,actionMgrID:gn.getNextActionMgrId(),context:l,...d},h=Ee;d&&d.channelName&&(p.headers={},p.headers[W.X_ORIGIN_CHANNEL]=d.channelName);const{promise:g}=gn.actionManagerPromise(h,p.actionMgrID);return kp({type:h,payload:{...p}}),g}static createCase(c,l,u,d={}){const p=ge,h={class:c,acTargetName:u,actionMgrID:gn.getNextActionMgrId(),context:l,...d};d&&d.channelName&&(h.headers={},h.headers[W.X_ORIGIN_CHANNEL]=d.channelName);const{promise:g}=gn.actionManagerPromise(p,h.actionMgrID);return kp({type:p,payload:{...h}}),g}static getNextWork(c,l,u={}){const d=Ee,p={isGetNextWork:!0,vcName:l,doDeleteCaseSummary:!0,actionMgrID:gn.getNextActionMgrId(),context:c,...u},{promise:h}=gn.actionManagerPromise(d,p.actionMgrID);return kp({type:d,payload:{...p}}),h}static getOpenedCaseItems(c){const l=[],u=Uu(c);if(u){const{items:d={}}=u,p=Object.keys(d),h=zu(c);p.forEach((u=>{if(d[u]&&(d[u].resourceType===Au.CASE||d[u].resourceType===Au.ASSIGNMENT)){const{key:p="",context:g}=d[u],f=d[u],m=p.substring(p.indexOf(" ")+1),y=Wp(".caseTypeID",W.CASE_INFO.CASE_INFO,g),I=h===u;l.push({...f,key:p,workID:p,caseID:m,className:y,context:g,containerItemID:u,target:c,active:I})}}))}return l}static getCaseDetails=c=>{const l={caseID:c},{restApi:u,reqType:d}=sg(ze,l);return ic(u,{method:d})};static getCaseBulkActions=async c=>{const{restApi:l,reqType:u}=sg("getBulkActions"),d=c.map((c=>({ID:c}))),p=d.length,h=p/5,g={},f=[];for(let I=0;I<p;I+=h)g.cases=d.slice(I,I+h),g.cases.length&&f.push(ic(l,{method:u,body:g}));const m=await Promise.all(f);let y=[];for(let I=0;I<m.length;I+=1)0!==I?y.length&&(y=y.filter((c=>m[I].data.availableActions.some((l=>c.ID===l.ID))))):y=m[I].data.availableActions;return y};static getCaseBulkActionsByCaseTypeID=async c=>{const l={casetypeID:c},{restApi:u,reqType:d}=sg("getCaseBulkActions",l),p=await ic(u,{method:d});let h=[];return p.data?.availableActions?.length&&(h=p.data.availableActions),h}};class Bu{constructor(c){Bu._instance=this,this.context=`${c}/${W.SUGGESTION}`,Vp()?.getState().data?.[this.context]||kp({type:Be,payload:{context:this.context,data:{}}})}getField(c){return Wp(c,"",this.context)}setField(c,l){kp({type:re,payload:{reference:c,value:l,context:this.context}})}removeField(c){kp({type:_e,payload:{reference:c,context:this.context}})}setState(c){kp(uh({context:this.context,data:c,isArrayDeepMerge:!0}))}}const Cu=Bu,Su=class{static getSharedState(c){const l=c.startsWith(".")?c.substring(1):c,u=Bp();return u?eh.getIn(u,l):null}static setSharedState(c,l){c&&kp(Hh({key:c,value:l}))}static updateState(c,l,u,d={}){const{isArrayDeepMerge:p=!0,pageReference:h}=d;c&&l&&kp(qh({context:c,reference:h?`${h}.${l}`:l,value:u,isArrayDeepMerge:p}))}static getSuggestionsContext(c){return new Cu(c)}},Tu=class{constructor(c,l,u){this.meta=c,this.datasource=l,this.index=0,this.options=u,this.datasourceObj=sh.getPropertyValue(l,u.pageReference,u.context)}hasNext(){return this.index<this.datasourceObj.length}next(){if(!this.hasNext())throw new Error("No Children");const c=sh.getContextPath(this.datasource,this.index);return this.index+=1,Ou({meta:this.meta,options:{...this.options,pageReference:c}})}resetIndex(){this.index=0}};class qu{constructor(c,l){this.children=c,this.index=0,this.options=l}hasNext(){return this.index<this.children.length}next(){if(!this.hasNext())throw new Error("No Children");const c=this.children[this.index];return this.index+=1,Ou({meta:c,index:this.index,options:this.options})}resetIndex(){this.index=0}}class Yu{static allowedComponetsForBulkProcessing={Currency:!0,TextInput:!0,Phone:!0,Percentage:!0,Email:!0,Integer:!0,Decimal:!0,URL:!0,SemanticLink:!0,Checkbox:!0,RadioButtons:!0,DateTime:!0,Date:!0,Time:!0,Text:!0,TextArea:!0,RichText:!0,Dropdown:!0,Search:!0,Location:!0,Attachment:!0,AutoComplete:!0,MultiSelect:!0,UserReference:!0,Region:!0,TextContent:!0,View:{Forms:!0,DefaultForm:!0,OneColumn:!0,TwoColumn:!0,ThreeColumn:!0}};static getItemView(c,l){const u=[];if(c&&["portal","view"].includes(l)){const{accessedOrder:l,items:d}=c;if(l&&d){const c=l[l.length-1];d[c]&&d[c].view&&Object.keys(d[c].view).length>0&&u.push(d[c])}}return u}static getDependentProperties=c=>{let l=[];return c._rawConfig?.config?.parameters?l=Object.values(c._rawConfig?.config?.parameters||{}):c.getFieldMetadata(c.getStateProps()?.value)?.datasource?.parameters&&(l=(c.getFieldMetadata(c.getStateProps()?.value)?.datasource?.parameters||[]).map((c=>c?.value))),l.filter((c=>sl.isProperty(c))).map((c=>sl.getPropertyName(c)))}}const Nu=new Yu;let Pu;Object.freeze(Nu);const Du=(c,l,u)=>{c&&(Object.keys(c).forEach((d=>{if("children"!==d){const p=c[d],h=rn.trimAnnotation(p);if("string"!=typeof h&&"string"!=typeof p||!(eh.isValidAnnotation(p)&&eh.isPropertyRef(h)||p.startsWith("@W ")||p.startsWith("@E ")||p.startsWith("@ATTACHMENT "))){if(Array.isArray(h))h.forEach(((c,u)=>{const p={parentStateObj:l,parentKey:d,isObjHasValue:!!l[d]};l[d]=l[d]||[],l[d][u]=Object.create({}),Du(c,l[d][u],p)}));else if(h&&"object"==typeof h&&"exp"!==h.type){const c={parentStateObj:l,parentKey:d,isObjHasValue:!!l[d]};l[d]=l[d]||{},Du(h,l[d],c)}}else u&&u.parentKey&&(u.isObjHasValue=!0),l[d]=h}})),u&&!u.isObjHasValue&&delete u.parentStateObj[u.parentKey])},Ru=(c,l)=>{c._inheritedProps=c._inheritedProps||[],c.inheritedProps=[...c._inheritedProps,...eh.deepClone(l.inheritedProps)]};class Zu{constructor(c){const{meta:l,isRoot:u,options:d={},useCustomContext:p}=c;this.meta=l,this._isRoot=u,this.options=d,this.useCustomContext=p,this._rawConfig=l?.config,this._isExpressionExist=!1,this._isWhenExist=!1,this._isValidatorExist=!1,this._pageReference="",this._referenceContext="",this._contextName="",this._stateProps={},this._actions={},this._children="",this._additionalRegisteredProps={},this._caseInfo=null,this.viewName=d.viewName,this.parentViewName=d.viewName??"",this._referenceList=d.referenceList||"",this._isInsideList=d.isInsideList||!1,this._inheritedConfig={},this._localeRuleName=d.localeReference,this._containerTarget=d.target,this.xrayInfo={},this._readOnly=l?.config?.readOnly||d.readOnly,this._hasSuggestions=!1,this._actionsApi=null,this._classID=null,this.index=c.index,this.categoryName=d.categoryName||"",d.inheritedConfig&&(this._inheritedConfig=eh.deepClone(d.inheritedConfig)),l?.config?.inheritedProps&&Ru(this._inheritedConfig,l?.config),Du(this._rawConfig,this._stateProps),this._isState=!eh.isObjectEmpty(this._stateProps),this._rawConfig&&this._rawConfig.config&&(this._isExpressionExist=eh.isExpressionExist(this._rawConfig.config),this._isWhenExist=eh.isWhenExist(this._rawConfig.config),this._isValidatorExist=Lr.isValidatorExist(this._rawConfig.config)),this._isRoot?this._contextName=G.APP.APP:this._contextName=this.meta?.config?.contextName||this.options.context,this._type=this.meta?.type;let h=this.options.pageReference;if(this.options.pageReference&&(h=rn.handleAnnotation(this.options.pageReference,this)),this._pageReference=sh.getContextPath(h||this.options.parentPageReference,this._pageReference),this._pageReference||(this._pageReference=""),"reference"===this._type&&(this._rawConfig=l),"reference"===this._type&&eh.isWhenExist({visibility:this.meta?.config?.visibility})&&$n(this.viewName,this._contextName,this._pageReference),"reference"!==this._type&&l&&(this._rawConfig=sh.resolveReference(l,this)),this._rawConfig){const c=this.getRawConfigProps();c&&(this._localeRuleName=rn.trimAnnotation(c.localeReference)||d.localeReference,this._isExpressionExist=eh.isExpressionExist(c),this._isWhenExist=eh.isWhenExist(c),this._isValidatorExist=Lr.isValidatorExist(c)),this._children=this._rawConfig.children,this._rawConfig?.type?.toLowerCase()===W.VIEW&&this._rawConfig.name&&(this.viewName=rn.handleAnnotation(this._rawConfig.name,this)),this.options.hasForm&&(c=>{let l=!1;if(c.isWhenExist())l=!0;else{const u=c.getRawMetadata()?.config?.value;if(u){const d=gp(rn.getLeafPropertyName(u),sh.resolveClassID(u,c.getPageReference(),c.getContextName()));l=!!d?.isDeclarativeTarget,!l&&d?.datasource?.parameters&&(l=((c,l)=>{let u=!1;if(Array.isArray(l)){const d=l=>{const d=l.value;return d.startsWith("@P")&&(u=Bn(c,d)),u};l.some(d)}else if("object"==typeof l)for(const d in l)if(l[d].startsWith("@P")&&(u=Bn(c,l[d]),u))break;return u})(c,d?.datasource?.parameters)),l||(l=d?.datasource?.tableType===W.DECISION)}}l&&$n(c.getCurrentView(),c.getContextName(),c.getPageReference())})(this)}}isDeclarativeTarget(){let c=!1;if(this.getValue(this._pageReference)||""===this._pageReference){const l=rn.trimAnnotation(this.getPropertyName()),u=this.getFieldMetadata(l);c=u?.isDeclarativeTarget||!1}return c}_getPropertyName(){const c=rn.trimAnnotation(this.getPropertyName());return""===this._pageReference&&c.startsWith(".")?c.substring(1,c.length):c}addFieldNode(){const c=this._getPropertyName(),{value:l,label:u,required:d,readOnly:p,disabled:h,visibility:g,validationType:f,caption:m,allowMultiple:y}=this.getRawConfigProps();if(this.getValue(this._pageReference)||""===this._pageReference){const I="Address"===this._type&&this._rawConfig?.config?.associatedView?rn.trimAnnotation(this._rawConfig.config.associatedView):"",E=u||m,A={target:this._containerTarget,context:this._contextName,pageReference:this._pageReference,propertyName:rn.trimAnnotation(l),label:E?.startsWith("@")?rn.handleAnnotation(E,this,void 0):E,required:d,readOnly:p,disabled:h,visibility:g||this.options?.visibility,skipRequiredValidation:this.options?.isBulkAction,inheritedProps:this.getInheritedProps(),useCustomContext:this.useCustomContext,value:l,validationType:f,componentName:this._rawConfig?.type,hasSuggestions:this._hasSuggestions,isInsideList:this.isInsideList(),index:this.index,allowMultiple:y,isDeclarativeTarget:this.isDeclarativeTarget()};Rn.addFieldNode(this._contextName,this._pageReference,(I||this.categoryName||this.viewName)??"",c,this.getValue(c),A)}}removeNode(){if(!this.isVisible())if(Object.hasOwn(this._rawConfig?.config??{},"value"))Rn.removeFieldNode(this._contextName,this._pageReference,this.viewName||"",rn.trimAnnotation(this.getPropertyName()),this.index);else{const c=this._rawConfig?.config?.context?`${this._pageReference}${this._rawConfig?.config.context}`:this._pageReference;Rn.removeViewNode(this._contextName,c,this._rawConfig?.config?.name||this._rawConfig?.config?.id||"",this.index)}}addViewNode(){this._rawConfig?.type?.toLowerCase()===W.VIEW&&this._rawConfig.name&&this.viewName&&Rn.addViewNode(this._contextName,this._pageReference,this.viewName,this.parentViewName),"Group"===this._rawConfig?.type&&this._rawConfig?.config?.id&&Rn.addViewNode(this._contextName,this._pageReference,this._rawConfig.config.id,this.parentViewName),"Address"===this._rawConfig?.type&&this._rawConfig?.config?.associatedView&&Rn.addViewNode(this._contextName,this._pageReference,rn.trimAnnotation(this._rawConfig.config.associatedView),this.parentViewName),"deferload"===this._rawConfig?.type?.toLowerCase()&&this._rawConfig.config?.name&&Rn.addViewNode(this._contextName,this._pageReference,this._rawConfig.config.name,this.parentViewName)}addWhenNode(){let c="",l="";const u=eh.getWhenNames(this._rawConfig?.config),d=this.getRawConfigProps();if(d?.type&&d?.type?.toLowerCase()===W.VIEW)l=W.CONTEXT_TREE_NODE_TYPES.VIEW,c=this.getCurrentView();else{l=W.CONTEXT_TREE_NODE_TYPES.FIELD;const u=this.getPropertyName();c=rn.isProperty(u)?rn.trimAnnotation(u):""}c&&u.forEach((u=>{Rn.addWhenNode(this.getContextName(),this.getPageReference(),l,c,u,{pageReference:this.getPageReference(),context:this.getContextName()})}))}updateContextTree(){if(this.isVisible()&&(this.addViewNode(),this._rawConfig?.config&&Object.hasOwn(this._rawConfig.config,"value")&&"DISPLAY_ONLY"!==this._inheritedConfig.displayMode&&"DISPLAY_ONLY"!==this._rawConfig.config?.displayMode&&this.addFieldNode(),(this._rawConfig?.type?.toLowerCase()!==W.VIEW||"Editable"===this._rawConfig.config?.renderMode)&&this._rawConfig?.config?.referenceList)){const{value:c,label:l,required:u,readOnly:d,disabled:p,visibility:h,validationType:g,selectionMode:f,selectionList:m,selectionKey:y,referenceList:I,renderMode:E,caption:A}=this.getRawConfigProps(),_=l||A;Rn.addPageListNode(this._contextName,this._pageReference,this.viewName??"",rn.trimAnnotation(this.getPropertyName()),{target:this._containerTarget,context:this._contextName,pageReference:this._pageReference,propertyName:rn.trimAnnotation(this.getPropertyName()),label:_?.startsWith("@")?rn.handleAnnotation(_,this,void 0):_,required:u,readOnly:d,disabled:p,visibility:h||this.options.visibility,skipRequiredValidation:this.options.isBulkAction,inheritedProps:this.getInheritedProps(),useCustomContext:this.useCustomContext,value:c,validationType:g,componentName:this._rawConfig.type,type:this._rawConfig.config?.type,hasSuggestions:this._hasSuggestions,isInsideList:this.isInsideList(),selectionMode:f,selectionList:m,renderMode:E,referenceList:I,selectionKey:y,index:this.index});const C=this.getValue(rn.trimAnnotation(this.getPropertyName()),this._pageReference)||[];Rn.updatePageListNode(this._contextName,this._pageReference,rn.trimAnnotation(this.getPropertyName()),C.length)}this.isWhenExist()&&this.addWhenNode(),this.removeNode()}setXRayInfo(c){eh.mergeDeep(c,this.xrayInfo)}getXRayInfo(){return this.xrayInfo}getStateProps(){return this._stateProps}setStateProps(c){eh.mergeDeep(c,this._stateProps)}getMetadata(){return this._rawConfig}getCaseInfo(){return this._caseInfo||(this._caseInfo=new Eu(this)),this._caseInfo}getCaseLocaleReference(){const c=this.getCaseInfo(),l=c.getClassName();return zd.getCaseLocaleReference(l,c.getCaseTypeName())}getListActions(){return wr(this)}getReferenceList(){return this._referenceList}isInsideList(){return this._isInsideList||/\[\d+\]/g.test(this.getPageReference())}getRawMetadata(){return this.getMetadata()}setReferenceList(c){this._referenceList=c}getComponentConfig(){return this.getMetadata()?.config||{}}isExpressionExist(){return this._isExpressionExist}isWhenExist(){return this._isWhenExist}isConditionExist(){return this.isExpressionExist()||this.isWhenExist()}isBoundToState(){return this._isState}getPageReference(){return this._pageReference}getPropertyName(){const c=this.getComponentConfig();let l;return l="multi"===c.selectionMode?"selectionList":"single"===c.selectionMode&&c.selectionKey?"selectionKey":"Editable"===c.renderMode?"referenceList":"Address"===this._type?"addressProp":"value",this.getComponentConfig()[l]}getFullReference(){const c=this.getPageReference(),l=this.getPropertyName();return sh.getContextPath(c,l)}getContextName(){return this._contextName}getContainerName(){const{type:c}=this.getMetadata()||{},l=[W.CONTAINERS.ROOT_CONTAINER,W.CONTAINERS.VIEW_CONTAINER,W.CONTAINERS.FLOW_CONTAINER,W.CONTAINERS.MODAL_VIEW_CONTAINER,W.CONTAINERS.PREVIEW_VIEW_CONTAINER,W.CONTAINERS.HYBRID_VIEW_CONTAINER],{acTargetName:u=Mu.PRIMARY,name:d,routingInfo:p}=this.getComponentConfig();return(c&&l.includes(c)||"@ROUTING_INFO"===p)&&d?d:this.options.containerName||u}getTarget(){return this._containerTarget}getCurrentView(){return this.viewName}populateSuggestionProps(c){if(this._rawConfig?.config&&Object.hasOwn(this._rawConfig.config,"value")&&this.getStateProps()?.value&&this.options.hasForm){const l=f?.getStore()?.getState()?.data[`${this.getContextName()}/${W.SUGGESTION}`],u=this.getStateProps()?.value,d=sh.getContextPath(this.getPageReference(),u),p=l?Su.getSuggestionsContext(this.getContextName()).getField(d):void 0;this._hasSuggestions=!!p,c.hasSuggestions=this._hasSuggestions,this._stateProps.hasSuggestions=this._hasSuggestions}}getConfigProps(c={}){const l={...Mr.getDefaultsforType(this._type),readOnly:this._readOnly,...this._rawConfig&&this._rawConfig.config,...this._additionalRegisteredProps,...this._inheritedConfig};return this.populateSuggestionProps(l),this.resolveConfigProps(l,c),eh.resolveStringBooleans(c)}getRawConfigProps(){const c={...Mr.getDefaultsforType(this._type),...this._rawConfig?.config,...this._additionalRegisteredProps,...this._inheritedConfig};return this.populateSuggestionProps(c),c}resolveConfigProps(c,l={}){return c&&(sh.resolveProps(c,l,this),rn.handleComponentMapping(l,{type:this.getComponentName(),config:c},this)),l}registerAdditionalProps(c={}){return Object.assign(this._additionalRegisteredProps,c),Du(c,this._stateProps),this.resolveConfigProps(this._additionalRegisteredProps)}deRegisterAdditionalProps(c=[]){return c.forEach((c=>{delete this._additionalRegisteredProps[c]})),!0}populateAdditionalProps(c){const l=this.getComponentName(),u=this.getComponentConfig(),d=l===W.ROOT_CONTAINER&&"portal"!==c.renderingMode;if(l===W.MODAL_VIEW_CONTAINER||l===W.CASE_CREATE_STAGE){const l=zu(`${W.APP.APP}/${this.getContainerName()}`),u=Qn({context:l,category:G.PAGE});c.pageMessages=u,this._stateProps.pageMessages=c.pageMessages}if(this.isEditable()){let{value:l}=this.getStateProps();void 0===l&&"multi"===this.getComponentConfig()?.selectionMode?l=this.getStateProps().selectionList||rn.trimAnnotation(this.getRawConfigProps().selectionList):!l&&"Editable"===this.getComponentConfig()?.renderMode&&this.getStateProps().referenceList&&(l=this.getStateProps().referenceList);const u=Qn({property:l,pageReference:this.getPageReference(),context:this.getContextName(),type:G.MESSAGES.MESSAGES_TYPE_ERROR}),d=Qn({property:l,pageReference:this.getPageReference(),context:this.getContextName(),type:G.MESSAGES.MESSAGES_TYPE_INFO});if(u&&u[0]){const l=u.map((c=>zd.getLocaleValue(c.message,"Messages")));c.validatemessage=l.join(". "),c.status=W.FIELD_LEVEL_ERROR,this._stateProps.validatemessage=c.validatemessage,this._stateProps.status=c.status}d&&d[0]&&(c.infoMessage=d[0].message,c.status=W.FIELD_LEVEL_WARNING,this._stateProps.infoMessage=c.infoMessage,this._stateProps.status=c.status)}if(l===W.ROOT_CONTAINER){const l=nr(d,zu(`${W.APP.APP}/${this.getContainerName()}`));c.httpMessages=l,this._stateProps.httpMessages=c.httpMessages;const u=Su.getSharedState("isLoggedOut");c.isLoggedOut=u,this._stateProps.isLoggedOut=u;const p=Qn({context:W.APP.ROOT,category:"PAGE"});c.pageMessages=p,this._stateProps.pageMessages=c.pageMessages}if(l===W.HYBRID_VIEW_CONTAINER){const l=Qn({context:W.APP.APP,category:W.HTTP});c.httpMessages=l,this._stateProps.httpMessages=l}if(l===W.APP_SHELL&&c.portalDocMode===W.CONTAINER_TYPE.MULTIPLE&&(c.activeCases=_u.getOpenedCaseItems(`${G.APP.APP}/${W.PRIMARY}`),this._stateProps.activeCases=c.activeCases),l===W.APP_SHELL){const l=Qn({context:W.APP.APP,category:"PAGE"});c.pageMessages=l,this._stateProps.pageMessages=c.pageMessages}if(c.value&&l===W.SCALARLIST&&(this._stateProps.value=c.value),l===W.APP_SHELL||l===W.MODAL_VIEW_CONTAINER||l===W.CASE_CREATE_STAGE||u.template===W.CASE_PREVIEW){let l=Qn({context:W.APP.APP,category:"HTTP"});const u=Qn({context:zu(`${W.APP.APP}/${this.getContainerName()}`),category:"HTTP"});l?u&&(l=l.concat(Qn({context:zu(`${W.APP.APP}/${this.getContainerName()}`),category:"HTTP"}))):l=Qn({context:zu(`${W.APP.APP}/${this.getContainerName()}`),category:"HTTP"}),c.httpMessages=l?l.map((c=>c.message)):l,this._stateProps.httpMessages=c.httpMessages,l?.forEach((l=>{l.errorDetails&&(c.errorDetails=c.errorDetails?c.errorDetails.push(...l.errorDetails):l.errorDetails,this._stateProps.errorDetails=c.errorDetails),l.correlationID&&(c.correlationID=l.correlationID)}))}if(l===W.VIEW_CONTAINER||l===W.FLOW_CONTAINER||l===W.MODAL_VIEW_CONTAINER||l===W.PREVIEW_VIEW_CONTAINER||l===W.ROOT_CONTAINER){if(c.routingInfo=St(this.getContainerName(),this._contextName),l===W.ROOT_CONTAINER&&(c.rootConfig=Yu.getItemView(c.routingInfo,c.renderingMode),this._stateProps.rootConfig=c.rootConfig),this._stateProps.routingInfo=c.routingInfo,l===W.FLOW_CONTAINER){const l=Qn({context:this.getContextName(),category:W.CASEMESSAGES}),u=this.getContextName();c.caseMessages=l,this._stateProps.caseMessages=c.caseMessages,c.caseViewMode=this.getValue("context_data.caseViewMode"),this._stateProps.caseViewMode=c.caseViewMode;const d=td(u)[0];if(d){const l=zu(d),u=f?.getStore()?.getState()?.data;u&&l&&(c.lastUpdateTime=u[l]?.caseInfo?.lastUpdateTime,this._stateProps.lastUpdateTime=u[l]?.caseInfo?.lastUpdateTime);const p=Qn({context:l,category:G.PAGE}),h=Qn({context:l,category:"HTTP"});c.httpMessages=h,c.pageMessages=p,this._stateProps.pageMessages=c.pageMessages,this._stateProps.httpMessages=c.httpMessages,h?.forEach((l=>{l.errorDetails&&(c.errorDetails=c.errorDetails?c.errorDetails.push(...l.errorDetails):l.errorDetails,this._stateProps.errorDetails=c.errorDetails),l.correlationID&&(c.correlationID=l.correlationID)}))}}if(c.loadingInfo=this.getLoadingStatus(this.getContextName()),c.assignmentNames=this.getCaseInfo().getAssignments()?.map((c=>c.name)),c.childAssignmentNames=this.getCaseInfo().getChildAssignments()?.map((c=>c.name)),l===W.MODAL_VIEW_CONTAINER){const l=c.routingInfo?.accessedOrder||[],u=l[l.length-1];u&&(c.loadingInfo=this.getLoadingStatus(u))}this._stateProps.loadingInfo=c.loadingInfo,this._stateProps.assignmentNames=c.assignmentNames,this._stateProps.childAssignmentNames=c.childAssignmentNames}else u.template===W.CASE_VIEW||u.template===W.CASE_PREVIEW||u.template===W.OBJECT_PAGE?(c.caseInfo=this.getCaseSummary(),this._stateProps.caseInfo=c.caseInfo):l===W.CASE_STAGES&&(c.stages=this.getCaseStages(),c.stageID=this.getStageID(),this._stateProps.stages=c.stages,this._stateProps.stageID=c.stageID);this.populateFieldMetadata(c),this.updateContextTree()}isReadOnlyField(c,l){const u=sl.isPropertyInternal(l),d=c.datasource,p=this.getComponentConfig().isSearchField,{isClassKey:h,isSpecial:g,isDeclarativeTarget:f}=c.fieldMetadata,m=c.listType!==W.ASSOCIATED;return!p&&(f||u||!d&&(h||g)&&m)}getPropertyDetails(c,l,u){return c===W.ASSOCIATED?{propertyValue:l,propertyAnnotation:W.ASSOCIATED_PROPERTY_ANNOTATION}:{propertyValue:u,propertyAnnotation:W.PROPERTY_ANNOTATION}}updateConfigData(c,l,u){c.fieldMetadata=l,this.isReadOnlyField(c,u)&&(c.readOnly=!0,this._stateProps.readOnly=c.readOnly,c.fieldMetadata.isDeclarativeTarget&&this.registerAdditionalProps({readOnly:!0})),c.fieldMetadata?.isReadOnly&&(c.readOnly=!0,this.registerAdditionalProps({readOnly:!0}))}populateFieldMetadata(c){const{value:l,datasource:u,listType:d}=this.getComponentConfig(),{propertyValue:p,propertyAnnotation:h}=this.getPropertyDetails(d,u,l);if(p&&"string"==typeof p&&(p.includes(h)||p.includes(W.ATTACHMENT_ANNOTATION))){const l=rn.getPropertyName(p),u=this.getFieldMetadata(l);u&&this.updateConfigData(c,u,l)}}resolvePropertyMetadata(c,l){if(!c)return c;const u=wp(`${this._pageReference}.${l}`,this._contextName);return(u||null===u)&&(c.additionalInformation=u),c}getFieldMetadata(c){if(!c)return null;const l=c.split(".");if(l.length<2){let l=this.getValue(W.CLASS_ID);return!l&&this._rawConfig&&this._rawConfig.config&&this._rawConfig.config.ruleClass&&(l=this._rawConfig.config.ruleClass),this.resolvePropertyMetadata(gp(c,l),c)}return this.resolvePropertyMetadata(gp(l.pop(),this.getValue(`.${l.join(".")}${W.CLASS_ID}`)),c)}getCurrentPageFieldMetadata(c=null){let l=this.getPageReference().split(".");null!==c&&(l=c.split("."));const u=l.pop();return this.resolvePropertyMetadata(gp(u,this.getValue(`${l.join(".")}${W.CLASS_ID}`)))}getCurrentClassID(){return this._classID??this.getValue(W.CLASS_ID)}getCaseSummary(){const c={...this.getDataObject()[G.CASE_INFO.CASE_INFO]};return c.CaseID=c.CaseID||this.getValue(G.CASE_INFO.CASE_INFO_PZINSKEY),{...c,isCaseWideAction:()=>cn(this.getContextName(),this.getPageReference())}}getReferencedUser(c){const l=this.getValue("referencedUsers");if(Array.isArray(l)){const u=l.find((l=>l.UserID===c));if(u)return{userId:u.UserID,UserName:u.UserName}}return l&&l[c]?l[c]:null}getCaseStages(){return this.getDataObject()[G.CASE_INFO.CASE_INFO].stages}getStageID(){return this.getDataObject()[G.CASE_INFO.CASE_INFO].stageID}getActions(){return this._actions}isRoot(){return this._isRoot}resolveContextProps(c){const{value:l}=this.getStateProps();l&&(c.error=this.getContextDataValue(`${this.getPageReference()+l}.error`),c.validatemessage=this.getContextDataValue(`${this.getPageReference()+l}.validatemessage`))}isValidatorExist(){return!!this._isValidatorExist}getValidationApi(){return new Cl(this)}isEditable(){return this._rawConfig&&this._rawConfig.config&&!(this._inheritedConfig&&this._inheritedConfig.readOnly)&&(Object.hasOwn(this._rawConfig.config,"value")||this._rawConfig.config.selectionList||"Editable"===this._rawConfig.config.renderMode&&this._rawConfig.config.referenceList)&&!("string"==typeof this._rawConfig.config?.value&&this._rawConfig.config.value.includes("@FILTERED_LIST"))&&!(Object.hasOwn(this._rawConfig.config,"readOnly")&&("true"===this._rawConfig.config.readOnly||!0===this._rawConfig.config.readOnly))&&!(Object.hasOwn(this._rawConfig.config,"disabled")&&!0===this._rawConfig.config.disabled)}isVisible(){return this._rawConfig?.config&&Object.hasOwn(this._rawConfig?.config,"visibility")&&"string"==typeof this._rawConfig?.config?.visibility?rn.handleAnnotation(this._rawConfig?.config?.visibility,this):"string"!=typeof this.options?.visibility||rn.handleAnnotation(this.options?.visibility,this)}isReadOnly(){return void 0!==this._readOnly&&("true"===this._readOnly||!0===this._readOnly||"string"==typeof this._readOnly&&rn.handleAnnotation(this._readOnly,this))}hasChildren(){return!!this._children}getComputedVisibility(){const c="reference"===this._type&&this.getReferencedView()?this.getReferencedViewPConnect().getPConnect():this;if(!1===this.getConfigProps().visibility)return!1;if(!1===this.getConfigProps().requiresVisibleChildren)return!0;const l=c.getConfigProps(),u={includeTypes:["Group","Region","View"],excludeTemplates:["ListView","SimpleTable","StudioTable"]};let d=c._type&&u.includeTypes.includes(c._type)&&!u.excludeTemplates.includes(l.template);if(!!l.highlightedData&&l.highlightedData.length&&l.showHighlightedData&&(d=!1),!d)return!0;const p=c.getChildren();return!!p&&p.some((c=>c.getPConnect().getComputedVisibility()))}getChildrenIterator(){return this._children.setContext(this.getPageReference()),this._children}setAction(c,l){this._actions[c]=l}getComponentName(){return this._rawConfig&&this._rawConfig.type}isComponentRefreshable(){return!(!this._rawConfig||!this._rawConfig.isRefreshable)}getDataObject(c){return $p(c||this.getContextName())}getImagePath(c){return`${Vr.getConstellationServiceUrl()}/v860/${Vr.getAppAlias()}/image/${c}?org=${Gd.getOrganizationName()}`}skipRequiredValidation(){return this.options.isBulkAction}isBulkAction(){return this.options.isBulkAction}getChildren(){if(this._children&&this._children.length){const c=((c,l)=>{const u=!!c?.repeat;if(c?.["repeat-self"])return new Tu(c,c.context||"",l);if(u){const u=qp(`${l.context}.${W.SUMMARY_OF_LISTS}`,c.pageReference,l.context);return new Tu(c.children[0],u||c.context,l)}return c?.children?new qu(c.children,l):void 0})(this._rawConfig,{pageReference:this._pageReference,context:this._contextName,localeReference:this._localeRuleName,hasForm:this.options.hasForm,isBulkAction:this.options.isBulkAction,containerName:this.getContainerName(),containerItemName:this.options.containerItemName,viewName:this.viewName,inheritedConfig:this._inheritedConfig,target:this._containerTarget,readOnly:this._readOnly,categoryName:"Group"===this._type?this._rawConfig?.config?.id:null}),l=[];for(;c?.hasNext();){const u=c.next();if(this.isBulkAction()){const c=u.getPConnect().getComponentName(),{template:l}=u.getPConnect().getConfigProps();if(!c||!0!==Yu.allowedComponetsForBulkProcessing[c]&&!0!==Yu.allowedComponetsForBulkProcessing[c]?.[l])continue}l.push(u)}return c?.resetIndex(),l}return[]}setInheritedProp(c,l){this._inheritedConfig[c]=l}getLocaleRuleName(){return this._localeRuleName}getLocalizedValue(c,l,u){const d=u||this.getLocaleRuleName(),p=this?.getMetadata();let h=null;const g=Hd.getLocale();if(p){const l=p?.type,u=["View","Region"],d=p?.config?.label??p?.config?.caption;if("en-US"!==g&&d?.startsWith(W.FIELD_LABEL_ANNOTATION)){const l=d.split(`${W.FIELD_LABEL_ANNOTATION} `).pop(),u=l?.split("."),p=u?.pop();let g=`${p}`;const f=this.getFieldMetadata(g),m=f?.classID||this.getValue(`.${u?.join(".")}${W.CLASS_ID}`),y=f?.definedOnClassID;return g=`${y||m}.${g}`,zd.getLocaleValue(c,g,zd.FIELD_LABELS_BUNDLE_KEY,h)}l&&!u.includes(l)&&(h=l)}return zd.getLocaleValue(c,l,d,h)}getLocalizedParagraphValue(c){const l=bp(c,this.getCurrentClassID()),u=l?.definedOnClassID;return zd.getParagraphLocaleValue(u||this.getCurrentClassID(),c)||l?.content}getLocaleRuleNameFromKeys(c,l,u){return`${c}!${l}!${u}`}getValue(c,l){return this.useCustomContext?(c=c.startsWith?.(".")?c.substring(1):c,c.split?.(".").reduce(((c,l)=>c?.[l]??void 0),this.useCustomContext)):this._hasSuggestions&&this.getStateProps()?.value===c?sh.getPropertyValue(c,this.getPageReference(),`${this._contextName}/${W.SUGGESTION}`):sh.getPropertyValue(c,l||this.getPageReference(),this._contextName)}setInheritedConfig(c){if(!c)return;const{readOnly:l,displayMode:u,referenceType:d,hideLabel:p}=c;p&&(this._inheritedConfig.hideLabel=p),d&&(this._inheritedConfig.referenceType=d),u&&(this._inheritedConfig.displayMode=u),(this._inheritedConfig.readOnly||l)&&(this._inheritedConfig.readOnly=l),c.inheritedProps&&(c.inheritedProps?.forEach((c=>{"required"===c.prop&&(this._inheritedConfig[c.prop]=c.value)})),Ru(this._inheritedConfig,c))}getInheritedProps(){const c={},l={};return this._inheritedConfig.inheritedProps?.forEach((c=>{l[c.prop]=c.value})),sh.resolveProps(l,c,this),c}setValue(c,l,u,d=!1,p={}){let h,g;const{isArrayDeepMerge:f}=p;this.isInsideList()&&this.getListActions().updateProperty(c,l),this.isBulkAction()&&(h=!0,l||(g=!0)),kp({type:"SET_PROPERTY",payload:{reference:`${this.getPageReference()}${c}`,value:l,initialValue:u,isImplicit:d,context:this.getContextName(),...void 0!==f&&{isArrayDeepMerge:f},...h&&{isStrictTracking:h},...g&&{removePropertyFromChangedList:g}}})}updateDirtyCheckChangeList(c,l){(({value:c,context:l,reference:u})=>{if(al.isPageInstruction(u))return;const d=u?.startsWith(".")?u?.substr(1):u;cl[l]=cl[l]||{},cl[l][d]||(cl[l][d]={initialValue:Wp(d,null,l)}),cl[l][d].value=c})({reference:`${this.getPageReference()}${c}`,value:l,context:this.getContextName()})}getContextDataValue(c,l){return Hp(l||this.getPageReference(),c,this._contextName)}updateState(c){const l=this._pageReference.indexOf(W.CASE_INFO.CASE_INFO_CONTENT),u=this._pageReference.indexOf(".");let d=W.CASE_INFO.CASE_INFO_CONTENT;0!==l&&(d=u>0?this._pageReference.substring(u):this._pageReference),kp(uh({context:this._contextName,data:c,rootPageReference:d}))}replaceState(c,l,u={}){const{skipDirtyValidation:d=!1}=u;kp({type:"REPLACE_PROPERTY",payload:{reference:`${this.getPageReference()}${c}`,value:l,context:this.getContextName(),skipDirtyValidation:d}})}reportError(c,l,u){kp(kh(c,l||{},u))}getComponent(){return Pu({getPConnect:()=>this})}createComponent(c,l,u,d){let p=this._pageReference;if(l){const c=qp(`${this.getPageReference()}.${W.SUMMARY_OF_LISTS}`,l,this._contextName);p=sh.getContextPath(c||l,u)||l}else if(d&&d.pageReference){let c=d.pageReference;c=rn.handleAnnotation(c,this),p=sh.getContextPath(this._pageReference,c)||""}return Pu(Ou({meta:c,index:this.index,options:{containerName:this.getContainerName(),hasForm:this.options.hasForm,...c.options,pageReference:p,context:this._contextName,target:this._containerTarget,readOnly:this._readOnly||this._inheritedConfig?.readOnly,viewName:this.viewName}}),d)}getReferencedView(){if(this.meta)return sh.resolveReference(this.resolveConfigProps(this.meta),this)}_resolvePageRef(c){return this.getPageReference().includes(c)||c.startsWith(W.CLASS_ANNOTATION)?this.getPageReference():`${this.getPageReference()}${c}`}getReferencedViewPConnect(c=!1){const l={...this.getComponentConfig()};return delete l?.name,delete l?.type,Ou({meta:this.getReferencedView(),options:{...c?this.options:void 0,...l,context:this.getContextName(),pageReference:l.context?this._resolvePageRef(l.context):this.getPageReference(),viewName:this.viewName}})}getContainerManager(){return new Rl(this)}getActionsApi(){return this._actionsApi||(this._actionsApi=new Iu(this)),this._actionsApi}getActionManager(){return gn}getGoogleMapsAPIKey(){return C}getServerURL(){return P()}getLoadingStatus(c){let l=null;return c?(l=$p(c),l=l?l.context_data:null):l=this.getDataObject().context_data,!!l&&!!l.isLoading&&l.isLoading}clearErrorMessages(c){c?.property?Zn({type:"error",property:c.property,pageReference:this.getPageReference(),context:this.getContextName()}):c?.context?Zn({type:"error",...c}):(Zn({type:"error",...c,context:W.APP.APP}),Zn({type:"error",...c,context:zu(`${W.APP.APP}/${this.getContainerName()}`)}))}resolveDatasourceReference(c){return qp(`${this.getPageReference()}.${W.SUMMARY_OF_LISTS}`,c,this.getContextName())||c}removeFormField(){}addFormField(){}setPageValue(c,l,u){delete c?.classID,this.setValue(l,c,void 0,void 0,{isArrayDeepMerge:!1}),((c,l,u)=>{const d=Wc(l);Gc[c]?Gc[c].fieldOrder[d]=u:Gc[c]={fieldOrder:{[d]:u}}})(this.getContextName(),`${this.getPageReference()}${l}`,this),u&&((c,l,u)=>{const d=(c,l)=>{Object.entries(c).forEach((([c,p])=>{if(Array.isArray(p)){const d=PCore.createPConnect({options:{pageReference:u.getPageReference(),context:u.getContextName(),referenceList:`${l}.${c}`}}).getPConnect();xr(d,`${l}.${c}`,{skipStateUpdate:!0});for(let c=0;c<p.length;c+=1)Pr(p[c],c,d,void 0,{})}else"object"==typeof p&&d(p,`${l}.${c}`)}))};d(c,l)})(c,l,this)}acceptSuggestion(c){if(this.getStateProps()?.value&&this.options.hasForm&&this._hasSuggestions){const l=Su.getSuggestionsContext(this.getContextName()),u=this.getStateProps()?.value||c,d=sh.getContextPath(this.getPageReference(),u),p=l.getField(d);this._hasSuggestions=!1,this.getActionsApi().updateFieldValue(u,p),this.getActionsApi().triggerFieldChange(u,p),l.removeField(d)}}ignoreSuggestion(c){if(this.getStateProps()?.value&&this.options.hasForm&&this._hasSuggestions){const l=this.getStateProps()?.value||c,u=sh.getContextPath(this.getPageReference(),l);this._hasSuggestions=!1,Su.getSuggestionsContext(this.getContextName()).removeField(u)}}}function Ou(c){const l=new Zu(c);return{getPConnect:()=>l}}const vu=class{static createContainerPConnect(c,l,u,d=!1){const{accessedOrder:p,items:h}=c;if(p&&h){const c=p[p.length-1];if(h[c]?.view&&Object.keys(h[c].view).length>0){const p=h[c],g=c.substring(0,c.lastIndexOf("_")),{view:f,context:m}=p,{viewName:y,viewContext:I}=this.processRootViewDetails(f,p,l);return y?Ou({meta:f,options:{context:m,pageReference:I||l,containerName:u,containerItemID:c,parentPageReference:l,hasForm:d||u===Mu.WORKAREA||u===Mu.MODAL||y===W.CREATE_DETAILS_VIEW_NAME,target:g}}).getPConnect:null}}return null}static processRootViewDetails(c,l,u){const{config:{context:d,name:p}={}}=c,{context:h}=l;let g=p,f=d;const m=sl.isProperty(p),y=sl.isProperty(d);if(y){const c=sl.getPropertyName(d);f=Wp(`.${c}`,c.startsWith(".")?u:"",h)}if(f||(f=u),m){const c=sl.getPropertyName(p);g=Wp(`.${c}`,f,h)}return m&&y&&""!==g&&(g=p,f=d),{viewName:g,viewContext:f}}static addFlowContainerItem(c){const l=c.getContainerManager(),u=c.getContextName();let d,p;if("review"!==c.getValue("context_data.caseViewMode")){const c=u.substring(0,u.lastIndexOf("_")),l=zu(c),h=Fu(c,l);h&&({key:d,flowName:p}=h)}l.addContainerItem({semanticURL:"",key:d,flowName:p,caseViewMode:"perform",resourceType:"ASSIGNMENT",data:c.getDataObject(u)})}},xu={defaultLimit:16},wu={SINGLE:"single",MULTIPLE:"multiple"},Mu={PRIMARY:"primary",WORKAREA:"workarea",MODAL:"modal",PREVIEW:"preview"},Lu=()=>Vp()?.getState()?.containers,Uu=c=>c?Vp()?.getState().containers[c]:(Nt.error("getContainerData: target is the required parameter"),null),Fu=(c,l)=>{if(!c||!l)return null;const u=Lu(),d=u?.[c];return d&&d.items&&d.items[l]||null},ju=c=>c?Vp()?.getState().containers[c]?.items:(Nt.error("getContainerItems: target is the required parameter"),null),Vu=c=>c?Vp()?.getState().containers[c]?.accessedOrder||[]:(Nt.error("getContainerAccessOrder: target is the required parameter"),[]),ku=c=>c?Vu(c)?.length>0||!1:(Nt.error("areContainerItemsPresent: target is the required parameter"),!1),$u=(c,l,u)=>{if(!c||!l)return Nt.error("isContainerItemExists: target and key are required parameters"),!1;const d=Lu(),p=d?.[c],h=p&&p.items||null,g=u||((c,l)=>c===l);if(l&&h)for(const f in h)if(g(l,h[f].key))return!0;return!1},Gu=(c,l,u)=>{if(!c||!l)return Nt.error("getContainerItemName: target and key are required parameters"),null;const d=Lu(),p=d?.[c],h=p&&p.items||null,g=u||((c,l)=>c?.toLowerCase()===l?.toLowerCase());if(l&&h)for(const f in h)if(g(l,h[f].key))return f;return null},Wu=(c,l)=>{if(!c||!l)return Nt.error("isContainerInitialized: context and name are required parameters"),!1;const u=Lu();return u&&Object.prototype.hasOwnProperty.call(u,`${c}/${l}`)},Hu=(c,l)=>{if(!c||!l)return Nt.error("getContainerType: context and name are required parameters"),null;const u=Lu(),d=u?.[`${c}/${l}`];return d&&d.type},zu=c=>{if(!c)return Nt.error("getActiveContainerItemName: target is the required parameter"),null;let l=null;const u=Lu();if(u&&u[c]){const d=u[c],{accessedOrder:p}=d;l=p&&p.length>0?p[p.length-1]:null}return l},Ku=(c,l,u)=>{if(!c||!l)return Nt.error("isContainerItemActive: target and key are required parameters"),!1;const d=Gu(c,l,u);return!!d&&d===zu(c)},Xu=(c,l)=>{let u=null;const d=Lu();for(const p in d)if(Object.prototype.hasOwnProperty.call(d,p)&&d[p].items){const h=d[p].items[c];if(u=h?h[l]:null,u)break}return u},Ju=c=>c?Xu(c,"context"):(Nt.error("getDataContextName: containerItemName is required parameters"),null),Qu=c=>{if(!c)return Nt.error("getActiveContainerItemContext: target is required parameters"),null;let l=null;const u=Lu();if(u&&u[c]){const d=u[c],{accessedOrder:p}=d,h=p&&p.length>0?p[p.length-1]:null;l=Ju(h)}return l},ed=c=>{if(!c)return Nt.error("getChildContainerItems: containerItemName is required parameters"),[];const l=c.endsWith("/")?c:`${c}/`;let u=[],d=!1;const p=Lu(),h=u=>{const p=[];return Object.keys(u).forEach((u=>{u.startsWith(l)&&u!==l&&p.push(u),u===c&&(d=!0)})),p};for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g)&&p[g].items){const c=h(p[g].items);c&&c.length>0&&(u=u.concat(c)),u=u.sort()}return d?u:[]},td=c=>{if(!c)return Nt.error("getChildContainers: containerItemName is required parameters"),[];const l=[],u=Lu();for(const d in u)Object.prototype.hasOwnProperty.call(u,d)&&d.startsWith(c)&&d!==c&&l.push(d);return l},nd=c=>{if(!c)return Nt.error("getChildContainersContexts: parentContainerItemID is required parameters"),[];const l=[],u=Lu();for(const d in u)Object.prototype.hasOwnProperty.call(u,d)&&d.startsWith(c)&&d!==c&&(Vu(d)||[]).forEach((u=>{Ju(u)!==c&&l.push(Ju(u))}));return l},rd=c=>{const l=[...nd(c),c],u=[],d=Vp()?.getState().data||{};return l.forEach((c=>{Object.prototype.hasOwnProperty.call(d,`${c}/${W.SUGGESTION}`)&&u.push(`${c}/${W.SUGGESTION}`)})),u},sd=c=>c?c&&Uu(c)&&Uu(c).type===wu.SINGLE:(Nt.error("isContainerSingleMode: target is required parameters"),null),ad=c=>c?c&&Uu(c)&&Uu(c).type===wu.MULTIPLE:(Nt.error("isContainerMultipleMode: target is required parameters"),null),od=c=>c?Uu(c)&&Uu(c).items&&Object.keys(Uu(c)?.items).length>0||!1:(Nt.error("hasContainerItems: target is required parameters"),!1),id=c=>c&&xu[c]?xu[c]:xu.defaultLimit,cd=(c,l=xu.defaultLimit)=>{c?xu[c]=l:Nt.error("setContainerLimit: target is required parameter")},ld=c=>{if(!c)return Nt.error("isContainerLimitReached: target is required parameter"),!1;let l=!1;const u=Uu(c),{items:d={}}=u,p=Object.keys(d),h=id(c);return p&&p.length>0&&p.length>=h&&(l=!0),l},ud=c=>{if(!c||!c.name||!c.context)return Nt.error("resetContainersPayload: containerInfo object should contain name and context"),null;const l=c?.name,u=Uu(`${c?.context}/${l}`),d=Array.isArray(u?.accessedOrder)&&u?.accessedOrder.map((c=>u?.items[`${c}`]?.context))||[],p=td(`${W.APP.APP}/${W.PREVIEW}`),h=nd(`${W.APP.APP}/${W.PREVIEW}`);return{context:c?.context,name:l,containerItems:[...d,...h],childContainers:p}},dd=c=>{if(!c)return Nt.error("isContainerDirty: containerItemID is the required parameter"),!1;const l=Ju(c);return Il(l)||vc(c)},pd=c=>{if(!c)return Nt.error("getLeastRecentlyUsedNonDirtyContainerItemID: target is required parameter"),null;let l;const u=Uu(c),{accessedOrder:d=[]}=u;for(let p=0;p<d.length;p+=1){const c=d[p];if(!dd(c)){l=c;break}}return l},hd=c=>{if(!c)return Nt.error("getTargetFromContainerItemID: containerItemID is the required parameter"),null;const{containers:l}=Vp()?.getState()||{};for(const d in l)if(l[d]?.accessedOrder?.includes(c))return d;const u=c.lastIndexOf(W.UNDERSCORE_STRING);return c.substring(0,u)},gd=(c,l={})=>{if(!c)return Nt.error("closeContainerItem: containerItemID is the required parameter"),Promise.reject(new Error("closeContainerItem: containerItemID is the required parameter"));const u=hd(c),d=Ju(c),{skipDirtyCheck:p}=l;let h=!0,g=[];if(dd(c)&&!p&&(h=window.confirm(zd.getLocaleValue(dl,"Messages"))),h){const{accessedOrder:l=[],items:p={},type:h}=Uu(u);g=l.filter((l=>l!==c));const f=g[g.length-1],m=p[f]||{},{semanticURL:y=W.FORWARD_SLASH_STRING,context:I}=m;g.length>0&&y&&y!==W.FORWARD_SLASH_STRING?dg({directUrlUpdation:!0,semanticURL:y,options:{containerItemID:f,context:I}}):dg({directUrlUpdation:!0,semanticURL:W.FORWARD_SLASH_STRING,options:{}}),kp(xh({containerItemID:c,context:d,target:u,containerInfo:{newAccessedOrder:g,containerType:h}}))}return Promise.resolve({newAccessedOrder:g,removeItem:h})},fd=(c,l,u,d)=>{const p="root",h=X(l,p,!0),g=Ct(l,p),f={data:u,context:d?"app":h},m=[Ih({root:c,containerItemID:h,context:d?"app":h,target:g,containerName:l})];m.push(uh(f)),kp(m)},md=(c,l,u)=>{let d=Vu(c);d=d.filter((c=>c!==l));let p=!1;for(let h=0;h<d.length;h+=1)if(Ju(d[h])===u){p=!0;break}return p},yd=c=>{if(!c)return Nt.error("isContainerItemContextBeingUsedInOtherContainers: containerItemID is the required parameter"),!1;const l=Lu(),u=Ju(c),d=l?Object.keys(l):[];let p=!1;for(let h=0;h<d.length&&(p=md(d[h],c,u),!p);h+=1);return p},Id=c=>{Array.isArray(c)||(c=[c]);const l=Lu()||{};return c.map((c=>{const u=hd(c);return eh.getIn(l,[u,"items",c,"transientItems"])||[]})).flat()},Ed=c=>{const{transientItemID:l,data:u,options:d}=c,p=eh.deepClone(Vp()?.getState().data[l]);d?.reset&&eh.iterateLeafNodes(p,(c=>{"classID"!==c[c.length-1]&&eh.setIn(p,c,"")})),kp(Ah({transientItemID:l,data:eh.mergeDeep(u,p)}))},Ad=c=>{const{transientItemID:l,data:u}=c;kp(Sh({transientItemID:l,data:u}))},_d=c=>{const l=eh.deepClone(Vp()?.getState().data[c]);eh.iterateLeafNodes(l,(c=>{"classID"!==c[c.length-1]&&eh.setIn(l,c,"")})),kp(_h({transientItemID:c,data:l}))},Cd=c=>{const l=eh.deepClone(Vp()?.getState().data[c]);eh.iterateLeafNodes(l,(c=>eh.setIn(l,c,""))),kp(Th({transientItemID:c,data:l}))};class Wd{static addContainerItems(c){this.items=c}static getContainerItems(){return this.items}static deleteContainerItem(c){const l=this?.items?.indexOf(c);void 0!==l&&-1!==l&&this.items.splice(l,1)}}const Sd=()=>Wd,Td=c=>{const l={containerName:c};l.childContainers=td(c),kp({type:$e,payload:l})},Nd=(c,l)=>{const u=ed(c),{key:d}=Fu(hd(c),c),p=[];u.forEach((c=>{const{key:u}=Fu(hd(c),c);if(u===d){const u={data:{caseInfo:{headers:{etag:l}}},target:hd(c),context:c};p.push({type:Ae,payload:u})}})),p.length&&kp(p)},Pd=(c,l)=>{const u=[],d={data:{caseInfo:{headers:{etag:l}}},target:hd(c),context:c};u.push({type:Ae,payload:d}),u.length&&kp(u)},bd=()=>Hd.isPortalLoaded?"app":"root",Dd=()=>_l,Rd=(c,l)=>{const u={data:{caseInfo:{lastUpdateTime:l}},target:hd(c),context:c};kp({type:Ae,payload:u})},Od=(c,l)=>{const u=Gu(c,l),d=Gu(`${u}/workarea`,l);return Ju(d)},vd=c=>c?Xu(c,"parentContext"):(Nt.error("getContainerParentContext: containerItemName is required parameters"),null),xd=c=>{const{accessedOrder:l}=c;return l&&l.length>0?l[l.length-1]:""},wd=c=>{if(c&&"string"==typeof c){const l=c.split("/");return l.pop(),l.join("/")}return null},Md=()=>vu,Ld=/{(.*?)}/i,Ud=/{(.*?)}/g,Fd=c=>null!==c.match(Ld),jd=c=>(c&&(c.startsWith("/")&&(c=c.substring(1,c.length)),c.endsWith("/")&&(c=c.substring(0,c.length-1))),c),Vd=c=>{const l=c[c.length-1],u=c[c.length-2];if("y"!==l.toLowerCase())return`${c}s`;switch(u.toLowerCase()){case"a":case"e":case"i":case"o":case"u":return`${c}s`;default:return`${c=c.substring(0,c.length-1)}ies`}},kd=()=>jd(window.location.pathname),$d=(c,l,u)=>{switch(u){case"warning":l?console.warn(c,l):console.warn(c);break;case"error":l?console.error(c,l):console.error(c);break;default:l?console.log(c,l):console.error(c)}},Bd=new class{constructor(){this.staticRoutesList=[],this.dynamicRoutesList=[],this.reqContextName="",this.defaultViewUrlPath="",this.portalName=""}init=(c,l)=>{c&&c.routes&&c.routesMeta?(this.routingInfo=c,this.appRoutes=c.routes,this.appRoutesMeta=c.routesMeta,this.reqContextName=c.reqContextName,this.reqServletPath=c.reqServletPath,this.appName=c.appName,this.appAlias=c.appAlias,this.orgName=c.orgName,this.defaultViewUrlPath=l,this._createStaticDynamicRoutesList(this.appRoutes),this.appDelimeter=c.appDelimeter,this.reqServletNameReal=c.pxReqServletNameReal,this.bDefaultPortal=c.isDefaultPortal,this.portalName=c.portalName,this.ignoreFromEndPoint=["reactMode=dev","reactMode=prod"]):console.error("Routing info is not appropriate. Missing routes and routesMeta objects in routingInfo",JSON.stringify(c))};addRoutes=c=>{c?.routes&&c.routesMeta&&(this.appRoutes={...this.appRoutes,...c.routes},this.appRoutesMeta={...this.appRoutesMeta,...c.routesMeta},this.routingInfo&&(this.routingInfo.routes={...this.routingInfo.routes,...c.routes},this.routingInfo.routesMeta={...this.routingInfo.routesMeta,...c.routesMeta}),this._createStaticDynamicRoutesList(c.routes))};setDefaultRoute=c=>{this.defaultViewUrlPath=c};_createStaticDynamicRoutesList=c=>{Object.keys(c).forEach((c=>{Fd(c)?this.dynamicRoutesList?.push(c):this.staticRoutesList?.push(c)}))};_getDynamicKeyName=c=>{const l=c.indexOf("{")+1,u=c.lastIndexOf("}");return c.slice(l,u)};isDefaultPortal=()=>"false"!=`${this.bDefaultPortal}`;getPortalName=()=>this.portalName;getApplicationPath=()=>jd(`${this.getReqContextName()}/${this.getReqServletNameReal()}`);getReqServletNameReal=()=>`${this.reqServletNameReal}`;getAppDelimeter=()=>`${this.appDelimeter}`;getApplicationName=()=>`${this.appName}`;getApplicationAlias=()=>`${this.appAlias}`;getServletPath=()=>`${this.reqServletPath}`;getOrganizationName=()=>`${this.orgName}`;getReqContextName=()=>jd(this.reqContextName);getRoutingInfo=()=>this.routingInfo;processUrl=(c,l)=>{l&&(c=c.toLowerCase()),c&&(c=decodeURIComponent(c));const u=new RegExp(this.getApplicationPath(),"i");return c=c.replace(u,""),jd(c)};getEndPointInfo=c=>{this.ignoreFromEndPoint?.forEach((l=>{c.includes(l)&&(c=c.substring(0,c.indexOf(l)))}));let l=this.processUrl(c,!0),u=this._getMatchedRouteInRoutingTable(l);void 0===u&&(l=this.processUrl(this.defaultViewUrlPath,!0),u=this._getMatchedRouteInRoutingTable(l)||"");const{routeKey:d,payload:p}=this.appRoutes[u],{reqType:h,endPoint:g,params:f}=this.appRoutesMeta?.[d].restApi||{},m={...p},{caseClassName:y,caseID:I}=m;if(q.isRemoteCase(y)){const{RemoteClassGroup:c,RemoteSystemID:l}=q.getRemoteCase(y);m.caseID=I?.replace(y,c?.toUpperCase()),m.RemoteSystemID=l}const E={routeKey:d,requestType:h,routeEndpoint:g,payload:{...f,...m}};return this._resolveRoute(E,this.processUrl(c,!1),u)};getSemanticURL(c,l,u){return this.buildSemanticURL(c,l,u)}getResolvedSemanticURL(c,l,u={}){const d=this.getSemanticURL(c,l,u);let p=d;if(Fd(d)){const c=d.match(Ud);c?.forEach((c=>{const l=this._getDynamicKeyName(c);u[l]&&(p=p.replace(c,u[l]))}))}const h=ug(p),g=new URL(h);return this.isDefaultPortal()||this.getPortalName()&&!g.searchParams.toString().includes("portal=")&&g.searchParams.append("portal",this.getPortalName()),g.toString()}updateSemanticURLAndDocumentTitle(c){const{key:l,actionName:u,caseClassName:d,isRemoteCase:p}=c;if(p&&!d)return;const h=this.getSemanticURL(u,{caseClassName:d}).replace(/{.+?}/,String(rs(l))),g=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${G.PRIMARY}`,f={semanticURL:h,directUrlUpdation:!0,options:{acName:g,context:Qu(g)}};lg(f);const m=d.substring(d.lastIndexOf("-")+1),y=l.substring(l.lastIndexOf(" ")+1),I=Hd.environmentInfoObject?.pxApplication?.pyLabel;yg(`${m} (${y}) - ${I}`)}buildSemanticURL(c,l,u){const{urlPattern:d}=this.appRoutesMeta?.[c]||{},p=d?.split("/").length,h=d?.split("/"),g=Object.keys(this.appRoutes).filter((c=>p===c.split("/").length)).filter((c=>{const l=c.split("?")[0].split("/");return h?.every(((c,u)=>c.startsWith("{")||c===l[u]))}));if(1===g.length)return this._getQueryParamsResolvedURL(g[0],u);if(0===Object.keys(l).length)return"";const f=g.find((c=>{const d=this.appRoutes[c].payload,p={...u};delete p.dataViewName,delete p.dataContext;const h=d.dataViewKeys||d.dataContextParameters||{},g=Object.keys(l).every((c=>l[c]===d[c]));return!!g&&(eh.isEmpty(h)||eh.isEmpty(p)?g:Object.keys(p).every((c=>Object.prototype.hasOwnProperty.call(h,c))))}));return f?this._getQueryParamsResolvedURL(f,u):g.includes("cases/{id}")&&u?.id?"cases/{id}":""}_getQueryParamsResolvedURL(c,l,u=!1){const[d,p]=c.includes("?")?c.split("?"):[c];if(p){const c={};for(const[u,d]of Object.entries(l))c[u.toLowerCase()]=d;const h=new URLSearchParams(p),g={};for(const[d,p]of h.entries())if("string"==typeof p&&Fd(p)){const h=this._getDynamicKeyName(p);g[d]=u?l[h]||c[h.toLowerCase()]:l[h]}else"string"==typeof p&&(g[d]=p);return`${d}?${new URLSearchParams(g).toString()}`}return d}_getQueryParamsObject(c){const l={},u=new URLSearchParams(c);for(const[d,p]of u.entries())l[d]=p;return l}getRestEndPoint(c,l){try{return this._buildRestApi(c,l)}catch(c){return console.error(c),null}}_buildRestApi(c,l){if(c&&this.appRoutesMeta?.[c]){const{reqType:u,body:d}=this.appRoutesMeta[c].restApi;let{endPoint:p}=this.appRoutesMeta[c].restApi;l?.params&&l.params.pageName&&(p=`${p}&pageName=${l.params.pageName}`);const h=p.match(Ud);if(h)for(let c=0;c<h.length;c+=1){const u=h[c].replace("{","").replace("}",""),d=new RegExp(h[c],"g");p=p.replace(d,l?.[u])}if(d){let c={};return Object.keys(d).forEach((u=>{this._isSpecialInstruction(u)&&(c={...c,...this._processInstruction(u,d[u],l)})})),{restApi:p,reqType:u,body:c}}return{restApi:p,reqType:u}}throw new Error(`Cannot find route metadata for the routeKey: ${c}.`)}_isSpecialInstruction(c){return c&&c.startsWith("@")}_processInstruction(c,l,u){const d={};return"@COPY"===c&&l.forEach((c=>{d[c]=u[c]})),d}doesRestApiExist(c){return!(!this.appRoutesMeta||!this.appRoutesMeta[c])}_resolveRoute=(c,l,u)=>{const d=[],[p,h]=l.includes("?")?l.split("?"):[l],[g,f]=u.includes("?")?u.split("?"):[u],m=p.split("/"),y=g.split("/"),I={};for(let T=0;T<y.length;T+=1)d[T]=y[T],Fd(y[T])&&(I[this._getDynamicKeyName(y[T])]=m[T],d[T]=m[T]);const E=this._getQueryParamsObject(f),A=this._getQueryParamsObject(h),_={};for(const[T,N]of Object.entries(A))_[T.toLowerCase()]=N;for(const T in E)Fd(E[T])?I[T]=A[T]||_[T.toLowerCase()]:I[T]=E[T];let C;h&&(C=this._getQueryParamsResolvedURL(u,A,!0));const S=this._resolvePayload(c,I,u);return{...this._resolveRouteEndPoint(S,u),urlPath:C||d.join("/")}};_resolveRouteEndPoint=(c,l)=>{let{routeEndpoint:u}=c;if(!Fd(u))return c;const d={};if(d[l]=c,void 0!==c.payload){const l=u.match(Ud);for(let p=0;p<l.length;p+=1){const h=l[p],g=this._getDynamicKeyName(h);if(void 0!==c.payload[g]){const l=c.payload[g];u=u.replace(h,l)}else this._sendWarningAndErrorMessages(`Unable to resolve dynamic token {${g}} in routeEndpoint- ${g} is missing in payload`,d)}}else this._sendWarningAndErrorMessages("Unable to resolve dynamic token(s) in routeEndpoint- payload is missing in routing table for-",d);return{...c,routeEndpoint:u}};_resolvePayload=(c,l,u)=>{if(void 0===c.payload)return c;const d={...c.payload,...this._resolvePayloadRecursive(c.payload,l)};return{...c,payload:d}};_resolvePayloadRecursive(c,l){const u={};for(const d in c)if(Object.prototype.hasOwnProperty.call(c,d)){let p=c[d];if("string"==typeof p&&Fd(p)){const c=p.match(Ud);for(let u=0;u<c.length;u+=1){const d=c[u],h=this._getDynamicKeyName(d);if(void 0!==l[h]){const c=l[h];p=p.replace(d,c)}else this._sendWarningAndErrorMessages(`Unable to resolve dynamic token {${h}} in payload- {${h}} is missing in semantic url construct`)}u[d]=p}else"object"==typeof p&&(u[d]=this._resolvePayloadRecursive(p,l))}return u}_getMatchedRouteInRoutingTable=c=>{let l=this._findMatchedRouteInStaticList(c);return void 0!==l?l:(l=this._findMatchedRouteInDynamicList(c),void 0!==l?l:void 0)};_findMatchedRouteInStaticList=c=>this.staticRoutesList?.find((l=>l.toLowerCase()===c.toLowerCase()));_findMatchedRouteInDynamicList=c=>{const[l,u]=c.includes("?")?c.split("?"):[c],d=l.split("/");return this.dynamicRoutesList?.find((c=>{const[l,p]=c.includes("?")?c.split("?"):[c],h=l.split("/");if(h.length!==d.length)return!1;let g=0;for(g=0;g<h.length;g+=1){const c=h[g].toLowerCase();if(!Fd(c)&&c!==d[g]&&Vd(c)!==d[g])return!1}if(p){const c=new URLSearchParams(u.toLowerCase()),l=new URLSearchParams(p.toLowerCase()),d=new Set,h=new Set,g=/\{[a-zA-Z]+\}/;for(const u of c.keys())d.add(u);for(const u of l.keys())h.add(u);if(h.size!==d.size)return!1;for(const u of d){if(!h.has(u))return!1;const d=l.get(u);if(c.get(u)!==d&&!g.test(d))return!1}}return!0}))};_sendWarningAndErrorMessages=(c,l)=>{$d(c,l,"warning"),$d("Error in Generated Routing Table",null,"error"),$d("Back | Forward for this page may NOT work as intended",null,"warning"),$d("Bookmark | Refresh for this page may NOT work as intended",null,"warning")}},Gd=Bd,Hd=new class{constructor(){this.environmentInfoObject=null,this.isPortalLoaded=!1,this.pageName=null,this.KeyMapping={},this.isAssignmentHeaderHidden=!1,this.coexistenceMeta={appType:"",isCoexistence:!1},this.brandingInfo=null,this.cookieComplianceMethod="none",this.showPerformanceDashboard=!1,this.isExtraCallRequiredForDefaultHome="false"}setEnvironmentInfo(c){this.environmentInfoObject=c;const l=this.environmentInfoObject?.features||eh.convertObjectWithStringToBoolean(this.environmentInfoObject?.pyFeatures)||{granularUIRefresh:!1};this.environmentInfoObject.features={...l,granularUIRefresh:l.granularUIRefresh||l.pyEnableGranularUIRefresh||!1}}getOperatorName(){return this.environmentInfoObject?.pxOperator?.pyUserName}getOperatorWorkGroup(){return this.environmentInfoObject?.pxOperator?.pyWorkGroup}getOperatorIdentifier(){return this.environmentInfoObject?.pxOperator?.pyUserIdentifier}getOperatorImageInsKey(){return this.environmentInfoObject?.pxOperator?.pyImageInsKey}getApplicationLabel(){return this.environmentInfoObject?.pxApplication?.pyLabel}getPortalName(){return Gd.getPortalName()}getApplicationName(){return this.environmentInfoObject?.pxApplication?.pyRuleName}getUseLocale(){return this.environmentInfoObject?.pxLocale?.pyUseLocale}getAccessGroup(){return this.environmentInfoObject?.pxOperator?.pyAccessGroup}getTimeZone(){return this.environmentInfoObject?.pxLocale?.pyTimeZone}getTheme(){return this.themeOverrides}setTheme(c){return this.themeOverrides=c,this.themeOverrides}getBrandingInfo(){return this.brandingInfo}setBrandingInfo(c){return this.brandingInfo=c,this.brandingInfo}getCookieComplianceMethod(){return this.cookieComplianceMethod}setCookieComplianceMethod(c){this.cookieComplianceMethod=c}setLocale(c){const l=c.replaceAll("-","_").split("_").slice(0,2);this.locale=l.join("-"),this.environmentInfoObject?.pxLocale&&(this.environmentInfoObject.pxLocale.pyUseLocale=this.locale)}getLocale=()=>this.locale;getEnvironmentKeys(){return Object.keys(W.ENV_INFO_KEYS)}getMaxAttachmentSize(){return this.environmentInfoObject?.pxApplication?.pyMaxAttachmentSize}getDefaultOperatorDP(){return this.environmentInfoObject?.pxApplication?.pyDefaultOperatorDP}getDocumentUrlDP(){return this.environmentInfoObject?.pxApplication?.pyDocumentUrlDP}getCaseInstanceListDP(){return this.environmentInfoObject?.pxApplication?.pyCaseInstanceListDP}getBaseLocale(){return this.environmentInfoObject?.pxApplication?.pyBaseLocale||"en-US"}getRenderingMode(){return this.environmentInfoObject?.renderingMode}getBuiltOnAppNames(){return this.environmentInfoObject?.pxApplication?.pyBuiltOnApplications}setPreviewMode(){Xi.setPreviewMode()}setDefaultCasePage(c){this.pageName=c}getDefaultCasePage(){return this.pageName}disableAssignmentHeader(c){this.isAssignmentHeaderHidden=c}isAssignmentHeaderDisabled(){return this.isAssignmentHeaderHidden}getDefaultPortal(){return this.environmentInfoObject?.pxOperator?.pyDefaultPortal}updateFeatureMap(c){const l=this.environmentInfoObject?.features;return this.environmentInfoObject&&c&&(this.environmentInfoObject?.features?this.environmentInfoObject.features={...l,...c}:this.environmentInfoObject.features={...c}),this.getFeatureMap()}getFeatureMap(){return this.environmentInfoObject?.features||{}}setKeyMapping(c){return this.KeyMapping=c,this.KeyMapping}getKeyMapping(c){const l=this.KeyMapping[c];return void 0!==l?l:null}setCoexistenceMeta(c){return c&&(this.coexistenceMeta=c),this.getCoexistenceMeta()}getCoexistenceMeta(){return this.coexistenceMeta}isCoexistenceAppOfType(c){return!(!this.coexistenceMeta.isCoexistence||this.coexistenceMeta.appType!==c)}getCaseTypeList(){return this.environmentInfoObject&&this.environmentInfoObject?.pyCaseTypeList||[]}getUserSettings(){return this.environmentInfoObject?.pyUserSettings||null}getAvailableLocalePacks(){return this.environmentInfoObject?.pyAvailableLocalePacks?.map((c=>c.pyLabel))||[]}getPerformanceDashboardVisibility(){return this.showPerformanceDashboard}setPerformanceDashboardVisibility(c){this.showPerformanceDashboard=c}getIsExtraCallRequiredForDefaultHome(){return this.isExtraCallRequiredForDefaultHome}setIsExtraCallRequiredForDefaultHome(c){this.isExtraCallRequiredForDefaultHome=c}getInactivityTimeout(){const c=this.environmentInfoObject?.pxOperator?.pyAuthenticationTimeout;return c?Number(c):c}isUnifiedObject(){return this.environmentInfoObject?.features?.isUnifiedObject||!1}getRuntime(){return"undefined"!=typeof window&&window.document?"Browser":"Native"}},qd=class{static regex=/\{@P[^}]*\s*:\s*[^}]*\}/g;static subRegex=/:'[a-zA-Z0-9!@#$&()\\-`.+,/\s"]*'/;static keyMap={};static formatLocaleKey(c){let l=0,u="";for(;l<=c.length;){const d=c.indexOf("{@P ",l);if(-1===d){u+=c.substring(l,c.length);break}u+=c.substring(l,d);const p=c.indexOf("}",l),h=c.substring(d,p+1),[g,f]=this.getKeyAndValue(h);this.addKeyToMap(g,f),u+=`${h.split(":")[0]}}`,l=p+1}return u}static getKeyAndValue(c){const l=c.indexOf(":"),u=c.indexOf("}");return[`${c.substring(0,l)}}`,c.substring(l+1,u)]}static addKeyToMap(c,l){this.keyMap[c]=l}static replaceWithValue(c){let l=0,u="";for(;l<=c.length;){const d=c.indexOf("{@P ",l);if(-1===d){u+=c.substring(l,c.length);break}u+=c.substring(l,d);const p=c.indexOf("}",l),h=c.substring(d,p+1);u+=this.keyMap[h],l=p+1}return u}},zd=new class{GENERIC_BUNDLE_KEY="@BASECLASS!GENERIC!PYGENERICFIELDS";FIELD_LABELS_BUNDLE_KEY="@BASECLASS!LABEL!PYFIELDLABELS";GENERIC_BUNDLE_KEY_LP="GENERIC!GENERICFIELDS";MESSAGE_BUNDLE_KEY="@BASECLASS!MESSAGE!PYMESSAGES";BASE_CLASS="@BASECLASS";DATA_PAGE_LOCALECONTEXT="datapage";constructor(){this.localeStore={},this.getLocaleValue=this.getLocaleValue.bind(this)}setLocaleForRule=(c,l)=>{const u=c.LocaleContent||c;this.localeStore[l]=u};getLocaleForRule(c=this.#c()){return this.localeStore[c]}resetLocaleStore=()=>{this.localeStore={}};#l(c){return c??this.#c()}#u(c){let l=!1;return c&&"string"==typeof c&&(l=c.includes("@P ")),l}#d(c,l){return l!==this.FIELD_LABELS_BUNDLE_KEY?c?`${c}.fields`:"fields":c}getLocaleValue(c,l,u,d){u=this.#l(u);const p=this.#u(c);p&&(c=qd.formatLocaleKey(c));const h=this.#p(c,u,l,d);return"Messages.fields"===(l=this.#d(l,u))&&"string"==typeof c?this.getLocalizedErrorMessage(h,c)||c:p?qd.replaceWithValue(h[c]||c):h[c]||c}#p(c,l,u,d){l!==this.FIELD_LABELS_BUNDLE_KEY&&(u=u?`${u}.fields`:"fields");let p=this.localeStore[l.toUpperCase()],h=p?eh.getIn(p,u,{}):{};return!h[c]&&d&&(p=this.localeStore[this.#c().toUpperCase()],h=p?eh.getIn(p,`${d}.${u}`,{}):{}),h}#c(){return 2===Hd.getFeatureMap().localizationVersion?this.GENERIC_BUNDLE_KEY_LP:this.GENERIC_BUNDLE_KEY}getParagraphLocaleValue(c,l){const u=`${c}!${W.PARAGRAPH}!${l}`,d=this.localeStore[u.toUpperCase()];return d?decodeURIComponent(atob(d.content).split("").map((c=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("")):null}getPortalLocaleReference(c){return c?`PORTAL!${c}`.toUpperCase():`PORTAL!${Hd.getPortalName()}`.toUpperCase()}getCaseLocaleReference(c,l){return c?2===this.getLocalizationVersion()?`CASE!${c}`.toUpperCase():l?`${c}!CASE!${l}`.toUpperCase():null:null}getLocalizationVersion(){return Hd.getFeatureMap().localizationVersion||1}async getLocaleJsons(c){if(!(await this.isCurrentLocalePackAvailable()))return[];const l=Hd.getUseLocale(),u=[],d=PCore.getLocaleUtils().localeStore;if((c=(c=c.filter((c=>!d[c]))).map((c=>c.toUpperCase()))).length>0){const d=c.map((c=>({localeRuleKey:c,promise:Vr.getSvcLocale(l,`${c}.json`)}))),p=await Promise.allSettled(d.map((c=>c.promise)));await Promise.all(p.map((async(c,l)=>{if("fulfilled"===c.status){const p=d[l];let h;try{h=await c.value.json()}catch{h=null}h&&u.push({localeRuleKey:p.localeRuleKey,jsonData:h})}})))}return u}async loadLocaleResources(c){const l=Hd.getUseLocale(),u=Hd.getBaseLocale();if(Hd&&l&&(l!==u||"en-US"!==u)&&c?.length>0)try{(await this.getLocaleJsons(c)).forEach((c=>{this.setLocaleForRule(c.jsonData,c.localeRuleKey)}))}catch(c){console.warn(c)}}setTimezone(c){this.timezone=c}getTimeZoneInUse(){const c=Intl.DateTimeFormat().resolvedOptions().timeZone;return this.timezone||c}matchPatternWithText(c,l){let u=l;const d=[];for(let p=0;p<c.length;){const l=c[p];if(0!==l.length){const c=u.indexOf(l);if(-1===c)return null;if(p>0){const l=u.slice(0,c);d.push(l)}u=u.slice(c+l.length)}p+=1}return u&&d.push(u),d}getLocalizedErrorMessage(c,l){let u="";if(c[l])return c[l];for(const d of Object.keys(c)){const p=d.split(/\{\d+\}/),h=this.matchPatternWithText(p,l);if(h){const l=c[d];if(u=this.replacePlaceHolders(h,l),u)return u}}return u}replacePlaceHolders(c,l){for(let u=0;u<c.length;){if(!l.includes(`{${u+1}}`))return"";l=l.replace(`{${u+1}}`,c[u]),u+=1}return l}async isCurrentLocalePackAvailable(){const c=Hd.getLocale();return this.availableLangPacks||(this.availableLangPacks=await Vr.getSvcAvailableLocales()),c&&this.availableLangPacks.includes(c)}};let Yd;const Kd=c=>{if(c){const l=(new DOMParser).parseFromString(c,"text/html").getElementsByTagName("pega-reference")[0].getAttribute("data-rule-id")??"";if(l){const c=Yd.getValue(l);return Yd.registerAdditionalProps({[l]:`@P ${l}`}),c}}},Xd=class{static getParagraphStream(c,l){return((c,l)=>{Yd=l;const u=c.replace(/<pega-reference(.*?)<\/pega-reference>/g,Kd);return/^(<p>)\s*(<\/p>)$/.test(u)?null:u})(c,l)}};nn.registerHandler("@L",((c,l)=>l.getLocalizedValue(c))),nn.registerHandler("@P",((c,l,u)=>l?l.getValue(c):sh.getLitePropertyValue(u))),nn.registerHandler("@E",((c,l,u)=>{try{const d=Wt(c),p=Ht(d);return qt(p,l,u)}catch(c){}return!0})),nn.registerHandler("@W",((c,l,u)=>{let d;if(l)d=l.getContextDataValue(`.${W.SUMMARY_OF_WHEN_CONDITIONS}.${c}`);else{const{pageReference:l,context:p}=u??{};d=Hp(l,`.${W.SUMMARY_OF_WHEN_CONDITIONS}.${c}`,p)}return!0===d||"true"===d})),nn.registerHandler("@ASSOCIATED",((c,l)=>{let u={};const d=[];let p="",h="";const g=l.getPageReference();if(c.startsWith(".")){p=`${g}.${c.substring(1)}`;const d=c.split(".").filter((c=>!!c));d.length>1&&(d.pop(),h=d.join(".")),u=l.getFieldMetadata(c.substring(1))}else u=l.getFieldMetadata(c),p=c;const f=u?.datasource?.tableType,m=u?.datasource?.mode===W.READONLY,y=u?.datasource?.name||"",I=l.getComponentConfig();if(I&&I.deferDatasource&&(I.datasourceMetadata=`@FIELD_META ${c}`,l.setStateProps({datasourceMetadata:I.datasourceMetadata}),f===W.DATA_PAGE))return null;if(f===W.DECISION||f===W.RULE_REFERENCE)return function(c,l){const u=rn.getPropertyName(c?.propertyForDisplayText??""),d=rn.getPropertyName(c?.propertyForValue??""),p=l.getContextDataValue(`.${W.SUMMARY_OF_EXPRESSIONS}.${c?.name}`)||[];return p?.map((c=>({key:c[d]||c[`.${d}`],value:c[u]||c[`.${u}`]})))}(u?.datasource,l);if(f!==W.DATA_PAGE)return u?.datasource?.records;const E=rn.getPropertyName(u?.datasource?.propertyForDisplayText),A=rn.getPropertyName(u?.datasource?.propertyForValue),_=Array.isArray(u?.datasource?.parameters)?u?.datasource?.parameters:[],C=l.getContextName(),S=[];if(_.forEach((c=>{if(rn.isProperty(c?.value)){let l=Wp(`.${eh.getFullPropertyReference([h,rn.getPropertyName(c.value)])}`,g,C);S.push(eh.getFullPropertyReference([g,h,rn.getPropertyName(c?.value)])),null!=l&&""!==l||(l=W.NULL_STRING),d.push(l)}else d.push(c?.value||W.NULL_STRING)})),C){const c=en.getContextObjectByName(C)||{};S.forEach((l=>{if(l in c){const u=c[l];c[l]=[...new Set([...u,p])]}else c[l]=[p]})),en.addContextName(C,c)}const T=function(c,l,u,d){let p="",h=u;if(l.join(W.HASH_DELIMITER)&&(p=eh.getHashedString(l.join(W.HASH_DELIMITER)),h=u+W.UNDERSCORE_STRING+p),d){const c=Bp(),l=c?c[u]?.[h]:{};return Array.isArray(l?.pxResults)?l.pxResults:[]}const g=(c.getDataObject()[u]||{})[h]||{};return Array.isArray(g?.pxResults)?g.pxResults:[]}(l,d,y,m);return T.map((c=>({key:c[A]||c[`.${A}`],value:c[E]||c[`.${E}`]})))})),nn.registerHandler("@ROUTING_INFO",((c,l)=>St(l.getContainerName(),l.getContextName()))),nn.registerHandler("@ENV",((c,l)=>{switch(c){case W.ENV_INFO_KEYS.APPLICATION_NAME:return Hd.getApplicationName();case W.ENV_INFO_KEYS.ACCESS_GROUP:return Hd.getAccessGroup();case W.ENV_INFO_KEYS.USER_NAME:return Hd.getOperatorName();case W.ENV_INFO_KEYS.USER_ID:return Hd.getOperatorIdentifier();case W.ENV_INFO_KEYS.APPLICATION_DESC:return l.getLocalizedValue(Hd.getApplicationLabel()||"");case W.ENV_INFO_KEYS.USER_IMAGE:return Hd.getOperatorImageInsKey();case W.ENV_INFO_KEYS.LOCALE:return Hd.getUseLocale();case W.ENV_INFO_KEYS.TIMEZONE:return Hd.getTimeZone();case W.ENV_INFO_KEYS.WORK_GROUP:return Hd.getOperatorWorkGroup();default:return c}})),nn.registerHandler("@DATASOURCE",((c,l)=>{const u=l.getValue(c)||[],d=l.getComponentConfig(),p=Object.keys(d).find((l=>d[l]?.source?.includes(c)));if(p){const{fields:c,copyAll:l}=d[p],h=[];return u.forEach((u=>{const d={};l?Object.keys(u).forEach((c=>{const l=rn.getPropertyName(c);d[l]=u[l]})):Object.keys(c).forEach((l=>{const p=rn.getPropertyName(c[l]);d[l]=u[p]})),h.push(d)})),h}return[]})),nn.registerHandler("@FIELD_META",((c,l)=>{let u,d={};if(d=c.startsWith(".")?l.getFieldMetadata(c.substring(1)):l.getFieldMetadata(c),d&&d.datasource&&d.datasource.parameters){let p="";const h=c.split(".").filter((c=>!!c));if(h.length>1&&(h.pop(),p=`.${h.join(".")}`),Array.isArray(d.datasource.parameters)){const c=[];d.datasource.parameters.forEach((u=>{const d={},{name:h,value:g}=u;d.name=h,"string"==typeof g&&g.startsWith("@P")?d.value=`@P ${p}${g.substring(3)}`:d.value=g,c.push(l.resolveConfigProps(d))})),u=c}else u=l.resolveConfigProps(d.datasource.parameters);d={...d,datasource:{...d.datasource,parameters:u}}}return d})),nn.registerHandler("@USER",((c,l,u={})=>{const d=l?.getValue(c)||sh.getLitePropertyValue(u,c),p=l?.getReferencedUser(d)||sh.getReferencedUser(d,u);return{userId:d,userName:p?p.UserName:null}})),nn.registerHandler("@ACTIVE_CASES",((c,l)=>_u.getOpenedCaseItems(`${l.getContextName()}/${l.getContainerName()}`))),nn.registerHandler("@LR",(c=>c)),nn.registerHandler("@CASE",((c,l)=>c===W.ID?l.getCaseInfo().getKey():c)),nn.registerHandler("@SHARED",(c=>Su.getSharedState(c))),nn.registerHandler("@PARAGRAPH",((c,l)=>{const u=l.getLocalizedParagraphValue(c);return u?Xd.getParagraphStream(u,l):null})),nn.registerHandler("@FILTERED_LIST",((c,l)=>{const u=c.substring(1,c.indexOf("[")),d=c.substring(c.indexOf("]")+2),p=c.substring(c.indexOf("[")+1,c.indexOf("]"));if(!l)return null;const{useCustomContext:h}=l;let g;return eh.isEmpty(h)?g=l.getValue(`.${u}`):(g=h,g=eh.getIn(g,u)),g&&d.length>0?(p&&(g=g.filter((c=>zt(p,c)))),g.map((c=>eh.getIn(c,d)))):null})),nn.registerHandler("@ADDRESS",((c,l)=>{const u=l.getValue(c)?.pyCountry;return u?`pyAddressForm_${u}`:"pyAddressForm"})),nn.registerHandler("@DATATYPE",((c,l)=>l.getValue(c)));const Jd="downloadAttachment",Qd={},Zd=c=>{const l=uc();return Qd[c]=l,l},ep=c=>{let l="document-doc";if(!c)return l;if(c.startsWith("audio"))l="audio";else if(c.startsWith("video"))l="video";else if(c.startsWith("image"))l="picture";else if(c.includes("pdf"))l="document-pdf";else{const[,u]=c.split("/"),d=c=>c.some((c=>u.includes(c)));d(["excel","spreadsheet"])?l="document-xls":d(["zip","compressed","gzip","rar","tar"])&&(l="document-compress")}return l},tp=c=>{let l,u,d,p;return l=c.pyCategoryLabel?`${c.pyCategoryLabel},`:c.pyCategoryName?`${c.pyCategoryName},`:c.Category,u=c.pxCreateOpName?c.pxCreateOpName:c.pxCreateOperator?c.pxCreateOperator:c.CreateUser?.Name||"",d=c.pyFileName?c.pyFileName:c.FileExtension&&""!==c.FileExtension&&c.FileName.endsWith(c.FileExtension)?c.FileName.substring(0,c.FileName.lastIndexOf(c.FileExtension)-1):c.FileName,p=c.pyAttachName&&c.pyFileName?c.pyAttachName.startsWith(c.pyFileName)&&c.pyAttachName.split(".").length-1===c.pyFileName.split(".").length?c.pyAttachName.split(".").pop():"":c.FileExtension,{props:{meta:`${l} ${u}`,name:c.pyAttachName?c.pyAttachName:c.FileName,icon:ep(c.pyMimeFileExtension||c.MimeType)},responseProps:{fileName:c.pyAttachName?c.pyAttachName:c.FileName,name:d,category:c.pyCategoryName?c.pyCategoryName:c.Category,extension:p,ID:c.pzInsKey?c.pzInsKey:c.ID,mimeType:c.pyMimeFileExtension?c.pyMimeFileExtension:c.MimeType,attachmentURL:c.pyAttachmentLink?c.pyAttachmentLink:c.AttachmentURL,createUser:u,createDateTime:c.pxCreateDateTime?c.pxCreateDateTime:c.CreateDateTime,responseType:c.responseType??(c.ID?"binary":null)}}},np={uploadAttachment:(c,l,u,d)=>{const p=new FormData;p.append("appendUniqueIdToFileName",!0),p.append("file",c);const{restApi:h,reqType:g}=sg("uploadAttachment",{});return ic(h,{method:g,headers:{"Content-Type":"multipart/form-data"},body:p,onUploadProgress:l,signal:Zd(c.ID).token},d).then((l=>({type:"File",category:c.category||"File",ID:l.data.ID,clientFileID:c.ID,filename:c.name}))).catch(u?u(dc,c):c=>{throw c.isHandled=!1,c}).finally((()=>delete Qd[c.ID]))},linkAttachmentsToCase:(c,l,u,d)=>{const p={};if("File"===u){const[c]=l,{clientFileID:u}=c;delete c.clientFileID,p.signal=Zd(u).token}const{restApi:h,reqType:g}=sg("linkCaseAttachment",{caseID:c});return ic(h,{...p,body:{attachments:l},method:g},d)},getCaseAttachments:(c,l,u=!1)=>{const{restApi:d,reqType:p}=sg("getCaseAttachments",{caseID:c,includeThumbnail:u});return ic(d,{method:p},l).then((c=>c.data.attachments))},getAttachmentCategories:(c,l,u)=>{const{restApi:d,reqType:p}=sg("getAttachmentCategories",{caseID:c,type:l});return ic(d,{method:p},u).then((c=>c.data))},downloadAttachment:(c,l,u)=>{const{restApi:d,reqType:p}=sg(Jd,{attachmentID:c});return ic(d,{method:p,..."binary"===u&&{responseType:"arraybuffer"}},l)},editAttachment:(c,l,u)=>{const{restApi:d,reqType:p}=sg("editAttachment",{attachmentID:c});return ic(d,{method:p,body:{...l}},u)},deleteAttachment:(c,l)=>{const{restApi:u,reqType:d}=sg("deleteAttachment",{attachmentID:c});return ic(u,{method:d},l)},downloadDocument:(c,l)=>{const{restApi:u,reqType:d}=sg("downloadDocument",{documentID:c});return ic(u,{method:d},l)},deleteDocument:(c,l,u)=>{const{restApi:d,reqType:p}=sg("deleteDocument",{caseID:c,documentID:l});return ic(d,{method:p},u)},getDocumentURL:c=>{const l=PCore.getEnvironmentInfo().getDocumentUrlDP()||"D_pxGetDocumentURL";return PCore.getDataPageUtils().getPageDataAsync(l,c.getContextName(),{},{invalidateCache:!0}).catch((l=>{c.reportError(": Error occurred during ajax call getDocumentURL API : ",l.response)}))},cancelRequest:c=>{Qd[c]&&(Qd[c].cancel(),delete Qd[c])},buildFilePropsFromResponse:tp,getAttachmentURL:c=>{const{restApi:l}=sg(Jd,{attachmentID:c});return l},prepareAttachmentData:c=>{let l=[];if(c&&Object.hasOwn(c,"pyCount")&&c.pyCount>0)l=c?.pxResults?.filter((c=>!!c.pzInsKey)).map((c=>tp(c)))||[];else if(c&&"object"==typeof c){let u;u=Array.isArray(c)?c:[c],l=u?.filter((c=>c.ID&&c.FileName||c.pzInsKey)).map(tp)}else l=[];return{hasUploadedFiles:l.length>0,categoryName:c?.pyCategoryName||l?.[0]?.responseProps?.category||"",attachments:l}}};nn.registerHandler("@ATTACHMENT",((c,l,u)=>{let d;return d=l?l.getValue(c):sh.getLitePropertyValue(u),np.prepareAttachmentData(d)})),nn.registerHandler("@FL",((c,l)=>l.getLocalizedValue(l.getFieldMetadata(c)?.label))),nn.registerHandler("@GENAICOACH",((c,l)=>Dp(c,l.getCurrentClassID()))),nn.registerHandler("@REFRESH",((c,l)=>{const u=l.getCaseInfo().getKey(),d=l.getContextName(),p=l.getPageReference();ol.registerForRefresh("PROP_CHANGE",l.getActionsApi().refreshCaseView.bind(l.getActionsApi(),u,"",p,{autoDetectRefresh:!0,preserveClientChanges:!1,refreshFor:!0}),`${p}${c}`,`${d}/${p}`,d)}));const rp={},sp={},ap={},op={},ip={},cp={},lp={},up={},dp={},pp={},hp=(c={},l={})=>{0!==Object.keys(l).length?Object.keys(c).forEach((u=>{const d=c[u],p=l[u];if(p){const c=Array.isArray(p)?p:[p];(Array.isArray(d)?d:[d]).forEach((l=>{const u=c.findIndex((c=>c.classID===l.classID));if(-1===u)c.push(l);else{const d={isDeclarativeTarget:!1},p={...c[u],...d,...l};c[u]=p}})),l[u]=1===c.length?c[0]:c}else l[u]=d})):eh.copy(c,l)},gp=(c,l="")=>{if(!c)return null;const u=op[c];if(!u)return null;if(!l)return Array.isArray(u)?[...u]:u;let d;return d=Array.isArray(u)?u.find((c=>c.classID.toLowerCase()===l.toLowerCase()))||null:u.classID.toLowerCase()===l.toLowerCase()||("Page"===u.type||"Page List"===u.type)&&u?.pageClass?.toLowerCase()===l.toLowerCase()?u:null,d},fp=(c,l,u,d=[])=>{if(!l||!c)return null;if(!c.includes(".")){let p;const h=gp(c,l);return d.length&&(p=d.join(".")),{...h,embeddedType:u,category:p}}const[p,...h]=c.split("."),g=gp(p,l);return g&&d.push(g.label),fp(h.join("."),g?.pageClass,g?.type,d)},mp=c=>{hp(c,sp)},yp=c=>{hp(c,ap)},Ip=c=>{if(c.views&&hp(c.views,sp),c.navigations&&hp(c.navigations,ap),c.personalizations&&hp(c.personalizations,cp),c.insights&&hp(c.insights,lp),c.paragraphs&&hp(c.paragraphs,rp),c.dataTypes&&hp(c.dataTypes,up),c.datapages&&hp(c.datapages,dp),c.genAICoaches&&hp(c.genAICoaches,pp),c.fields){Object.keys(c.fields).forEach((l=>{const u=c.fields[l];if(Array.isArray(u)){if(c.datapages&&u.forEach((l=>{l.datasource&&"DataPage"===l.datasource.tableType&&(l.datasource.mode=c.datapages[l.datasource.name].mode)})),1===u.length){const[d]=u;c.fields[l]=d}}else c.datapages&&u.datasource&&"DataPage"===u.datasource.tableType&&(u.datasource.mode=c.datapages[u.datasource.name].mode)}));const{datapages:l={}}=c;Object.keys(l).forEach((c=>{ip[c]=l[c]}))}hp(c.fields,op)},Ep=c=>sp[c],Ap=(c,l)=>{const u=sp[c];return Array.isArray(u)?u.some((c=>c.classID===l)):u?.classID===l},_p=c=>ap[c],Cp=c=>c in ip?ip[c]:null,Sp=c=>c in cp?cp[c]:null,Tp=c=>c in lp?lp[c]:null,Np=c=>{const l={};return Object.keys(op).forEach((u=>{const d=op[u];let p;Array.isArray(d)?p=d.find((l=>c===l.classID)):c===d.classID&&(p=d),p&&(l[u]=eh.deepClone(p))})),l},Pp=(c,l)=>{const u=gp(c,l)?.datasource?.parameters;return u?eh.deepClone(u):null},bp=(c,l)=>{let u=null;const d=rp[c];return d&&(Array.isArray(d)?u=d.find((c=>c.classID===l)):d.classID===l&&(u=d)),u?eh.deepClone(u):null},Dp=(c,l)=>{let u=null;const d=pp[c];return d&&(Array.isArray(d)?u=d.find((c=>c.classID===l)):d.classID===l&&(u=d)),u?eh.deepClone(u):null},Rp=c=>{if(c in up){const{savableDataPage:l}=up[c];return l}return null},Op=c=>{const l=dp[c];if(!l)return null;const{classID:u,isAlternateKeyStorage:d,parameters:p}=l;if(d)return p.map((c=>({keyName:c.name,isAlternateKeyStorage:d,linkedField:c.linkedField})));const h=up[u];return h?h.classKeys.map((c=>({keyName:c,isAlternateKeyStorage:d}))):[]},vp=c=>{if(c in up){const{lookupDataPage:l}=up[c];return l}return null},xp=c=>{if(Object.prototype.hasOwnProperty.call(up,c)){const{lookupDataPageInfo:l}=up[c];return l}return null},wp=(c,l)=>{const u=c.split("."),d=u.pop(),p=new Zu({options:{pageReference:`${u.join(".")}`,context:l}}),h=gp(d,p.getCurrentClassID())?.additionalInformation;if(!h?.includes("@PARAGRAPH"))return h;const g=rn.trimAnnotation(h),f=p.getCurrentClassID(),m=bp(g,f),y=m?.definedOnClassID,I=zd.getParagraphLocaleValue(y||f,g);return I?Xd.getParagraphStream(I,p):m?.content?Xd.getParagraphStream(m.content,p):null},Mp=(c,l)=>{const u=c.split("."),d=u.pop(),p=new Zu({options:{pageReference:`${u.join(".")}`,context:l}}),h=gp(d,p.getCurrentClassID()),g={};return p._classID=p.getCurrentClassID(),p.resolveConfigProps(h,g),g};class nh{constructor(){this.name="CascadeManager",this.cascadeSubscribers={},this.cascadeResetSubscribers={},this.listChangeSubscribers=[]}registerResetDependencies(c,l,u,d,p,h="singleRecord"){if(!c||!u||!d?.length)return;const g=u.startsWith(".")?`${l}.${u.substring(1)}`:u,f=this.cascadeResetSubscribers[c]||{},m=this._handlePageReference(l,u,p);d.forEach((c=>{if(!c)return;let l=c.startsWith(".")?c.substring(1):c;if(l=eh.getFullPropertyReference([m,l]),l in f){const c=f[l];c.find((c=>c.propertyName===g))||c.push({propertyName:g,mode:h})}else f[l]=[{propertyName:g,mode:h}]})),Object.keys(f).length>0&&(this.cascadeResetSubscribers[c]=f)}deregisterResetDependencies(c,l,u,d,p){if(!c||!u||!d?.length)return;const h=u.startsWith(".")?`${l}.${u.substring(1)}`:u,g=this.cascadeResetSubscribers[c]||{},f=this._handlePageReference(l,u,p);d.forEach((c=>{if(c){let l=c.startsWith(".")?c.substring(1):c;if(l=eh.getFullPropertyReference([f,l]),l in g){const c=g[l];eh.removeExistingDependentProperty(c,h)}}})),Object.keys(g).length>0&&(this.cascadeResetSubscribers[c]=g)}getResetDependencies(c,l){return this.cascadeResetSubscribers[c]?.[l]||[]}purgeResetDependencies(c){c&&this.cascadeResetSubscribers[c]&&delete this.cascadeResetSubscribers[c]}registerFields(c,l,u,d,p){this.cascadeSubscribers[c]=this.cascadeSubscribers[c]||{},u?.forEach((u=>{this.cascadeSubscribers[c][`${l}${u}`]=this.cascadeSubscribers[c][`${l}${u}`]||{};const h=this.cascadeSubscribers[c][`${l}${u}`];if(!h[p]){h[p]=d;const g=Wp(u,l,c);h.previousValue="object"==typeof g?null:g}}))}registerListField(c,l,u,d,p){const h=nh._getFieldsForList(c,l,u);h.length>0&&(this.registerFields(c,l,h,d,p),Wl.enableCascade(c))}unRegisterListField(c,l,u,d){const p=nh._getFieldsForList(c,l,u);p.length>0&&this.unRegisterFields(c,l,p,d)}static _getFieldsForList(c,l,u){const d=[],p=gp(u,Wp("classID",l,c));return p&&!Array.isArray(p)&&p.datasource&&p.datasource.parameters&&Object.values(p.datasource.parameters).forEach((c=>{if(rn.isProperty(c)){const l=rn.trimAnnotation(c);d.push(l)}})),d}unRegisterFields(c,l,u,d){this.cascadeSubscribers[c]&&u?.forEach((u=>{if(!this.cascadeSubscribers[c][`${l}${u}`])return;const p=this.cascadeSubscribers[c][`${l}${u}`];p[d]&&delete p[d]}))}triggerCascade(c,l,u,d){let p=!1;this.cascadeSubscribers[c]&&this.cascadeSubscribers[c][l]&&(Object.keys(this.cascadeSubscribers[c][l]).forEach((h=>{const g=this.cascadeSubscribers[c][l];"previousValue"!==h&&g.previousValue!==u&&(p=!0,d?d.add(g[h]):g[h](l,u))})),p&&(this.cascadeSubscribers[c][l].previousValue=u))}purgeCascadeFields(c){delete this.cascadeSubscribers[c]}handleServerChanges(c,l=[],u=[]){if(!c)return;const d=new Set;u.forEach((l=>{const u=Wp(l,"",c);this.triggerCascade(c,l,u,d)})),d.forEach((c=>{c()})),0!==this.listChangeSubscribers.length&&0!==l.length&&l.forEach((l=>{this.listChangeSubscribers.forEach((u=>{const d=Wp(l,"",c);u(c,l,d)}))}))}_updateChangedProperties(c,l,u,d,p,h,g){if(c!==l){const c=d.lastIndexOf("."),l=d.substring(0,c),f=d.substring(c),m=ar.getMessages({type:"error",property:f,context:p,pageReference:l});if(m?.length>0&&g.push(d),!u)return;h.push(d)}}_getServerProperties(c,l,u,d,p,h){if("object"!=typeof c){p.push(u.replace(/\.(\d+)/g,"[$1]"));const g=/[a-zA-Z]+\.(\d+)\./g;let f=!0;0!==this.listChangeSubscribers.length&&g.test(u)||(f=!1),u=u.replace(/\.(\d+)/g,"[$1]");const m=Wp(u,"",l);if(void 0===m&&!c&&0!==c)return;return void this._updateChangedProperties(m,c,f,u,l,d,h)}const g=Object.keys(c??{});for(let f=0,m=g.length;f<m;f+=1){const m=g[f],y=`${u}.${m}`;this._getServerProperties(c[m],l,y,d,p,h)}}getServerProperties(c,l,u=W.CASE_INFO.CASE_INFO_CONTENT){const d=[],p=[],h=[],g=eh.getIn(c,u);return g&&l?(this._getServerProperties(g,l,u,d,h,p),{changedListProperty:d,leafProperty:h,changedPropertyWithError:p}):{changedListProperty:d,leafProperty:h,changedPropertyWithError:p}}_handlePageReference(c,l,u){let d=c;return"Page"===u&&l.startsWith(".")&&l.slice(1).includes(".")&&(d=`${c}${l.substring(0,l.lastIndexOf("."))}`),d}registerForListChanges(c=()=>{}){this.listChangeSubscribers.push(c)}unRegisterForListChanges(){this.listChangeSubscribers=[]}}const Lp=new nh;let Up=null;const Fp=c=>c?.split(/\.(?![^[]+\])|\[|\]/g).filter(Boolean),jp=c=>{Up=c},Vp=()=>Up,kp=c=>{if(!c)return;let l=[],u=[],d=[];Array.isArray(c)||"MERGE_DATA"!==c.type||({changedListProperty:l,leafProperty:u,changedPropertyWithError:d}=Lp.getServerProperties(c.payload.data,c.payload.context,c.payload.rootPageReference)),Vp()?.dispatch(c),Array.isArray(c)||"MERGE_DATA"!==c.type||(d.forEach((l=>{const u=l.lastIndexOf("."),d=l.substring(0,u),p=l.substring(u);ar.clearMessages({type:"error",property:p,pageReference:d,context:c.payload.context});const h=Rn.getFieldReferenceForProperty(c.payload.context,l),g=sh.resolveContextTreeNodeProps(h.props);Lr.validate(g.componentName?.toLowerCase(),g.propertyName,sh.getLitePropertyValue(g,g.propertyName),g)})),Lp.handleServerChanges(c.payload.context,l,u))},$p=c=>Vp()?.getState().data?.[c],Bp=()=>Vp()?.getState().data[W.SHARED],Gp=(c,l,u)=>{if(!(d=c)||d.startsWith('"')||d.startsWith("'"))return(c=>c&&c.trim().substring(1,c.length-1))(c);var d;const p=c?.startsWith(".")?l+c:c,h=Fp(p);return eh.getIn(u,h)},Wp=(c,l,u)=>Gp(c,l,$p(u)),Hp=(c,l,u)=>Gp(l,c?`${W.CONTEXT_DATA}.${c}`:`${W.CONTEXT_DATA}`,$p(u)),qp=(c,l,u)=>((c,l,u)=>{const d=Fp(`${l}.${u}`);return eh.getIn(c,d)})($p(u),`${W.CONTEXT_DATA}.${c}`,l),zp=c=>{const{context:l}=c,u=Vp()?.getState().data[l];if(u)return me;const{action:d}=c;return["createWork","showHarness","openAssignment","openWorkByHandle","initRouting"].includes(d)?be:me},Yp=(c,l)=>{const u=Fp(l);return eh.deleteIn(c,u)},Kp=c=>!Array.isArray(c)&&"object"==typeof c,Xp=(c,l,u={})=>{const{isArrayDeepMerge:d,propertiesToReplace:p=[]}=u;Array.isArray(c)&&!l&&(l=[]),Array.isArray(p)&&p.length>0&&p.forEach((l=>{eh.setIn(c,l,{})}));const h=(c,l)=>{if(Kp(c)&&null!==l&&"string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l)return j()(c,l,h);if(Array.isArray(c)&&null!==l&&Array.isArray(l)){if(d)return j()(c,l,h);{const u=l.length;if(void 0===d&&u===c.length)return j()(c,l,h)}}return""===l&&c&&"object"==typeof c?c:l};return h(c,l)},Jp=(c,l,u,d={isArrayDeepMerge:!0})=>{const{isArrayDeepMerge:p}=d,h=Fp(l);if("object"==typeof u){const l=Xp(eh.getIn(c,h),u,{isArrayDeepMerge:p});return eh.setIn(c,h,l)}return eh.setIn(c,h,u)},Qp=(c,l,u)=>{const d=Fp(l);return eh.setIn(c,d,u)},Zp=()=>{const c=st,{promise:l,actionMgrID:u}=gn.actionManagerPromise(c);return kp({type:c,payload:{actionMgrID:u}}),l};class Ch{static mergeDeep(c,l){return j()(l,c)}static hasIn(c,l){return x()(c,l)}static getIn(c,l,u){return M()(c,l,u)}static setIn(c,l,u){return U()(c,l,u)}static deleteIn(c,l){return O()(c,l)}static isObjectEmpty(c){return!c||0===Object.entries(c).length}static isEmpty(c){return k()(c)}static deepClone(c={}){return JSON.parse(JSON.stringify(c))}static copy(c,l){Object.keys(c).forEach((u=>{l[u]=c[u]}))}static isPropertyRef(c){if(!c||-1===c.indexOf("."))return!1;let l=0;const u=c.length;for(;l<u;l+=1)if(" @#$%=!<>/\\".includes(c[l]))return!1;return!0}static isWhenExist(c){const l=["visibility","disabled","readOnly","required"];let u=!1;for(const d in c)l.includes(d)&&"string"==typeof c[d]&&c[d]?.startsWith("@W ")&&(u=!0);return u||"multirecordlist"!==c?.type||"Editable"!==c?.renderMode||(u=Object.keys(c?.allowActions??{}).some((l=>"string"==typeof c?.allowActions?.[l]&&c.allowActions[l]?.startsWith("@W ")))),u}static getWhenNames(c){const l=["visibility","disabled","readOnly","required"];let u="";const d=new Set;for(const p in c)l.includes(p)&&"string"==typeof c[p]&&c[p]?.startsWith("@W ")&&(u=rn.trimAnnotation(c[p]),d.add(u));return"multirecordlist"===c?.type&&"Editable"===c?.renderMode&&Object.keys(c?.allowActions??{}).forEach((l=>{"string"==typeof c?.allowActions[l]&&c.allowActions[l]?.startsWith("@W ")&&(u=rn.trimAnnotation(c.allowActions[l]),d.add(u))})),[...d]}static isExpressionExist(c){const l=["disabled","visibility","readOnly","required"];let u=!1;for(const d in c)l.includes(d)&&"string"==typeof c[d]&&c[d]?.startsWith("@E ")&&(u=!0);return u}static buildDataObject(c,l){let u={};const d=u;return l.indexOf(".")>0?l.split(".").forEach((c=>{if(c.includes("[")){const[l]=c.split("[");u[l]=[],u=u[l],c=c.substring(c.indexOf("[")+1,c.lastIndexOf("]"))}u[c]={},u=u[c]})):(u[l]={},u=u[l]),Object.keys(c).forEach((l=>{let d=l;l.startsWith(".")&&(d=l.substring(1)),u[d]=c[l]})),d}static buildObject=(c,l,u)=>{if(void 0===u)return;const d=c.split(".");let p=0;for(;p<d.length-1;p+=1){const c=d[p];c?.toString().length&&!l[c]&&(l[c]={}),l[c]&&(l=l[c])}"object"==typeof u?(l[d[p]]||(l[d[p]]=Array.isArray(u)?[]:{}),Xp(l[d[p]],u,{isArrayDeepMerge:!0})):l[d[p]]=u};static getHashedString(c){return(0,D.crc32)(c).toString(16)}static getPropertyName(c){if(c){const l=c.startsWith("@P"),u=l?c.indexOf(" "):-1;return l?c.substring(u+2):c}return c}static getPropertyNameFromDependency(c){return"string"==typeof c?c:c.propertyName}static isValidJson(c){try{return JSON.parse(c)}catch(c){return console.error("not a Valid JSON",c),!1}}static isEqual(c,l){return A()(c,l)}static isContains(c,l){const u=Object.keys(c);for(let d=0;d<u.length;d+=1)if(c[u[d]]&&Ch.isEqual(c[u[d]],l))return!0;return!1}static removeExistingDependentProperty(c,l){const u=c.findIndex((c=>c.propertyName===l));u>=0&&c.splice(u,1)}static getFullPropertyReference(c){return Array.isArray(c)?c.filter((c=>!!c)).join("."):""}static iterateLeafNodes(c,l){const u=(c,d=[])=>{Object.entries(c).forEach((([p,h])=>{d.push(Array.isArray(c)?Number(p):p),Array.isArray(h)?h.forEach(((c,l)=>{d.push(l),u(c,d),d.pop()})):"object"==typeof h?u(h,d):l(d.slice(),h),d.pop()}))};u(c)}static resolveStringBooleans(c){const l=["required","readOnly","visibility"];return Object.keys(c).forEach((u=>{l.includes(u)&&"string"==typeof c[u]&&(c[u]="true"===c[u])})),c}static generateUniqueID(){return crypto.randomUUID()}static unflatten(c){const l={};return Object.entries(c).forEach((([c,u])=>{const d=c.split(".");let p;d.reduce(((c,l,h)=>(p=c[l]?c[l]:Number.isNaN(Number(d[h+1]))?d.length-1===h?u:{}:[],c[l]=p,c[l])),l)})),l}static flatten(c,l,u){l||(l=""),Array.isArray(c)?c.forEach(((c,d)=>{Ch.flatten(c,`${l}[${d}]`,u)})):"object"==typeof c&&null!==c?Object.keys(c).forEach((d=>{const p=l?`${l}.${d}`:d;Ch.flatten(c[d],p,u)})):u[l]=c}static buildInstructionPageReference(c,l){const u=`${c}${l}`.replace(W.CASE_INFO.CASE_INFO_CONTENT,"").replace(W.DATA_INFO.DATA_INFO_CONTENT,"");return zn.formatPageReference(u)}static buildAttachmentsFormData(c){return c.map((c=>{if(c.delete){let l="";return l=c.responseProps.ID?c.responseProps.ID:c.responseProps.pzInsKey,{type:"File",attachmentFieldName:c.label,delete:!0,pzInsKey:l}}return{type:"File",attachmentFieldName:c.label,category:c.category,ID:c.handle,clientFileID:c.ID}}))}static convertPageRefToClipboardPageNotation(c){return c.replace(/\[\d+\]/g,(c=>c.replace(/\d+/g,(c=>`${parseInt(c,10)+1}`)).replace("[","(").replace("]",")")))}static convertClipboardPageToPageRefNotation(c){return c.replace(/\(\d+\)/g,(c=>c.replace(/\d+/g,(c=>""+(parseInt(c,10)-1))).replace("(","[").replace(")","]")))}static isString(c){return"string"==typeof c}static rejectPendingActions(c){return c.forEach((c=>c.payload.actionMgrID&&gn.rejectActionByID(c.payload.actionMgrID))),!0}static isValidAnnotation(c){const l=new Set(["@DATASOURCE","@ACTIVE_CASES","@ADDRESS","@ASSOCIATED","@ATTACHMENT","@CASE","@FILTERED_LIST","@PARAGRAPH","@P","@ROUTING_INFO","@USER","@W","@E","@SHARED"]),u=c.indexOf(" "),d=c.substring(0,u);return l.has(d)}static trimDotForProperty(c){return"string"==typeof c&&c.startsWith(".")?c.substring(1):c}static convertObjectWithStringToBoolean(c){if(c&&!Array.isArray(c)&&"object"==typeof c)return Object.keys(c).forEach((l=>{let u;const d=c[l];u="string"==typeof d?"true"===d||"false"!==d&&d:d,c[l]=u})),c}}const eh=Ch,th=W.SUMMARY_OF_LISTS,rh=W.SUMMARY_OF_WHEN_CONDITIONS;class Ph{static updateData(c){Object.keys(c).forEach((l=>{kp(uh({context:l,data:c[l]}))}))}static updateContextData(c){Object.keys(c).forEach((l=>{kp(uh({context:l,data:c[l]}))}))}static resolveWhen(c,l){return!!l.getContextDataValue(`.${rh}.${c}`)}static resolveFieldValue(c,l){return l.getLocalizedValue(c)}static resolveNavigation(c,l){return _p([this.resolveName(c,l)])}static resolveView(c,l,u=""){const d=Ep([this.resolveName(c,l)]);let p=[];return Array.isArray(d)&&d.length>0?(l&&(u||(u=l.getValue(W.CLASS_ID)),p=d.filter((c=>c[W.CLASSID]===u))),0===p.length?d[0]:p[0]):d}static resolveName(c,l){return c&&"string"==typeof c&&c.startsWith("param.")?(c=c.substring(6),l.getContextDataValue(`.$parameters.${c}`)):(c&&"string"==typeof c&&c.startsWith("@")&&(c=rn.handleAnnotation(c,l)),c)}static getContextPath(c,l){return"number"!=typeof l&&!l||"number"!=typeof(l=rn.trimAnnotation(l))&&"string"!=typeof l?c:"number"==typeof l&&parseInt(l,10)===l?`${c}[${l}]`:l.startsWith(".")?c+l:`${l}`}static getRuleClass(c,l,u){let d;return l?d=l.startsWith(W.CLASS_ANNOTATION)?l.split(W.CLASS_ANNOTATION)[1].trim():this.resolveClassID(l,c.getPageReference(),c.getContextName()):u?.authorContext&&(d=u.ruleClass),d}static resolveReference(c,l){const{type:u}=c;let d;if("reference"===u){const{config:u}=c,p=u?.type,{ref:h,name:g,context:f}=u||{},m=this.getRuleClass(l,f,u);return"navigation"===p?d=this.resolveNavigation(h||g,l):"view"===p?d=this.resolveView(h||g,l,m||""):"widget"===p&&(d={type:"Widget",config:{name:g,ruleClass:m}}),d}return c}static resolvePropertyReference(c,l,u){return Wp(l,c,u)}static getProperty(c,l,u){let d=this.resolvePropertyReference(l,c,u);if(null==d||0===d.length){const p=qp(`${l}.${th}`,c,u);p&&(d=this.resolvePropertyReference(l,p,u))}return d}static getPropertyValue(c,l,u){return c=rn.trimAnnotation(c),this.getProperty(c,l,u)}static getReferencedUser(c,l){const u=Ph.getLitePropertyValue(l,"referencedUsers");if(Array.isArray(u)){const l=u.find((l=>l.UserID===c));if(l)return{userId:l.UserID,UserName:l.UserName}}return u?.[c]}static getLitePropertyValue(c,l){if(!c)return;const{useCustomContext:u,propertyName:d,hasSuggestions:p,pageReference:h,context:g}=c;let f=l||d;return u?(f=f?.startsWith?.(".")?f.substring(1):f,f?.split?.(".").reduce(((c,l)=>c?.[l]??void 0),u)):p?Ph.getPropertyValue(f,h,`${g}/${W.SUGGESTION}`):Ph.getPropertyValue(f,h,g)}static _handlePropString(c,l,u,d,p){u.startsWith("@")?c[l]=rn.handleAnnotation(u,d,p):c[l]=u}static _resolveProps(c,l,u){c&&Object.keys(c).forEach((d=>{const p=c[d];"string"==typeof p?this._handlePropString(c,d,p,l,u):Array.isArray(p)?p.forEach((d=>{this._resolveProps("object"==typeof d?d:c[d],l,u)})):"object"==typeof p&&this._resolveProps(c[d],l,u)}))}static resolveProps(c,l,u){return c&&l?(eh.mergeDeep(c,l),this._resolveProps(l,u,void 0),l):l}static resolveContextTreeNodeProps(c){const l={};return c?(eh.mergeDeep(c,l),this._resolveProps(l,void 0,c),eh.resolveStringBooleans(l)):l}static resolveClassID(c,l,u){const d=rn.trimAnnotation(c);let p;for(p=d.startsWith(".")?`${l}${d}`:`${d}`;p;){const c=Wp(W.CLASS_ID,p,u);if(c)return c;p=p.substring(0,p.lastIndexOf("."))}return null}}const sh=Ph,ah=new class{constructor(){this.actionHandlers={}}getHandler(c){return this.actionHandlers[c]}registerHandler(c,l){this.actionHandlers[c]=l}},oh=class{static#h=[];static#g=!1;static getActionHandlers=(c,l,u)=>{const d=[];return{mouseenter:"hover",change:"onChange",blur:"onBlur"}[u]!==l||c.forEach((c=>{const l=ah.getHandler(c.action),{config:u}=c;d.push({handler:l,config:u})})),d};static isEditable=c=>{const{tagName:l}=c;return"INPUT"===l||"TEXTAREA"===l||"SELECT"===l||"DATETIME"===l};static isNonKeyInput=c=>{const{tagName:l,type:u}=c;return"SELECT"===l||"checkbox"===u||"radio"===u};static#f=(c,l,u)=>{for(let d=0;d<c.length;d+=1){const p=c[d],h={actionHandler:p.handler,component:l,eventType:u,config:p.config};this.#h.push(h)}};static buildActionObject=(c,l)=>{const u={...c};return u.context="Browser"===Hd.getRuntime()?l.getContextName():u.context,u.pageReference=l.getPageReference(),u.actionMgrID=gn.getNextActionMgrId(),u};static#m=c=>{const l=c.actionHandler,u=c.component,{config:d}=c,p={};sh.resolveProps(d,p,u),l&&(l(c.eventType,p,u),this.#y())};static#y=()=>{if(!this.#g){if(0===this.#h.length)return;const c=this.#h.shift();this.#m(c),c.config&&"true"===c.config.parallel&&this.#h.length>0&&this.#y()}};static#I=()=>{this.#y()};static#E=(c,l,u)=>{this.#f(c,l,u),this.#I()};static getFullRef=c=>{const l=c.getPageReference(),u=c.getComponentConfig().value;return sh.getContextPath(l,u)};static#A(c,l){const u=c.getComponentConfig().behaviours||[];for(let d=0;d<u.length;d+=1){const{behaviour:p,actions:h}=u[d];if(h){const u=this.getActionHandlers(h,p,l);u&&u.length>0&&this.#E(u,c,l)}}}static changeHandler=(c,l)=>{const u=c.getStateProps().value,d=c.getContextName();if(Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,property:u,pageReference:c.getPageReference(),context:d}),("Browser"===Hd.getRuntime()?l?.nativeEvent instanceof Event||l instanceof Event:l?.nativeEvent)||null!==l.value&&void 0===l.prop){let{target:u}=l;null===u&&l&&l.auxiliaryTarget&&(u=l.auxiliaryTarget);const p=void 0===u?l.value:"value"in u?u.value:u.innerText,h=this.getFullRef(c);kp({type:re,payload:{reference:h,value:p,context:d}}),void 0!==u&&this.isEditable(u)&&!this.isNonKeyInput(u)||kp({type:ae,payload:{reference:h,pageReference:c.getPageReference(),value:p,context:d,propertyName:c.getComponentConfig().value,classID:c.getValue(W.CLASS_ID)}})}else{const u=c.getPageReference(),p=c.getStateProps();for(const c of Object.keys(l)){const h=p[c],g=l[c];kp({type:re,payload:{reference:sh.getContextPath(u,h),value:g,context:d}}),kp({type:ae,payload:{reference:sh.getContextPath(u,h),value:g,context:d}})}}};static blurHandler=(c,l)=>{let{target:u}=l;null===u&&l&&"auxiliaryTarget"in l&&(u=l.auxiliaryTarget);const{value:d,validationValue:p}=u,h=this.getFullRef(c),g=c.getContextName();u.clearMessages&&Zn({type:G.MESSAGES.MESSAGES_TYPE_ERROR,property:c.getStateProps().value,pageReference:c.getPageReference(),context:g}),this.isEditable(u)&&(c.getValidationApi().validate("validationValue"in u?p:d),c.isInsideList()&&c.getListActions().updateProperty(c.getStateProps().value,d),!this.isNonKeyInput(u)&&kp({type:ae,payload:{reference:h,pageReference:c.getPageReference(),value:d,context:g,propertyName:c.getComponentConfig().value,classID:c.getValue(W.CLASS_ID)}}))};static eventHandler=(c,l)=>{const{type:u}=l;switch(u){case"change":this.changeHandler(c,l);break;case"blur":this.blurHandler(c,l)}u&&this.#A(c,u)};static pause=()=>{this.#g=!0};static resume=()=>{this.#g=!1,this.#y()};static isQueueEmpty=()=>0===this.#h.length;static clearQueue=()=>{this.#h=[]};static getActionsQueue=()=>this.#h;static EVENTS_MAP={click:"onClick",change:"onChange",hover:"onMouseEnter",blur:"onBlur"}},ih="CREATE_WORK",ch=c=>({type:ih,payload:c}),lh=(c,l,u,d="")=>{const p=[];Object.keys(c).forEach((h=>{"object"==typeof c[h]&&h.includes("[")?function(c,l,u,d,p,h){const g=d.substring(0,d.indexOf("[")),f=d.substring(d.indexOf("[")+1,d.indexOf("]"));Array.isArray(l[g])&&(l[g]?.splice(+f,1,c[d]),h.push(g),u.add(`${p}.${d}`))}(c,l,u,h,d,p):c[h]&&"object"==typeof c[h]?(l[h]||(l[h]=Array.isArray(c[h])?[]:{}),lh(c[h],l[h],u,`${d}.${h}`)):l[h]=c[h]})),function(c,l,u){Object.keys(c).forEach((d=>{(Array.isArray(c[d])&&!u.includes(d)||!Array.isArray(c[d])&&!Object.hasOwn(l,d))&&delete c[d]}))}(l,c,p)},uh=(c,l={})=>{const{serverPrecedenceFields:u=[],propertiesToReplace:d=[]}=l,{context:p,data:h,isArrayDeepMerge:g,preserveClientChanges:f=!1}=c,m=hl(p,!0);((c,l={})=>{const u=Bc.buildClientChangeList(c)||{};Object.keys(u).forEach((c=>{eh.buildObject(c,l,u[c])}))})(p,m);const y=$p(p);let I={};if(y&&h){I=JSON.parse(JSON.stringify(y));const c=JSON.parse(JSON.stringify(h)),l=new Set;lh(m,I,l),((c,l,u)=>{const d=new Set;c.forEach((c=>{c=eh.trimDotForProperty(c);const[p,h,g]=In(c);p&&h&&g&&!d.has(`${p}.${h}`)&&((eh.getIn(u,`${p}.${h}`)||[]).forEach(((c,u)=>{u!==+g&&eh.setIn(l,`${p}.${h}[${u}]`,c)})),d.add(`${p}.${h}`))}))})(l,I,c)}!function(c,l){const u=eh.getIn(c,W.REFERENCED_USERS);let d;if(void 0!==u){if(!Array.isArray(u)&&"object"==typeof u)return d=eh.getIn(l,W.REFERENCED_USERS,{}),void eh.setIn(c,W.REFERENCED_USERS,{...d,...u});d=eh.getIn(l,W.REFERENCED_USERS,[]);const p=new Map;for(const c of[...d,...u])if(p.has(c.UserID)){const l=p.get(c.UserID);p.set(c.UserID,{...l,...c})}else p.set(c.UserID,c);u.length=0;for(const c of p.values())u.push(c)}}(h,y);const E={caseInfo:{content:{...I?.caseInfo?.content}}};let A=h;return f?(u.forEach((c=>{eh.deleteIn(E,`caseInfo.content.${c}`)})),A=Xp(h,E,{isArrayDeepMerge:!g})):((c,l)=>{const u=cl[c]||{};Object.keys(u).forEach((c=>{eh.hasIn(l,c)&&(u[c].value=eh.getIn(l,c))}));let d=Bc.getStateMachinesByContext(c)||{};d={...d,...Bc.getUnConnectedStateMachines(c)||{}},Object.keys(d).forEach((u=>{if(eh.hasIn(l,u)){const d=eh.getIn(l,u);d&&Array.isArray(d)&&0===d.length&&Bc.setStateMachineEmpty(c,u)}}))})(p,h),{type:Ae,payload:{...c,data:A,...d.length>0?{propertiesToReplace:d}:null}}},dh=c=>({type:"SHOW_HARNESS",payload:c}),ph=c=>({type:oe,payload:c}),hh=c=>({type:ie,payload:c}),gh=c=>({type:"ADD_WORK",payload:c}),fh=c=>({type:fe,payload:c}),mh=c=>({type:Ne,payload:c}),yh=c=>({type:Pe,payload:c}),Ih=c=>({type:be,payload:c}),Eh=c=>({type:Re,payload:c}),Ah=c=>({type:Oe,payload:c}),_h=c=>({type:we,payload:c}),Sh=c=>({type:Le,payload:c}),Th=c=>({type:Me,payload:c}),Nh=c=>{const{containerItemID:l}=c;return c.suggestionContexts=rd(l),{type:Fe,payload:c}},bh=c=>{const{context:l}=c;return{type:de,payload:{context:l}}},Dh=c=>{const{context:l}=c;return{type:pe,payload:{context:l}}},Rh=c=>({type:je,payload:c}),Oh=c=>({type:Ue,payload:c}),vh=c=>({type:nt,payload:c}),xh=c=>{const{context:l,containerItemID:u}=c;let d=l;return d||(d=Ju(u)),c.context=d,c.deleteContext=!yd(u),c.childContainers=td(u),c.childContainersContexts=nd(u),c.transientItems=Id([...c.childContainersContexts,u]),c.suggestionContexts=rd(u),u===l&&(c.caseID=Wp(W.CASE_INFO.CASE_INFO_ID,"",l),c.RemoteSystemID=Wp(W.CASE_INFO.REMOTESYSTEMID,"",l)),{type:De,payload:c}},wh=c=>{const{containerItemID:l}=c;return c.transientItems=Id([...nd(l),l]),{type:xe,payload:c}},Mh=c=>{const{transientItemID:l}=c;return c.transientItems=[l],{type:ve,payload:c}},Lh=c=>{const{context:l,containerItemID:u}=c;let d=l;return d||(d=Ju(u)),c.context=d,c.childContainers=td(u),c.childContainersContexts=nd(u),c.transientItems=Id([...c.childContainersContexts,u]),c.suggestionContexts=rd(u),u===l&&(c.caseID=Wp(W.CASE_INFO.CASE_INFO_ID,"",l),c.RemoteSystemID=Wp(W.CASE_INFO.REMOTESYSTEMID,"",l)),{type:Ve,payload:c}},Uh=c=>({type:ye,payload:c}),Fh=c=>({type:Ee,payload:c}),jh=c=>({type:Se,payload:c}),Vh=(c,...l)=>(oh.resume(),c(...l)),kh=(c,l,u,d,p)=>({type:Te,payload:{msg:c,err:l,context:u,formFields:d,actionMgrID:p}}),$h=c=>({type:ot,payload:c}),Bh=c=>({type:it,payload:c}),Gh=c=>({type:ct,payload:c}),Wh=c=>({type:"SHOW_CASE_PREVIEW",payload:c}),Hh=c=>({type:he,payload:c}),qh=c=>({type:re,payload:c}),zh="add",Yh="replace",Kh=["portal","noPortal","preview","debug","devtool"];let Xh="",Jh="Home",Qh="",Zh=!0;const eg=c=>(Zh=c,Zh),tg=()=>Zh,ng=(c,l,u)=>Gd.getSemanticURL(c,l,u),rg=(c,l)=>Gd.getRestEndPoint(c,l),sg=(c,l)=>{let u=P();const d=rg(c,l);return d?(d.restApi?.startsWith("/")||(d.restApi=`/${d.restApi}`),u?.endsWith("/")&&(u=u.substring(0,u.length-1)),d.restApi=u+d.restApi,d):{}},ag=(c,l,u)=>{const{root:d,resources:p}=c,{views:h}=p,{config:g}=d,f=zh;let m="";if(u)m=u;else{const c=h[g.name];let l=c;Array.isArray(c)&&c.length>0&&([l]=c),m=l.config.urlPath}const y=m.match(Ud);if(y){const c=eh.getIn(l,g.context);m=m.replace(y[0],c.pyID)}return m.startsWith("/")&&(m=m.substring(1,m.length)),{pxURLPath:m,historyAction:f}},og=(c,l,u)=>{let d,p;d=jd(l)?`${c}/${l}`:c;const h=jd(u.pxURLPath);h&&(d=`${d}/${h}`);try{p=new URL(d).searchParams,d=d.includes("?")?d.split("?")[0]:d}catch(c){return console.log("Invalid url",c),""}const g=d.split("/"),f=g[g.length-1],m=new URLSearchParams(window.location.search);if(f.toLowerCase()!==Jh.toLowerCase()||m.has("noPortal")||(d=`${c}/${l}`),!Gd.isDefaultPortal()){const c=Gd.getPortalName();m.has("portal")?m.set("portal",c):m.append("portal",c)}return p=((c,l)=>{for(const[u,d]of l.entries())!c.has(u)&&Kh.includes(u)&&c.append(u,d);return c})(p,m),p.toString()&&(d+=`?${p.toString()}`),d},ig=(c,{urlPathObjParam:l,infoParam:u,optionsParam:d},p=!1)=>{let h,g,f;if(!1===window.PCore.getBehaviorOverride("dynamicSemanticUrl"))return;if(p)h=l,g=u,f=d;else{const{uiResources:u,data:d}=c;({options:f}=c),h=l&&l.pxURLPath&&Fd(l.pxURLPath)?ag(u,d,l.pxURLPath):l||ag(u,d),g=Gd.getEndPointInfo(h.pxURLPath),h.pxURLPath=g.urlPath}const m=og(Xh,Gd.getApplicationPath(),h),{title:y}=((c,l,u)=>{if(c=(c=>{let l=c.split(" ");return l=l.map((c=>c.charAt(0).toUpperCase()+c.slice(1))),l.join(" ")})(c=c&&""!==c?c:Gd.getApplicationName()),u===`${Xh}/${l}/`)return{title:c};const d=new URL(u).pathname.replace(`${l}/`,""),p=d.split("/");return/\d/.test(d)?{title:`${c} - ${p[p.length-1]}`}:{title:`${c} - ${p[0]}`}})(Qh,Gd.getApplicationPath(),m),I=((c,l)=>(void 0!==c&&(c.options=l),{stateObj:c}))(g,{...f,title:y});h.historyAction===zh?((c,l,u)=>{try{window.history.pushState(c,l,u),window.scrollTo(0,0)}catch(c){throw new Error("Error- Unable to Add to Browser History")}})(I,y,m):h.historyAction===Yh&&((c,l,u)=>{try{window.history.replaceState(c,l,u)}catch(c){throw new Error("Error- Unable to Replace Browser History")}})(I,y,m)},cg=c=>{let l=null;c.directUrlUpdation&&(l={historyAction:zh,pxURLPath:""},l.pxURLPath=c.semanticURL),ig(c,{urlPathObjParam:l,infoParam:null,optionsParam:null},!1)},lg=c=>{cg(c)},ug=c=>{const l={pxURLPath:c};return og(Xh,Gd.getApplicationPath(),l)},dg=c=>{const{uiResources:l}=c;tg()&&(c.directUrlUpdation||(c=>{if(c&&c.root){const{root:l}=c,{resources:u}=c,{views:d}=u,p=l.config,h=p.type,g=p.name;if("VIEW"===h.toUpperCase()){const c=d[g];let l=c;Array.isArray(c)&&c.length>0&&([l]=c);const u=l.config;if(u.type){const c=u.type;return!(!u.urlPath||"PAGE"!==c.toUpperCase())}}return!1}return!1})(l))&&cg(c)},pg=c=>{const l={routeEndpoint:c.routeEndpoint,requestType:c.requestType,payload:c.payload,routeKey:c.routeKey,options:null};return c.options&&(l.options=c.options),l},hg=(c,l,u)=>{const{caseClassName:d,workID:p}=c.payload,{containerName:h,context:g}=l,{RemoteClassGroup:f,RemoteSystemID:y,name:I}=q.getRemoteCase(d),E={...c,headers:{RemoteSystemID:y},className:d,isTraditionalRemoteCase:!0,action:At,viewName:H,gadgetId:yc.getUniqueGadgetId(),context:u??g,skipSemanticUrl:!0,insKey:`${f?.toUpperCase()} ${p}`,containerName:h,name:I};kp(m.showPage(E))},gg=c=>{const l=(c=>c.state?c.state.stateObj:null)(c);l&&(q.isTraditionalRemoteCase(l.payload?.caseClassName)?hg({...l},l.options):kp(m.showHistory(pg(l))))},fg=()=>Gd.getApplicationPath()!==kd(),mg=(c,l=!1)=>{var u;Xh=c.domain,!1===l&&tg()&&(u=gg,window.addEventListener("popstate",(c=>u(c))),window.onbeforeunload=()=>null),Gd.init(c,Jh)},yg=c=>{(c=>{window.document.title=c})(c)};function Ig(c){return`Minified Redux error #${c}; visit https://redux.js.org/Errors?code=${c} for the full message or use the non-minified dev environment for full errors. `}var Eg="function"==typeof Symbol&&Symbol.observable||"@@observable",Ag=()=>Math.random().toString(36).substring(7).split("").join("."),_g={INIT:`@@redux/INIT${Ag()}`,REPLACE:`@@redux/REPLACE${Ag()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ag()}`};function Cg(c,l,u){if("function"!=typeof c)throw new Error(Ig(2));if("function"==typeof l&&"function"==typeof u||"function"==typeof u&&"function"==typeof arguments[3])throw new Error(Ig(0));if("function"==typeof l&&void 0===u&&(u=l,l=void 0),void 0!==u){if("function"!=typeof u)throw new Error(Ig(1));return u(Cg)(c,l)}let d=c,p=l,h=new Map,g=h,f=0,m=!1;function y(){g===h&&(g=new Map,h.forEach(((c,l)=>{g.set(l,c)})))}function I(){if(m)throw new Error(Ig(3));return p}function E(c){if("function"!=typeof c)throw new Error(Ig(4));if(m)throw new Error(Ig(5));let l=!0;y();const u=f++;return g.set(u,c),function(){if(l){if(m)throw new Error(Ig(6));l=!1,y(),g.delete(u),h=null}}}function A(c){if(!function(c){if("object"!=typeof c||null===c)return!1;let l=c;for(;null!==Object.getPrototypeOf(l);)l=Object.getPrototypeOf(l);return Object.getPrototypeOf(c)===l||null===Object.getPrototypeOf(c)}(c))throw new Error(Ig(7));if(void 0===c.type)throw new Error(Ig(8));if("string"!=typeof c.type)throw new Error(Ig(17));if(m)throw new Error(Ig(9));try{m=!0,p=d(p,c)}finally{m=!1}return(h=g).forEach((c=>{c()})),c}return A({type:_g.INIT}),{dispatch:A,subscribe:E,getState:I,replaceReducer:function(c){if("function"!=typeof c)throw new Error(Ig(10));d=c,A({type:_g.REPLACE})},[Eg]:function(){const c=E;return{subscribe(l){if("object"!=typeof l||null===l)throw new Error(Ig(11));function u(){const c=l;c.next&&c.next(I())}return u(),{unsubscribe:c(u)}},[Eg](){return this}}}}}function Sg(...c){return 0===c.length?c=>c:1===c.length?c[0]:c.reduce(((c,l)=>(...u)=>c(l(...u))))}var Tg=function(c){function l(l,u){return c.call(this)||this}return jo(l,c),l.prototype.schedule=function(c,l){return void 0===l&&(l=0),this},l}(Ko),Ng={setInterval:function(c,l){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];var p=Ng.delegate;return(null==p?void 0:p.setInterval)?p.setInterval.apply(p,Bo([c,l],$o(u))):setInterval.apply(void 0,Bo([c,l],$o(u)))},clearInterval:function(c){var l=Ng.delegate;return((null==l?void 0:l.clearInterval)||clearInterval)(c)},delegate:void 0},Pg=function(c){function l(l,u){var d=c.call(this,l,u)||this;return d.scheduler=l,d.work=u,d.pending=!1,d}return jo(l,c),l.prototype.schedule=function(c,l){var u;if(void 0===l&&(l=0),this.closed)return this;this.state=c;var d=this.id,p=this.scheduler;return null!=d&&(this.id=this.recycleAsyncId(p,d,l)),this.pending=!0,this.delay=l,this.id=null!==(u=this.id)&&void 0!==u?u:this.requestAsyncId(p,this.id,l),this},l.prototype.requestAsyncId=function(c,l,u){return void 0===u&&(u=0),Ng.setInterval(c.flush.bind(c,this),u)},l.prototype.recycleAsyncId=function(c,l,u){if(void 0===u&&(u=0),null!=u&&this.delay===u&&!1===this.pending)return l;null!=l&&Ng.clearInterval(l)},l.prototype.execute=function(c,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var u=this._execute(c,l);if(u)return u;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(c,l){var u,d=!1;try{this.work(c)}catch(c){d=!0,u=c||new Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),u},l.prototype.unsubscribe=function(){if(!this.closed){var l=this.id,u=this.scheduler,d=u.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Yo(d,this),null!=l&&(this.id=this.recycleAsyncId(u,l,null)),this.delay=null,c.prototype.unsubscribe.call(this)}},l}(Tg),bg=function(c){function l(l,u){var d=c.call(this,l,u)||this;return d.scheduler=l,d.work=u,d}return jo(l,c),l.prototype.schedule=function(l,u){return void 0===u&&(u=0),u>0?c.prototype.schedule.call(this,l,u):(this.delay=u,this.state=l,this.scheduler.flush(this),this)},l.prototype.execute=function(l,u){return u>0||this.closed?c.prototype.execute.call(this,l,u):this._execute(l,u)},l.prototype.requestAsyncId=function(l,u,d){return void 0===d&&(d=0),null!=d&&d>0||null==d&&this.delay>0?c.prototype.requestAsyncId.call(this,l,u,d):(l.flush(this),0)},l}(Pg),Dg={now:function(){return(Dg.delegate||Date).now()},delegate:void 0},Rg=function(){function c(l,u){void 0===u&&(u=c.now),this.schedulerActionCtor=l,this.now=u}return c.prototype.schedule=function(c,l,u){return void 0===l&&(l=0),new this.schedulerActionCtor(this,c).schedule(u,l)},c.now=Dg.now,c}(),Og=function(c){function l(l,u){void 0===u&&(u=Rg.now);var d=c.call(this,l,u)||this;return d.actions=[],d._active=!1,d}return jo(l,c),l.prototype.flush=function(c){var l=this.actions;if(this._active)l.push(c);else{var u;this._active=!0;do{if(u=c.execute(c.state,c.delay))break}while(c=l.shift());if(this._active=!1,u){for(;c=l.shift();)c.unsubscribe();throw u}}},l}(Rg),vg=new(function(c){function l(){return null!==c&&c.apply(this,arguments)||this}return jo(l,c),l}(Og))(bg),xg=Lo((function(c){return function(){c(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),wg=function(c){function l(){var l=c.call(this)||this;return l.closed=!1,l.currentObservers=null,l.observers=[],l.isStopped=!1,l.hasError=!1,l.thrownError=null,l}return jo(l,c),l.prototype.lift=function(c){var l=new Mg(this,this);return l.operator=c,l},l.prototype._throwIfClosed=function(){if(this.closed)throw new xg},l.prototype.next=function(c){var l=this;ui((function(){var u,d;if(l._throwIfClosed(),!l.isStopped){l.currentObservers||(l.currentObservers=Array.from(l.observers));try{for(var p=ko(l.currentObservers),h=p.next();!h.done;h=p.next())h.value.next(c)}catch(c){u={error:c}}finally{try{h&&!h.done&&(d=p.return)&&d.call(p)}finally{if(u)throw u.error}}}}))},l.prototype.error=function(c){var l=this;ui((function(){if(l._throwIfClosed(),!l.isStopped){l.hasError=l.isStopped=!0,l.thrownError=c;for(var u=l.observers;u.length;)u.shift().error(c)}}))},l.prototype.complete=function(){var c=this;ui((function(){if(c._throwIfClosed(),!c.isStopped){c.isStopped=!0;for(var l=c.observers;l.length;)l.shift().complete()}}))},l.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(l.prototype,"observed",{get:function(){var c;return(null===(c=this.observers)||void 0===c?void 0:c.length)>0},enumerable:!1,configurable:!0}),l.prototype._trySubscribe=function(l){return this._throwIfClosed(),c.prototype._trySubscribe.call(this,l)},l.prototype._subscribe=function(c){return this._throwIfClosed(),this._checkFinalizedStatuses(c),this._innerSubscribe(c)},l.prototype._innerSubscribe=function(c){var l=this,u=this,d=u.hasError,p=u.isStopped,h=u.observers;return d||p?Xo:(this.currentObservers=null,h.push(c),new Ko((function(){l.currentObservers=null,Yo(h,c)})))},l.prototype._checkFinalizedStatuses=function(c){var l=this,u=l.hasError,d=l.thrownError,p=l.isStopped;u?c.error(d):p&&c.complete()},l.prototype.asObservable=function(){var c=new _i;return c.source=this,c},l.create=function(c,l){return new Mg(c,l)},l}(_i),Mg=function(c){function l(l,u){var d=c.call(this)||this;return d.destination=l,d.source=u,d}return jo(l,c),l.prototype.next=function(c){var l,u;null===(u=null===(l=this.destination)||void 0===l?void 0:l.next)||void 0===u||u.call(l,c)},l.prototype.error=function(c){var l,u;null===(u=null===(l=this.destination)||void 0===l?void 0:l.error)||void 0===u||u.call(l,c)},l.prototype.complete=function(){var c,l;null===(l=null===(c=this.destination)||void 0===c?void 0:c.complete)||void 0===l||l.call(c)},l.prototype._subscribe=function(c){var l,u;return null!==(u=null===(l=this.source)||void 0===l?void 0:l.subscribe(c))&&void 0!==u?u:Xo},l}(wg),Lg=function(c,l){return Lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},Lg(c,l)};Object.create,Object.create;var Ug=function(c){function l(l,u){var d=c.call(this,(function(c){var l=d.__notifier.subscribe(c);return l&&!l.closed&&c.next(d.value),l}))||this;return d.__notifier=new wg,d.value=u,l.subscribe((function(c){c!==d.value&&(d.value=c,d.__notifier.next(c))})),d}return function(c,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function u(){this.constructor=c}Lg(c,l),c.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)}(l,c),l}(_i),Fg=s(923),jg=Symbol.for("immer-nothing"),Vg=Symbol.for("immer-draftable"),kg=Symbol.for("immer-state");function $g(c,...l){throw new Error(`[Immer] minified error nr: ${c}. Full error at: https://bit.ly/3cXEKWf`)}var Bg=Object.getPrototypeOf;function Gg(c){return!!c&&!!c[kg]}function Wg(c){return!!c&&(qg(c)||Array.isArray(c)||!!c[Vg]||!!c.constructor?.[Vg]||Jg(c)||Qg(c))}var Hg=Object.prototype.constructor.toString();function qg(c){if(!c||"object"!=typeof c)return!1;const l=Bg(c);if(null===l)return!0;const u=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return u===Object||"function"==typeof u&&Function.toString.call(u)===Hg}function zg(c,l){0===Yg(c)?Reflect.ownKeys(c).forEach((u=>{l(u,c[u],c)})):c.forEach(((u,d)=>l(d,u,c)))}function Yg(c){const l=c[kg];return l?l.type_:Array.isArray(c)?1:Jg(c)?2:Qg(c)?3:0}function Kg(c,l){return 2===Yg(c)?c.has(l):Object.prototype.hasOwnProperty.call(c,l)}function Xg(c,l,u){const d=Yg(c);2===d?c.set(l,u):3===d?c.add(u):c[l]=u}function Jg(c){return c instanceof Map}function Qg(c){return c instanceof Set}function Zg(c){return c.copy_||c.base_}function ef(c,l){if(Jg(c))return new Map(c);if(Qg(c))return new Set(c);if(Array.isArray(c))return Array.prototype.slice.call(c);const u=qg(c);if(!0===l||"class_only"===l&&!u){const l=Object.getOwnPropertyDescriptors(c);delete l[kg];let u=Reflect.ownKeys(l);for(let d=0;d<u.length;d++){const p=u[d],h=l[p];!1===h.writable&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(l[p]={configurable:!0,writable:!0,enumerable:h.enumerable,value:c[p]})}return Object.create(Bg(c),l)}{const l=Bg(c);if(null!==l&&u)return{...c};const d=Object.create(l);return Object.assign(d,c)}}function tf(c,l=!1){return rf(c)||Gg(c)||!Wg(c)||(Yg(c)>1&&(c.set=c.add=c.clear=c.delete=nf),Object.freeze(c),l&&Object.entries(c).forEach((([c,l])=>tf(l,!0)))),c}function nf(){$g(2)}function rf(c){return Object.isFrozen(c)}var sf,af={};function of(c){const l=af[c];return l||$g(0),l}function cf(){return sf}function lf(c,l){l&&(of("Patches"),c.patches_=[],c.inversePatches_=[],c.patchListener_=l)}function uf(c){df(c),c.drafts_.forEach(hf),c.drafts_=null}function df(c){c===sf&&(sf=c.parent_)}function pf(c){return sf={drafts_:[],parent_:sf,immer_:c,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function hf(c){const l=c[kg];0===l.type_||1===l.type_?l.revoke_():l.revoked_=!0}function gf(c,l){l.unfinalizedDrafts_=l.drafts_.length;const u=l.drafts_[0];return void 0!==c&&c!==u?(u[kg].modified_&&(uf(l),$g(4)),Wg(c)&&(c=ff(l,c),l.parent_||yf(l,c)),l.patches_&&of("Patches").generateReplacementPatches_(u[kg].base_,c,l.patches_,l.inversePatches_)):c=ff(l,u,[]),uf(l),l.patches_&&l.patchListener_(l.patches_,l.inversePatches_),c!==jg?c:void 0}function ff(c,l,u){if(rf(l))return l;const d=l[kg];if(!d)return zg(l,((p,h)=>mf(c,d,l,p,h,u))),l;if(d.scope_!==c)return l;if(!d.modified_)return yf(c,d.base_,!0),d.base_;if(!d.finalized_){d.finalized_=!0,d.scope_.unfinalizedDrafts_--;const l=d.copy_;let p=l,h=!1;3===d.type_&&(p=new Set(l),l.clear(),h=!0),zg(p,((p,g)=>mf(c,d,l,p,g,u,h))),yf(c,l,!1),u&&c.patches_&&of("Patches").generatePatches_(d,u,c.patches_,c.inversePatches_)}return d.copy_}function mf(c,l,u,d,p,h,g){if(Gg(p)){const g=ff(c,p,h&&l&&3!==l.type_&&!Kg(l.assigned_,d)?h.concat(d):void 0);if(Xg(u,d,g),!Gg(g))return;c.canAutoFreeze_=!1}else g&&u.add(p);if(Wg(p)&&!rf(p)){if(!c.immer_.autoFreeze_&&c.unfinalizedDrafts_<1)return;ff(c,p),l&&l.scope_.parent_||"symbol"==typeof d||!Object.prototype.propertyIsEnumerable.call(u,d)||yf(c,p)}}function yf(c,l,u=!1){!c.parent_&&c.immer_.autoFreeze_&&c.canAutoFreeze_&&tf(l,u)}var If={get(c,l){if(l===kg)return c;const u=Zg(c);if(!Kg(u,l))return function(c,l,u){const d=_f(l,u);return d?"value"in d?d.value:d.get?.call(c.draft_):void 0}(c,u,l);const d=u[l];return c.finalized_||!Wg(d)?d:d===Af(c.base_,l)?(Sf(c),c.copy_[l]=Tf(d,c)):d},has:(c,l)=>l in Zg(c),ownKeys:c=>Reflect.ownKeys(Zg(c)),set(c,l,u){const d=_f(Zg(c),l);if(d?.set)return d.set.call(c.draft_,u),!0;if(!c.modified_){const d=Af(Zg(c),l),g=d?.[kg];if(g&&g.base_===u)return c.copy_[l]=u,c.assigned_[l]=!1,!0;if(((p=u)===(h=d)?0!==p||1/p==1/h:p!=p&&h!=h)&&(void 0!==u||Kg(c.base_,l)))return!0;Sf(c),Cf(c)}var p,h;return c.copy_[l]===u&&(void 0!==u||l in c.copy_)||Number.isNaN(u)&&Number.isNaN(c.copy_[l])||(c.copy_[l]=u,c.assigned_[l]=!0),!0},deleteProperty:(c,l)=>(void 0!==Af(c.base_,l)||l in c.base_?(c.assigned_[l]=!1,Sf(c),Cf(c)):delete c.assigned_[l],c.copy_&&delete c.copy_[l],!0),getOwnPropertyDescriptor(c,l){const u=Zg(c),d=Reflect.getOwnPropertyDescriptor(u,l);return d?{writable:!0,configurable:1!==c.type_||"length"!==l,enumerable:d.enumerable,value:u[l]}:d},defineProperty(){$g(11)},getPrototypeOf:c=>Bg(c.base_),setPrototypeOf(){$g(12)}},Ef={};function Af(c,l){const u=c[kg];return(u?Zg(u):c)[l]}function _f(c,l){if(!(l in c))return;let u=Bg(c);for(;u;){const c=Object.getOwnPropertyDescriptor(u,l);if(c)return c;u=Bg(u)}}function Cf(c){c.modified_||(c.modified_=!0,c.parent_&&Cf(c.parent_))}function Sf(c){c.copy_||(c.copy_=ef(c.base_,c.scope_.immer_.useStrictShallowCopy_))}function Tf(c,l){const u=Jg(c)?of("MapSet").proxyMap_(c,l):Qg(c)?of("MapSet").proxySet_(c,l):function(c,l){const u=Array.isArray(c),d={type_:u?1:0,scope_:l?l.scope_:cf(),modified_:!1,finalized_:!1,assigned_:{},parent_:l,base_:c,draft_:null,copy_:null,revoke_:null,isManual_:!1};let p=d,h=If;u&&(p=[d],h=Ef);const{revoke:g,proxy:f}=Proxy.revocable(p,h);return d.draft_=f,d.revoke_=g,f}(c,l);return(l?l.scope_:cf()).drafts_.push(u),u}function Nf(c){if(!Wg(c)||rf(c))return c;const l=c[kg];let u;if(l){if(!l.modified_)return l.base_;l.finalized_=!0,u=ef(c,l.scope_.immer_.useStrictShallowCopy_)}else u=ef(c,!0);return zg(u,((c,l)=>{Xg(u,c,Nf(l))})),l&&(l.finalized_=!1),u}zg(If,((c,l)=>{Ef[c]=function(){return arguments[0]=arguments[0][0],l.apply(this,arguments)}})),Ef.deleteProperty=function(c,l){return Ef.set.call(this,c,l,void 0)},Ef.set=function(c,l,u){return If.set.call(this,c[0],l,u,c[0])};var Pf=new class{constructor(c){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(c,l,u)=>{if("function"==typeof c&&"function"!=typeof l){const u=l;l=c;const d=this;return function(c=u,...p){return d.produce(c,(c=>l.call(this,c,...p)))}}let d;if("function"!=typeof l&&$g(6),void 0!==u&&"function"!=typeof u&&$g(7),Wg(c)){const p=pf(this),h=Tf(c,void 0);let g=!0;try{d=l(h),g=!1}finally{g?uf(p):df(p)}return lf(p,u),gf(d,p)}if(!c||"object"!=typeof c){if(d=l(c),void 0===d&&(d=c),d===jg&&(d=void 0),this.autoFreeze_&&tf(d,!0),u){const l=[],p=[];of("Patches").generateReplacementPatches_(c,d,l,p),u(l,p)}return d}$g(1)},this.produceWithPatches=(c,l)=>{if("function"==typeof c)return(l,...u)=>this.produceWithPatches(l,(l=>c(l,...u)));let u,d;return[this.produce(c,l,((c,l)=>{u=c,d=l})),u,d]},"boolean"==typeof c?.autoFreeze&&this.setAutoFreeze(c.autoFreeze),"boolean"==typeof c?.useStrictShallowCopy&&this.setUseStrictShallowCopy(c.useStrictShallowCopy)}createDraft(c){Wg(c)||$g(8),Gg(c)&&(c=function(c){return Gg(c)||$g(10),Nf(c)}(c));const l=pf(this),u=Tf(c,void 0);return u[kg].isManual_=!0,df(l),u}finishDraft(c,l){const u=c&&c[kg];u&&u.isManual_||$g(9);const{scope_:d}=u;return lf(d,l),gf(void 0,d)}setAutoFreeze(c){this.autoFreeze_=c}setUseStrictShallowCopy(c){this.useStrictShallowCopy_=c}applyPatches(c,l){let u;for(u=l.length-1;u>=0;u--){const d=l[u];if(0===d.path.length&&"replace"===d.op){c=d.value;break}}u>-1&&(l=l.slice(u+1));const d=of("Patches").applyPatches_;return Gg(c)?d(c,l):this.produce(c,(c=>d(c,l)))}},bf=Pf.produce;Pf.produceWithPatches.bind(Pf),Pf.setAutoFreeze.bind(Pf),Pf.setUseStrictShallowCopy.bind(Pf),Pf.applyPatches.bind(Pf),Pf.createDraft.bind(Pf),Pf.finishDraft.bind(Pf);const Df=(c,l)=>{const{data:{shared:u={}}={},context:d}=l;((c,l)=>{tu.updateDataPageStore(l),Object.keys(l).forEach((u=>{eh.getIn(c,[W.SHARED,u])?Object.keys(l[u]).forEach((d=>{eh.setIn(c,[W.SHARED,u,d],l[u][d])})):eh.setIn(c,[W.SHARED,u],l[u])}))})(c,u),d&&eh.deleteIn(c,[d,"shared"])},Rf=(c,l,u=!1)=>{const{context:d,caseViewMode:p=(u?void 0:W.PERFORM_MODE),containerName:h}=l;h!==Mu.WORKAREA&&p&&eh.setIn(c,[d,"context_data","caseViewMode"],p)},Of=(c,l)=>{const{context:u}=l;eh.setIn(c,[u,"context_data","actionType"],l.actionType),eh.setIn(c,[u,"context_data","assignmentID"],l.assignmentID)},vf=(c,l=[])=>{l.forEach((l=>eh.deleteIn(c,l)))},xf=(c,l=[])=>{l.forEach((l=>eh.deleteIn(c,l)))},wf=(c,l=[])=>{l.forEach((l=>{eh.deleteIn(c,l)}))},Mf=(c,l,u={})=>{const{deleteAssignmentSpecificResources:d=!0,doDeleteConfirmationDetails:p=!0}=u;eh.deleteIn(c,[l,"nextAssignmentInfo"]),eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"availableActions"]),eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"availableProcesses"]),eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"activeActionID"]),eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"assignments"]),eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"childCases"]),p&&(eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"confirmationLinks"]),eh.deleteIn(c,[l,"caseMessages"])),d&&(eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"actionButtons"]),eh.deleteIn(c,[l,W.CASE_INFO.CASE_INFO,"navigation"]))},Lf=/\[(\d+)\]$/gi,Uf=/(\d+)/gi,Ff=/\[.\]$/gi,jf=(c,l,u,d=[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO,W.CONTENT])=>{const p=eh.getIn(l,d);if(p){const l=tr(p,[],[]);for(const p of l)eh.setIn(c[u],[...d,...p],{})}},Vf=(c,l,u,d)=>{const{property:p,pageReference:h,category:g,type:f}=d.payload,m=eh.getIn(c[l],u);if(m&&g===W.CASEMESSAGES)eh.setIn(c[l],Kn(p,h,g),"");else if(m&&m.length>0&&Array.isArray(m)){const d=m.filter((c=>c.type!==f));u&&u.length>0&&eh.setIn(c[l],Kn(p,h,g),d)}};function kf(c,l){const{err:u,formFields:d}=l.payload;let{context:p}=l.payload;const{fieldErrors:h,pageErrors:g}=((c,l)=>{const u=[],d=[];return c.forEach((c=>{((c,l,u,d)=>{switch(!0){case Boolean(c[W.ERROR_IN_PAGE_IDENTIFIER]&&c[W.ERROR_FIELD_IN_PAGE]):{const p=`${c[W.ERROR_FIELD_IN_PAGE]}`.replace(/(\(\d+\))/g,(c=>`[${parseInt(c.substring(1,c.length-1),10)-1}]`)),h=`${p}${c[W.ERROR_IN_PAGE_IDENTIFIER]}`,g=eh.deepClone(c);g[W.ERROR_FIELD_IN_PAGE]=p,l.includes(h.slice(1))||l.includes(h.substring(h.indexOf(".")+1,h.indexOf("[")))?d.push(g):u.push(c);break}case Boolean(c[W.ERROR_IN_PAGE_IDENTIFIER]&&!c[W.ERROR_FIELD_IN_PAGE]):{const p=c[W.ERROR_IN_PAGE_IDENTIFIER].slice(1);l.includes(p)?d.push(c):u.push(c);break}default:u.push(c)}})(c,l,u,d)})),{fieldErrors:d,pageErrors:u}})(u.errorDetails,d);if(eh.setIn(c,[p,...Yn.FIELD_MESSAGES_PATH],{}),eh.setIn(c,[p,...Yn.PAGE_MESSAGES_PATH],[]),h.forEach((l=>{if(l[W.ERROR_FIELD_IN_PAGE]){const u=l[W.ERROR_FIELD_IN_PAGE].slice(1);if(u){const l=function(c){let l=null;const u=c.lastIndexOf(".");return u<0?null:(l=c.substring(0,u),l?`caseInfo.content.${l}`.replace(/\(/g,"[").replace(/\)/g,"]"):l)}(u);if(!l)return!1;const d=u.substring(u.lastIndexOf(".")+1),h=Kn(d,l,W.PROPERTY);eh.setIn(c,[p,...h],[])}}})),h.length>0&&((c,l,u)=>{u.forEach((u=>{((c,l,u)=>{const d=u[W.ERROR_FIELD_IN_PAGE].slice(1),p=u[W.ERROR_IN_PAGE_IDENTIFIER].slice(1);if(p){let h=d?`caseInfo.content.${d}`:"caseInfo.content";h=h.replace(/\(/g,"[").replace(/\)/g,"]");const g=Kn(p,h,W.PROPERTY),f={type:G.MESSAGES.MESSAGES_TYPE_ERROR,message:u.localizedValue},m=eh.getIn(c[l],g,[]);if(eh.isContains(m,f))return;eh.setIn(c[l],g,[...m,f])}})(c,l,u)}))})(c,p,h),g.length>0){const l=(c=>{const l=[];return c.forEach((c=>{l.push({type:G.MESSAGES.MESSAGES_TYPE_ERROR,message:c.localizedValue})})),l})(g);c[p]||(p=W.APP.APP),eh.setIn(c,[p,...Yn.PAGE_MESSAGES_PATH],l)}else p.includes&&p.includes(Mu.WORKAREA)&&(p=K(p)),eh.deleteIn(c,[p,...Yn.PAGE_MESSAGES_PATH]);return c}const $f=[(c,l)=>bf(c,(c=>{switch(l.type){case Ae:{const{propertiesToReplace:u=[]}=l.payload;return c[l.payload.context]=Xp(c[l.payload.context],l.payload.data,{isArrayDeepMerge:l.payload.isArrayDeepMerge,propertiesToReplace:[...u]}),Rf(c,l.payload,!0),Df(c,l.payload),c}case re:{const{context:u,reference:d,value:p,isArrayDeepMerge:h}=l.payload;return Jp(c[u],d,p,{isArrayDeepMerge:h}),c}case se:{const{context:u,reference:d,value:p}=l.payload;return Qp(c[u],d,p),c}case _e:return Yp(c[l.payload.context],l.payload.reference),c;case de:return eh.setIn(c[l.payload.context],"context_data.isLoading",!0),c;case pe:return eh.setIn(c[l.payload.context],"context_data.isLoading",!1),c;case ot:{const{data:u}=l.payload;return Df(c,{data:{shared:u}}),c}case it:{const{dataPagesToBeRemoved:u=[]}=l.payload;return u.forEach((l=>{const{dataPageName:u,dataPageNameWithHash:d}=l;eh.deleteIn(c.shared,[u,d]);const p=eh.getIn(c.shared,[u]);p&&0===Object.keys(p).length&&eh.deleteIn(c.shared,[u])})),c}case ut:{const u=eh.getIn(c[l.payload.context].context_data,"blocking_action_counter",0);return l.payload.isInitiateBlockingAction?eh.setIn(c[l.payload.context].context_data,"blocking_action_counter",u+1):eh.setIn(c[l.payload.context].context_data,"blocking_action_counter",u-1),c}default:return c}})),(c,l)=>bf(c||{},(c=>{switch(l.type){case be:{if(!l.payload.data||c[l.payload.context])return c;l.payload.doDeleteCaseSummary&&Mf(c,l.payload.context);const{target:u}=l.payload;return!u||-1===u.indexOf(W.WORKAREA)&&-1===u.indexOf(W.MODAL)?c[l.payload.containerItemID]=l.payload.data:c[l.payload.context]=l.payload.data,Rf(c,l.payload),Of(c,l.payload),Df(c,l.payload),((c,l)=>{const{context:u}=l;eh.deleteIn(c,[u,"context_data","blocking_action_counter"]),eh.deleteIn(c,[u,"context_data","deferred_action_queue"])})(c,l.payload),c}case Fe:{l.payload.doDeleteCaseSummary&&Mf(c,l.payload.context,{deleteAssignmentSpecificResources:l.payload.deleteAssignmentSpecificResources});const{target:u,propertiesToReplace:d=[]}=l.payload;return!u||-1===u.indexOf(W.WORKAREA)&&-1===u.indexOf(W.MODAL)?c[l.payload.containerItemID]=Xp(c[l.payload.containerItemID],l.payload.data,{propertiesToReplace:[...d]}):c[l.payload.context]=Xp(c[l.payload.context],l.payload.data,{propertiesToReplace:[...d]}),(l.payload.actionType||l.payload.assignmentID)&&Of(c,l.payload),Rf(c,l.payload),Df(c,l.payload),xf(c,l.payload.suggestionContexts),c}case De:{const{childContainersContexts:u=[]}=l.payload;return((c,l)=>{const{containerItemID:u,context:d,deleteContext:p}=l;p&&eh.deleteIn(c,[d]),eh.deleteIn(c,[u])})(c,l.payload),wf(c,u),vf(c,l.payload.transientItems),xf(c,l.payload.suggestionContexts),c}case Pe:{const{containerItems:u}=l.payload;return Array.isArray(u)?u.forEach((l=>{eh.deleteIn(c,[l])})):eh.deleteIn(c,[u]),c}case je:{const{context:u,contextToBeRemoved:d,data:p,childContainersContextsToBeRemoved:h}=l.payload;return Mf(c,l.payload.context),Rf(c,l.payload),c[u]=Xp(c[u],c[d]),c[u]=Xp(c[u],p),eh.deleteIn(c,[d]),wf(c,h),Df(c,l.payload),c}case Ve:{const{payload:{context:u,pulseReplace:d=!0,childContainersContexts:p=[]}}=l;let{payload:{data:h}}=l;const g=eh.getIn(c[u],"pulse");let f=eh.getIn(c[u],"OperatorID"),m=eh.getIn(c[u],"pxRequestor");return m&&h.pxRequestor&&(m=eh.mergeDeep(m,h.pxRequestor)),f&&h.OperatorID&&(f=eh.mergeDeep(f,h.OperatorID)),!d&&g&&(h=Jp(h,"pulse",g),h=Jp(h,"OperatorID",f),h=Jp(h,"pxRequestor",m)),eh.setIn(c,u,h),Rf(c,l.payload),Df(c,l.payload),wf(c,p),vf(c,l.payload.transientItems),xf(c,l.payload.suggestionContexts),c}case lt:{const{context:u,doDeleteConfirmationDetails:d=!0}=l.payload;return Mf(c,u,{doDeleteConfirmationDetails:d}),c}case Re:{const{transientItemID:u,data:d}=l.payload;return eh.setIn(c,u,d)}case ve:case xe:{const{transientItems:u}=l.payload;return u.forEach((l=>eh.deleteIn(c,l))),c}case Oe:case we:{const{transientItemID:u,data:d}=l.payload;return Xp(eh.getIn(c,u),d),c}case Me:{const{transientItemID:u,data:d}=l.payload;for(const l in d)Object.prototype.hasOwnProperty.call(d,l)&&eh.deleteIn(c,[u,l]);return c}case Le:{const{transientItemID:u,data:d}=l.payload;return eh.deleteIn(c,u),eh.setIn(c,u,d)}case he:{const{key:u,value:d}=l.payload;return eh.setIn(c,`${W.SHARED}.${u}`,d),c}case Be:{const{context:u,data:d}=l.payload;return eh.setIn(c,u,d)}default:return c}})),(c,l)=>bf(c||zf().data,(c=>{switch(l.type){case Te:return l.payload.err.errorDetails&&("Validation fail"===l.payload.err.errorClassification||(l.payload.err?.displayButtonsOnErrors?.length??0)>0)?kf(c,l):c;case Fe:{const{context:u}=l.payload,d=[u,...Yn.FIELD_MESSAGES_PATH],p=[u,...Yn.PAGE_MESSAGES_PATH];if(eh.setIn(c,d,{}),eh.setIn(c,p,[]),u&&u.includes(Mu.WORKAREA)){const l=[te(u),...Yn.PAGE_MESSAGES_PATH];eh.setIn(c,l,[])}return c}case rt:{const{isListEntry:u}=l.payload;return u?((c,l)=>{const{property:u,pageReference:d,category:p,isListEntry:h,deletingIndex:g,stateObj:f}=l.payload,{context:m}=l.payload;if(f)return jf(c,f,m),c;const y=Kn(u,d,p,h);if(Number.isInteger(g)){eh.deleteIn(c[m],y);const l=y.slice(0,y.length-1);let u=eh.getIn(c[m],l)||{};const d=Object.keys(u);u=d.map((c=>u[c])),u.forEach(((u,p)=>{const h=d[p].match(Lf);if(h?.length){const f=parseInt(h[0].match(Uf)[0],10);f>g&&(eh.deleteIn(c[m],l.concat(d[p])),eh.setIn(c[m],l.concat(d[p].replace(Ff,`[${f-1}]`)),u))}}))}else eh.setIn(c[m],y,{});return c})(c,l):((c,l)=>{const{property:u,pageReference:d,category:p,isListEntry:h,stateObj:g}=l.payload,{context:f}=l.payload;let m=f;if(g)return jf(c,g,f),c;const y=Kn(u,d,p,h);return p===W.PAGE&&f?.includes(Mu.WORKAREA)&&(m=K(f)),Vf(c,m,y,l),Vf(c,f,y,l),c})(c,l)}case nt:{const{messages:u,property:d,pageReference:p,context:h,category:g}=l.payload,f=Kn(d,p,g);return u&&u.length>0&&Array.isArray(u)&&f&&f.length>0&&eh.setIn(c[h],Kn(d,p,g),u),c}default:return c}})),(c,l)=>bf(c,(c=>{if(l.type===ct){const{instruction:u,actions:d,context:p,referenceList:h,listIndex:g,listMoveToIndex:f,content:m={}}=l.payload,y=Fp(h);switch(u){case W.LIST_ACTIONS.INSERT:((c,l,u,d,p)=>{eh.setIn(c[l],[...u,d],p)})(c,p,y,g,m);break;case W.LIST_ACTIONS.UPDATE:((c,l,u,d,p)=>{const h=Xp(eh.getIn(c[l],[...u,d],{}),p);eh.setIn(c[l],[...u,d],h)})(c,p,y,g,m);break;case W.LIST_ACTIONS.DELETE:((c,l,u,d)=>{const p=eh.getIn(c[l],u,[]);p.splice(d,1),eh.setIn(c[l],u,p),Rn.deleteListNode(l,u,p.length)})(c,p,y,g);break;case W.LIST_ACTIONS.MOVE:((c,l,u,d,p)=>{const h=eh.getIn(c[l],[...u,d],{}),g=eh.getIn(c[l],u,[]);g.splice(d,1),g.splice(p,0,h),eh.setIn(c[l],u,g),((c,l,u,d,p)=>{const h=eh.deepClone(eh.getIn(c,[`${l}`])),g=eh.getIn(h,[W.CONTEXT_DATA,W.CASE_INFO.CASE_INFO]);if(!g)return;const f=u.substring(0,u.lastIndexOf(".")),m=u.substring(u.lastIndexOf(".")+1),y=((c,l,u)=>{const d=eh.getIn(c,[W.CONTEXT_DATA,...u.split(".")]);return Object.keys(d).filter((c=>c.includes(`${l}[`)))})(h,m,f);if(0!==y.length)if(Xn(g,m,d).content[`${m}[${d}]`]){const g={},f=`${u}[${d}]`,m=eh.getIn(h,[W.CONTEXT_DATA,...f.split(".")]);g[`${u}[${p}]`]=m,eh.deleteIn(c[l],[W.CONTEXT_DATA,...f.split(".")]),Jn(c,l,y,d,p,u,g)}else Jn(c,l,y,d,p,u)})(c,l,u?.join("."),d,p)})(c,p,y,g,f);break;case W.LIST_ACTIONS_TYPE.SELECT_DESELECT:((c,l,u,d)=>{const p=eh.getIn(c[l],u)||[];d.forEach((c=>{const{instruction:d,content:h,listIndex:g}=c;if(d===W.LIST_ACTIONS.SELECT){p[g]=h;const c=u?.join(".");Ar(l,c)}else delete p[g]})),eh.setIn(c[l],u,p.filter(Boolean))})(c,p,y,d);break;case W.LIST_ACTIONS_TYPE.DESELECT_ALL:((c,l,u)=>{eh.setIn(c[l],u,[])})(c,p,y)}}return c}))],Bf=(c,l)=>(c||(c=zf().data),l.type===st?zf().data:($f.forEach((u=>{c=u(c,l)})),c)),Gf=(c,l=[])=>{l.forEach((l=>{eh.deleteIn(c,[l])}))},Wf=(c,l)=>{const{type:u,payload:d}=l,p=u===Fe,{target:h,context:g,semanticURL:f="",root:m,containerItemID:y,childContainers:I,flowName:E,resourceType:A="",key:_="",clearView:C=!1}=d;return m?eh.setIn(c,[h,"items",y,"view"],m):C&&eh.deleteIn(c,[h,"items",y,"view"]),g&&eh.setIn(c,[h,"items",y,"context"],g),E&&eh.setIn(c,[h,"items",y,"flowName"],E),(!p||p&&_)&&eh.setIn(c,[h,"items",y,"key"],_.trim()),(!p||p&&f)&&eh.setIn(c,[h,"items",y,"semanticURL"],f),(!p||p&&A)&&eh.setIn(c,[h,"items",y,"resourceType"],A),Gf(c,I),c},Hf=(c,l)=>(c||(c=zf().containers),l.type===st?zf().containers:bf(c,(c=>{switch(l.type){case Ne:{const{context:u,name:d,type:p,actionMgrID:h}=l.payload,g=`${u}/${d}`;let f=null;return gn.resolveActionByID(h,null,!1),c[g]||(f={type:p,accessedOrder:[],items:{}},eh.setIn(c,[g],f)),c}case $e:{const{containerName:u,childContainers:d=[]}=l.payload;return eh.deleteIn(c,[u]),d.forEach((l=>{eh.deleteIn(c,[l])})),c}case Pe:{const{context:u,name:d,actionMgrID:p,childContainers:h}=l.payload,g=`${u}/${d}`;return gn.resolveActionByID(p,null,!1),eh.setIn(c,[g,"accessedOrder"],[]),eh.setIn(c,[g,"items"],{}),Array.isArray(h)&&h.forEach((l=>{eh.deleteIn(c,[l])})),c}case be:{const{target:u,context:d,isInCreateStage:p,isBulkAction:h,semanticURL:g,root:f,containerItemID:m,actionMgrID:y,key:I,flowName:E,resourceType:A,actionName:_,isMinimizable:C,showProgress:S,progressMessage:T,modalOptions:N,resourceStatus:P,actionID:b,isMultiRecordData:D,acTertiary:R,parentContext:O,heading:v,isTraditionalRemoteCase:x}=l.payload,w=c[u],M=w&&w.type,L=w&&w.accessedOrder||[],U=w&&w.items||{};let F=null;return c[u]&&"single"===M&&L.length>0?Wf(c,l):(F={accessedOrder:[...L,m],items:{...U,[m]:{view:f,semanticURL:g,key:I,flowName:E,context:d,isInCreateStage:p,resourceType:A,actionName:_,isMinimizable:C,...h&&{isBulkAction:h},showProgress:S,progressMessage:T,modalOptions:N,isTraditionalRemoteCase:x,resourceStatus:P,...b&&{actionID:b},...R&&{acTertiary:R},...D&&{isMultiRecordData:D},...O&&{parentContext:O},heading:v}}},gn.resolveActionByID(y,null,!1),c[u]=j()(c[u],F),c)}case Fe:{const{actionMgrID:u,data:d}=l.payload;let p=c;try{p=Wf(c,l),gn.resolveActionByID(u,d,!1)}catch{gn.rejectActionByID(u,!1)}return p}case Ve:return((c,l)=>{const{actionMgrID:u,data:d,target:p,containerItemID:h}=l.payload;let g=c;try{const f=c&&c[p]?.type;let m=c&&c[p]?.accessedOrder||[];m="single"===f?m.length>0?m:[...m,h]:m.includes(h)?m:[...m,h],eh.setIn(c,[p,"items",h,"transientItems"],[]),eh.setIn(c,[p,"accessedOrder"],m),g=Wf(c,l),gn.resolveActionByID(u,d,!1)}catch{gn.rejectActionByID(u,!1)}return g})(c,l);case Ue:{const{target:u,containerItemID:d,actionMgrID:p}=l.payload;try{const l=eh.getIn(c,[u,"accessedOrder"]).filter((c=>c!==d));l.push(d),eh.setIn(c,[u,"accessedOrder"],l),gn.resolveActionByID(p,null,!1)}catch{gn.rejectActionByID(p,!1)}return c}case je:case De:{const{target:u,containerItemID:d,actionMgrID:p,childContainers:h}=l.payload;try{const l=eh.getIn(c,[u,"accessedOrder"]).filter((c=>c!==d));eh.setIn(c,[u,"accessedOrder"],l),eh.deleteIn(c,[u,"items",d]),Gf(c,h),gn.resolveActionByID(p,null,!1)}catch{gn.rejectActionByID(p,!1)}return c}case Re:{const{transientItemID:u,target:d,contextName:p}=l.payload,h=eh.getIn(c,[d,"items",p,"transientItems"])??[];return eh.setIn(c,[d,"items",p,"transientItems"],[...h,u])}case xe:{const{target:u,containerItemID:d}=l.payload;return eh.deleteIn(c,[u,"items",d,"transientItems"]),c}case ve:{const{target:u,transientItemID:d,containerItemID:p}=l.payload,h=(eh.getIn(c,[u,"items",p,"transientItems"])??[]).filter((c=>c!==d));return eh.setIn(c,[u,"items",p,"transientItems"],h)}default:return c}})));let qf={};const zf=()=>qf,Yf=c=>((c=>{const l=c.Data||c.data,{uiResources:u={}}=c,d=u[W.CONTEXT_DATA]||c[W.CONTEXT_DATA];qf={data:{[W.APP.APP]:{...l,[W.CONTEXT_DATA]:d}},containers:{}}})(c),function(c){const l=Object.keys(c),u={};for(let h=0;h<l.length;h++){const d=l[h];"function"==typeof c[d]&&(u[d]=c[d])}const d=Object.keys(u);let p;try{!function(c){Object.keys(c).forEach((l=>{const u=c[l];if(void 0===u(void 0,{type:_g.INIT}))throw new Error(Ig(12));if(void 0===u(void 0,{type:_g.PROBE_UNKNOWN_ACTION()}))throw new Error(Ig(13))}))}(u)}catch(c){p=c}return function(c={},l){if(p)throw p;let h=!1;const g={};for(let p=0;p<d.length;p++){const f=d[p],m=u[f],y=c[f],I=m(y,l);if(void 0===I)throw l&&l.type,new Error(Ig(14));g[f]=I,h=h||I!==y}return h=h||d.length!==Object.keys(c).length,h?g:c}}({data:Bf,containers:Hf}));function Kf(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=Fl(c),d=function(c){return"number"==typeof Ul(c)?c.pop():1/0}(c),p=c;return p.length?1===p.length?Oi(p[0]):function(c){return void 0===c&&(c=1/0),Ml(Ai,c)}(d)(Vi(p,u)):kl}const Xf=(c,l)=>{c.data=c.data??{};const{assignments:u,availableActions:d=[]}=c.data.caseInfo??{};u&&Array.isArray(u)&&u.length>0&&u[0].actions&&Array.isArray(u[0].actions)&&!l?.stopMergeActions&&(u[0].actions.forEach((c=>{"Assignment"!==c.type&&"LocalAction"!==c.type||d.push(c)})),c.data.caseInfo=c.data.caseInfo??{},c.data.caseInfo.availableActions=d)},Jf=(c,l)=>{if(c.confirmationLinks&&(c.data=c.data??{},c.data.caseInfo=c.data.caseInfo??{},c.data.caseInfo.confirmationLinks=c.confirmationLinks),!c.uiResources&&c.confirmationNote){let l=c;const{confirmationNote:u}=l;return l=((c,l)=>{const u=[c];return l.data=l.data??{},l.data.caseMessages=u,l})(u,l),l}if(!c.uiResources||!c.data||!c?.uiResources?.root)return c;const u=c,{uiResources:{actionButtons:d,navigation:p},nextAssignmentInfo:h}=u;if(u.data&&u.data.caseInfo&&(d&&(u.data.caseInfo.actionButtons=d),p&&(u.data.caseInfo.navigation=p),l&&l[G.ACTIONS.DELETEAVIALACTIONS]&&delete u.data.caseInfo.availableActions,Xf(u,l),c.confirmationNote)){const{confirmationNote:c}=u,l=[c];u.data.caseMessages=l}return l&&l.isCreateDataObject&&(u.data=u.data??{},u.data.dataInfo={},u.data.dataInfo.content=u.data.pyPortal,u.uiResources.root.config.context="dataInfo.content",u.uiResources.context_data.dataInfo=u.uiResources.context_data.dataInfo??{},u.uiResources.context_data.dataInfo.content=u.uiResources.context_data.dataInfo.content??{},u.uiResources.context_data.dataInfo.content=u.uiResources.context_data?.pyPortal,delete u.data.pyPortal,delete u.key),h&&(u.data=u.data??{},u.data.nextAssignmentInfo=h),u},Qf={},{VIEW:Zf,FIELD:em}=W.CONTEXT_TREE_NODE_TYPES,tm=[(c,l)=>c.pipe(vl(On,Et),wl((c=>c.payload)),Ml((c=>{const{context:u,contextData:d,options:p}=c,{propertyName:h="",classID:g=""}=p,f=Cc(u,{skipUUID:!1});let m=[],y=[],I=!1;Hd.getFeatureMap().granularUIRefresh?(({fieldsWithDeclarativeTargets:m=[],whens:y=[]}=(c=>{const l=(c=>{const l=[];return Rn.getDeclarativeTargets(c).forEach((({name:c,pageReference:u})=>{const d=u.split(".");d.shift();let p=d.join(".");c&&p&&(p=eh.convertPageRefToClipboardPageNotation(p),l.push({name:c,context:p}))})),l})(c),u=(c=>{const l=[];return Rn.getWhens(c).forEach((({name:c,type:u,pageReference:d})=>{const p=d.split(".");p.shift();let h=p.join(".");c&&h&&(h=eh.convertPageRefToClipboardPageNotation(h),l.push({name:c,context:h,type:u}))})),l})(c);return{fieldsWithDeclarativeTargets:l,whens:u}})(u)),I=y.some((c=>c.type===Zf))):I=!0;const E=y.filter((c=>c.type===em)),A=eh.getPropertyName(h),_=A?A.split("."):[],C=_.pop(),S=_.join("."),T=[];if(S){const c=gp(S,g);if(c&&"copy"===c.dataRetrievalType){const c=eh.getIn(f,`content.content.${S}`)||{};Object.keys(c).length>0&&Object.keys(c).filter((c=>c!==C)).forEach((l=>{delete c[l],T.push(`${S}`)}))}}c.serverPrecedenceFields=T;let N={...f.content,contextData:d};const P=kc(u);eh.isEmpty(P)||(N=Vc(P,N));const b=((c,l)=>{const{caseWideAction:u,caseViewAction:d,fieldsWithDeclarativeTargets:p,fieldsWithWhen:h,isViewsWithWhen:g,interestPage:f,options:m}=c;let y={};const{optionalPayload:I}=m;I&&(l.content={...I});let E={...l},A=vn;return d?(y=sg(Mn,c),E={...E,interestPage:f}):g&&u?y=sg(xn,c):g&&!u?y=sg(wn,c):(p.length>0||h.length>0)&&(E={...E,calculations:{fields:p,whens:h}},y=sg(u?Un:Fn,c),A=Ln),{restAPI:y,requestBody:E,requestType:A}})({...c,fieldsWithDeclarativeTargets:m,fieldsWithWhen:E,isViewsWithWhen:I},N);pu.registerBlockingAction(u).catch((()=>{}));const{restAPI:D,requestBody:R,requestType:O}=b;(c={...c,requestType:O}).requestType=O;const{reqType:v,restApi:x}=D,w=l.value.data[u]?.caseInfo?.headers;return Vi(((c,l)=>{const{context:u}=c;(c=>{c.reqHeaders&&c.reqHeaders.etag&&(c.headers={"if-match":c.reqHeaders.etag})})(c);const d=(c=>{const{ID:l,actionID:u,context:d}=c;return`${l}.${d}.${u}`})(l);if((c=>(c=>ec[c])(c)>0&&Qf[c])(d)){const l=[];for(let u=0;u<Qf[d].length;){const p=Qf[d][u],h=qn(p,c);if("CANCEL_REFRESH"===h){const c=new Error;return c.code="ERR_CANCELED",Promise.reject(c)}!0===h&&(l.push(u),p.cancelConfig?.cancel()),u+=1}l.forEach((c=>{Qf[d].splice(c,1)}))}const p=uc();return c.signal=p.token,c.cancelConfig=p,Qf[d]?Qf[d].push(c):Qf[d]=[c],ic(c.url,c,u,{cancelContext:d}).then((c=>(delete Qf[d],c))).catch((c=>{throw c&&"ERR_CANCELED"!==c.code&&delete Qf[d],c}))})({reqHeaders:w,context:u,method:v,body:R,url:Hn(c,x)},c)).pipe(wl((l=>({response:{...l.data||{}},actionConfig:c,actionMgrID:c.options.actionMgrID,headers:_c(l.headers)}))),Bl(": Error occurred during fetch call at refreshData Epic : ",c.context,c?.options?.actionMgrID))})),Ml((async c=>{if(c&&c.type===Te)return pu.deRegisterBlockingAction(c.payload?.context).catch((()=>{})),bc(c);const{actionConfig:l,response:u,actionMgrID:d}=c,{context:p,serverPrecedenceFields:h,requestType:g}=l,f=Wr.getTargetViewContainerName(Ge),m=Ct(f,p),y={acName:m,context:p},I=Jf(u,{[G.STOPMERGEACTIONS]:!0,[G.ACTIONS.DELETEAVIALACTIONS]:!0});I.directUrlUpdation=!1,g===vn&&await Tc(I,l,y);const E=Sc(I,{target:m,context:p});E.preserveClientChanges=void 0===l.options.preserveClientChanges||l.options.preserveClientChanges;const A=yc.getPropertiesToReplace(p),_=Vh(uh,E,{serverPrecedenceFields:h,propertiesToReplace:A});return Bc.registerForServerChanges(),kp(_),gn.resolveActionByID(d,E),Bc.unRegisterForServerChanges(),pu.deRegisterBlockingAction(p).catch((()=>{})),[]})))],nm=tm,rm=[c=>c.pipe(vl(at),Ml((async c=>{const{context:l}=c.payload,u={},d={},p=Object.keys(c.payload.datapages).map((p=>{const h=c.payload.datapages[p];if(h.mode===W.READONLY&&h?.refreshStrategy){const{timeoutSecs:c="",type:l=""}=h?.refreshStrategy||{},u=Bp()[h.name];if(u&&p in u){const d=u[p],{loadTime:h}=d;if(!ql.isTimeElapsed(h,c,l))return}}return ql.getData(h.name,{dataViewParameters:h.dataViewParameters},l).then((c=>{const l=h.mode===W.READONLY?d:u;l[h.name]?l[h.name][p]={pxResults:c.data.data,parameters:h.dataViewParameters,loadTime:c.data?.fetchDateTime}:l[h.name]={[p]:{pxResults:c.data.data,parameters:h.dataViewParameters,loadTime:c.data?.fetchDateTime}}})).catch((()=>{}))}));await Promise.allSettled(p);const h=[];return Object.keys(u).length&&h.push(uh({context:l,data:u})),Object.keys(d).length&&h.push($h({data:d,context:l})),kp(h),[]})))],sm=rm;class Lm{static OPEN_ASSIGNMENT_ACTION="openAssignment";static DIRTY_POPUP_C11N="displayDirtyPopupFromConstellation";static HANDLE_INFINITY_DISCARD="handleDiscardInInfinity";static OPEN_ASSIGNMENT_MODAL="openAssignmentInModal";static DISPLAY_DIRTY_POPUP="displayDirtyPopup";static LOAD_PREVIEW="loadPreview";static UPDATE_COEXISTENCE_DRILLDOWN_CASE="updateCoexistenceDrilldownCase";static OPEN_WORK_ITEM="openWorkItem";static OPEN_WORK_BY_HANDLE="openWorkByHandle";static GET_NEXT_WORK_ACTION="getNextWork";static CLOSE_CONTAINER_ACTION="closeContainer";constructor(){this.broadcastChannel=null,this.callback=null,this.isReverseCoexistenceCase=!1,this.broadcastEventToIframe=!1,this.isDirtyDialogActive=!1,this.onCreateCallback=null,this.openAssignmentParams=null}getGlobalObject=()=>s.g;getUniqueId=()=>this.getGlobalObject().uniqueId;setUniqueId=()=>{this.getGlobalObject().uniqueId=(new Date).getTime()};initBroadcastChannel=()=>{this.setUniqueId(),this.broadcastChannel=new BroadcastChannel("coexistence"),this.broadcastChannel.onmessage=c=>{switch(c.data.action){case Lm.DISPLAY_DIRTY_POPUP:this.broadcastEventToIframe=c.data.fromInfinity,this.isDirtyDialogActive||(c.data.isFormDirty?(zr.publish(W.PUB_SUB_EVENTS.EVENT_SHOW_CANCEL_ALERT,{isModalAction:!0,hideDelete:!0}),this.isDirtyDialogActive=!0):this.callback?.call(this));break;case Lm.LOAD_PREVIEW:this.loadPreview(c);break;case Lm.UPDATE_COEXISTENCE_DRILLDOWN_CASE:this.updateCoexistenceDrilldownCase(c);break;case Lm.OPEN_ASSIGNMENT_ACTION:this.openAssignment(c);break;case Lm.GET_NEXT_WORK_ACTION:this.getNextWork(c);break;case Lm.OPEN_WORK_BY_HANDLE:this.openWorkByHandle(c);break;case Lm.CLOSE_CONTAINER_ACTION:this.closeContainer(c)}}};loadPreview=c=>{const{pyID:l,caseClassName:u,uniqueId:d}=c.data;d===this.getUniqueId()&&Ou({}).getPConnect().getActionsApi().showCasePreview(l,{caseClassName:u})};navigateToDefaultPage=()=>{const c=Ou({isRoot:!0}),l=PCore.getStore()?.getState().data.app?.pyPortal?.pyPrimaryNavPages;let u;Array.isArray(l)&&l[0]&&(u=l[0]);const d=u?.pyClassName||"Data-Portal",p=u?.pyRuleName||"pyHome";c.getPConnect().getActionsApi().showPage(p,d)};closeContainer=c=>{const{uniqueId:l}=c.data;l===this.getUniqueId()&&this.navigateToDefaultPage()};updateCoexistenceDrilldownCase=c=>{const{key:l,caseClassName:u,actionApi:d,caseLabel:p}=c.data;let h=d;d===Lm.OPEN_WORK_ITEM&&(h=Lm.OPEN_WORK_BY_HANDLE),Gd.updateSemanticURLAndDocumentTitle({key:l,caseClassName:u,actionName:h}),Ou({}).getPConnect().getActionsApi().updateRecents(u,l.substring(l.lastIndexOf(" ")+1),p,l)};openAssignment=c=>{const{pzInsKey:l,uniqueId:u}=c.data;u===this.getUniqueId()&&(this.onCreateCallback&&this.openAssignmentParams&&(l&&this.openAssignmentParams[0]&&this.openAssignmentParams[0].payload&&this.openAssignmentParams[0].payload.data?this.openAssignmentParams[0].payload.data.caseInfo.assignments[0].ID=l:this.openAssignmentParams[0]&&this.openAssignmentParams[0].payload&&this.openAssignmentParams[0].payload.data&&(this.openAssignmentParams[0].payload.data.caseInfo.content.coexistenceAction="openWorkByHandle"),this.onCreateCallback.call(this,this.openAssignmentParams)),this.onCreateCallback=null,this.openAssignmentParams=null)};getNextWork=c=>{const{uniqueId:l}=c.data;if(l===this.getUniqueId()){const c=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${G.PRIMARY}`;Ou({meta:{},options:{context:Qu(c)}}).getPConnect().getActionsApi().getNextWork()}};openWorkByHandle=c=>{const{key:l,caseClassName:u,uniqueId:d}=c.data;if(d===this.getUniqueId()){const c=`${G.APP.APP}${W.FORWARD_SLASH_STRING}${G.PRIMARY}`;Ou({meta:{},options:{context:Qu(c)}}).getPConnect().getActionsApi().openWorkByHandle(l,u)}};destroyBroadcastChannel=()=>{this.getBroadCastChannel()?.close(),this.broadcastChannel=null};subscribeEvents=()=>{this.setReverseCoexistenceCaseLoaded(!0),zr.subscribe(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.HANDLE_DISCARD,this.handleDiscard),zr.subscribe(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.CHECK_IS_FORM_DIRTY,this.postDirtyPopupMessage)};unsubscribeEvents=()=>{zr.unsubscribeAllWithEventType(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.CHECK_IS_FORM_DIRTY),zr.unsubscribeAllWithEventType(G.PUB_SUB_EVENTS.REVERSE_COEXISTENCE_EVENTS.HANDLE_DISCARD),this.setReverseCoexistenceCaseLoaded(!1),this.isDirtyDialogActive=!1};init=(c=!0)=>{null===this.broadcastChannel&&this.initBroadcastChannel(),c&&this.subscribeEvents()};destroy=()=>{this.destroyBroadcastChannel(),this.unsubscribeEvents()};setCallBackFunction=c=>{this.callback=c};setReverseCoexistenceCaseLoaded=c=>{this.isReverseCoexistenceCase=c};setIsDirtyDialogActive=c=>{this.isDirtyDialogActive=c};getBroadCastChannel=()=>this.broadcastChannel;getCallBackFunction=()=>this.callback;isReverseCoexistenceCaseLoaded=()=>this.isReverseCoexistenceCase;postDirtyPopupMessage=({callBackFunction:c})=>{this.broadcastChannel?.postMessage({action:Lm.DIRTY_POPUP_C11N,uniqueId:this.getUniqueId()}),this.setCallBackFunction(c)};handleDiscard=()=>{this.broadcastEventToIframe?(this.broadcastChannel?.postMessage({action:Lm.HANDLE_INFINITY_DISCARD,uniqueId:this.getUniqueId()}),this.broadcastEventToIframe=!1):(this.callback?.call(this),this.callback=null),this.isDirtyDialogActive=!1};postCreateCaseMessage=(c,l,u)=>{null===this.broadcastChannel&&this.init(!1),this.broadcastChannel?.postMessage({action:Lm.OPEN_ASSIGNMENT_MODAL,uniqueId:this.getUniqueId(),key:c}),this.broadcastEventToIframe=!1,this.onCreateCallback=l,this.openAssignmentParams=u}}const am=new Lm,om=c=>{const{containerName:l,isInCreateStage:u}=c;return u?W.MODAL:l||Wr.getTargetViewContainerName(Ke)},im=c=>{const l=eh.getIn(c,[W.DATA,W.CASE_INFO.CASE_INFO]);return sn(l)&&an(Hd.getOperatorIdentifier(),l)},cm=[W.TOP_ACTION_LABEL.CREATEWORK,W.TOP_ACTION_LABEL.OPENASSIGNMENT,W.TOP_ACTION_LABEL.FINISHASSIGNMENT,W.TOP_ACTION_LABEL.OPENWORKBYHANDLE,W.TOP_ACTION_LABEL.SAVEANDCLOSE,W.TOP_ACTION_LABEL.SHOWDATA],lm=(c,l)=>{let u={};return cm.includes(c)&&(u={topLevelAction:!0,actionLabel:c}),c===W.TOP_ACTION_LABEL.OPENASSIGNMENT&&(u.assignmentID=l),u},um=()=>({registerHeader:(...c)=>Qi.registerHeader(...c),unRegisterHeader:(...c)=>Qi.unRegisterHeader(...c),getRegisteredHeaders:()=>Qi.getRegisteredHeaders()}),dm=(c,{body:l={},queryPayload:u={},cancelTokenSource:d,headers:p={},responseType:h},g,f)=>{const{restApi:m,reqType:y}=sg(c,u),I={method:y,headers:p,body:l,...h&&{responseType:h}};return d&&(I.signal=d.token),ic(m,I,g,f??{})},pm=(c,{method:l="GET",body:u={},headers:d={},withoutDefaultHeaders:p=!1},h)=>(c.startsWith("http:")||c.startsWith("https:")||(c=P()+c),ic(c,{method:l,headers:d,body:u,withoutDefaultHeaders:p},h)),hm=c=>Gd.doesRestApiExist(c),gm=()=>uc(),fm=c=>dc(c),mm=c=>{(c=>{rc=c})(c)},ym=()=>Im,Im=class{static createCase(c,l){const{caseInfo:u,startingFields:d,flowType:p,viewType:h=Ec.PAGE,pageName:g,context:f=W.APP.APP,debugInfo:m,headers:y}=l;let I={};u&&u.content&&(I=u.content);const E={caseTypeID:c,content:{...I,...d},processID:p};let A={};return Hd.getPerformanceDashboardVisibility()&&(A=lm(W.TOP_ACTION_LABEL.CREATEWORK)),dm("createWork",{body:E,queryPayload:{caseClassName:c,viewType:h,params:{pageName:g}},headers:{...y,...m&&{...Qi.addDebugHeaders(m)}}},f,A).then((l=>({response:l.data,requestPayload:E,headers:_c(l.headers,c,y)})))}},{RESOURCE_TYPES:Em}=G,Am=(c,l=[])=>{const{viewType:u,containerName:d,targetContainerName:p,isChild:h}=c,g=ns(l);return(c=>{if(c){const{stageID:l,stages:u=[]}=c,d=u.length;for(let c=0;c<d;c+=1)if(u[c].ID===l)return"manual"===u[c].transitionType}return!1})(g)&&c?.stageID===g.stageID?Ec.PAGE:u||(!Qr(d)&&!Qr(p)||h?Ec.PAGE:Ec.FORM)},_m=(c,l,u,d,p,h,g)=>{sd(l)&&od(l)?((c,l,u,d,p)=>{Am(c,l)===Ec.FORM?(u.caseViewMode=d||W.PERFORM_MODE,p.push(Vh(Nh,u))):p.push(Vh(Lh,u))})(d,p,c,h,u):((c,l,u,d,p)=>{if(cs(c,{removeActionPayload:l,target:u}),((c,l)=>{const u=zu(l);let d=null;return u&&(d=Fu(l,u)),d?.key===c&&ad(l)})(d.key,u))d.context=Qu(u),d.containerItemID=d.context,c.push(Vh(Lh,d));else if((p?.isChild||p?.isRemote)&&p?.isMultiDoc){const l=hd(p.context);d.target=l,d.context=p.context,d.containerItemID=p.context,c.push(Vh(Lh,d))}else{const l=hd(d.context),u=Gu(l,d.key);u?(d.target=l,d.context=u,d.containerItemID=u,c.push(Vh(Lh,d))):c.push(Vh(Ih,d))}})(u,g,l,c,d)},Cm=({restUrl:c,reqType:l,requestHeaders:u,debugInfo:d,context:p,isGetNextWork:h,doNotMergeMessagesForStatusCode:g,assignmentID:f})=>{let m={};return Hd.getPerformanceDashboardVisibility()&&(m=lm(W.TOP_ACTION_LABEL.OPENASSIGNMENT,f)),ic(c,{method:l,headers:{"if-match":u&&u.etag,...u,...d&&{...Qi.addDebugHeaders(d)}}},p,{doNotMergeHttpMessagesForStatusCode:h?g:"",...m})},{RESOURCE_TYPES:Sm}=G,{RESOURCE_TYPES:Tm}=G,{RESOURCE_TYPES:Nm}=G,Pm=(c,l)=>{const{containerItemID:u,skipReleaseLockRequest:d,isInCreateStage:p,isProcessAction:h}=l,g=Ju(u),f=`${g?.includes("root")?W.APP.ROOT:W.APP.APP}/${Mu.MODAL}`;c.push(Vh(xh,{containerItemID:u,context:g,target:f,skipReleaseLockRequest:d,isInCreateStage:p,isProcessAction:h}))},bm=c=>Wp(".openCaseViewAfterCreate",W.CONTEXT_DATA,c)??!0,Dm=c=>/^app\/preview_[0-9]*/g.test(c),Rm=(c,l)=>{const u=K(c);return!Dm(c)&&(u===l||/^app\/primary_[0-9]*/g.test(u))},Om=async(c,l,u,d,p)=>{((c,l,u)=>{if(l.isProcessAction&&(Pm(u,{...l,skipReleaseLockRequest:!0}),c)){const d=`${l?.containerItemID.includes("root")?W.APP.ROOT:W.APP.APP}/${Mu.PRIMARY}`,p=Rc(d,Mu.PRIMARY),h={insKey:c.ID,className:c.content.classID,context:p,acTargetName:W.PRIMARY,isChild:!0},g={type:fe,payload:{...h}};u.push(g)}})(c.data.caseInfo.parentCaseInfo,l,p);const h=c?.data?.caseInfo?.parentCaseInfo?.ID;if(h){const u=hd(l?.context),d=Fu(u,l?.context)?.parentContext,p=hd(d);l?.isProcessAction&&$u(p,h)&&Rd(d,c?.data?.caseInfo?.lastUpdateTime)}u.resourceType=Nm.CASE,u.directUrlUpdation=!0,l.isProcessAction||await(async(c,{translatedDXAPIResponse:l,actionInPayload:u},d)=>{const{caseID:p}=u,h=(g=l,eh.getIn(g,Kr.NEXT_ASSIGNMENT_INFO_ID,W.EMPTY_STRING));var g;const f=ss(l),{caseViewMode:m,headers:y,semanticURL:I,actionMgrID:E,directUrlUpdation:A,key:_,flowName:C,resourceType:S}=d;(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CREATE_STAGE_DONE,c)})({caseId:p,assignmentId:h,caseType:f}),Pm(c,{...u,skipReleaseLockRequest:!0});const T=`${u?.containerItemID.includes("root")?W.APP.ROOT:W.APP.APP}/${Mu.PRIMARY}`,N=Rc(T,Mu.PRIMARY),P=Qi.getCoreHeadersFromContext(u.context)||!1,b=Sc(l,{target:T,context:N,containerItemID:N,caseViewMode:m,headers:y,semanticURL:I,key:_,flowName:C,resourceType:S,directUrlUpdation:A,debugInfo:P&&P.debugInfo&&{debugId:P.debugInfo[W.COREHEADER_APP_DEBUG_ID]}});if(sd(T)){const l=$p(N),p=os({data:l}),[,h]=p?p.split(" "):[],g=`You will lose unsaved changes for ${h}. Do you want to continue?`;if(!bm(u.context))return c;{const{continueExecution:l}=xc(T,{dirtyMessage:g});if(!l)return d.directUrlUpdation=!1,gn.rejectActionByID(E),$l();b.currentCaseViewMode=ms(b?.context),c.push(Vh(Lh,b))}}else c.push(Vh(Ih,b));return l.directUrlUpdation=A,l.semanticURL=I,await Tc(l,{...b,acName:T},{acName:T,context:N}),c})(p,{translatedDXAPIResponse:d,actionInPayload:l},u)},vm=async(c,l,u,d,p)=>{c.doDeleteCaseSummary=l.doDeleteCaseSummary,c.caseViewMode===W.REVIEW_MODE&&(c.flowName=" ",c.clearView=!0);const{containerItemID:h}=l,g=yc.getPropertiesToReplace(h);p.push(Vh(Nh,{...c,...d,propertiesToReplace:g})),eh.setIn(c,"acName",d.target),await Tc(u,c),((c,l,{data:u,caseViewMode:d})=>{const{containerItemID:p}=l,h=Ju(p);if(h&&ls(p)){const l=te(h),g={data:u,caseViewMode:d,context:l};eh.setIn(g.data,["context_data","caseViewMode"],d),c.push({type:lt,payload:{context:l}});const f=yc.getPropertiesToReplace(p);c.push(Vh(uh,g,{propertiesToReplace:f}))}})(p,l,c)},xm=async(c,l,u,d,p,h,g,f)=>{const{isCaseWideAction:m,isInCreateStage:y,containerItemID:I}=c,E=K(c.context),A=as(p),_=ss(p),C=y&&!A&&!m,S=td(E)[0],T=S?zu(S):E,N=Jr(I),P=Ju(I),b=Object.freeze({target:c.target,containerItemID:I,context:P,containerName:N});C&&!Dm(c.context)?await Om(f,c,l,p,h):Rm(c.context,T)?await(async(c,l,u,d,p,h,g,f,m)=>{const{headers:y}=m;if(c){if("object"!=typeof m?.response?.uiResources?.root){const l=(c,l)=>{const u=c.findIndex((c=>c.ID===l));if(-1!==u){const[l]=c.splice(u,1);c.unshift(l)}return c},u=$p(c),d=m?.response?.data?.caseInfo?.assignments??[],p=u?.caseInfo?.assignments??[],h=ms(c)===W.PERFORM_MODE,g=d[0]?.ID!==p[0]?.ID,f=d.length>0&&p.length>0;h&&g&&f&&m?.response?.data?.caseInfo?.assignments&&(m.response.data.caseInfo.assignments=l(d,p[0]?.ID))}const I=sd(hd(c));let E=!1;const A=hd(u),_=Uu(A),C=zu(A);C&&_?.items?.[C]?.key===m?.actionInPayload?.caseID&&(E=!0),Pm(p,{...d,skipReleaseLockRequest:!0});const S=Jr(c),T={target:hd(c),containerItemID:c,context:c,containerName:S};l.doDeleteCaseSummary=d.doDeleteCaseSummary;const N=te(u),P=$p(N),b=$p(d.context),D=P?.caseInfo?.ID,R=b?.caseInfo?.ID;if(I&&D===R||!I&&""===g)(void 0===l?.data?.caseInfo?.content||void 0!==l.data.caseInfo.content&&"object"==typeof l.data.caseInfo.content&&0===Object.keys(l.data.caseInfo.content).length)&&(l.root=void 0,delete l.data?.caseMessages),p.push(Vh(Nh,{...l,key:g,resourceType:"",...T}));else if(h){const h=hd(c),f=Gu(h,g);if(f)T.target=h,T.context=f,T.containerItemID=f,p.push(Vh(Nh,{...l,key:g,resourceType:"",...T}));else{const c=td(u)[0];if(d.target=c,d.context=Rc(c,W.WORKAREA,u),d?.context){d.containerItemID=d.context,p.push(Vh(Ih,{...d,...l}));const u=d.containerItemID;p.push(Vh(Oh,{parentContainerTarget:c,containerItemID:u}))}}}if(d.target=hd(c),d.containerName=Jr(c),d.context=c,d.containerItemID=c,eh.setIn(l,"acName",T.target),await Tc(f,l),E){const{data:c,caseViewMode:d}=l;u.includes(W.WORKAREA)&&ls(u)&&(u=te(u));const h={data:c,caseViewMode:d,context:u};eh.setIn(h.data,["context_data","caseViewMode"],d),p.push({type:lt,payload:{context:u}}),p.push(Vh(uh,h))}if(!h&&l.caseViewMode===W.PERFORM_MODE){const l=((c,l)=>{const u=hd(c);return Gu(u,l)})(c,g),u={data:{caseInfo:{headers:y}},context:l};p.push(Vh(uh,u)),p.push(jn(((c,l=!1,u=!1)=>{const d=gn.getNextActionMgrId();return{ID:sh.getPropertyValue(G.CASE_INFO.ASSIGNMENT_ID,"",c),actionID:sh.getPropertyValue(G.CASE_INFO.ASSIGNMENTACTION_ID,"",c),context:c,caseWideAction:l,contextData:u,options:{actionMgrID:d}}})(l)))}}else{Pm(p,d);let c=!1;const g=hd(u),f=Uu(g),y=zu(g);if(y&&f?.items?.[y]?.key===m?.actionInPayload?.caseID&&(c=!0),h){const c=td(u)[0];d.target=c,d.context=Rc(c,W.WORKAREA,u),d.containerItemID=d.context,p.push(Vh(Ih,{...d,...l}));const h=d.containerItemID;p.push(Vh(Oh,{parentContainerTarget:c,containerItemID:h}))}if(c){const{data:c,caseViewMode:d}=l,h={data:c,caseViewMode:d,context:u};eh.setIn(h.data,["context_data","caseViewMode"],d),p.push({type:lt,payload:{context:u}}),p.push(Vh(uh,h))}}})(T,l,E,c,h,u,d,p,g):m&&!Rm(c.context,T)?(Pm(h,c),((c,l,u)=>{const{containerItemID:d,caseID:p}=l;if(d&&/^app\/preview_[0-9]*/g.test(d)){const{caseClassName:l}=u,h=K(d),g=Ju(h);c.push(Vh(ph,{containerItemID:h,context:g,container:Mu.PREVIEW,containerName:Mu.PREVIEW,caseId:p,viewName:G.PREVIEW_VIEW_NAME,caseClassName:l,updateData:!0}))}})(h,c,{caseClassName:_})):await vm(l,c,p,b,h)},{RESOURCE_TYPES:wm}=G,Mm=c=>{const l={},{routeKey:u,isModalAction:d,caseID:p,context:h,RemoteSystemID:g}=c;g&&(l.RemoteSystemID=g);const f=u||"releaseAssignmentLock",{restApi:m,reqType:y}=sg(f,{ID:p,caseID:p,viewType:Ec.PAGE});return Xi.getPreviewMode()&&(l[W.SKIPCOREHEADERS]=!0),Vi(ic(m,{method:y,headers:l},h,{includeRemoteSystemIdIfPresent:!!g})).pipe(wl((l=>d?{actionInPayload:c}:{response:l.data,actionInPayload:c,headers:_c(l.headers)})),Bl(": Error occurred during ajax call at release lock request : ",h))},{RESOURCE_TYPES:Um}=G,Fm=(c,l=!1)=>{const{action:u,state$:d,actionMgrID:p}=c;let h=[];return jl(u.payload).pipe(Ml((c=>((c,l)=>{const{assignmentID:u,actionID:d,context:p}=c,{restApi:h,reqType:g}=sg("save",{assignmentID:u,actionID:d}),{content:f}=Cc(p),m=l.value.data[p]?.caseInfo?.headers;let y={};return Hd.getPerformanceDashboardVisibility()&&(y=lm(W.TOP_ACTION_LABEL.SAVEANDCLOSE)),Vi(ic(h,{method:g,body:f,headers:{"if-match":m&&m.etag}},p,y)).pipe(wl((l=>({response:l.data,actionInPayload:c,headers:_c(l.headers)}))),Bl(": Error occurred during ajax call at saveAndCloseAssignment Epic at save action : ",p))})(c,d))),Ml((c=>{if(c&&es(c.type))return jl(c);const{containerItemID:l}=c&&c.actionInPayload,d=K(l),p=hd(d),g=Uu(p),f=zu(p);if(u.payload.canUpdateAvailableActions&&Xf(c.response),g?.items?.[f]?.key===c?.actionInPayload?.caseID){const u={context:d,data:{...c.response.data}},p=yc.getPropertiesToReplace(l);h.push(Vh(uh,u,{propertiesToReplace:p})),h.push(Vh(Nh,{context:l}));const g={context:l,data:{caseInfo:{headers:c.headers}}};h.push(Vh(uh,g))}return fs(c,h),c.actionInPayload.RemoteSystemID=q.getRemoteHeaderByContext(c.actionInPayload.context)??void 0,Mm(c.actionInPayload)})),Ml((async u=>{if(u&&es(u.type)){const{payload:l}=u,d=bc({...u,...l,actionMgrID:p});h.push(d);const g=c.action.payload.modalLoadingContainer;if(g){const c=g.context,{context_data:l}=$p(c)||{};l?.isLoading&&gd(c)}return h}const{actionInPayload:d}=u,{context:g,containerName:f}=d,m={target:Ct(f,g),containerItemID:g,context:g};return l||h.push(Vh(xh,m)),h})),wl((()=>(kp(h),ps(h,p),l||(h=[]),h))))},{LOCAL_ACTION_TYPE:jm}=W,{RESOURCE_TYPES:Vm}=G,km=(c,l)=>{const{actionID:u,assignmentID:d,caseID:p,context:h,openActionType:g,modalLoadingContainer:f,headers:m}=c,{isProcessAction:y}=l,I=y?Qe:(c=>{const l=c.localActionType.toLowerCase();return l===jm.CASE_WIDE||l===jm.EXPRESS?Ze:Je})(c),E=Ec.FORM,{reqType:A}=sg(I,{caseID:p,ID:d,actionID:u,viewType:E});let{restApi:_}=sg(I,{caseID:p,ID:d,actionID:u,viewType:E});c.actionType=I===Ze?W.CASE:W.ASSIGNMENT,_&&!_.includes("viewType=")&&(_=_.includes("?")?`${_}&viewType=${E}`:`${_}?viewType=${E}`);const C=f?.context??h;return Vi(ic(_,{method:A,headers:m},C)).pipe(wl((l=>({response:l.data,actionInPayload:c,headers:_c(l.headers)}))),Bl(`: Error occurred during ajax call at ${g} Epic : `,C))},$m=(c,l)=>{const{isProcessAction:u}=l,d=u?Qe:Je;let p;if(c.openActionType=d,"modal"===Xr(d,c)){p=td(c.contextName)[0]?td(c.contextName):hd(c.contextName);const u=p?zu(p):c.contextName,d=Ju(u),h=Xr(c.openActionType,c),g=Ct(h,c.context),f=ee(c.context,X(h,c.context));return kp(Ih({target:g,context:f,containerItemID:f,key:c.caseID,caseViewMode:W.PERFORM_MODE,actionName:c.name,showProgress:!0,root:{type:"reference",config:{context:W.CASE_INFO.CASE_INFO_CONTENT,type:"view"}},data:{key:c.caseID,caseInfo:{ID:c.caseID}}})),kp(bh({context:f})),c.modalLoadingContainer={target:g,context:f},td(c.contextName)[0]?c.continueExecution&&Il(d)?(c.saveActionPayload.modalLoadingContainer=c.modalLoadingContainer,c.saveActionPayload.canUpdateAvailableActions=!c.saveActionPayload.isModalAction,Vi([bl(c.saveActionPayload)]).pipe(Ml((c=>(c=>{let l,u=0;const d=[],p={value:Vp()?.getState()};return jl(c).pipe(vl(Pl),xl((c=>{const{isFormValid:h}=c.payload;if(({actionMgrID:u,caseType:l}=c.payload),!h){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,c),jl([])}return Fm({action:c,state$:p,actionMgrID:u,caseType:l,actionsOut:d},!0)})))})(c))),Ml((u=>{if(1===u.length&&es(u[0].type)){const{continueExecution:u}=xc(p);if(!u)return gn.rejectActionByID(c.actionMgrID),kl.pipe(ki((()=>$l()))).toPromise();if(u)return km(c,l)}return km(c,l)})),wl((c=>c)))):km(c,l):km(c,l)}return km(c,l)},Bm=async(c,l,{headers:u,actionInPayload:d})=>{const{context:p,actionName:h,openActionType:g,doDeleteCaseSummary:f,modalLoadingContainer:m}=d,y=Jf(c),I=Xr(g,d),E=m?.target??Ct(I,p);let A,_,C=!1;!od(E)||ad(E)&&!$u(E,c.data.caseInfo.ID)?(_=X(I,p),Zr(I)&&(_=ee(p,_)),A=_,C=!0):(A=ad(E)?Gu(E,c.data.caseInfo.ID):zu(E),_=Ju(A));const S={acName:E,target:E,containerName:I,context:_};await Tc(y,d,S),(void 0===y?.data?.caseInfo?.content||void 0!==y.data.caseInfo.content&&"object"==typeof y.data.caseInfo.content&&0===Object.keys(y.data.caseInfo.content).length)&&delete y.data?.caseMessages;const T=y.uiResources?.root;let N;N=T?W.PERFORM_MODE:W.REVIEW_MODE;const P=Sc(y,{target:E,context:_,containerItemID:A,caseViewMode:N,doDeleteCaseSummary:f,headers:u,actionName:h,isMinimizable:!1,isInCreateStage:Zr(I),resourceType:Vm.ASSIGNMENT,isProcessAction:d.isProcessAction,showProgress:d.showProgress,progressMessage:d.progressMessage,assignmentID:d.assignmentID,actionType:d.actionType});T&&us(P,y),Zr(I)&&delete P.doDeleteCaseSummary,d.openActionType===et&&(P.isBulkAction=!0,P.data.caseInfo.actionButtons.main[0].jsAction="async"===d.runningMode?"submitBulkActionAsync":"submitBulkAction",P.data.caseInfo.actionButtons.secondary[0].jsAction="cancelBulkAction",P.data.caseInfo.cases=d.selectedList);const b=C?Ih:Nh;if(l.push(Vh(b,P)),C||l.push(Vh(Dh,P)),C){const p=td(d.contextName),h=Gu(p,c.data.caseInfo.ID);if(h){const c={data:{caseInfo:{headers:u}},context:h};l.push(Vh(uh,c))}}return A!==zu(E)&&l.push(Vh(Oh,{target:E,containerItemID:A})),ls(A)&&!m?.context&&Fc(P,l),P.caseViewMode===W.REVIEW_MODE&&l.push(Vh(xh,P)),l};var Gm=Array.isArray,Wm=Object.getPrototypeOf,Hm=Object.prototype,qm=Object.keys;var zm=Array.isArray;function Ym(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=function(c){return Ho(Ul(c))?c.pop():void 0}(c),d=function(c){if(1===c.length){var l=c[0];if(Gm(l))return{args:l,keys:null};if((d=l)&&"object"==typeof d&&Wm(d)===Hm){var u=qm(l);return{args:u.map((function(c){return l[c]})),keys:u}}}var d;return{args:c,keys:null}}(c),p=d.args,h=d.keys,g=new _i((function(c){var l=p.length;if(l)for(var u=new Array(l),d=l,g=l,f=function(l){var f=!1;Oi(p[l]).subscribe(Mi(c,(function(c){f||(f=!0,g--),u[l]=c}),(function(){return d--}),void 0,(function(){d&&f||(g||c.next(h?function(c,l){return c.reduce((function(c,u,d){return c[u]=l[d],c}),{})}(h,u):u),c.complete())})))},m=0;m<l;m++)f(m);else c.complete()}));return u?g.pipe(function(c){return wl((function(l){return function(c,l){return zm(l)?c.apply(void 0,Bo([],$o(l))):c(l)}(c,l)}))}(u)):g}var Km=new Og(Pg),Xm=Km;function Jm(c,l){return void 0===c&&(c=0),void 0===l&&(l=Km),c<0&&(c=0),function(c,l,u){void 0===c&&(c=0),void 0===u&&(u=Xm);var d=-1;return null!=l&&(Ll(l)?u=l:d=l),new _i((function(l){var p,h=(p=c)instanceof Date&&!isNaN(p)?+c-u.now():c;h<0&&(h=0);var g=0;return u.schedule((function(){l.closed||(l.next(g++),0<=d?this.schedule(void 0,d):l.complete())}),h)}))}(c,c,l)}function Qm(c){return wi((function(l,u){var d=!1,p=null,h=null,g=function(){if(null==h||h.unsubscribe(),h=null,d){d=!1;var c=p;p=null,u.next(c)}};l.subscribe(Mi(u,(function(l){null==h||h.unsubscribe(),d=!0,p=l,h=Mi(u,g,oi),Oi(c(l)).subscribe(h)}),(function(){g(),u.complete()}),void 0,(function(){p=h=null})))}))}const Zm=c=>{const{context:l}=c;let u={...Cc(l).content,contextData:!1};const d=kc(l);eh.isEmpty(d)||(u=Vc(d,u));const{restApi:p,reqType:h}=sg("refreshCaseView",c);return u.interestPage=c.interestPage,Vi(ic(p,{method:h,body:u},l)).pipe(wl((l=>({actionInPayload:c,response:l.data,headers:_c(l.headers)}))),Bl(": Error occurred during ajax call : ",l))},ey=[c=>{let l=0,u=[],d="",p=!1;return c.pipe(vl(ih),Gl(100),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>{const{context:u}=c,d=om(c),h=Ct(d,u),{continueExecution:g,removeActionPayload:f}=(c=>sd(c)?{continueExecution:!0,removeActionPayload:{}}:xc(c))(h);return p=hs(c.class),g?(c.isTraditionalUICase=p,((c,l)=>{const{class:u,context:d,viewType:p=Ec.PAGE}=c,{removeActionPayload:h}=l;let g=c?.pageName?c?.pageName:Hd.getDefaultCasePage();return c.isTraditionalUICase&&(g="pyDetails"),Vi(Im.createCase(u,{...c,pageName:g,viewType:p,context:d})).pipe(wl((({response:l,headers:u})=>({response:l,actionInPayload:c,headers:u,removeActionPayload:h}))),Bl("Error occurred during ajax call at createWork Epic : ",d))})(c,{removeActionPayload:f})):(gn.rejectActionByID(l),$l())})),Ml((async c=>{if(c&&c.type===Te)return c.payload.context=bd(),u.push(bc(c)),u;const{actionInPayload:h,response:g,headers:f,removeActionPayload:m}=c;let y;y=!(h.renderInline||Hd.getDefaultCasePage()||p)&&im(g),eh.setIn(g.data,G.CASE_INFO.IS_FIRST_ASSIGNMENT,!0);const I=om({...h,isInCreateStage:y}),E=Ct(I,h.context),A=Rc(E,I,h.context);if(!Zr(I)&&sd(E)){const{continueExecution:c}=xc(E);if(!c)return gn.rejectActionByID(l),$l()}if(!(h?.openCaseViewAfterCreate??1)&&!y){const c=eh.getIn(g.data,G.CASE_INFO.CASE_INFO_CONTENT);d=`${c.pyID} ${zd.getLocaleValue("has been created.","Assignment")}`;const l=is(g),p=ss(g);return(c=>{zr.publish(W.PUB_SUB_EVENTS.DISPLAY_CASE_CREATED_TOASTER,c)})({toastMessage:d}),(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CREATE_STAGE_DONE,c)})({caseId:`${c.pyID}`,assignmentId:l,caseType:p}),u}const _=Jf(g);let C=ng("createWork",{caseClassName:ss(_)});C=C.replace(/{.+?}/,String(rs(os(_)))),_.semanticURL=C,((c,l)=>{const u=im(c),{skipBrowserSemanticUrlUpdate:d=!1,isTraditionalUICase:p}=l;eh.setIn(c,["directUrlUpdation"],(!u||p)&&!d)})(_,h);const S={acName:E,context:A},T=ms(A);await Tc(_,h,S);const N={target:E,context:A,containerItemID:A,headers:f,semanticURL:C,isInCreateStage:y,isMinimizable:y,caseViewMode:_.confirmationNote?W.REVIEW_MODE:W.PERFORM_MODE,currentCaseViewMode:T,assignmentContext:eh.getIn(_,"nextAssignmentInfo.context"),nextAssignmentInfo:eh.getIn(_,"nextAssignmentInfo"),resourceType:G.CASE,openCaseViewAfterCreate:h.openCaseViewAfterCreate,modalOptions:h.modalOptions,debugInfo:h.debugInfo};us(N,_);const P=Sc(_,N);p&&(P.data.caseInfo.content.coexistenceAction="openAssignment");const b=Dc(E,P);return Oc(b)&&cs(u,{removeActionPayload:m,target:E}),u.push(b),Lc(u),u})),wl((()=>{const c=gs(),h=sn(eh.getIn(u[0]?.payload,"data.caseInfo"));return p&&c&&h?am.postCreateCaseMessage(u[0]?.payload?.nextAssignmentInfo?.ID,jc,u):jc(u),ps(u,l),d="",u=[],u})))},c=>{const l="Browser"===Hd.getRuntime();let u=0,d=[];const p=[];let h=!1,g=!1;return c.pipe(vl(Tl),wl((c=>(({actionMgrID:u}=c.payload),{...c.payload,...l?{insKey:c.payload.assignmentID}:{assignmentID:c.payload.assignmentID}}))),Ml((c=>{h=c.isGetNextWork;const{context:l}=c;let d;d=(c?.isChild||c?.isRemote)&&c?.isMultiDoc?Ec.FORM:Am(c),c.viewType=d;const p=Xr(Ye,c),f=Ct(p,l),{activate:m,activateContainerActionPayload:y}=Mc(Sm.ASSIGNMENT,f,c);if(m&&!c.isParallelCall)return jl({type:Ue,activateContainerActionPayload:y,actionInPayload:c});const I=zu(f);let E;E=y?.isParallelAssignment?{continueExecution:!0,removeActionPayload:{}}:I?xc(f):{continueExecution:!0,removeActionPayload:{}};const{continueExecution:A,removeActionPayload:_}=E;return A?(g=hs(c.className),c.isTraditionalUICase=g,((c,l)=>{const u=Am(c),{headers:d,context:p,assignmentID:h,isGetNextWork:g,debugInfo:f,isOpenStage:m,stageID:y,caseID:I,jsActionQueryParams:E,isLastStepInCreateStage:A}=c,{restApi:_,reqType:C}=g?sg("getNextWork",{viewType:u}):m?sg("openStage",{caseID:I,stageID:y}):sg(Ye,{assignmentID:h,viewType:u}),{removeActionPayload:S}=l,T=Hd.getDefaultCasePage();let N="",P=c.pageName;c.isTraditionalUICase&&(P="pyDetails"),N=T?`${_}?viewType=${u}&pageName=${T}`:P?`${_}?viewType=${u}&pageName=${P}`:`${_}?viewType=${u}`,E&&Object.keys(E).forEach((c=>{N+=`&${c}=${E[c]}`}));const b=(c=>{let l=c?.headers??{};return c?.isRemote&&(l=_c(l,c.remoteClassName)),l})(c);return Vi(Cm({restUrl:N,reqType:C,requestHeaders:b,debugInfo:f,context:p,isGetNextWork:g,doNotMergeMessagesForStatusCode:"404",assignmentID:h})).pipe(wl((c=>Hd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT)&&!A?sn(c.data.data.caseInfo)?c:(N=N.replaceAll(P,"pyDetails"),Hd.setDefaultCasePage("pyDetails"),{isReloadWithDifferentViewTypeRequired:!0,restUrl:N}):c)),Ml((c=>c?.isReloadWithDifferentViewTypeRequired?Cm({restUrl:N,reqType:C,requestHeaders:b,debugInfo:f,context:p,isGetNextWork:g,doNotMergeMessagesForStatusCode:"404",assignmentID:h}):jl(c))),wl((l=>{const{key:p,flowName:g}=Pc(h);return{response:{...l.data,key:p,flowName:g},actionInPayload:c,viewType:u,removeActionPayload:S,headers:_c({...d,...l.headers})}})),Bl("Error occurred during ajax call at openAssignment Epic : ",p))})(c,{removeActionPayload:_})):(gn.rejectActionByID(u),$l())})),Ml((async c=>{if(c?.type===Te){if(h){const{payload:l}=c,{err:u}=l,d=u.response.status;p.push({status:Number(d)})}return d.push(bc(c)),d}const{type:l,actionInPayload:u,response:f,viewType:m,headers:y,removeActionPayload:I,activateContainerActionPayload:E}=c;if("openStage"===f?.redirectInfo?.jsAction){const c=f?.redirectInfo?.stageID,l=Tl,p=f?.data?.caseInfo?.ID;u.isOpenStage=!0,u.stageID=c,u.jsActionQueryParams=f?.redirectInfo?.jsActionQueryParams;const h={type:l,payload:{...u,caseID:p,headers:y}};return d.push(h),d}const{context:A,caseViewMode:_,debugInfo:C}=u;let S=((c,l)=>{const u=ns(c);let d;d=!Hd.getDefaultCasePage()&&sn(u);const{isChild:p,containerName:h}=l,g=p&&d,f=d&&!l.isActionFromToDoList;return g||f?W.MODAL:h||Xr(Ye,l)})(f,u);g=hs(f?.data?.caseInfo?.caseTypeID),u.isTraditionalUICase=g,g&&(S=u.containerName);const T=Ct(S,A);if(l===Ue)return await(async(c,l,u)=>{const{semanticURL:d,containerItemID:p,isParallelAssignment:h,insKey:g}=l,{target:f,actionInPayload:m}=u,{skipBrowserSemanticUrlUpdate:y=!1}=m,I=Ju(p);await Tc({directUrlUpdation:!y,semanticURL:d},m,{acName:f,target:f,context:I}),c.push(Vh(Oh,{containerItemID:p,target:f,isParallelAssignment:h,insKey:g,resourceType:Em.CASE,context:I,doDeleteCaseSummary:m.doDeleteCaseSummary}))})(d,E,{actionInPayload:u,target:T}),Lc(d),d;const N=f?.data?.caseInfo?.content,P=f?.uiResources?.root?.config?.name;N&&!N.pyViewName&&P&&"page"!==u.viewType&&eh.setIn(N,"pyViewName",P);const b=Jf(f);((c,l)=>{const u=ns(c),d=os(c),p=sn(u),{skipBrowserSemanticUrlUpdate:h=!1,viewType:g,isTraditionalUICase:f}=l,m=g===Ec.PAGE&&(!p||f)&&!h,{caseTypeID:y}=u;if(m){const l=ng(ze,{caseClassName:y}).replace(/{.+?}/,String(rs(d)));c.semanticURL=l,c.directUrlUpdation=!0}})(b,u);const D=Rc(T,S,A),R={acName:T,target:T,context:D};await Tc(b,u,R);const O={target:T,context:D,containerItemID:D,headers:y,parentContext:K(u?.context),isMinimizable:sn(eh.getIn(b,"data.caseInfo")),doDeleteCaseSummary:u.doDeleteCaseSummary,acTertiary:u.acTertiary,resourceType:G.CASE,debugInfo:C};us(O,b,{skipFlowNameUpdate:u?.caseViewMode===W.REVIEW_MODE});const v=Sc(b,O);return u.isProcessAction&&(v.data.isProcessAction=u.isProcessAction),g&&(v.data.caseInfo.content.coexistenceAction="openAssignment"),((c,l)=>{c.acTertiary&&(l.data.caseInfo.isFirstAssignment=c.acTertiary)})(u,v),_m(v,T,d,u,f,_,I),m===Ec.FORM&&ls(v.containerItemID)&&Fc(v,d),Lc(d),(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.ASSIGNMENT_OPENED,c)})({actionInContext:A,assignmentID:u.assignmentID,caseKey:v.key}),d})),wl((()=>{const c=u,l=gs(),h=sn(eh.getIn(d[0]?.payload,"data.caseInfo"));return g&&l&&h?am.postCreateCaseMessage(d[0]?.payload?.data?.caseInfo?.assignments?.[0]?.ID,kp,d):kp(d),ps(d,c,p),d[0]?.payload?.isParallelAssignment&&kp({type:Tl,payload:{...d[0].payload,isParallelCall:!0}}),d=[],d})))},c=>{let l=0,u=[];return c.pipe(vl("OPEN_WORK_BY_HANDLE"),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>{const{context:u,isChild:d,viewType:p}=c,h=Xr(ze,c),g=Ct(h,u);let f,m=!0;if("none"!==p){const c=xc(g);m=c.continueExecution,f=c.removeActionPayload}if(!m)return gn.rejectActionByID(l),$l();const{activate:y,activateContainerActionPayload:I}=Mc(Tm.CASE,g,c);return y&&!d&&"none"!==p?jl({type:Ue,activateContainerActionPayload:I,actionInPayload:c}):((c,l)=>{const{insKey:u,headers:d,context:p,debugInfo:h,viewType:g}=c,{removeActionPayload:f}=l,m=c?.pageName?c?.pageName:Hd.getDefaultCasePage(),y=sg(ze,{caseID:u,params:{pageName:m}});let{restApi:I}=y;const{reqType:E}=y;"none"===g&&(I=`${I?.split("viewType")[0]}viewType=none`);let A={};return Hd.getPerformanceDashboardVisibility()&&(A=lm(W.TOP_ACTION_LABEL.OPENWORKBYHANDLE)),Vi(ic(I,{method:E,headers:{...d,...h&&{...Qi.addDebugHeaders(h)}}},p,A)).pipe(wl((l=>({response:l.data,actionInPayload:c,headers:_c({...d,...l.headers}),removeActionPayload:f}))),Bl("Error occurred during ajax call at openWorkByHandle Epic : ",p))})(c,{removeActionPayload:f})})),Ml((async c=>{if(c&&es(c.type))return u.push(bc(c)),u;const l=$p(c?.actionInPayload?.context),d=hs(c?.actionInPayload.className);if("none"===c?.actionInPayload?.viewType){if("perform"!==l?.context_data?.caseViewMode){const l=Jf(c?.response),p={data:{...l?.data},context:c?.actionInPayload?.context,isArrayDeepMerge:!0};u.push({type:lt,payload:{context:p.context,doDeleteConfirmationDetails:!1}}),d&&p.data.caseInfo?.content&&(p.data.caseInfo.content.coexistenceAction="openWorkByHandle"),u.push(Vh(uh,p));const h=hd(c?.actionInPayload?.context),g=Jr(c?.actionInPayload?.context),f=Object.freeze({target:h,containerItemID:c?.actionInPayload?.context,context:c?.actionInPayload?.context,containerName:g});if(ls(c?.actionInPayload?.context)){const l=Sc(c?.response,{...f});Fc({...l,isArrayDeepMerge:!0},u)}}}else await(async(c,l,u)=>{const{actionInPayload:d,activateContainerActionPayload:p,type:h,response:g,removeActionPayload:f,headers:m}=c,{context:y,skipBrowserSemanticUrlUpdate:I,debugInfo:E}=d,A=Xr(ze,d),_=Ct(A,y);if(h===Ue)await(async(c,l)=>{const{activateContainerActionPayload:{semanticURL:u,containerItemID:d},actionInPayload:p,actionInPayload:{context:h,skipBrowserSemanticUrlUpdate:g,doDeleteCaseSummary:f}}=l,m=Xr(ze,p),y=Ct(m,h),I=Ju(d);await Tc({directUrlUpdation:!g,semanticURL:u},p,{acName:y,containerName:m,target:y,context:I}),c.push(Vh(Oh,{containerItemID:d,target:y,context:I,doDeleteCaseSummary:f}))})(l,{activateContainerActionPayload:p,actionInPayload:d});else{const p=Rc(_,A,y,{buildNew:!0}),h=Jf(g),C=((c,l)=>{const{isRemoteCase:u,remoteCaseClass:d}=l,p=os(c),h=u?d:ss(c);let g=ng(ze,{caseClassName:h},{id:l?.insKey});return g=g?.replace("{workID}",String(rs(p)))?.replace("{id}",l?.insKey),g})(h,d);h.semanticURL=C,h.directUrlUpdation=!I;const S={acName:_,context:p};await Tc(h,d,S);const T=Sc(h,{target:_,context:p,containerItemID:p,semanticURL:C,headers:m,debugInfo:E});T.caseViewMode=W.REVIEW_MODE,T.resourceType=Tm.CASE,u&&(T.data.caseInfo.content.coexistenceAction="openWorkByHandle"),us(T,h,{skipFlowNameUpdate:!0}),T.currentCaseViewMode=ms(c?.actionInPayload?.context);const N=Dc(_,T);f.containerItemID&&Oc(N)&&l.push(Vh(xh,{containerItemID:f.containerItemID,target:_})),l.push(N)}Lc(l),(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CASE_OPENED,c)})({caseKey:d.insKey,actionInContext:y})})(c,u,d);return u})),wl((()=>(kp(u),ps(u,l),u=[],u))))},c=>{let l=0,u=[];return c.pipe(vl("OPEN_LOCAL_ACTION"),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>((c,l)=>$m(c,l))(c,{actionMgrID:l}))),Ml((async c=>{if(!c)return kl;if(es(c.type)){const l=bc(c);u.push(l);const{context_data:d}=$p(c.payload.context)||{};return d?.isLoading&&u.push(Vh(Dh,c.payload)),u}const{actionInPayload:l,headers:d,response:p}=c,{actionID:h}=l;return eh.setIn(p,"data.caseInfo.activeActionID",h),eh.setIn(p.data,W.CASE_INFO_IS_LOCAL_ACTION,!0),l.refreshConditions&&eh.setIn(p.data,W.CASE_INFO_REFRESH_CONDITIONS,l.refreshConditions),await Bm(p,u,{headers:d,actionInPayload:l}),(c=>{const{callbacks:l}=c;l?.submit&&(u=c=>{l.submit(c),zr.unsubscribe(W.PUB_SUB_EVENTS.EVENT_EXPRESS_LOCALACTION,"expressLocalActionSubmit")},zr.subscribe(W.PUB_SUB_EVENTS.EVENT_EXPRESS_LOCALACTION,u,"expressLocalActionSubmit"));var u})(l),u})),wl((()=>(kp(u),ps(u,l),u=[],u))))},c=>{let l=0,u=[];return c.pipe(vl("OPEN_BULK_ACTION"),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>((c,l)=>{const{context:u}=c,{actionMgrID:d}=l;c.openActionType=et;const p=Xr(et,c),h=Ct(p,u),{continueExecution:g}=xc(h);return g?(c=>{const{actionID:l,context:u,openActionType:d,caseTypeID:p,bulkContextID:h="",bulkContextType:g=""}=c,f=et,{reqType:m,restApi:y}=sg(f,{caseTypeID:p,actionID:l,bulkContextID:h,bulkContextType:g});return Vi(ic(y,{method:m},u)).pipe(wl((l=>({response:l.data,actionInPayload:c,headers:_c(l.headers)}))),Bl(`: Error occurred during ajax call at ${d} Epic : `,u))})(c):(gn.rejectActionByID(d),$l())})(c,{actionMgrID:l}))),Ml((async c=>{if(c&&es(c.type)){const l=bc(c);return u.push(l),u}const{actionInPayload:l,headers:d,response:p}=c,{actionID:h}=l;return eh.setIn(p,"data.caseInfo.activeActionID",h),await Bm(p,u,{headers:d,actionInPayload:l}),(c=>{const{callbacks:l}=c;l?.submit&&(u=c=>{l.submit(c),zr.unsubscribe(W.PUB_SUB_EVENTS.EVENT_BULKACTION,"bulkActionSubmit")},zr.subscribe(W.PUB_SUB_EVENTS.EVENT_BULKACTION,u,"bulkActionSubmit"));var u})(l),u})),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],u))))},c=>{let l,u=0,d=[],p="";return c.pipe(vl("SUBMIT_BULK_ACTION"),xl((c=>{const{isFormValid:h}=c.payload;if(({actionMgrID:u}=c.payload),!h){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,c),jl([])}return jl(c.payload).pipe(Ml((c=>(l=c,(c=>{const{actionID:l,context:u,cases:d,classID:p}=c,{content:h}=Cc(u,{nonEmptyAndChangedData:!0});let g=5;try{const c=Su.getSharedState("D_pySingleExecutionBulkActionsMeta.D_pySingleExecutionBulkActionsMeta.pxResults");c?.find((c=>c.pyClassName===p))?.pyList.split(",").includes(l)&&(g=1)}catch(c){console.error('Failed to fetch to "D_pySingleExecutionBulkActionsMeta" DP response',c)}const f=d.map((c=>({ID:c}))),m=f.length/g,y=tt,{reqType:I,restApi:E}=sg(y,{actionID:l}),A=[],_=f.length;for(let C=0;C<_;C+=m)h.cases=f.slice(C,C+m),h.cases.length&&A.push(Vi(ic(E,{method:I,body:h},u)).pipe(wl((l=>{const{data:u,headers:d}=l;return{response:u,actionInPayload:c,headers:_c({...d})}})),Bl("Error occurred during ajax call at submitbulkaction Epic : ",u)));return Ym(A)})(l)))),Ml((c=>{let u=0,h=0;const g=[],{containerItemID:f,context:m}=l;return c.map((c=>{const{response:l}=c;u+=Number(l.successCount),h+=Number(l.failureCount),h&&l.results.map((c=>{"200"!==c.status&&c.error&&c.error.errorDetails&&c.error.errorDetails.forEach((l=>{g.push({ID:c.BusinessID,message:l.localizedValue})}))}))})),p=`${u} record(s) updated`,(c=>{zr.publish(W.PUB_SUB_EVENTS.EVENT_BULKACTION,c)})({submitResponse:c}),l.target=`${W.APP.APP}/${Mu.MODAL}`,d.push(Vh(xh,{containerItemID:f,context:m,target:l.target,skipReleaseLockRequest:!0})),h&&d.push(Vh(vh,{messages:[{type:"error",message:1===h?"1 record failed to update":`${h} records failed to update`,errorDetails:g,showHeader:!1}],context:K(m)||m,category:"HTTP",showHeader:!1})),d})),wl((()=>(gn.resolveActionByID(u,p),kp(d),d=[],d))))})))},c=>{let l,u=0,d=[],p="";return c.pipe(vl("SUBMIT_BULK_ACTION_ASYNC"),xl((c=>{const{isFormValid:h}=c.payload;if(({actionMgrID:u}=c.payload),!h){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,c),jl([])}return jl(c.payload).pipe(xl((c=>(l=c,(c=>{const{actionID:l,context:u,cases:d}=c,{content:p}=Cc(u,{nonEmptyAndChangedData:!0});p.cases=d.map((c=>({ID:c})));const h=tt,{reqType:g,restApi:f}=sg(h,{actionID:l,runningMode:"async"});return Vi(ic(f,{method:g,body:p},u)).pipe(wl((l=>{const{data:u,headers:d}=l;return{response:u,actionInPayload:c,headers:_c({...d})}})),Bl("Error occurred during ajax call at submitbulkaction Epic : ",u))})(l)))),wl((c=>{const u=[],{containerItemID:h,context:g}=l,{response:f}=c,m=Number(f.failureCount)||0;return m>0&&f.results.forEach((({status:c,error:l,BusinessID:d})=>{"200"!==c&&l&&l.errorDetails&&l.errorDetails.forEach((({localizedValue:c})=>{u.push({ID:d,message:c})}))})),p="Processing bulk actions",(c=>{zr.publish(W.PUB_SUB_EVENTS.EVENT_BULKACTION,c)})({submitResponse:f}),l.target=`${W.APP.APP}/${Mu.MODAL}`,d.push(Vh(xh,{containerItemID:h,context:g,target:l.target,skipReleaseLockRequest:!0})),m&&d.push(Vh(vh,{messages:[{type:"error",message:1===m?"1 record failed to update":`${m} records failed to update`,errorDetails:u,showHeader:!1}],context:K(g)||g,category:"HTTP",showHeader:!1})),d})),wl((()=>(gn.resolveActionByID(u,p),kp(d),d=[],d))))})))},c=>{let l=0,u=[];return c.pipe(vl(Sl),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>(rr(c.context),((c,l)=>$m(c,l))(c,{actionMgrID:l,isProcessAction:!0})))),Ml((async c=>{if(c&&es(c.type)){const l=bc(c);return u.push(l),u}const{actionInPayload:l,headers:d,response:p}=c;return await Bm(p,u,{headers:d,actionInPayload:l}),u})),wl((()=>(jc(u),ps(u,l),u=[],u))))},(c,l)=>{let u=0,d=[],p={},h="";return c.pipe(vl("FINISH_ASSIGNMENT"),xl((c=>{const g=Hd.isCoexistenceAppOfType(W.APP_TYPE.UIKIT);if(({actionMgrID:u}=c.payload),h=c.payload.context,Zn({context:h,stateObj:$p(h),clearContextMessages:!0}),!tl(h)){const l={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,l),pu.handleDeferredActionCompletion(c.payload.context),jl([])}return jl(c.payload).pipe(Ml((c=>{((c,l)=>{const{containerItemID:u,context:d,actionMgrID:p,isInCreateStage:h,isModalAction:g}=l;if(h&&g){const l=Jr(u),h=Ct(l,d);c.push(Vh(Oh,{containerItemID:u,target:h,actionMgrID:p}))}})(d,c);return((c,l)=>{const{assignmentID:u,actionID:d,caseID:p,context:h,additionalHeaders:g={},isCaseWideAction:f,outcome:m,jsActionQueryParams:y}=c,{state$:I}=l,E=(c=>{const{isModalAction:l,viewType:u,isInCreateStage:d,isCaseWideAction:p}=c;return l&&d&&!p?Ec.PAGE:u||Ec.FORM})(c),A=(c=>{const{isCaseWideAction:l}=c;return l?Ze:"finishAssignment"})(c),_={assignmentID:u,actionID:d,caseID:p,viewType:E};let{restApi:C}=sg(A,_),{reqType:S}=sg(A,_);E&&!C?.includes("viewType=")&&(C=C?.includes("?")?`${C}&viewType=${E}`:`${C}?viewType=${E}`),m&&!C?.includes("outcome")&&(C=C?.includes("?")?`${C}&outcome=${m}`:`${C}?outcome=${m}`),C=((c,l)=>(c&&Object.keys(c).forEach((u=>{l+=`&${u}=${c[u]}`})),l))(y,C),f&&(S="PATCH"),c.viewType=E;const{content:T,attachmentsExist:N}=Cc(h);c.attachmentsExist=N;const P=I.value.data[h]?.caseInfo?.headers||{},{etag:b}=P,D={"if-match":b,...g};let R={};return Hd.getPerformanceDashboardVisibility()&&(R=lm(W.TOP_ACTION_LABEL.FINISHASSIGNMENT)),Vi(ic(C,{method:S,body:T,headers:D},h,R)).pipe(wl((l=>{const{data:u,headers:d}=l;return{response:u,actionInPayload:c,headers:_c({...D,...d})}})),Bl("Error occurred during ajax call at finishAssignment Epic : ",h))})({...c},{state$:l})})),Ml((async c=>{if(c&&c.type===Te){(c=>{const l=c?.payload?.err?.response?.data?.displayButtonsOnErrors||[],u=c?.payload?.err?.response?.status;if(Array.isArray(l)&&l.length>0&&424===u){l.forEach((c=>{c.isErrorButton=!0}));const u=c.payload.context,d=$p(u),p=((c,l)=>(c.forEach((c=>{!0!==c.isErrorButton||l.some((l=>l.actionID===c.actionID))||(l=[...l,c])})),l))(l,d?.caseInfo?.actionButtons?.secondary||[]),h={data:{caseInfo:{actionButtons:{secondary:p}}},target:hd(u),context:u};kp({type:Ae,payload:h})}})(c);const l=bc(c);return d.push(l),d}lu.clearContextedCache(h);const{headers:l,actionInPayload:f,response:m}=c,{containerItemID:y,context:I=Ju(y),isModalAction:E,isInCreateStage:A}=f,_=hd(y);f.target=_;const C=Jr(y),S=Object.freeze({target:f.target,containerItemID:y,context:I,containerName:C});eh.setIn(m.data,W.CASE_INFO.IS_FIRST_ASSIGNMENT,!1),eh.setIn(m.data,W.CASE_INFO_IS_LOCAL_ACTION,!1),m?.uiResources?.root?.config?.name&&"page"!==f.viewType&&eh.setIn(m.data,W.CASE_INFO.VIEW_NAME,m?.uiResources?.root?.config?.name),(c=>{zr.publish(W.PUB_SUB_EVENTS.EVENT_EXPRESS_LOCALACTION,c)})({submitResponse:m});let T=Jf(m,{[G.STOPMERGEACTIONS]:!m.nextAssignmentInfo});const N=ss(T),P=K(f.context),b=td(P)[0]?zu(td(P)[0]):P,D=as(T),R=A&&!D;!E||A||Rm(f.context,b)||(T=((c,l)=>(c?.data?.caseInfo&&l?.caseInfo?.content&&(c.data.caseInfo.content=l?.caseInfo?.content),c))(T,$p(y)));const O=Sc(T,{headers:l,actionMgrID:u,directUrlUpdation:!1});let v,x;ds(O.data,f),O.caseClassName=N,O.resourceType=wm.ASSIGNMENT,O.headers=l;const w=T?.data?.caseInfo?.assignments?.some((c=>c.ID===f.assignmentID)),M=((c,l)=>{const{assignmentID:u}=l;return c?.data?.caseInfo?.assignments?.some((c=>c.ID===u&&"true"===c?.canPerform))})(T,f),L=((c,l,u,d,p)=>{let h;const g=hd(l);return h=ad(g)?Gu(g,u.data?.caseInfo?.ID):zu(g),d&&c&&Hp(null,W.CASE_VIEW_MODE_PROP,h)===W.PERFORM_MODE&&p})(w,b,T,E,M),U=f?.actionID===G.LOCAL_ACTIONS.TRANSFER_ASSIGNMENT;T?.data?.nextAssignmentInfo&&!U?(O.caseViewMode=W.PERFORM_MODE,v=os(T),x=!0):L&&!U?(O.caseViewMode=W.PERFORM_MODE,v=os(T),O.flowName=" ",O.deleteAssignmentSpecificResources=!1,x=!1):(O.caseViewMode=W.REVIEW_MODE,v="",x=!1);const F=os(T);us(O,T,{skipFlowNameUpdate:O?.caseViewMode===W.REVIEW_MODE||L});const j=ng("createWork",{caseClassName:N}).replace(/{.+?}/,String(rs(F)));if(T.semanticURL=j,O.semanticURL=j,E?(await xm(f,O,x,v,T,d,c,m),R&&(p=(c=>{if(!bm(c.context)){let l;const u=c?.caseTypeID,d=c?.caseTypeName;return l=c.businessID?c.businessID:c.workID,{caseID:l,caseTypeID:u,caseTypeName:d}}return{}})(f))):A&&g&&!D?(Hd.setDefaultCasePage("pyDetails"),await(async(c,l,u)=>{const d={assignmentID:c?.data?.caseInfo?.assignments[0]?.ID,className:c?.data?.caseInfo?.content?.classID,containerName:Mu.PRIMARY,targetContainerName:Mu.PRIMARY,viewType:Ec.PAGE,isLastStepInCreateStage:!0,context:u},p={type:Ee,payload:{...d}};l.push(p)})(m,d,K(I))):await vm(O,f,T,S,d),fs(c,d),pu.handleDeferredActionCompletion(h),((c,l,u)=>{const{isModalAction:d,isCaseWideAction:p,caseID:h}=l,g=Rm(l.context,u),f=c?.data?.caseInfo?.stages||[],m=c?.data?.caseInfo?.stageID;Yr({caseID:h,isModalAction:d,isModalLaunchedFromPrimaryValue:g,isCaseWideAction:p,stages:f,stageID:m})})(O,f,b),!T?.data?.nextAssignmentInfo){const c=((c,l)=>{const{isCaseWideAction:u,assignmentID:d,actionID:p}=l;return{isCaseWideAction:u,caseID:os(c),assignmentID:u?null:d,actionID:u?p:null}})(T,f);(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.END_OF_ASSIGNMENT_PROCESSING,c)})({...c,containerItemID:y})}return((c,{isModalAction:l,target:u,transientItemID:d})=>{if(l){const l=c.find((({type:c})=>c===Ve));l?.payload&&(u=l.payload.target,d=l.payload.containerItemID)}const p=wh({target:u,containerItemID:d});p.payload.transientItems.length&&c.push(p)})(d,{transientItemID:y,target:_,isModalAction:E}),d})),wl((()=>{const c=d.find((c=>c.type===Te));return c?(pu.handleDeferredActionCompletion(h),(c=>{const l=c?.payload?.err?.errorDetails,u=c?.payload?.context;l?.forEach((c=>{c[W.ERROR_FIELD_IN_PAGE]=c[W.ERROR_FIELD_IN_PAGE].replace(/(\(\d\))/g,(c=>`[${parseInt(c.substring(1,c.length-1),10)-1}]`));const l=c[W.ERROR_FIELD_IN_PAGE].slice(1),d=c[W.ERROR_IN_PAGE_IDENTIFIER].slice(1);if(d){let p=l?`caseInfo.content.${l}`:"caseInfo.content";p=p.replace(/\(/g,"[").replace(/\)/g,"]");const h=Kn(d,p,W.PROPERTY),g={type:G.MESSAGES.MESSAGES_TYPE_ERROR,message:c.localizedValue};Rn.mutateField(u,p,h[h.length-1],{messages:[g],type:G.MESSAGES.MESSAGES_TYPE_ERROR,fieldName:h[h.length-1]})}}))})(c),gn.rejectActionByID(u)):gn.resolveActionByID(u,p),jc(d),d=[],p={},d})))})))},(c,l)=>{let u=0,d=[];return c.pipe(vl("NAVIGATE_TO_STEP"),xl((c=>(({actionMgrID:u}=c.payload),jl(c.payload).pipe(Ml((c=>(rr(c.context),((c,l)=>{const{ID:u,stepID:d,containerItemID:p,context:h=Ju(p),isInCreateStage:g}=c,{state$:f}=l,m={ID:u,stepID:d,viewType:g?Ec.PAGE:Ec.FORM},{restApi:y,reqType:I}=sg("navigateToStep",m),{content:E}=Cc(h),A=f.value.data[h].caseInfo.headers;return Vi(ic(`${y}`,{method:I,body:E,headers:{"if-match":A&&A.etag}},h)).pipe(wl((l=>({response:l.data,actionInPayload:c,headers:_c({...A,...l.headers})}))),Bl("Error occurred during ajax call at navigateToStep Epic : ",h))})(c,{state$:l})))),Ml((async c=>{if(c&&es(c.type))return d.push(bc(c)),d;const{actionInPayload:l,response:u,headers:p}=c,{containerItemID:h,context:g=Ju(h),isModalAction:f}=l;lu.clearContextedCache(l.context);const m=hd(h),y=Jr(h),I=Object.freeze({target:m,containerItemID:h,context:g,containerName:y}),E=u?.data?.caseInfo?.content,A=u?.uiResources?.root?.config?.name;E&&!E.pyViewName&&A&&"page"!==l.viewType&&eh.setIn(E,"pyViewName",A);const _=Jf(u),C={acName:m,...I};await Tc(_,l,C);const S=Sc(_,{...I,headers:p});S.doDeleteCaseSummary=l.doDeleteCaseSummary,S.resourceType=Um.ASSIGNMENT,us(S,_),ds(S.data,l);const T=_.data?.caseInfo?.stages,N=_.data?.caseInfo?.stageID;return Yr({caseID:os(_),isModalAction:f,stages:T,stageID:N}),ls(h)&&Fc(S,d),d.push(Vh(Nh,S)),Lc(d),d})),wl((()=>(kp(d),ps(d,u),d=[],d))))))))},c=>{let l=0,u=[];return c.pipe(vl("CANCEL_ASSIGNMENT"),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>{const{isModalAction:u}=c;c.context||(c.context=Ju(c.containerItemID));const{context:d}=c,p=(c=>{const{isModalAction:l,containerItemID:u}=c;return l?Mu.MODAL:Jr(u)})(c),h=Ct(p,d),{continueExecution:g}=xc(h);return g?(c.RemoteSystemID=q.getRemoteHeaderByContext(c.context)??void 0,((c,l)=>{const{isModalAction:u}=l;return Mm({routeKey:"cancelAssignment",isModalAction:u,...c})})(c,{isModalAction:u})):(gn.rejectActionByID(l),$l())})),Ml((async c=>{if(c&&c.type===Te)return u.push(bc(c)),u;const{actionInPayload:d,response:p}=c,{containerItemID:h,isModalAction:g,isInCreateStage:f}=d;p&&(p.data.caseInfo.availableProcesses=p.data.caseInfo.availableProcesses??[]);const m=hd(h),y=Ju(h),I={target:g?`${W.APP.APP}/${W.MODAL}`:m,containerItemID:h,caseViewMode:g?W.PERFORM_MODE:W.REVIEW_MODE,context:y,actionMgrID:l,key:os(p),skipReleaseLockRequest:!1};return f&&u.push(Vh(Nh,I)),!g&&ls(h)&&(async(c,l)=>{const{childContainerItemID:u,caseViewMode:d,referencedUsers:p}=l,h=K(u),g={context:Ju(h),data:{referencedUsers:p,context_data:{caseViewMode:d}}};g.data={...l.response.data,...g.data},c.push(Vh(uh,g))})(u,{childContainerItemID:h,caseViewMode:W.REVIEW_MODE,referencedUsers:p?.data.referencedUsers,response:p}),I.skipReleaseLockRequest=!0,u.push(Vh(xh,I)),u})),wl((()=>(kp(u),ps(u,l),u=[],u))))},c=>{let l=0,u=[];return c.pipe(vl(De,Ve),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>{const{containerItemID:l,caseID:u,context:d,caseDeleted:p,skipReleaseLockRequest:h,currentCaseViewMode:g,isProcessAction:f,isInCreateStage:m}=c,y=g===W.PERFORM_MODE,I=u&&y;return f&&m?Mm(c):l!==d||p||h||!I?l?.includes(W.MODAL)&&ms(wd(l))===W.REVIEW_MODE?Mm(c):jl([]):Mm(c)})),Ml((c=>(c&&es(c.type)&&u.push(bc(c)),u))),wl((()=>(kp(u),ps(u,l),u=[],u))))},(c,l)=>{let u,d=0;return c.pipe(vl(Pl),xl((c=>{const{saveOnly:p}=c.payload;return({actionMgrID:d,caseType:u}=c.payload),Fm({action:c,state$:l,actionMgrID:d,caseType:u},p)})))},(c,l)=>{let u,d=0,p=[];return c.pipe(vl(Nl),wl((c=>(({actionMgrID:d,caseType:u}=c.payload),c.payload))),Ml((c=>c.ignoreCaseDeletion?jl({actionInPayload:c}):(c=>{const{caseID:l,context:u}=c,{restApi:d,reqType:p}=sg("deleteCaseInCreateStage",{ID:l});return Vi(ic(d,{method:p},u)).pipe(wl((l=>({response:l.data,actionInPayload:c,headers:_c(l.headers)}))),Bl(": Error occurred during ajax call at deleteCaseInCreateStage Epic : ",u))})(c))),Ml((async c=>{if(c&&es(c.type)){const{payload:l}=c,u=bc({...c,...l,actionMgrID:d});return p.push(u),p}const{actionInPayload:u}=c,{context:h,isModalAction:g}=u,f=g?Mu.MODAL:Mu.PRIMARY,m=Ct(f,h);if(!g&&m){const c={acName:m,target:m,context:h},d=l.value.containers[m],{semanticURL:p}=(c=>{const{accessedOrder:l,items:u}=c;if(l&&l.length>1){const c=u[l[l.length-2]],{semanticURL:d}=c;if(d)return c}return{semanticURL:""}})(d);await Tc({directUrlUpdation:!0,semanticURL:p},u,c)}if(u.isProcessAction&&u.parentCaseInfo){const c={insKey:u.parentCaseInfo.ID,className:u.parentCaseInfo.content.classID,context:u.parentContext,acTargetName:W.PRIMARY,isChild:!0},l={type:fe,payload:{...c}};p.push(l)}const y={target:m,containerItemID:h,context:h,caseDeleted:!0};return p.push(Vh(xh,y)),p})),wl((()=>(kp(p),ps(p,d)===W.PROMISE_VALUE.RESOLVE&&(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CREATE_STAGE_DELETED,c)})({caseType:u}),p=[],p))))},c=>c.pipe(vl(Xe),Qm((()=>Jm(100))),wl((c=>{const{actionMgrID:l,isChildCase:u,isModalAction:d,isProcessAction:p,isDataObject:h,skipReleaseLockRequest:g,isInCreateStage:f}=c.payload;return gn.resolveActionByID(l),zr.publish(W.PUB_SUB_EVENTS.EVENT_SHOW_CANCEL_ALERT,{isModalAction:d,hideDelete:!p&&u,isDataObject:h,skipReleaseLockRequest:g,isInCreateStage:f}),[]}))),c=>c.pipe(vl(ke),Qm((()=>Jm(100))),wl((c=>{const{actionMgrID:l,context:u,containerName:d,containerItemID:p}=c.payload,h=Ct(d,u);return gn.resolveActionByID(l),kp(Vh(Oh,{containerItemID:p,target:h,doDeleteCaseSummary:!1})),[]}))),c=>{let l=0,u=[],d="";return c.pipe(vl(yt),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>Zm(c))),Ml((async c=>{if(c&&c.type===Te)return u.push(bc(c)),{actionsOut:u,actionInPayload:{skipPageInstructions:!0}};const{actionInPayload:l,response:p}=c,h=l.containerName,g=Ct(h,l.context);let f=Rc(g,h,l.context);f=ee(l.context,f);const m=Jf(p);m.key=l.ID,m.data?.caseInfo&&(m.data.caseInfo.ID=l.ID);const y={isMultiRecordData:!0,viewName:l.viewID,parentContext:l.context,interestPage:l.interestPage};m.uiResources.context_data.modalView=y;const I=$p(l.context)?.context_data?.caseInfo,E=`${l.pageReference}${l.targetProperty}`,A=Xn(I,E.replace(G.CASE_INFO.CASE_INFO_CONTENT,"").slice(1),l.index);m.uiResources.context_data.caseInfo={...m.uiResources.context_data.caseInfo,content:eh.mergeDeep(m.uiResources.context_data.caseInfo?.content,A?.content)};const _={acName:g,context:f};await Tc(m,l,_);const C=Sc(m,{target:g,context:f,containerItemID:f});C.resourceStatus=l.actionType,C.isMultiRecordData=!0,C.parentContext=l.context,C.heading=l.heading;const S=Dc(g,C);return d=f,u.push(S),Lc(u),{actionsOut:u,actionInPayload:l}})),wl((({actionInPayload:c})=>(ts(u)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],c.skipPageInstructions||((c,l,u,d,p)=>{p===W.RESOURCE_STATUS.CREATE&&(Bc.isStateMachineExist(c,l,u)||Bc.setStateMachine(c,u,l,new gr(u,l,c)),Bc.getStateMachine(c,l,u).insert({},d+1,!0,{isDefault:!0}))})(d,c.pageReference,c.targetProperty,c.index,c.actionType),u))))},c=>{let l,u="",d=[];return c.pipe(vl(It),xl((c=>{l=c.payload;const{isFormValid:p}=c.payload;if(({actionMgrID:u}=c.payload),!p){const l={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(u,!0,l),pu.handleDeferredActionCompletion(c.payload.context),jl([])}return jl(c.payload).pipe(Ml((c=>(l=c,Zm(l)))),Ml((async c=>{if(c&&c.type===Te){const l=bc(c);return d.push(l),d}const{containerItemID:u,context:p}=l;var h,g,f,m;return h=p,g=l.parentContext,f=G.CASE_INFO.CASE_INFO_CONTENT,m=!1,Cr(h).forEach((c=>{const l=eh.convertClipboardPageToPageRefNotation(c.target);Bc.isStateMachineExist(g,f,l)||Bc.setStateMachine(g,l,f,new gr(l,f,g));const u=Bc.getStateMachine(g,f,l);switch(c.instruction.toLowerCase()){case"insert":u.insert(c.content,c.listIndex,m,{});break;case"update":u.update(c.content,c.listIndex,m,{});break;case"delete":c.listIndex?u.delete(c.listIndex,m):u.deletePage();break;case"replace":u.replacePage(c.content);break;case"move":u.move(c.listIndex,c.listMoveToIndex);break;case"delete all":u.deleteAll()}})),d.push(Vh(xh,{containerItemID:u,context:p,target:l.target,skipReleaseLockRequest:!0})),d})),wl((()=>{if(ts(d))gn.rejectActionByID(u),pu.handleDeferredActionCompletion(l.context);else{gn.resolveActionByID(u),pu.handleDeferredActionCompletion(l.context);const{pageReference:d}=c.payload;if(sh.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.IS_MULTI_RECORD_DATA,d,l.parentContext)){const c=sh.getPropertyValue(G.CASE_INFO.CASE_INFO_ID,d,l.parentContext),u=sh.getPropertyValue(W.CONTEXT_DATA_MODAL_VIEW.VIEW_NAME,d,l.parentContext),p=l.pageReference?.substring(0,l.pageReference?.lastIndexOf(".")),h=p.replace(W.CASE_INFO.CASE_INFO_CONTENT,"");kn(c,u,l.parentContext,h,{})}else Gn(l.parentContext,W.CASE_INFO.CASE_INFO_CONTENT,{})}return kp(d),d=[],d})))})))},c=>{let l=0,u=[];return c.pipe(vl(du),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>(c=>{const{caseID:l,headers:u,debugInfo:d,context:p}=c,h=sg("getDescendants",{caseID:l}),{restApi:g}=h,{reqType:f}=h;let m={};return Hd.getPerformanceDashboardVisibility()&&(m=lm(W.TOP_ACTION_LABEL.GETDESCENDANTS)),Vi(ic(g,{method:f,headers:{...u,...d&&{...Qi.addDebugHeaders(d)}}},p,m)).pipe(wl((l=>({actionInPayload:c,response:l.data,headers:_c({...u,...l.headers})}))),Bl("Error ocurred during ajax call at getDescendants Epic : ",p))})(c))),Ml((async c=>{if(c&&es(c.type))return u.push(bc(c)),u;const{actionInPayload:l,response:d}=c,p={};eh.setIn(p,"caseInfo.childCases",d?.childCases);const h={data:p,context:l?.context};return u.push(Vh(uh,h)),u})),wl((()=>(kp(u),ps(u,l),u=[],u))))}],ty=ey;function ny(){return wi((function(c,l){c.subscribe(Mi(l,oi))}))}const{RESOURCE_TYPES:ry}=G,sy=[c=>c.pipe(vl(oe),wl((c=>c.payload)),Ml((c=>{const l={caseID:c.caseId,viewID:c.viewName,caseClassName:c.caseClassName,RemoteSystemID:c.RemoteSystemID};if(c.containerName===Mu.PREVIEW&&c.context&&c.caseId&&!c.updateData){const l=Ct(Mu.PREVIEW,c.context),u=Rc(l,Mu.PREVIEW,c.context,{buildNew:!0}),d=decodeURI(c.caseId);kp(Ih({...c,context:u,target:l,containerItemID:u,key:d,caseViewMode:W.REVIEW_MODE,root:{type:"reference",config:{context:W.CASE_INFO.CASE_INFO_CONTENT,name:c.viewName,type:"view"}},data:{key:d,caseInfo:{ID:d,progress:!0,error:!1,caseTypeID:c.caseClassName,content:{classID:c.caseClassName}}}})),c.viewLoadingContainer={target:l,context:u}}const u={};if(l.RemoteSystemID)u.RemoteSystemID=l.RemoteSystemID;else if(q.isRemoteCase(l.caseClassName)){const{RemoteSystemID:c}=q.getRemoteCase(l.caseClassName);u.RemoteSystemID=c}let{restApi:d,reqType:p}=sg("loadView",l);return c.viewContext===ry.PAGE&&({restApi:d,reqType:p}=sg(Ge,{page:c.viewName,pageClass:c.pageClass})),Vi(ic(d,{method:p,headers:u},c.context)).pipe(wl((l=>{const u=decodeURI(c.caseId);let d="";return"string"==typeof l.data?l.data?d=JSON.parse(l.data):(console.error("response data is empty!!"),d={}):d=l.data,{response:{...d,key:u},actionConfig:c,headers:_c(l.headers),rootView:eh.getIn(d,W.ROOT)}})),Bl(": Error ocurred during ajax call at loadView Epic : ",c.viewLoadingContainer?.context??c.context))})),Ml((async c=>{const l={};if(c?.type===Te){if(l.actionsOut=bc(c),c?.payload?.context?.includes(Mu.PREVIEW)){const u={...$p(c.payload.context),caseInfo:{progress:!1,error:!0}},d=Ct(Mu.PREVIEW,c.payload.context);l.actionsOut=Vh(Nh,{key:u.key,target:d,containerName:Mu.PREVIEW,context:c.payload.context,containerItemID:c.payload.context,data:u})}return l}try{l.actionMgrID=c?.actionConfig?.actionMgrID,l.rootView=c?.rootView;const{actionConfig:u,response:d,headers:p}=c;c?.actionConfig?.skipAssignmentsUpdate&&(delete d?.data?.caseInfo?.assignments,delete d?.data?.caseInfo?.availableActions,delete d?.data?.caseInfo?.availableProcesses);const{containerItemID:h,containerName:g}=u,{target:f,context:m}=(c=>{const{containerName:l,updateData:u,viewLoadingContainer:d}=c,p=l||Wr.getTargetViewContainerName(Ge),h=d?.target??Ct(p,c.context);return{target:h,context:d?.context??(l===Mu.PREVIEW&&u?c.context:Rc(h,p,c.context,{buildNew:!!l}))}})(u);u.context=m;const y={acName:f,context:m};let I={};I=Jf(d),I.directUrlUpdation=!1,await Tc(I,u,y);const E={...u,target:f,context:m,containerItemID:h||m,headers:p},A=Sc(I,E);if(A.resourceType=ry.CASE,g&&!A.updateData){A.caseViewMode=W.REVIEW_MODE;const c=hd(A?.context);((c,l,u,d,p)=>{c&&p===Mu.PREVIEW?(u.data.caseInfo.progress=!1,delete u.root,d.actionsOut=Vh(Nh,{...u,containerName:p})):c?(d.actionsOut=[],d.actionsOut.push(Vh(Oh,{target:l,containerItemID:c}))):d.actionsOut=Vh(Ih,{...u,containerName:p})})(Gu(c,A.key),c,A,l,g)}else A.preserveClientChanges=!0,l.actionsOut=[],g===Mu.PREVIEW&&l.actionsOut.push({type:lt,payload:{context:m}}),l.actionsOut.push(Vh(uh,A))}catch(c){console.error(c),l.rootView={type:"error",payload:c}}const{caseId:u,context:d,viewName:p}=c.actionConfig;return"pyCasePreview"===p&&(c=>{zr.publish(W.PUB_SUB_EVENTS.CASE_EVENTS.CASE_PREVIEW,c)})({caseId:u,context:d}),l})),wl((({rootView:c,actionsOut:l,actionMgrID:u=0})=>(gn.resolveActionByID(u,c),l)))),c=>{let l=0,u=[];return c.pipe(vl(ie),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>{zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_STARTED);const{debugInfo:u,context:d,viewName:p,className:h,skipSemanticUrl:g=!1,containerName:f=Wr.getTargetViewContainerName(Ge)}=c,m=u&&{...Qi.addDebugHeaders(u)},y=Ct(f,d);let I="",E={},A=!0;if(!g){if(I=ng(Ge,{page:p}),y&&I){const{activate:l,activateContainerActionPayload:u}=Mc(ry.PAGE,y,{semanticURL:I});if(l)return jl({type:Ue,activateContainerActionPayload:u,actionConfig:c})}if(zu(y)&&({continueExecution:A,removeActionPayload:E}=xc(y)),!A)return gn.rejectActionByID(l),$l()}const{restApi:_,reqType:C}=sg(Ge,{page:p,pageClass:h});return Vi(ic(_,{method:C,headers:m},d)).pipe(wl((l=>{let u={};return u="string"==typeof l.data?JSON.parse(l.data):l.data,{response:{...u,key:I,semanticURL:I},actionConfig:c,headers:_c(l.headers),removeActionPayload:E,skipSemanticUrl:g}})),Bl(": Error ocurred during ajax call at showPage Epic : ",c.context))})),Ml((async c=>{if(c&&c.type===Te)return u.push(bc(c)),u;let{type:l}=c;const{actionConfig:d,skipSemanticUrl:p}=c,h=d.containerName||Wr.getTargetViewContainerName(ie),g=Ct(h,d.context);zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_INIT,{pageName:c.actionConfig.viewName,pageClass:c.actionConfig.className});const{remoteCasePayload:f,updatedType:m}=((c,l,u,d)=>{let p={},h=c;if(u.isTraditionalRemoteCase){p={...u};const c=Gu(d,p.insKey);c&&(l.activateContainerActionPayload={containerItemID:c},h=Ue)}return{remoteCasePayload:p,updatedType:h}})(l,c,d,g);if(l=m??l,l===Ue){const{activateContainerActionPayload:{semanticURL:l,containerItemID:p}}=c,h={acName:g,context:Ju(p)};d.isTraditionalRemoteCase||await Tc({directUrlUpdation:!0,semanticURL:l},d,h,!0),u.push(Vh(Oh,{target:g,containerItemID:p}))}else{const l=Rc(g,h,d.context),{response:m,headers:y={},removeActionPayload:I}=c,E=Jf(m,{isCreateDataObject:d.isCreateDataObject});E.directUrlUpdation=!p;const A={acName:g,context:l},_=ms(l);await Tc(E,d,A);const C={target:g,context:l,containerItemID:l,headers:y,debugInfo:d.debugInfo,currentCaseViewMode:_},S=Sc(E,C);S.resourceType=G.PAGE,d.isCreateDataObject&&(S.resourceType=G.RESOURCE_TYPES.DATA,S.resourceStatus=G.RESOURCE_STATUS.CREATE,delete S.data.caseInfo),((c,l,u)=>{c.isTraditionalRemoteCase&&(u.resourceType=G.CASE,u.key=yc.getRemoteCaseKey(l.assignmentID,l.insKey),u.data.caseInfo={...u.data.caseInfo,...l,classID:l.className,target:u.target,containerItemID:u.containerItemID,caseTypeID:l.className,content:{pyLabel:l.name,pyID:rs(yc.getRemoteCaseKey(l.assignmentID,l.insKey))}},u.isTraditionalRemoteCase=!0,u.className=l.className)})(d,f,S),S.data??={},S.data.traditionalGadgetId=yc.getUniqueGadgetId();const T=Dc(g,S);I.containerItemID&&Oc(T)&&u.push(Vh(xh,{containerItemID:I.containerItemID,target:g})),u.push(T),Lc(u)}return zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_DONE,{target:g,pageName:c.actionConfig.viewName,pageClass:c.actionConfig.className}),u})),wl((()=>{gn.resolveActionByID(l),kp(u),u=[]})),ny())}],ay=sy,{RESOURCE_TYPES:oy}=G,iy=[c=>{let l,u=0,d=[];return c.pipe(vl(ce),(p=c=>(({actionMgrID:u}=c.payload),jl(c.payload).pipe(Ml((c=>((c,l)=>{const{context:u,pageName:d,dataContext:p,dataContextParameters:h,skipSemanticUrl:g=!1,isDeferLoaded:f=!1,parentAction:m="",resourceType:y}=c;let{containerName:I}=c;I||(I=Wr.getTargetViewContainerName(ie));const E=Ct(I,u);let A="",_={},C=!1;if(!g){A=ng(We,{pageName:d,dataViewName:p},h);const{activate:u,activateContainerActionPayload:g}=Mc(oy.PAGE,E,{semanticURL:A});if(u)return jl({type:Ue,activateContainerActionPayload:g,actionConfig:c});if(({continueExecution:C,removeActionPayload:_}=xc(E)),!C)return gn.rejectActionByID(l),$l()}return((c,l)=>{const{context:u,pageName:d,dataContext:p,dataContextParameters:h,semanticURL:g,skipSemanticUrl:f}=c,{removeActionPayload:m}=l,{restApi:y,reqType:I,body:E}=sg(We,{pageName:d,dataContext:p,dataContextParameters:h});let A={};return Hd.getPerformanceDashboardVisibility()&&(A=lm(W.TOP_ACTION_LABEL.SHOWDATA)),Vi(ic(y,{method:I,body:E},u,A)).pipe(wl((l=>({response:{...l.data,key:g,semanticURL:g},actionConfig:c,headers:_c(l.headers),removeActionPayload:m,skipSemanticUrl:f}))),Bl("Error occurred during ajax call at showData Epic : ",c.context))})({context:u,pageName:d,dataContext:p,dataContextParameters:h,semanticURL:A,skipSemanticUrl:g,containerName:I,isDeferLoaded:f,parentAction:m,resourceType:y},{removeActionPayload:_})})(c,u))),Ml((async c=>{if(c&&c.type===Te)return d.push(bc(c)),d;const{type:u,actionConfig:p,headers:h,response:g,skipSemanticUrl:f}=c;l=eh.getIn(g,W.ROOT);const{containerName:m,parentAction:y,resourceType:I}=p,E=Ct(m,p.context);let A;const _=ms(p?.context);if(p.isDeferLoaded){A=Jf(g),A.directUrlUpdation=!f;const l={acName:E,context:p.context};await Tc(A,p,l);const u={target:E,headers:h,context:p.context,containerItemID:c.containerItemID},m=Sc(A,u);return d=Vh(uh,m),d}if(u===Ue){const{activateContainerActionPayload:{semanticURL:l,containerItemID:u}}=c,h={acName:E,context:Ju(u)};await Tc({directUrlUpdation:!0,semanticURL:l},p,h,!0),d.push(Vh(Oh,{target:E,containerItemID:u,resourceType:oy.DATA}))}else if("DATA"===I&&y===mt){const{context:c}=p,l=g?.data,u={context:c,data:l};d.push(Vh(uh,u))}else{const l=Rc(E,m,p.context),{removeActionPayload:u}=c;A=Jf(g),A.directUrlUpdation=!f;const y={acName:E,context:l};await Tc(A,p,y);const I=Sc(A,{target:E,context:l,containerItemID:l,headers:h,currentCaseViewMode:_});I.resourceType=oy.DATA;const C=Dc(E,I);u.containerItemID&&Oc(C)&&d.push(Vh(xh,{containerItemID:u.containerItemID,target:E})),Lc(d),d.push(C)}return d})),wl((()=>(gn.resolveActionByID(u,l),kp(d),d=[],d))))),Ho(h)?Ml(p,h,1):Ml(p,1)));var p,h},c=>{let l=0,u=[];return c.pipe(vl(dt),Gl(100),xl((c=>{const{isFormValid:d}=c.payload;if(({actionMgrID:l}=c.payload),!d){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(l,!0,c),jl([])}return jl(c.payload).pipe(Ml((c=>(c=>{const{dataPageID:l,context:u,headers:d,containerItemID:p}=c,h={data_view_ID:l},{restApi:g,reqType:f}=sg("createDataObject",h),{content:m}=Cc(p);return Vi(ic(g,{method:f,headers:d,body:{data:m.content}},p)).pipe(wl((l=>({response:l.data,actionInPayload:c}))),Bl("Error occurred during ajax call at createDataObject Epic",u))})(c))),Ml((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=bc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d}=c,{containerItemID:p,isModalAction:h}=d,g=h?Mu.MODAL:Mu.PRIMARY,f={target:Ct(g,p),containerItemID:p,context:p};return u.push(Vh(xh,f)),u})),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],u))))})))},c=>{let l=0,u=[];return c.pipe(vl(ht),Gl(100),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>(c=>{const{dataLookUp:l,context:u,headers:d,viewName:p,requestPayload:h}=c,g={data_view_ID:l,view_ID:p},{restApi:f,reqType:m}=sg("readDataObject",g);return Vi(ic(f,{method:m,headers:d,body:{dataViewParameters:h}},u)).pipe(wl((l=>({response:l.data,actionInPayload:c}))),Bl("Error occurred during ajax call at getDataObjectView Epic",u))})(c))),Ml((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=bc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d,response:p,headers:h={}}=c,{containerName:g}=d,f=Ct(g,d.context),m=Rc(f,g,d.context),y={acName:f,context:m};await Tc(p,d,y);const I=Sc(p,{target:f,context:m,containerItemID:m,headers:h});return I.resourceType=G.RESOURCE_TYPES.DATA,I.resourceStatus=G.RESOURCE_STATUS.UPDATE,I.key=JSON.stringify(d.requestPayload),u.push(Vh(Ih,I)),u})),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],u))))},c=>{let l=0,u=[];return c.pipe(vl(gt),Gl(100),xl((c=>{const{isFormValid:d}=c.payload;if(({actionMgrID:l}=c.payload),!d){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(l,!0,c),jl([])}return jl(c.payload).pipe(Ml((c=>(c=>{const{dataPageID:l,context:u,headers:d,containerItemID:p,key:h}=c,g={data_view_ID:l},{restApi:f,reqType:m}=sg("updateDataObject",g),{content:y}=Cc(p);return Vi(ic(f,{method:m,headers:d,body:{data:{...y.content,...h},pageInstructions:y.pageInstructions||[]}},p)).pipe(wl((l=>({response:l.data,actionInPayload:c}))),Bl("Error occurred during ajax call at updateDataObject Epic",u))})(c))),Ml((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=bc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d}=c,{containerItemID:p,isModalAction:h}=d,g=h?Mu.MODAL:Mu.PRIMARY,f={target:Ct(g,p),containerItemID:p,context:p};return u.push(Vh(xh,f)),u})),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],u))))})))},c=>{let l=0,u=[];return c.pipe(vl(pt),Gl(100),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>(c=>{const{dataViewName:l,context:u,dataViewParameters:d}=c,p={data_view_ID:l,dataViewParameters:encodeURIComponent(JSON.stringify(d))},{restApi:h,reqType:g}=sg("deleteDataObject",p);return Vi(ic(h,{method:g},u)).pipe(wl((l=>({response:l.data,actionInPayload:c}))),Bl("Error occurred during ajax call at deleteDataObject Epic",u))})(c))),Ml((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=bc({...c,...d,actionMgrID:l});return u.push(p),u}return[]})),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],u))))},c=>{let l=0,u=[],d={};return c.pipe(vl(Ce),Gl(100),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>(c=>{const{dataViewID:l,dataViewParameters:u,context:d}=c,p={data_view_ID:l},{restApi:h,reqType:g}=sg("getDataObjectActions",p);return Vi(ic(h,{method:g,body:{dataViewParameters:u}},d)).pipe(wl((c=>({...c.data}))),Bl("Error occurred during ajax call at GET data object actions : ",c.context))})(c))),Ml((async c=>c&&c.type===Te?(u.push(bc(c)),u):(d=c,[]))),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l,d),kp(u),u=[],u))))},c=>{let l=0,u=[];return c.pipe(vl(ft),Gl(100),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>(c=>{const{lookupDatapage:l,context:u,headers:d,actionID:p,dataViewParameters:h}=c,g={data_view_ID:l,action_ID:p},{restApi:f,reqType:m}=sg("openDataObjectAction",g);return Vi(ic(f,{method:m,headers:d,body:{dataViewParameters:h}},u)).pipe(wl((l=>({response:l.data,actionInPayload:c}))),Bl("Error occurred during ajax call at getDataObjectView Epic",u))})(c))),Ml((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=bc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d,response:p,headers:h={}}=c,{containerName:g,actionID:f,context:m,actionName:y}=d,I=Ct(g,d.context);let E=X(g,m);E=ee(m,E);const A={target:I,context:E,containerItemID:E,headers:h,resourceType:G.RESOURCE_TYPES.DATA,resourceStatus:G.RESOURCE_STATUS.OPEN_FLOW_ACTION,key:JSON.stringify(d.dataViewParameters),actionID:f,actionName:y},_={acName:I,context:m};await Tc(p,d,_);const C=Sc(p,A);return u.push(Vh(Ih,C)),u})),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],u))))},c=>{let l=0,u=[];return c.pipe(vl(mt),Gl(100),xl((c=>{const{isFormValid:d}=c.payload;({actionMgrID:l}=c.payload);const p=c.payload.context;if(!d){const c={type:G.SUBMISSION_FAILURE_TYPE.FORM_VALIDATION_ERROR};return gn.rejectActionByID(l,!0,c),jl([])}return Zn({context:p,stateObj:$p(p),clearContextMessages:!0}),jl(c.payload).pipe(Ml((c=>(c=>{const{savableDatapage:l,context:u,headers:d,actionID:p,keys:h,containerItemID:g}=c,f={data_view_ID:l,action_ID:p},{restApi:m,reqType:y}=sg("submitDataObjectAction",f),{content:I}=Cc(g);return Vi(ic(m,{method:y,headers:d,body:{data:{...I?.content,...h},pageInstructions:I?.pageInstructions||[]}},u)).pipe(wl((l=>({response:l.data,actionInPayload:c}))),Bl("Error occurred during ajax call at getDataObjectView Epic",u))})(c))),Ml((async c=>{if(c&&c.type===Te){const{payload:d}=c,p=bc({...c,...d,actionMgrID:l});return u.push(p),u}const{actionInPayload:d,response:p,headers:h={}}=c,{containerName:g,containerItemID:f,resourceType:m,key:y}=d,I=Ct(g,d.context),E={acName:I,context:d.context};await Tc(p,d,E);const A={key:y,target:I,resourceType:m,containerItemID:f,headers:h,context:d.context};return u=((c,l,u,d)=>{const{resourceType:p,key:h,containerItemID:g}=d,f=Sc(u,l);f.resourceType=p||G.RESOURCE_TYPES.DATA;const m=te(g);c.push(Vh(xh,f));const y=Wp(".dataContext","dataInfo",m),I=Wp(".dataContextParameters","dataInfo",m),E={context:m,skipSemanticUrl:!0,resourceType:p,parentAction:mt,dataContext:y,dataContextParameters:I},A=y&&I&&ng(We,{pageName:W.PY_DETAILS,dataViewName:y},I)||"";if(g?.includes(W.PREVIEW)){const l={type:ce,payload:{pageName:W.VIEW_NAMES.PY_DATA_PREVIEW,container:W.PREVIEW,containerName:W.PREVIEW,...E}};c.push(l)}else if(p!==W.PAGE&&h===A&&g?.includes(W.PRIMARY)){const l={type:ce,payload:{pageName:W.VIEW_NAMES.PY_DETAILS,containerName:"",...E}};c.push(l)}return c})(u,A,p,{key:y,resourceType:m,containerItemID:f}),u})),wl((()=>(1===u.length&&es(u[0].type)?gn.rejectActionByID(l):gn.resolveActionByID(l),kp(u),u=[],u))))})))}],cy=iy;function ly(c,l){return void 0===l&&(l=Km),wi((function(u,d){var p=null,h=null,g=null,f=function(){if(p){p.unsubscribe(),p=null;var c=h;h=null,d.next(c)}};function m(){var u=g+c,h=l.now();if(h<u)return p=this.schedule(void 0,u-h),void d.add(p);f()}u.subscribe(Mi(d,(function(u){h=u,g=l.now(),p||(p=l.schedule(m,c),d.add(p))}),(function(){f(),d.complete()}),void 0,(function(){h=p=null})))}))}const{RESOURCE_TYPES:{CASE:uy,DATA:dy}}=G;let py=[],hy=!1;const gy={},fy=[c=>c.pipe(vl(Se),ly(200),wl((c=>c.payload)),Ml((c=>{hy=!1,zr.subscribe(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_STARTED,(()=>{hy=!0}));const l=Xi.getPreviewMode()&&Qi.addDebugHeaders({debugId:eh.generateUniqueID()});gy.dataContext=c.payload.dataViewName,gy.dataContextParameters=c.payload.dataViewKeys;const{context:u,requestType:d,routeKey:p}=c;let{routeEndpoint:h}=c;h=h&&h.indexOf("viewType={viewType}")>0?h.replace("{viewType}","page"):h&&h.indexOf('viewType=""')>0?h.replace('viewType=""','viewType="page"'):h;const g=P()+h,f=c.options.context;let m;const y={},I=c?.payload?.caseClassName;if(q.isRemoteCase(I)){const{RemoteSystemID:c}=q.getRemoteCase(I);y.RemoteSystemID=c}if("POST"===d){let f;switch(m=c.payload,h.indexOf("viewType=")<0&&(h=`${h}?viewType=page`),Uc(p)){case uy:f={caseTypeID:m.caseTypeID,processID:m.processID,content:{}};break;case dy:f=gy;break;default:f=m}return Vi(ic(g,{method:d,body:f,headers:{...y,...l}},u)).pipe(wl((l=>({response:{...l.data},payload:c,headers:_c(l.headers)}))),Bl(": Error occurred during ajax call at historyEpic : ",c))}return Vi(ic(g,{method:"GET",headers:{...y,...l}},f.substring(0,f.lastIndexOf("/")))).pipe(wl((u=>({response:u.data,payload:c,headers:{..._c(u.headers),...l}}))))})),Ml((async c=>{if(hy)return py;if(zr.subscribe(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_STARTED,(()=>{hy=!0})),c&&c.type===Te)return bc(c);const{headers:l={},response:u,payload:d}=c,p=Jf(u,{[G.STOPMERGEACTIONS]:!u.nextAssignmentInfo}),h=d.options.acName,g=sd(h)&&od(h)?zu(h):c.payload.options.context,f=g;l.RemoteSystemID=d?.payload?.RemoteSystemID;const m={target:h,context:g,containerItemID:f,headers:l,debugInfo:{debugId:l[W.COREHEADER_APP_DEBUG_ID]}};let y="";const I=d?.payload?.page;let E=d?.payload?.pageClass;d.payload&&d.payload.caseName&&d.payload.workID&&(y=ng(ze,{caseName:c.payload.payload.caseName}),y=y&&y.replace("{workID}",c.payload.payload.workID)||"",E=d?.payload?.caseClassName),zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_INIT,{pageName:I,pageClass:E});const A=eh.getIn(p,W.LOCALE_REFERENCES);await zd.loadLocaleResources(A);const _=eh.getIn(p,W.COMPONENTS);_&&await Gr(_),Fr(p,d.options.actionConfig,!0),zr.publish(G.PUB_SUB_EVENTS.UI_EVENTS.SHOW_PAGE_DONE,{target:h,pageName:I,pageClass:E});let C=Sc(p,m);return C=((c,l,u)=>{if(c===Ic.CASE){if(l?.caseInfo?.assignments&&l?.caseInfo?.assignments.length>0){const{key:c,flowName:d}=Pc(l.caseInfo.assignments[0].ID);u.key=c||l.caseInfo.ID,u.flowName=d}else u.flowName="",u.key=l?.caseInfo?.ID||l.semanticURL;u.resourceType=c,u.semanticURL=l.semanticURL,u.caseViewMode=W.REVIEW_MODE}else u.resourceType=c,u.semanticURL=l.semanticURL;return u})(Uc(c.payload.routeKey),{...u.data,semanticURL:y,caseViewMode:W.REVIEW_MODE},C),py.push(Dc(h,C)),Lc(py),py})),wl((()=>(hy||kp(py),py=[],hy=!1,py))),Bl("Error occurred"))],my=[c=>{let l=0,u=[];return c.pipe(vl(le),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>{const{context:l,skipSemanticUrl:u=!1,insightID:d}=c;let p,h="";u||(h=ng(He,{insightID:"{insightID}"}),h=h.replace("{insightID}",d),p=Gd.getEndPointInfo(h));const{restApi:g,reqType:f}=sg(He,{...p?.payload||[],insightID:d});return Vi(ic(g,{method:f},l)).pipe(wl((l=>{let d={};return d="string"==typeof l.data?JSON.parse(l.data):l.data,{response:{...d,key:h,semanticURL:h},actionConfig:c,skipSemanticUrl:u}})),Bl(": Error occurred during ajax call at showPage Epic : ",c.context))})),Ml((async c=>{if(c&&c.type===Te)return u.push(bc(c)),u;const{actionConfig:l,skipSemanticUrl:d}=c,p=Wr.getTargetViewContainerName(ie),h=Ct(p,l.context),g=Rc(h,p,l.context),{response:f}=c,m=Jf(f);m.directUrlUpdation=!d;const y={acName:h,context:g},I=!d,E=d;await Tc(m,l,y,I,E);const A=Sc(m,{target:h,context:g,containerItemID:g});A.resourceType=G.PAGE;const _=Dc(h,A);return u.push(_),Lc(u),u})),wl((()=>{gn.resolveActionByID(l),kp(u),u=[]})),ny())}],yy=[c=>{let l=0,u=[];return c.pipe(vl(ue),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),Ml((c=>{const{context:l,skipSemanticUrl:u=!1,dashboardID:d}=c;let p="";u||(p=ng(qe,{dashboardID:d}),p=p.replace("{dashboardID}",d));const{restApi:h,reqType:g}=sg(qe,{dashboardID:d});return Vi(ic(h,{method:g},l)).pipe(wl((l=>{let d={};return d="string"==typeof l.data?JSON.parse(l.data):l.data,{response:{...d,key:p,semanticURL:p},actionConfig:c,skipSemanticUrl:u}})),Bl(": Error occurred during ajax call at showPage Epic : ",c.context))})),Ml((async c=>{if(c&&c.type===Te)return u.push(bc(c)),u;const{actionConfig:l,skipSemanticUrl:d}=c,p=Wr.getTargetViewContainerName(ie),h=Ct(p,l.context),g=Rc(h,p,l.context),{response:f}=c,m=Jf(f);m.directUrlUpdation=!d;const y={acName:h,context:g},I=!d,E=d;await Tc(m,l,y,I,E);const A=Sc(m,{target:h,context:g,containerItemID:g});A.resourceType=G.PAGE;const _=Dc(h,A);return u.push(_)})),wl((()=>{gn.resolveActionByID(l),kp(u),u=[]})),ny())}],Iy=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return Kf.apply(void 0,c.map((function(c){var u=c.apply(void 0,l);if(!u)throw new TypeError('combineEpics: one of the provided Epics "'+(c.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return u})))};try{Object.defineProperty(u,"name",{value:"combineEpics("+c.map((function(c){return c.name||"<anonymous>"})).join(", ")+")"})}catch(c){}return u}(...nm,...ty,...ay,...fy,...cy,...sm,(c=>{let l=0;return c.pipe(vl(st),wl((c=>(({actionMgrID:l}=c.payload),c.payload))),wl((()=>{const c=Vp()?.getState(),u=zf();return A()(c,u)&&l>0?gn.resolveActionByID(l,{}):gn.rejectActionByID(l),[]})),ny())}),...my,...yy),Ey=()=>c=>l=>{const{type:u="",payload:d={}}=l||{},{category:p,context:h,transientItemID:g}=d;"HTTP"!==p&&[be,Fe,De,Ve,Oe,Le].includes(u)&&(Hc(h||g),Rn.removeContextTreeNode(h||g)),c(l)},Ay={},_y=c=>{const l=eh.getIn(Ay,[W.CONTEXT,c],[]),u=[];l.forEach((l=>{const d=l.substr(0,l.lastIndexOf("_")),p=eh.getIn(Ay,[d,l],[]),h=p&&p.length>0&&p.indexOf(c);if(h>-1&&p.splice(h,1),!p||p&&0===p.length){eh.deleteIn(Ay,[d,l]);const c=eh.getIn(Ay,[d]);c&&0===Object.keys(c).length&&eh.deleteIn(Ay,[d]),u.push({dataPageName:d,dataPageNameWithHash:l})}})),eh.deleteIn(Ay,[W.CONTEXT,c]);const d=eh.getIn(Ay,[W.CONTEXT]);(!d||d&&0===Object.keys(d).length)&&eh.deleteIn(Ay,[W.CONTEXT]),u.length>0&&kp(Bh({dataPagesToBeRemoved:u}))},Cy=(c={},l)=>{Object.keys(c).forEach((u=>{const d=eh.getIn(c,[u],{});Object.keys(d).forEach((c=>{((c,l,u)=>{const d=eh.getIn(Ay,[W.CONTEXT,u]);if(eh.getIn(Ay,[c])){const d=eh.getIn(Ay,[c,l],[]);eh.setIn(Ay,[c,l],[...new Set([...d,u])])}else eh.setIn(Ay,[c,l],[u]);d?eh.setIn(Ay,[W.CONTEXT,u],[...new Set([...d,l])]):eh.setIn(Ay,[W.CONTEXT,u],[l])})(u,c,l)}))}))},Sy=()=>c=>l=>{const{payload:{data:u={},context:d=null,childContainersContexts:p=[]}={},type:h}=l;if(p&&p.length>0&&(h===Ve||h===De)&&p.forEach((c=>{_y(c)})),h===be||h===Ae||h===ot){const c=h===ot?u:u.shared;Cy(c,d)}else h===Ve?(_y(d),Cy(u.shared,d)):h===De&&_y(d);c(l)},Ty=c=>l=>u=>{const{type:d,payload:{target:p,containerItemID:h,context:g,childContainersContexts:f=[],containerInfo:{newAccessedOrder:m,containerType:y}={}}={}}=u,{PUB_SUB_EVENTS:I}=G;if(d===De){const{resourceType:l,key:u,context:d}=eh.getIn(c.getState(),["containers",p,"items",h])||{},g={resourceType:l,key:u,context:d,containerItemID:h};zr.publish(I.CONTAINER_EVENTS.CLOSE_CONTAINER_ITEM,g),p===`${G.APP.APP}/${W.PRIMARY}`&&y===W.CONTAINER_TYPE.MULTIPLE&&zr.publish(I.CONTAINER_EVENTS.CLOSE_MULTI_TYPE_PRIMARY_CONTAINER_ITEM,{key:u,newAccessedOrder:m})}f&&f.length>0&&(d===Ve||d===De)&&f.forEach((c=>{uu.cleanCaches(c)})),d!==Ve&&d!==De||uu.cleanCaches(g),l(u)},Ny=()=>c=>l=>{const{payload:{context:u=null,transientItemID:d=null}={},type:p}=l;!u||p!==be&&p!==Fe&&p!==Ve&&p!==De||(Tr(u),_r(u)),d&&p===we&&(Tr(d),_r(d)),c(l)},Py=function(c){void 0===c&&(c={});var l,u=new(0,vg.constructor)(vg.schedulerActionCtor),d=new wg,p=function(p){l=p;var h=new wg,g=new wg,f=h.asObservable().pipe(Ui(u)),m=new Ug(g.pipe(Ui(u)),l.getState());return d.pipe(wl((function(l){var u=l(f,m,c.dependencies);if(!u)throw new TypeError('Your root Epic "'+(l.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return u})),Ml((function(c){return Vi(c).pipe(Fi(u),Ui(u))}))).subscribe(l.dispatch),function(c){return function(u){var d=c(u);return g.next(l.getState()),h.next(u),d}}};return p.run=function(c){d.next(c)},p}(),by=c=>{const l=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Sg;if(null!==Vp())Zp();else{const u=Cg(Yf(c),l(Fg.reduxBatch,function(...c){return l=>(u,d)=>{const p=l(u,d);let h=()=>{throw new Error(Ig(15))};const g={getState:p.getState,dispatch:(c,...l)=>h(c,...l)},f=c.map((c=>c(g)));return h=Sg(...f)(p.dispatch),{...p,dispatch:h}}}(Al,Ey,Sy,Ny,Py,Ty),Fg.reduxBatch));Py.run(Iy),jp(u)}},Dy=new class{#_;constructor(){this.userSettings={},this.componentCache={},this.contextMapToClearOnCancel={},this.#_=!1}getNormalizedKey(c){return c?.toString().trim().replace(/\s/g,"-").toLowerCase()}setComponentState=(c,l)=>{sessionStorage?sessionStorage.setItem(this.getNormalizedKey(c),JSON.stringify(l)):console.error("Session Storage not found")};getComponentState=c=>{const l=sessionStorage.getItem(this.getNormalizedKey(c));return(l?eh.isValidJson(l):void 0)||l};removeComponentState=c=>{sessionStorage.removeItem(this.getNormalizedKey(c))};fetchUserSettings=async()=>{if(hm("getUserSettings")){const{restApi:c,reqType:l}=sg("getUserSettings");ic(c,{method:l,headers:{}}).then((c=>{if(200!==c.status||!c.data)throw new Error("something went wrong while fetching getUserSettings");this.userSettings=c.data})).catch((c=>console.error(c)))}};init=()=>{Hd.getUserSettings()?this.userSettings=Hd.getUserSettings():this.fetchUserSettings()};getUserSettings=c=>{if(!c)throw new Error("path is required parameter");if("string"!=typeof c)throw new TypeError("path must be string");return eh.getIn(this.userSettings,c,{})};setUserSettings=async(c,l)=>{if(!c)return Promise.reject(new Error("path is required parameter"));if("string"!=typeof c)return Promise.reject(new TypeError("path must be string"));if(null==l||""===l)return Promise.reject(new Error("value is required parameter"));let u;if(!hm("updateUserSettings"))return Promise.resolve("updateUserSettings route is not available");u=sg("updateUserSettings");const{restApi:d,reqType:p}=u;return ic(d,{method:p,body:eh.setIn({},c,l)}).then((c=>{if(200!==c.status||!c.data)throw new Error("something went wrong");this.userSettings=c.data})).catch((c=>{console.error(c)}))};setComponentCache(c,l,u={}){if("string"!=typeof c||!c?.trim())return;const d=u.clearOnCancelForContext;if(d&&(Object.hasOwn(this.contextMapToClearOnCancel,d)?this.contextMapToClearOnCancel[d].add(this.getNormalizedKey(c)):this.contextMapToClearOnCancel[d]=new Set([this.getNormalizedKey(c)])),this.componentCache[this.getNormalizedKey(c)]=l,!this.#_){this.#_=!0;const c=c=>{const{context:l}=c||{};(this.contextMapToClearOnCancel[l]||new Set).forEach((c=>{this.resetComponentCache(c)})),delete this.contextMapToClearOnCancel[l]};zr.subscribe(W.PUB_SUB_EVENTS.EVENT_CANCEL,c,"RESET_COMPONENT_CACHE")}}getComponentCache(c){return"string"==typeof c&&c?.trim()?Object.hasOwn(this.componentCache,this.getNormalizedKey(c))?this.componentCache[this.getNormalizedKey(c)]:void 0:null}resetComponentCache(c){return!("string"!=typeof c||!c?.trim()||!Object.hasOwn(this.componentCache,this.getNormalizedKey(c))||(delete this.componentCache[this.getNormalizedKey(c)],0))}},Ry={publishConstellationLoadedEvent:()=>{zr.publish(W.PUB_SUB_EVENTS.BOOTSTRAP_SHELL_EVENTS.CONSTELLATION_LOADED,{})}},Oy=new class{activateContainerItemOnSwitch(c){const l=`${W.APP.APP}/${W.PRIMARY}`,u={target:l,containerItemID:Gu(l,c)};Ou({}).getPConnect().getContainerManager().activateContainerItem(u)}removeContainerItemOnClose(c){const l=`${W.APP.APP}/${W.PRIMARY}`,u={target:l,containerItemID:Gu(l,c)};Ou({}).getPConnect().getContainerManager().removeContainerItem(u)}showCasePreview(c,l){const u=Ou({meta:{type:"PreviewViewContainer",config:{name:W.PREVIEW}},options:{context:W.APP.APP,target:"root/hybrid_preview"}}),d=u.getPConnect().getContainerManager();d.resetContainers({name:W.PRIMARY,context:W.APP.APP}),Wu(W.APP.APP,W.PREVIEW)||d.initializeContainers({type:"multiple",name:W.PREVIEW}),u.getPConnect().getActionsApi().showCasePreview(c,{caseClassName:l})}closeCasePreview(){Ou({}).getPConnect().getContainerManager().resetContainers({name:W.PREVIEW,context:W.APP.APP})}isFormDirty(c){const l=`${W.APP.APP}/${W.PRIMARY}`,u=Od(l,c);return $c.isStateModified(u)}getEventUtils(){return Ry}getBroadcastUtils(){return am}isTraditionalUICase(c){return hs(c)}},vy=class{static openCase(c,l=G.APP.APP,u={}){return u.renderInline=!0,u.pageName?Hd.setDefaultCasePage(u.pageName):(Hd.setDefaultCasePage(W.PY_DETAILS),u.pageName=W.PY_DETAILS),u?.disableAssignmentHeader?Hd.disableAssignmentHeader(u.disableAssignmentHeader):Hd.disableAssignmentHeader(!1),_u.openCase(c,l,W.PRIMARY,u)}static createCase(c,l=G.APP.APP,u={}){return u.renderInline=!0,u.pageName?Hd.setDefaultCasePage(u.pageName):(Hd.setDefaultCasePage(W.PY_DETAILS),u.pageName=W.PY_DETAILS),u?.disableAssignmentHeader?Hd.disableAssignmentHeader(u.disableAssignmentHeader):Hd.disableAssignmentHeader(!1),_u.createCase(c,l,W.PRIMARY,u)}static getNextWork(c=G.APP.APP,l={}){return l.renderInline=!0,l.pageName?Hd.setDefaultCasePage(l.pageName):(Hd.setDefaultCasePage(W.PY_DETAILS),l.pageName=W.PY_DETAILS),l?.disableAssignmentHeader?Hd.disableAssignmentHeader(l.disableAssignmentHeader):Hd.disableAssignmentHeader(!1),_u.getNextWork(c,W.PRIMARY,l)}static openAssignment(c,l=G.APP.APP,u={}){return u.renderInline=!0,u.pageName?Hd.setDefaultCasePage(u.pageName):(Hd.setDefaultCasePage(W.PY_DETAILS),u.pageName=W.PY_DETAILS),u?.disableAssignmentHeader?Hd.disableAssignmentHeader(u.disableAssignmentHeader):Hd.disableAssignmentHeader(!1),_u.openAssignment(c,l,W.PRIMARY,u)}static openPage(c,l,u=G.APP.APP,d={}){const p=ie;d?.defaultCasePage?Hd.setDefaultCasePage(d.defaultCasePage):Hd.setDefaultCasePage(W.PY_DETAILS),d?.disableAssignmentHeader?Hd.disableAssignmentHeader(d.disableAssignmentHeader):Hd.disableAssignmentHeader(!1);const h={viewName:c,className:l,acTargetName:W.PRIMARY,actionMgrID:gn.getNextActionMgrId(),context:u},{promise:g}=gn.actionManagerPromise(p,h.actionMgrID);return kp({type:p,payload:{...h}}),g}static getCurrentContextAPI(c,l=G.APP.APP){return Ou({meta:{config:{}},options:{context:l,pageReference:c,containerName:W.PRIMARY}}).getPConnect()}},xy=new class{createC11nEnv=c=>Ou(c);getContextUtils=()=>c;getRoutingManager=()=>l;getComponentsRegistry=()=>tn;getStateManager=()=>f;getActionCreators=()=>m;getStreamObservable=()=>d;getActionProcessor=()=>oh;getActionHandler=()=>ah;renderApp=(c,l)=>{const u={context:W.APP.APP},d={...eh.getIn(c,W.ROOT),options:u};by(c),Fr(c,u,!0);const p=this.createC11nEnv({meta:d,isRoot:!0});zr.publish(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,{props:p,domContainerID:l})};updateStoreWithUiRoot=async(c,l,u)=>{const d=Jf(c),{data:p,uiResources:h={}}=c,g=eh.getIn(h,W.CONTEXT_DATA);await Tc(d,{},{},!1,!0);const f={...p,[W.CONTEXT_DATA]:g},{root:m}=h;fd(m,l,f,u)};fetchEndPointResource=(c,l,u)=>{ic(c,{method:"GET"},W.APP.ROOT).then((async c=>{const{data:d,status:p}=c;200===p&&this.updateStoreWithUiRoot(d,l,u)}))};loadComponent=async(c,l,u)=>Gr(u).then((()=>{const u=this.createC11nEnv({meta:c,isRoot:!0});Vp()||by({}),zr.publish(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,{props:u,domContainerID:l})}));setStaticServerUrl=(c,l,u)=>{Vr.initServer(c,l,u)};loadView=async(c,l,u=[])=>{T();const d=Jf(c),p=eh.getIn(d,W.VIEWS),h=eh.getIn(d,W.NAVIGATIONS),g=eh.getIn(d,W.COMPONENTS)||[];g.push(...u);const f=eh.getIn(d,W.STATIC_SERVER_URL),m=eh.getIn(d,W.APPLICATION_DATA);p&&mp(p),h&&yp(h),(c=>{c&&(Qh=c.pyLabel)})(m),f&&Vr.initServer(f),await Gr(g,f).then((()=>this.renderApp(d,l)))};initAppShell=(c,l,u)=>{mg(c),Wr.buildActionTargetMap(l),T(u)};initRoutingTable=(c,l)=>{mg(c,!0),T(l)};setAppAlias=c=>{Vr.setAppAlias(c)};getHomeRestApi=c=>{const{restApi:l}=rg("home",{portalName:c});return P()+l};getViewRestApi=(c,l)=>{const{restApi:u}=((c,l)=>{let u={restApi:""};try{if(fg()&&!l){const l=kd(),d=Gd.processUrl(l,!0),p=Gd._getMatchedRouteInRoutingTable(d)||"",h=Gd.getRoutingInfo(),g=Gd.processUrl(l,!1).split("/"),f=g[g.length-1];let{caseID:m}=h&&h.routes[p].payload;m=m.replace("{workID}",f),u=Gd.getRestEndPoint("loadView",{caseID:m,viewID:c})||{}}else u=Gd.getRestEndPoint("showView",{page:c,pageClass:l})||{}}catch(c){}return u})(c,l);return P()+u};loadRootComponent=async(c,l,u=[],d,p,h)=>{const{config:{name:g}={}}=l;Vp()||by({}),h&&(Td(`${W.APP.ROOT}/${g}`),Sd().deleteContainerItem(`${W.APP.ROOT}/${g}`)),Sd().getContainerItems()?.length>1&&!g?.startsWith("hybrid_")&&"authoring-preview"!==g&&Zp(),kp(uh({data:{},context:W.APP.ROOT}));const f=this.createC11nEnv({meta:l,options:{context:W.APP.ROOT,pageReference:"",target:`${W.APP.ROOT}/${g}`}}),m=f.getPConnect(),y=m.getContextName(),I=m.getContainerName(),E=m.getContainerManager();zu(`${y}/${I}`)||"noPortal"===l.config?.renderingMode||E.initializeContainers({type:"single"});const A=["RootContainer","Region","ModalViewContainer","PreviewViewContainer","reference",...u];return Gr(A).then((()=>{zr.publish(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,{props:f,domContainerID:c,componentName:"RootContainer",portalTarget:d,styleSheetTarget:p})}))};loadViewByName=(c,l,u,d)=>{let p=this.getViewRestApi(c,u);p===P()&&(p=this.getHomeRestApi(l)),this.fetchEndPointResource(p,d)};loadPortalView=(c,l)=>{const u=this.getHomeRestApi(c);this.fetchEndPointResource(u,l,!0)};configureForBrowserBookmark=c=>{(c=>{const{acName:l,context:u,defaultViewLabel:d}=c,p=(c=>{const l=Gd.getRoutingInfo(),u=c.split(" ").join(""),d=c.split(" ").join("-").toLowerCase(),p=(c=>{const l=c.replace(/(?=[A-Z][a-z])/g,"-").toLowerCase();return l.startsWith("-")?l.substring(1):l})(c);return l?.routes[u]?u:l?.routes[d]?d:l?.routes[p]?p:c})(d);(c=>{Jh=c})(p),Gd.setDefaultRoute(p);const h=X(l,u),g=Ct(l,u),f="true"===Hd.getIsExtraCallRequiredForDefaultHome(),y={historyAction:Yh,pxURLPath:""};let I;const E={acName:g,context:h,actionConfig:{context:h}};if(f||!f&&fg()){const l=(c=>{if(c.indexOf("?")>0){const[l,u]=c.split("?"),d=new URLSearchParams(u),p=new Map;for(const[c,g]of d)"portal"!==c&&"noPortal"!==c&&"debug"!==c&&p.set(c,g);const h=new URLSearchParams(p).toString();return h?`${l}?${h}`:l}return c})(jd(window.location.pathname+window.location.search));I=Gd.getEndPointInfo(l),y.pxURLPath=I.urlPath,void 0!==I.payload?.pageClass&&(I.payload.pageClass=Vp()?.getState()?.data?.app?.pyPortal?.classID);const u="showHistory",d={routeEndpoint:I.routeEndpoint,requestType:I.requestType,payload:I.payload,options:E,routeKey:I.routeKey};q.isTraditionalRemoteCase(I?.payload?.caseClassName)?hg(d,c,E.context):kp(m[u](pg(d)))}else I=Gd.getEndPointInfo(Jh),y.pxURLPath="";ig(null,{urlPathObjParam:y,infoParam:I,optionsParam:E},!0)})(c)};checkIfSemanticURL=()=>fg();onPCoreReady=c=>{zr.subscribe(G.PUB_SUB_EVENTS.EVENT_RENDER_APP,c,"renderAppCallback")};onPCoreCleanup=c=>{zr.subscribe(G.PUB_SUB_EVENTS.EVENT_UNMOUNT_APP,c,"unmountAppCallback")};setFieldsDefaultConfigs=c=>{Mr.updateFieldDefaults(c)};setGoogleMapsAPIKey=c=>{b(c)};setFetchDefaultHeaders=c=>{pc(c)};setFetchAuthInfo=c=>{hc(c)};getCaseApi=()=>_u;getMashupApi=()=>vy;enableAppRouting=c=>{eg(c)};initStore=()=>by({});getBootstrapConfig=async(c,l)=>{const u=`${l.token_type} ${l.access_token}`;return fetch(`${c}/api/application/v2/data_views/D_pxBootstrapConfig`,{method:"GET",headers:new Headers({Authorization:u})}).then((c=>c.json()))};initCoreContainers=(c={})=>{const{containerType:l="single"}=c,u=Ou({meta:{type:"RootContainer",config:{renderingMode:"noPortal"},children:[{type:"ViewContainer",config:{routingInfo:"@ROUTING_INFO",name:"primary"}}]},options:{context:"root",pageReference:"",target:"root"}});return u.getPConnect().getContainerManager().initializeContainers({type:l,name:"primary",context:"app"}),{props:{getPConnect:u.getPConnect}}}},wy=new class{constructor(){this.runtimeParams={},this.runtimeParamsMap={}}setRuntimeParams(c){this.runtimeParams=c}getRuntimeParams(){return this.runtimeParams}setRuntimeParam(c,l){this.runtimeParamsMap[c]=l}getRuntimeParam(c){return this.runtimeParamsMap[c]}},My=class{constructor(c){this.appAlias=c.appAlias,this.appAliasWithoutServlet=c.appAliasWithoutServlet,this.googleMapKey=c.googleMapKey,this.staticContentServer=c.staticContentServer,this.appStaticContentServer=c.appStaticContentServer||null,this.contextPath=c.contextPath,this.messagingService=c.messagingService||null,this.reAuthUrl=c.reAuthUrl||null}},Ly=class{constructor(c){this.routingInfo=c.routingInfo,this.actionModel=c.actionModel,this.additionalHeaders=c.additionalHeaders,this.tokens=c.tokens,this.semanticUrl=c.semanticUrl,this.queryParams=c.queryParams,this.noPortal=c.noPortal,this.timezone=c.timezone,this.noHistory=c.noHistory,this.viewName=c.viewName,this.theme=c.theme,this.fieldDefaults=c.fieldDefaults,this.restServerConfig=c.restServerConfig,this.dynamicLoadComponents=void 0===c.dynamicLoadComponents||c.dynamicLoadComponents,this.dynamicSemanticUrl=void 0===c.dynamicSemanticUrl||c.dynamicSemanticUrl,this.enableRouting=void 0===c.enableRouting||c.enableRouting,this.locale=c.locale,this.environmentInfo=c.environmentInfo,this.renderingMode=c.renderingMode||"FULL_PORTAL",this.remoteCaseMapping=c.remoteCaseMapping||{},this.envType=c.envType,this.serviceConfig=new My(c.serviceConfig),this.behaviorOverrides=c.behaviorOverrides,this.initBroadcast=!!c.initBroadcast,this.cookieComplianceMethod=c.cookieComplianceMethod??"none",this.isExtraCallRequiredForDefaultHome=c.isExtraCallRequiredForDefaultHome??"false"}},Uy="@P .viewConfig";let Fy=0;const jy=new class{#C(c,l,u){mg(c),Wr.buildActionTargetMap(l),T(u)}init(c){const l=new Ly(c),u={...l.environmentInfo,renderingMode:l.renderingMode};eg(l.enableRouting),by({}),Hd.setTheme(l.theme),Hd.setCookieComplianceMethod(l.cookieComplianceMethod),Hd.setIsExtraCallRequiredForDefaultHome(l.isExtraCallRequiredForDefaultHome),Mr.updateFieldDefaults(l.fieldDefaults),Qi.setDefaultHeaders(l.additionalHeaders),this.#C(l.routingInfo,l.actionModel,{server:l.restServerConfig,reAuthUrl:l.serviceConfig.reAuthUrl}),Vr.setAppAlias(l.serviceConfig.appAliasWithoutServlet||l.serviceConfig.appAlias),b(l.serviceConfig.googleMapKey),Vr.initServer(l.serviceConfig.staticContentServer,l.serviceConfig.appStaticContentServer,l.tokens.C11NB2S),zd.setTimezone(l.timezone),Hd.setEnvironmentInfo(u),Hd.setLocale(l.locale),q.setRemoteCaseMapping(l.remoteCaseMapping),Zl.setConnectionConfig({messagingService:l.serviceConfig.messagingService}),Dy.init(),l.initBroadcast&&Oy.getBroadcastUtils().init()}getBootstrapConfig=async(c,l)=>{const u=`${l.token_type} ${l.access_token}`;return fetch(`${c}/api/application/v2/data_views/D_pxBootstrapConfig`,{method:"GET",headers:new Headers({Authorization:u})}).then((c=>c.json()))};initCoreContainers=(c={})=>{const{containerType:l="single"}=c,u=Ou({meta:{type:"RootContainer",config:{renderingMode:"noPortal"},children:[{type:"ViewContainer",config:{routingInfo:"@ROUTING_INFO",name:"primary"}}]},options:{context:"root",pageReference:"",target:"root"}});return u.getPConnect().getContainerManager().initializeContainers({type:l,name:"primary",context:"app"}),{props:{getPConnect:u.getPConnect}}};importReactRoot=async()=>{const c=[];return xy.getComponentsRegistry().getComponent("ReactRoot").modules.forEach((l=>{c.push(l())})),Promise.allSettled(c)};importDesignSystemComponentMap=async(c,l,u)=>{try{await function(c,l="true"){return new Promise(((u,d)=>{const p=document.createElement("script");p.setAttribute("type","text/javascript"),p.setAttribute("src",c),p.setAttribute("async",l),p.onload=u(),p.onerror=()=>d(new Error("Failed to load resource from Design System")),document.body.appendChild(p)}))}(`${c}component/project/${l}/designsystems/${u}/componentsmap.js?v=${Date.now()}`)}catch(c){console.log(c)}};buildSemanticUrl=(c,l,u,d,p)=>{const h=new URLSearchParams(l);let g=!1;"true"===u&&(g=!0);let f=null,m=null;if(c){c.startsWith("/")&&(c=c.substring(1));const l=c.split("/");f=l[0],l.length>1&&l[1]&&(m=l[1])}else g=!1;let y=d;f&&(y=`${y}/${f}`),m&&(y=`${y}/${m}`),g&&(h.has("noPortal")||h.append("noPortal","true"),m&&p&&h.append("view",p));const I=h.toString();return y+=I?`?${I}`:"",y};initCoreConfig=c=>{const{routingInfo:l,serviceConfig:u,semanticUrl:d,queryParams:p,noPortal:h,noHistory:g,viewName:f,theme:m,restServerConfig:y,dynamicLoadComponents:I=!0,dynamicSemanticUrl:E=!0,renderingMode:A="FULL_PORTAL",envType:_,extras:C}=c,{appAlias:S,contextPath:T}=u;let N=window.location.origin;const P={};if(void 0!==y&&(N=y),T&&(N=`${N}${T}`),S&&"LAUNCHPAD"!==_&&(N=`${N}/${S}`),c.restServerConfig=N,!0===E){const c=this.buildSemanticUrl(d,p,h,N,f);!g&&c&&window.history.pushState({},"home",c)}else if("HYBRID"!==A){let c=window.location.href;c.indexOf("?")>0&&(c=c.substring(0,c.indexOf("?")),window.history.pushState({},"home",c)),P.dynamicSemanticUrl=!1}else console.log(`renderingMode :${A}`);!0!==I&&(P.dynamicLoadComponents=!1);let b=null;if(S){const c=S.indexOf("/app/");b=c>=0?S.substring(c+1):S}if(Object.keys(P).length>0&&window.PCore.setBehaviorOverrides(P),c.appAlias=b,m){let l="object"==typeof m?m:null;if(null===l)try{l=JSON.parse(m)}catch{l={}}c.theme=l}const D={...l,domain:`${window.location.protocol}//${window.location.host}`,searchParams:window.location.search};c.routingInfo=D,c.initBroadcast="true"===Hd.environmentInfoObject?.pxMashupDetails?.pyIsTraditionalCoexistence,!c.noPortal||"true"!==c.noPortal&&!0!==c.noPortal||(c.renderingMode="EMBED"),C?.cspNonce&&(window.__webpack_nonce__=C.cspNonce),this.init(c)};launchViewByName=(c,l,u,d,p,h,g,f)=>{Fy+=1;const m=f||`mashup${Fy}`,y={type:"RootContainer",config:{viewConfig:Uy,renderingMode:"view",name:m}};xy.loadRootComponent(c,y,p,h,g).then((()=>xy.loadViewByName(l,u,d,m)))};launchView=(c,l,u=[],d,p,h,g)=>{Fy+=1;const f="hybrid"===g?`hybrid_${Fy}`:g;Fy+=1;const m=f||`mashup${Fy}`,y={type:"RootContainer",config:{viewConfig:Uy,renderingMode:"portal",name:m}};wy.setRuntimeParams(d),xy.loadRootComponent(c,y,u,p,h).then((()=>xy.updateStoreWithUiRoot(l,m)))};launchPortal=(c,l,u,d=[])=>{Fy+=1;const p=u||`portal${Fy}`,h={type:"RootContainer",config:{viewConfig:Uy,renderingMode:"portal",skeleton:"LoadingComponent",name:p}};d.push(h.config.skeleton),Hd.isPortalLoaded=!0,xy.loadRootComponent(c,h,d).then((()=>xy.loadPortalView(l,p)))};launchMashup=(c,l=!0)=>{if(l){const l=document.getElementsByTagName(c)[0]?.parentNode;if(l){const c=document.createElement("style");c.setAttribute("id","portal-less-styles"),c.innerHTML="app-root.mashup > .case-view, app-root.mashup > .page-view { min-height: 0px !important; }",l.appendChild(c)}}xy.loadRootComponent(c,{type:"RootContainer",config:{renderingMode:"noPortal"},children:[{type:"ViewContainer",config:{routingInfoAnnotation:"@ROUTING_INFO",name:"primary"}}]},[PCore.getConstants().LOAD_VIEW_STRING,"ViewContainer"]),window.parent!==window&&s(849)(`${window.PCore.getAssetLoader().getStaticServerUrl()}constellation-mashup-bridge.js`).then((c=>{c.mashup.init({resizing:"stretch"})}))};start=async(c,l)=>{const{appStaticContentServer:u}=c.serviceConfig,{ccV2LibId:d,environmentId:p,isAlternateDesignSystemEnabled:h,alternateDesignSystemName:g}=c;this.initCoreConfig(c);const f=async()=>(await this.importReactRoot(),d&&await Vr.importCustomComponentMap(d),"true"===h&&"other"!==g&&await this.importDesignSystemComponentMap(u,p,g),l&&l(),!0);return new Promise(((c,l)=>{(async()=>{const c=Hd.getLocale(),l=Hd.getFeatureMap().localizationVersion||1;let u;if("en-US"!==c)try{let d;2===l?d=[c]:(d=[zd.GENERIC_BUNDLE_KEY,zd.MESSAGE_BUNDLE_KEY,zd.FIELD_LABELS_BUNDLE_KEY],u=await zd.isCurrentLocalePackAvailable());const p=d.map((async d=>{2===l?await(async c=>{const l=Hd.getFeatureMap().availableLanguagePacks||[];if(!c||!l.includes(c))return void console.warn(`current locale ${c} is not supported by application.`);const u={locale:c},d=await dm("getLocalizationPack",{queryPayload:u});if((201===d.status||200===d.status)&&d.data){const c=d.data;Object.keys(c).forEach((l=>{zd.setLocaleForRule(c[l],l)}))}})(d):u&&await(async(c,l)=>{const u=await Vr.getSvcLocale(l,`${c}.json`);if(u.ok&&c){const l=await u.json();zd.setLocaleForRule(l,c)}})(d,c)}));await Promise.allSettled(p)}catch(c){console.warn(c)}})().then((async()=>{const l=xy.getComponentsRegistry();"ReactRoot"in l.getLazyMap()?c(!0):l.getComponent("ReactRoot")?c(await f()):zr.subscribe("component-map-loaded",(async()=>{c(await f())}))})).catch((c=>{l(c)}))}))};registerForDebugInfo=c=>{PCore.getEnvironmentInfo().setPreviewMode(),c&&PCore.getPubSubUtils().subscribe("fetchSuccess",(({debugInfo:l})=>{const u=l?.["X-Pega-App-Debug-ID"];c.postMessage({appDebugID:u})}),"fetchSuccess")};toggleTracerHeaders=c=>{c.addEventListener("message",(async c=>{const l=c?.data?.enableTracer;l?PCore.getDebugger().enableTracer():PCore.getDebugger().disableTracer()}))};loadEnvironmentInfo=async c=>{if(c.theme&&(!window.pms||"Android"!==window.pms.device.systemName))try{const l=JSON.parse(c.theme.definition);PCore.getEnvironmentInfo().setBrandingInfo(l.Branding),PCore.getEnvironmentInfo().setTheme(l.Theme)}catch{PCore.getEnvironmentInfo().setBrandingInfo({}),PCore.getEnvironmentInfo().setTheme({})}c.keyMapping&&PCore.getEnvironmentInfo().setKeyMapping(c.keyMapping),PCore.getEnvironmentInfo().setCookieComplianceMethod(c.cookieComplianceMethod??"none")}},Vy={createViewRule:(c,l)=>{const{restApi:u,reqType:d}=sg("createViewRuleByID");return ic(u,{method:d,body:c},l).then((c=>c.data))},getViewRule:(c,l)=>{const{restApi:u,reqType:d}=sg("getViewRuleByID",{ID:c});return ic(u,{method:d},l).then((c=>c.data))},updateViewRule:(c,l,u)=>{const{restApi:d,reqType:p}=sg("updateViewRuleByID",{ID:c});return ic(d,{method:p,body:l},u).then((c=>c.data))},deleteViewRule:(c,l)=>{const{restApi:u,reqType:d}=sg("deleteViewRuleByID",{ID:c});return ic(u,{method:d},l).then((c=>c.data))}},ky={"Content-Type":"application/json"},$y={addCaseFollower:(c,l,u)=>{const d={caseID:c},p=JSON.stringify({users:l.map((c=>({ID:c})))});return dm("addCaseFollower",{body:p,queryPayload:d,headers:ky},u)},deleteCaseFollower:(c,l,u)=>dm("deleteCaseFollower",{queryPayload:{caseID:c,followerID:l}},u),getCaseFollowers:(c,l)=>dm("getCaseFollowers",{queryPayload:{caseID:c}},l).then((c=>c.data.followers))},By={addRelatedCases:(c,l,u)=>{const d={caseID:c},p=JSON.stringify({cases:l});return dm("addRelatedCases",{body:p,queryPayload:d},u)},removeRelatedCase:(c,l,u)=>dm("removeRelatedCase",{queryPayload:{caseID:c,relatedCaseID:l}},u),getRelatedCases:(c,l)=>dm("getRelatedCases",{queryPayload:{caseID:c}},l).then((c=>c.data.relatedCases))},Gy="operatorDetails",Wy={getOperatorDetails:(c,l=!1)=>{const{reqType:u}=sg(Gy,{});if("GET"===u){const l={encodedOperatorId:encodeURIComponent(`{"opname":"${c}"}`)};return dm(Gy,{queryPayload:l})}return l?dm("operatorDetailsByBusinessID",{body:{dataViewParameters:{BusinessID:c}}}):dm(Gy,{body:{dataViewParameters:{ID:c}}})}},Hy=async c=>{const l=Jf(c),u=eh.getIn(l,W.COMPONENTS);Fr(l,{},!0);const d=eh.getIn(l,W.LOCALE_REFERENCES);await zd.loadLocaleResources(d||[]),await Gr(u)},qy=(c,l,u)=>sh.resolveView(c,l,u),zy={"Content-Type":"application/json"},Yy=new class{constructor(){this.mentionsTagsCancelTokenSource=[],this.mentions=[]}getFeeds=(c,l,u,d,p,h,g)=>{const{getLocaleValue:f}=zd;g||(this.mentions=[]);let m="";d&&Array.isArray(d)&&d?.length>0&&(d.forEach((c=>{c.on&&(m=`${m}${c.id},`)})),""===m&&(m="ClearFilters"));let y="";g&&(y=h.getValue("pulse.pageLastEntry"));const I={filterForContext:c,feedID:l,feedClass:u,filterBy:m,pageSize:10,olderThan:y};for(let A=0;A<p.length;A+=1)p[A].cancel();const E=gm();return p.push(E),dm("getFeedMessages",{queryPayload:I,cancelTokenSource:E},h.getContextName()).then((async c=>{if(200===c.status&&c.data){p.pop();const l=[],u={};let m=!1;if(c?.data){if(c?.data?.data?.FeedList){const d=c.data.data.FeedList?.pxResults;Array.isArray(d)&&d?.length>0&&d.forEach(((c,d)=>{c.ID=""!==c.pzInsKey?c.pzInsKey:`message${d}`,l.push(c.ID),u[c.ID]=c,c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions),c?.pxResults&&Array.isArray(c?.pxResults)&&c.pxResults?.length>0&&c.pxResults.forEach((c=>{c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions)})),m||"pzPostDetails"===c.pyMessageViewReference||"pzPrivatePostDetails"===c.pyMessageViewReference||(m=!0)}))}if(m&&await Hy({uiResources:c.data.uiResources}),!d&&(d=[{id:"All",label:f("All","Pulse"),on:!0,disabled:!1}],c?.data?.data?.FeedFilters)){const l=c.data.data.FeedFilters?.pxResults;let u=!0;l&&Array.isArray(l)&&l?.length>0&&(l.forEach((c=>{const l={id:c.pyFeedSourceReference,label:f(c.pyLabel,"Pulse"),disabled:!1,on:"true"===c.pySelected};l.on||(u=!1),d.push(l)})),d.find((c=>"All"===c.id)).on=u)}}if(g&&h.getValue("pulse.messageIDs")){let d=h.getValue("pulse.messageIDs"),p=h.getValue("pulse.messages");d=[...d,...l],p={...p,...u},Object.values(p).forEach((c=>{c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions),c?.pxResults&&Array.isArray(c?.pxResults)&&c.pxResults?.length>0&&c.pxResults.forEach((c=>{c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0&&this.mentions.push(c.mentions)}))})),h.updateState({pulse:{messages:p,messageIDs:d,nextPageFirstEntry:c?.data?.nextPageFirstEntry||"",pageLastEntry:c?.data?.pageLastEntry||"",hideAttachment:c?.data?.hideAttachment||!1}})}else h.updateState({pulse:{messages:u,messageIDs:l,nextPageFirstEntry:c?.data?.nextPageFirstEntry||"",pageLastEntry:c?.data?.pageLastEntry||"",hideAttachment:c?.data?.hideAttachment||!1}});const y=[...new Map(this.mentions.flat()?.map((c=>[c.mentionsID,c]))).values()]?.filter((c=>Object.prototype.hasOwnProperty.call(c,"mentionsType")))?.filter((c=>!c?.mentionsType?.toLowerCase().includes("user")))||[];return{feedFilters:d,caseMentions:y}}return h.reportError(`getFeeds call failed ${c.status}`,c.data),""})).catch((c=>{fm(c)||h.reportError(": Error occurred during ajax call at getFeeds API : ",c.response)}))};postMessage=(c,l,u=[],d=!1,p)=>{const h=JSON.stringify({context:c,parentMessageId:d?c:"",message:l,attachments:u});return dm("postFeedMessages",{body:h,headers:zy},p.getContextName()).then((l=>{if((201===l.status||200===l.status)&&l.data){const h=l?.data;if(d){h.parentMessageID=c;const{pxResults:l,caseMentions:g}=this.buildMessageObject(h,d,p,u.length>0);return p.updateState({pulse:{messages:{[c]:{pxResults:l}}}}),g}const{messages:g,messageIDs:f,caseMentions:m}=this.buildMessageObject(h,d,p,u.length>0);return p.updateState({pulse:{messages:g,messageIDs:f}}),m}return p.reportError(`postMessage call failed with status ${l.status}`,l),""})).catch((c=>{p.reportError(": Error occurred during ajax call at postMessage API : ",c.response)}))};editMessage=({messageID:c,parentMessageID:l,message:u,c11nEnv:d,isReply:p=!1})=>{const h=JSON.stringify({message:u});return dm("editFeedMessage",{queryPayload:{messageID:c},body:h,headers:zy},d.getContextName()).then((c=>{if(200===c?.status&&c?.data){const u=c?.data;if(p){u.parentMessageID=l;const{pxResults:c,caseMentions:h}=this.buildMessageObject(u,p,d,!1);return d.updateState({pulse:{messages:{[l]:{pxResults:c}}}}),h}const{messages:h,caseMentions:g}=this.buildMessageObject(u,p,d,!1);return d.updateState({pulse:{messages:h}}),g}return d.reportError(`editMessage call failed with status ${c.status}`,c),""})).catch((c=>{d.reportError(": Error occurred during ajax call at editMessage API : ",c.response)}))};buildMessageObject=(c,l,u,d=!1)=>{const p={ID:c?.ID||"",tags:c?.tags||[],pyHasAttachment:d,pzInsKey:c?.ID||"",pyMessage:c?.message||"",mentions:c?.mentions||[],postedByUser:c?.postedByUser,pxCreateDateTime:c?.postedTime||"",pxUpdateDateTime:c?.updatedTime||"",parentMessageID:c?.parentMessageID||"",pyIsEdited:"string"==typeof c?.isEdited?"true"===c?.isEdited:c?.isEdited||!1,pyFeed:{pyPostedOn:c?.postedTime||"",pyFeedTitle:c?.postedByUser?.name||"",pyIconType:"user",pyCommentContext:"pzInsKey",pyIconReference:"pi pi-case"},pyContext:"",pxIcon:"globe",pyMessageViewReference:"pzPostDetails"},h=u.getValue("pulse.messages");if(l){let{pxResults:c=[]}=Object.values(h)?.find((c=>c?.ID===p?.parentMessageID))||{};const l=c?.findIndex((c=>c?.pzInsKey===p?.ID));if(-1!==l){const u=[...c];u[l]={...u[l],...p},c=u}else c=[...c,p];return{pxResults:c,messages:{},messageIDs:[],caseMentions:this.getCaseMentions(c)}}const g=u.getValue("pulse.messageIDs");if(g){const c=g.includes(p.ID)?{...h[p.ID],...p}:p,l={...h,[p.ID]:c};return{messages:l,messageIDs:g.includes(p.ID)?g:[p.ID,...g],caseMentions:this.getCaseMentions(Object.values(l))}}};getCaseMentions=c=>{const l=c?.filter((c=>c?.mentions&&Array.isArray(c?.mentions)&&c.mentions?.length>0))?.map((c=>c.mentions))?.concat(this.mentions);return[...new Map(l.flat()?.map((c=>[c.mentionsID,c]))).values()]?.filter((c=>Object.prototype.hasOwnProperty.call(c,"mentionsType")))?.filter((c=>!c?.mentionsType?.toLowerCase().includes("user")))||[]};likeMessage=({pulseContext:c,likedBy:l,messageID:u,isReply:d,c11nEnv:p})=>{const h=l?"unlikeFeedMessages":"likeFeedMessages",g=JSON.stringify({ContextClass:c});dm(h,{body:g,queryPayload:{pulseContext:c},headers:zy},p.getContextName()).then((h=>{if(200===h.status)if(d){const d=p.getValue(`pulse.messages.${u}`),h=d?.pxResults&&Array.isArray(d?.pxResults)&&d.pxResults?.length>0&&d.pxResults?.map((u=>{if((u={...u}).pzInsKey===c){let c=0,d=!1;const p=u.pyLikes?u?.pyLikes?.pxLikeCount:0;l?(c=p-1,d=!1):(c=p+1,d=!0),u.pyLikes={pxLikeCount:c,pxIsLiked:d}}return u}));p.updateState({pulse:{messages:{[u]:{pxResults:h}}}})}else{const d={...p.getValue(`pulse.messages.${u}`)},h=d.pyLikes?d.pyLikes.pxLikeCount:0;let g=0,f=!1;l?(g=h-1,f=!1):(g=h+1,f=!0),d.pyLikes={pxLikeCount:g,pxIsLiked:f},p.updateState({pulse:{messages:{[c]:d}}})}else p.reportError(`likeMessage call failed with status ${h.status}`,h)})).catch((c=>{p.reportError(": Error occurred during ajax call at likeMessage API : ",c.response.data)}))};deleteMessage=(c,l,u,d)=>{let p=c;l&&(p=u),dm("deleteFeedMessage",{queryPayload:{messageID:p}},d.getContextName()).then((p=>{if(200===p.status)if(l){const l=d.getValue(`pulse.messages.${c}`),p=l?.pxResults&&Array.isArray(l?.pxResults)&&l.pxResults?.length>0&&l.pxResults?.filter((c=>c.pzInsKey!==u));d.updateState({pulse:{messages:{[c]:{pxResults:p}}}})}else{const l=d.getValue("pulse.messageIDs"),u=l&&Array.isArray(l)&&l?.length>0&&l?.filter((l=>l!==c)),p={...d.getValue("pulse.messages")};delete p[c],d.updateState({pulse:{messageIDs:u,messages:p}})}else d.reportError(`deleteMessage call failed with status ${p.status}`,p)})).catch((c=>{d.reportError(": Error occurred during ajax call at deleteMessage API : ",c.response)}))};getLikedUsers=(c,l)=>dm("getFeedMessageLikes",{queryPayload:{messageID:c}},l.getContextName()).then((c=>c?.data?.users)).catch((c=>{l.reportError(": Error occurred during ajax call at getLikedUsers API : ",c.response)}));getMentionSuggestions=(c,l)=>{const{pulseContext:u,searchFor:d,mentionsType:p,listSize:h=5}=c,g={pulseContext:u,searchFor:d,mentionsType:p,listSize:h};for(let m=0;m<this.mentionsTagsCancelTokenSource.length;m+=1)this.mentionsTagsCancelTokenSource[m].cancel();const f=gm();return this.mentionsTagsCancelTokenSource.push(f),dm("getMentionSuggestions",{queryPayload:g,cancelTokenSource:f},l.getContextName()).then((c=>(this.mentionsTagsCancelTokenSource=[],200===c.status&&c.data?c?.data:(l.reportError(`Get mention suggestions call failed ${c.status}`,c.data),[])))).catch((c=>{fm(c)||l.reportError(": Error occurred during ajax call at getMentionSuggestions API : ",c.response.data)}))};getMentionTypes=c=>dm("getMentionTypes",{},c.getContextName()).then((c=>c?.data)).catch((l=>{c.reportError(": Error occurred during ajax call at getMentionTypes API : ",l.response.data)}));getTagSuggestions=(c,l)=>{const{searchFor:u,listSize:d=5}=c,p={searchFor:u,listSize:d};for(let g=0;g<this.mentionsTagsCancelTokenSource.length;g+=1)this.mentionsTagsCancelTokenSource[g].cancel();const h=gm();return this.mentionsTagsCancelTokenSource.push(h),dm("getTagSuggestions",{queryPayload:p,cancelTokenSource:h},l.getContextName()).then((c=>{this.mentionsTagsCancelTokenSource=[];let u=[];return 200===c.status&&c?.data?u=c?.data?.tags&&Array.isArray(c?.data?.tags)&&c.data.tags.length>0&&c.data.tags?.map((c=>`#${c}`)):l.reportError(`Get tag suggestions call failed ${c.status}`,c.data),u})).catch((c=>{fm(c)||l.reportError(": Error occurred during ajax call at getTagSuggestions API : ",c.response.data)}))}},Ky={getTaggedCases:(c,l)=>dm("loadView",{queryPayload:{caseID:c,viewID:"pyTaggedCases"}},l.getContextName()).then((c=>c?.data)).catch((c=>{l.reportError(": Error occurred during ajax call at fetchTaggedcases API : ",c.response)})),getTags:(c,l)=>dm("getCaseTags",{queryPayload:{caseID:c}},l.getContextName()).then((c=>c?.data?.tagsList)).catch((c=>{l.reportError(": Error occurred during ajax call at fetchTags API : ",c.response)})),postTags:(c,l,u)=>{const d={caseID:c},p=JSON.stringify({tags:l});return dm("addTagsToCase",{body:p,queryPayload:d},u.getContextName()).then((c=>c?.data?.results)).catch((c=>{u.reportError(": Error occurred during ajax call at postTags API : ",c.response)}))},removeTag:(c,l,u)=>dm("deleteCaseTag",{queryPayload:{caseID:c,tagID:l}},u.getContextName()).catch((c=>{u.reportError(": Error occurred during ajax call at removeTag API : ",c.response)})),getTagsLandingPageURL:c=>tu.getPageDataAsync("D_pxGetTagsLandingPageURL",c.getContextName(),{},{invalidateCache:!0}).catch((l=>{c.reportError(": Error occurred during ajax call getTagsLandingPageURL API : ",l.response)}))},Xy=(c,l)=>{Nd(l.getContextName(),c.etag),Pd(l.getContextName(),c.etag)},Jy={getParticipants:(c,l)=>dm("getAllParticipants",{queryPayload:{caseID:c}},l.getContextName()).then((c=>c?.data?.data.content.pyParticipants)).catch((c=>{l.reportError(": Error occurred during ajax call at getParticipants API : ",c.response)})),getRoleView:(c,l,u)=>dm("getParticipantRoleView",{queryPayload:{caseID:c,participant_roleID:l}},u.getContextName()).then((c=>c?.data)).catch((c=>{u.reportError(": Error occurred during ajax call at fetchTaggedcases API : ",c.response)})),getParticipantRoles:(c,l)=>dm("getParticipantRoles",{queryPayload:{caseID:c}},l.getContextName()).then((c=>c?.data?.participant_roles)).catch((c=>{l.reportError(": Error occurred during ajax call at getParticipantRoles API : ",c.response)})),getParticipant:(c,l,u)=>dm("getParticipant",{queryPayload:{caseID:c,participantID:l}},u.getContextName()).then((c=>c?.data)).catch((c=>{u.reportError(": Error occurred during ajax call at getParticipant API : ",c.response)})),createParticipant:async(c,l,u,d)=>{const p={caseID:c},h={...u,participantRoleID:l},g={"if-match":d.getCaseSummary().headers.etag};return new Promise(((c,l)=>{dm("createParticipant",{body:h,queryPayload:p,headers:g},d.getContextName()).then((l=>{Xy(l.headers,d),c()})).catch((c=>{d.reportError(": Error occurred during ajax call at createParticipant API : ",c.response),l(c.response)}))}))},updateParticipant:async(c,l,u,d)=>{const p={caseID:c,participantID:l},h={"if-match":d.getCaseSummary().headers.etag};return new Promise(((c,l)=>{dm("updateParticipant",{body:u,queryPayload:p,headers:h},d.getContextName()).then((l=>{Xy(l.headers,d),c()})).catch((c=>{d.reportError(": Error occurred during ajax call at updateParticipant API : ",c.response),l(c.response)}))}))},deleteParticipant:(c,l,u)=>{const d={caseID:c,participantID:l},p={"if-match":u.getCaseSummary().headers.etag};return new Promise(((c,l)=>{dm("deleteParticipant",{queryPayload:d,headers:p},u.getContextName()).then((l=>{Xy(l.headers,u),c()})).catch((c=>{u.reportError(": Error occurred during ajax call at deleteParticipant API : ",c.response),l(c.response)}))}))}};function Qy(c=[]){return c.reduce(((c,l)=>(c[l.personalizationID]={name:l.name,personalizationState:JSON.parse(l.personalizationState||"{}")},c)),{})}const Zy="create",eI="update",tI="delete";function nI(c,l,u,d){const p=Sp(l);if(p){switch(c){case Zy:case eI:{const{markAsDefault:c,...l}=d;Object.entries(l).length>0&&(p.allPersonalizations[u]=l),c&&(p.defaultPersonalization=u);break}case tI:delete p.allPersonalizations[u],p.defaultPersonalization===u&&(p.defaultPersonalization="");break;default:return null}return p}return null}const rI={},sI=c=>{const l=Sp(c);if(l)return Array.isArray(l.allPersonalizations)&&(l.allPersonalizations=Qy(l.allPersonalizations)),Promise.resolve(l);const{restApi:u,reqType:d}=sg("getUIListPersonalizations",{listID:c});return ic(u,{method:d,body:{}}).then((c=>{const{data:l}=c;return{allPersonalizations:Qy(l.allPersonalizations),defaultPersonalization:l.defaultPersonalization}}))},aI=(c,l,u)=>{const{restApi:d,reqType:p}=sg("createListPersonalization",{listID:c});return nI(Zy,c,l,u),ic(d,{method:p,body:{...u,personalizationState:JSON.stringify(u.personalizationState)}}).then((c=>{const u=c.data;return rI[l]=u,c}))},oI=(c,l,u)=>{const d=rI[l]||l;nI(eI,c,l,u);const{restApi:p,reqType:h}=sg("updateListPersonalization",{listID:c,personalizationID:d})||{};return ic(p,{method:h,body:{...u,personalizationState:JSON.stringify(u.personalizationState)}})},iI=(c,l)=>{const u=rI[l]||l;nI(tI,c,l);const{restApi:d,reqType:p}=sg("deleteListPersonalization",{listID:c,personalizationID:u});return ic(d,{method:p,body:{}}).then((c=>(rI[l]&&delete rI[l],c)))},cI=function(c){return c?{createPersonalization:aI.bind(null,c),updatePersonalization:oI.bind(null,c),deletePersonalization:iI.bind(null,c),fetchPersonalizations:sI.bind(null,c)}:{createPersonalization:()=>Promise.resolve(""),updatePersonalization:()=>Promise.resolve(),deletePersonalization:()=>Promise.resolve(),fetchPersonalizations:()=>Promise.resolve({})}},lI="getDataObjects",uI="getInsightByID",dI=["LocalList","RemoteList","PromptList","DataPage"];let pI=null;const hI={},gI=c=>ql.getAppCacheKey(`PrimaryFields-${c}`);function fI(c){let l;return c[1].category?l=c[1].category:c[0].indexOf(":")>0&&(l=c[0].substring(0,c[0].indexOf(":"))),l}const mI={getDataObjects:function(){const c=ql.getAppCacheKey(lI);if(window.sessionStorage.getItem(c))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(c)));const{restApi:l,reqType:u}=sg(lI,{}),d=ic(l,{method:u});return d.then((l=>{window.sessionStorage.setItem(c,JSON.stringify(l))})),d},getDataPageObjects:function(c=!0){if(pI)return pI;const l=ql.getAppCacheKey("getDataPageObjects");if(c&&window.sessionStorage.getItem(l))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(l)));const{restApi:u,reqType:d}=sg("getDataPages",{datapageRequestType:"explorable"});return pI=ic(u,{method:d,datapageRequestType:"explorable"}),pI.then((c=>{pI=null,window.sessionStorage.setItem(l,JSON.stringify(c))})),pI},getDataViewMetadata:function(c,l,u){if(!l){const{sourceMetadata:l,sourceFields:u}=function(c){const l=Cp(c);if(l&&l.classID){let c=Np(l.classID);const u=new Set(l.primaryFields),d=l.rdFields?.fields?.filter((c=>c.indexOf(".")>0));if(d&&!eh.isEmpty(d)){const u=d.reduce(((c,u)=>{const d=fp(u,l.classID);return c[u]=d,c}),{});c={...c,...u}}if(c&&Object.keys(c).length>0){const d=new Set(Array.isArray(l?.rdFields)?l?.rdFields:l?.rdFields?.fields),p=d.size>0||u.size>0;for(const l in c)c[l].type.startsWith("Page")||p&&!(d.size>0&&d.has(l)||u.size>0&&u.has(l))?delete c[l]:c[l]?.datasource&&dI.includes(c[l].datasource.tableType)&&(c[l].fieldType="Picklist");return{sourceFields:c,sourceMetadata:l}}}return{}}(c);if(l&&u&&Object.keys(u).length>0){const c={data:{...l,fields:Object.entries(u).map((c=>({...c[1],fieldID:c[0],fieldType:c[1].fieldType?c[1].fieldType:c[1].isUserReference?"User reference":void 0,category:fI(c),classID:c[1].associationClassID?c[1].associationClassID:c[1].classID})))}};return Promise.resolve(c)}}const d={dataSource:c,columns:[],parameters:{},associationFilter:u,matchPosition:"",ignoreCase:!1};return lu.init(d).then((({dataSourceMetaData:c})=>Promise.resolve({data:c})))},getDefaultColumns:function(c){const l=ql.getAppCacheKey(`DefaultColumns_${Object.values(c).join("_")}`);if(window.sessionStorage.getItem(l))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(l)));const{restApi:u,reqType:d}=sg("getListData",{dataViewName:"D_pzGetDefaultColumns"}),p=ic(u,{method:d,body:{dataViewParameters:c}});return p.then((c=>{window.sessionStorage.setItem(l,JSON.stringify(c))})),p},getFieldsForDataSource:function(c,l,u){if(!l){const l=Cp(c),u=Array.isArray(l?.rdFields)?l?.rdFields:l?.rdFields?.fields;return u?Promise.resolve({data:{data:u.map((c=>({pyFieldName:c})))}}):Promise.resolve({data:{data:[]}})}const d=ql.getAppCacheKey(`RDColumns-${c}`);if(window.sessionStorage.getItem(d))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(d)));const p=ql.getData("D_pxFieldsForDataSource",{dataViewParameters:{DataPageName:c}},u);return p.then((c=>{window.sessionStorage.setItem(d,JSON.stringify(c))})),p},getPrimaryFieldsForDataSource:function(c="",l=""){const u=ql.getAppCacheKey(`PFColumns-${c}${l}`);if(window.sessionStorage.getItem(u))return Promise.resolve(JSON.parse(window.sessionStorage.getItem(u)));const d=ql.getData("D_pxGetInitialFieldsForDataSource",{dataViewParameters:{DataPageName:c,ClassName:l}});return d.then((c=>{window.sessionStorage.setItem(u,JSON.stringify(c))})),d},getPrimaryFieldsForInsights:async function(c,l,u){const{allClasses:d,promisesToAwait:p,classesToFetch:h,isTopLevelClassPresent:g,joinedClassesToFetch:f}=function(c,l){const u=[],d=[];let p=!1;const h=[],g=[];return c&&g.push(c),l&&l.length>0&&g.push(...l),g.forEach((l=>{const g=gI(l);window.sessionStorage.getItem(g)||(hI[l]?d.push(hI[l]):(u.push(l),l===c?p=!0:h.push(l)))})),{allClasses:g,promisesToAwait:d,classesToFetch:u,isTopLevelClassPresent:p,joinedClassesToFetch:h}}(c,u);return h.length&&p.push((async(c,l,u,d)=>{const p=ql.getData("D_pxGetPrimaryFieldsForInsights",{dataViewParameters:{...l&&{topLevelClassID:l},...d&&{joinedClassIDs:d.join(",")},...u&&{topLevelDataPageID:u}}}).then((l=>{const u=l.data?.data||[],d={};c.forEach((c=>{d[c]=[]})),u.forEach((({classID:c,pyFieldName:l})=>{d[c].push(l)})),Object.entries(d).forEach((([c,l])=>{const u=gI(c);window.sessionStorage.setItem(u,JSON.stringify(l))}))})).finally((()=>{c.forEach((c=>{delete hI[c]}))}));return c.forEach((c=>{hI[c]=p})),p})(h,g?c:void 0,g?l:void 0,f.length>0?f:void 0)),Promise.allSettled(p).then((()=>{const c={};return d.forEach((l=>{const u=gI(l);if(window.sessionStorage.getItem(u))try{c[l]=JSON.parse(window.sessionStorage.getItem(u))}catch{}})),{data:c}}))},getInsightIDs:function(){const{restApi:c,reqType:l}=sg("getInsightIDs");return ic(c,{method:l})},getInsightByID:function(c){const l=Tp(c);if(l)return Promise.resolve({data:{pyInsights:[l]}});const u={insightID:c},{restApi:d,reqType:p}=sg(uI,u);return ic(d,{method:p})},getInsightsByID:function(c){const l={insightID:c.join(",")},{restApi:u,reqType:d}=sg(uI,l);return ic(u,{method:d})},createInsight:function(c){const{restApi:l,reqType:u}=sg("createInsight");return ic(l,{method:u,body:JSON.stringify(c),headers:{"Content-Type":"application/json"}})},updateInsight:function(c,l){const u={insightID:c},{restApi:d,reqType:p}=sg("updateInsight",u),h=l.UpdateDateTime;return ic(d,{method:p,body:JSON.stringify(l),headers:{"if-match":h,"Content-Type":"application/json"}})},deleteInsight:function(c){const l={insightID:c},{restApi:u,reqType:d}=sg("deleteInsight",l);return ic(u,{method:d})},exportToExcel:function(c){const{restApi:l,reqType:u}=sg("exportToExcel");return ic(l,{method:u,body:JSON.stringify(c)})},exportToCSV:function(c){const{restApi:l,reqType:u}=sg("exportToCSV");return ic(l,{method:u,body:JSON.stringify(c)})},scheduleInsight:(c,l)=>{const u={insightID:c},{restApi:d,reqType:p}=sg("scheduleInsight",u);return ic(d,{method:p,body:JSON.stringify(l)})},updateScheduledInsight:(c,l,u)=>{const d={insightID:c,scheduleID:l},{restApi:p,reqType:h}=sg("updateScheduledInsight",d);return ic(p,{method:h,body:JSON.stringify(u)})},deleteScheduledInsight:(c,l)=>{const u={insightID:c,scheduleID:l},{restApi:d,reqType:p}=sg("deleteScheduledInsight",u);return ic(d,{method:p})},translateStrings:function(c){const{restApi:l,reqType:u}=sg("translateStrings");return ic(l,{method:u,body:JSON.stringify(c)})}},yI=new class{addRoutes=c=>{return l=c,void Gd.addRoutes(l);var l}},II=class{static registerModule(c,l,u){u[c]=()=>l}},EI=class{static getCaseEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.CASE_EVENTS);static getDataEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.DATA_EVENTS);static getTransientEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.EVENT_TRANSIENT_ITEMS);static getBootstrapShellEvent=()=>Object.freeze(G.PUB_SUB_EVENTS.BOOTSTRAP_SHELL_EVENTS)},AI={getResolvedSemanticURL:(c,l,u)=>Gd.getResolvedSemanticURL(c,l,u),getActions:()=>({ACTION_OPENWORKBYHANDLE:ze,ACTION_SHOWDATA:We,ACTION_SHOWVIEW:Ge}),updateSemanticURLAndDocumentTitle:c=>Gd.updateSemanticURLAndDocumentTitle(c)},_I=new class{constructor(){this.genericFailedMessage="Failed to display content. Contact the application administrator."}getGenericFailedMessage(){return this.genericFailedMessage}setGenericFailedMessage(c){this.genericFailedMessage=c}},CI={setTokens:c=>{hc({tokenInfo:c}),pc(c?.csrf&&!c?.access_token?{pzCTkn:c?.csrf}:{Authorization:`${c?.token_type} ${c?.access_token}`}),setTimeout((()=>zr.publish("updateSession",{updateStatus:"success"})),0)},revokeTokens:async()=>(async()=>new Promise((async(c,l)=>{const u=mc();if(!u?.tokenInfo)return void l(new Error("Missing token information."));const{access_token:d,refresh_token:p=null}=u.tokenInfo,{revoke:h}=u.endPoints,{client_id:g,client_secret:f,secureCookie:m}=u,y={"content-type":"application/x-www-form-urlencoded"};f&&(y.authorization=`Basic ${window.btoa(`${g}:${f}`)}`);const I=new URLSearchParams;f||I.append("client_id",g),m&&I.append("send_token_as_cookie","true");const E=p?"refresh_token":"access_token",A="access_token"===E?d:p;!m&&A&&I.append("token",A),I.append("token_type_hint",E),await ic(h,{method:"POST",headers:new Headers(y),credentials:m?"include":"omit",body:I.toString(),withoutDefaultHeaders:!0}),pc({Authorization:null}),hc({tokenInfo:null}),c()})))(),getAuthInstance:c=>Bi.init(c),setAuthorizationHeader:c=>{pc({Authorization:c}),setTimeout((()=>zr.publish("updateSession",{updateStatus:"success"})),0)}},SI=new class{getDebouncedSubject(c){return(new wg).pipe(ly(c))}};Lr.register("email",(c=>{let l=null;return c&&!function(c){const l="[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+",u="\\x5c[\\x00-\\x7f]",d=`(${l}|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|${u})*\\x5d)`,p=`(${l}|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|${u})*\\x22)`;return new RegExp(`^${p}(\\x2e${p})*\\x40${d}(\\x2e${d})*$`).test(c)}(c)&&(l=zd.getLocaleValue("Enter a valid email address","Messages")),l})),Lr.register("integer",(c=>{let l=null;return c&&!/^(-)?\d+$/.test(c)&&(l=zd.getLocaleValue("Invalid number","Messages")),l})),Lr.register("required",(c=>Array.isArray(c)&&0===c.length||null==c||""===c?zd.getLocaleValue("Cannot be blank","Messages"):null)),Lr.register("url",(c=>{let l=null;return c&&!function(c){let l;try{l=new URL(c)}catch{return!1}return"http:"===l.protocol||"https:"===l.protocol||"ftp:"===l.protocol}(c)&&(l=zd.getLocaleValue("Enter a valid url","Messages")),l})),setTimeout((()=>{s.e(531).then(s.bind(s,531)).then((({isPossiblePhoneNumber:c})=>{Lr.register("phone",(l=>{let u=null;l&&!/^\+?\d+$/.test(l)&&(u=zd.getLocaleValue("Enter a valid phone number","Messages"));const d=l?.startsWith("+");return l&&d&&(c(l)||(u=zd.getLocaleValue("Enter a valid phone number","Messages"))),u}))}))}),W.PRIORITY.TRIVIAL);const TI=(c,l)=>{switch(l){case"invalid":return zd.getLocaleValue(`Incorrect ${c}`,"Messages");case"incomplete":return zd.getLocaleValue(`Incomplete ${c}`,"Messages");default:return null}};Lr.register("datetime",(c=>TI("DateTime",c))),Lr.register("date",(c=>TI("Date",c))),Lr.register("time",(c=>TI("Time",c))),Lr.register("attachment",((c,l)=>(Wp(`.attachmentsList${l.pageReference?.replace("caseInfo.content","")}${l.property}`,"context_data",l.context)||[]).some((c=>c.props?.error))?zd.getLocaleValue("Error with one or more files"):null));const NI={createConversation:(c,l,u,d=[])=>{for(const f of d)f?.cancel&&"function"==typeof f.cancel&&f.cancel();const p=gm();d.push(p);const h={assistantID:l},g=JSON.stringify({contextID:c});return dm("createConversation",{body:g,cancelTokenSource:p,queryPayload:h},u).then((c=>(d.pop(),c)))},sendMessage:(c,l,u,d)=>{const p={assistantID:c,conversationID:l},h=JSON.stringify({request:u});return dm("sendMessage",{body:h,queryPayload:p},d)}},PI=class{caseTypeAccessMap=new Map;constructor(){this.caseTypeAccessMap=Hd.getCaseTypeList().reduce(((c,l)=>(c.set(l.pyWorkTypeImplementationClassName,l.hasCreateAccess??!0),c)),new Map)}hasCreateAccess(c){return this.caseTypeAccessMap.get(c)}static getInstance(){return this.instance||(this.instance=new this),this.instance}};class pA{constructor(){pA.behaviorOverrides={}}static behaviorOverrides={};getPCoreVersion=()=>"24.2.1";onPCoreReady=c=>xy.onPCoreReady(c);onPCoreCleanup=c=>xy.onPCoreCleanup(c);getComponentsRegistry=()=>xy.getComponentsRegistry();checkIfSemanticURL=()=>xy.checkIfSemanticURL();isValidSemanticURL=()=>(()=>{if(fg()){const c=Gd.processUrl(kd(),!0);return!!Gd._getMatchedRouteInRoutingTable(c)}return!1})();getRoutingUtils=()=>yI;getViewResources=()=>I;configureForBrowserBookmark=c=>xy.configureForBrowserBookmark(c);getStore=()=>Vp();resetStore=()=>Zp();getMessageManager=()=>ar;getCoexistenceManager=()=>Oy;getStoreValue=(c,l,u)=>Wp(c,l,u);getContainerUtils=()=>h;getAnnotationUtils=()=>sl;getFieldUtils=()=>zn;getFieldDefaultUtils=()=>Mr;getAssetLoader=()=>Vr;getAttachmentUtils=()=>np;getViewRuleApi=()=>Vy;getFeedUtils=()=>Yy;getTagUtils=()=>Ky;getGenAIAssistantUtils=()=>NI;getStakeholderUtils=()=>Jy;getUserApi=()=>Wy;getCaseFollowerApi=()=>$y;getCaseUtils=()=>yc;getStateUtils=()=>Su;getRelatedCasesApi=()=>By;getPersonalizationUtils=cI;getDataApi=()=>lu;getDataApiUtils=()=>ql;getAnalyticsUtils=()=>mI;getLocaleUtils=()=>zd;registerLocaleManager=c=>{const l=this.getLocaleUtils();Object.keys(c).forEach((u=>{l[u]=c[u]}))};setBehaviorOverrides=c=>{pA.behaviorOverrides=c};setBehaviorOverride=(c,l)=>{pA.behaviorOverrides[c]=l};getBehaviorOverrides=()=>pA.behaviorOverrides;getBehaviorOverride=c=>pA.behaviorOverrides[c];getAsynchronousUtils=()=>SI;createPConnect=c=>Ou(c);getPubSubUtils=()=>zr;registerComponentCreator=c=>{!function(c){Pu=c}(c)};getConstants=()=>Object.freeze(G);getEvents=()=>EI;getRestClient=()=>y;getMashupApi=()=>vy;getEnvironmentInfo=()=>Hd;getRuntimeParamsAPI=()=>wy;getSemanticUrlUtils=()=>AI;getRemoteCaseUtils=()=>q;getNavigationUtils=()=>Dy;registerModule=(c,l)=>II.registerModule(c,l,this);getErrorHandler=()=>_I;getFormUtils=()=>$c;getMessagingServiceManager=()=>Zl;getMetadataUtils=()=>g;getDataPageUtils=()=>tu;getDataTypeUtils=()=>Dl;getCascadeManager=()=>Lp;isDeepEqual=(c,l)=>A()(c,l);getAuthUtils=()=>CI;getDebugger=()=>Xi;getDeferLoadManager=()=>Wl;getExpressionEngine=()=>u;getActionsSequencer=()=>pu;getRefreshManager=()=>ol;getInitialiser=()=>jy;getAllStateMachines=(c,l,u)=>l&&u?Bc.getAllStateMachines(c,l,u):Bc.getAllStateMachinesByContext(c);getBootstrapUtils=()=>xy;getContextTreeManager=()=>Rn;getPerformanceManager=()=>$i;getAccessPrivilege=()=>PI.getInstance()}const bI=new pA;s.g.PCore=bI;const DI=bI})();var o=a.Z;export{o as default};